import{a as q}from"./chunk-LVK5L6RA.js";import{a as F,c as B}from"./chunk-F2LLY2CR.js";import{a as D,b as N,c as U,f as O,g as H}from"./chunk-WC4V5MBK.js";import"./chunk-SQHEFKI2.js";import"./chunk-IOQBSONU.js";import{b as w}from"./chunk-TD3AVWK7.js";import{c as I,e as T}from"./chunk-SUTJIGUH.js";import{a as f}from"./chunk-QSI3HFOI.js";import{p as R,q as M}from"./chunk-A72LFUZP.js";import"./chunk-IGUJQH2A.js";import"./chunk-IZ7UM5CL.js";import"./chunk-YYV7O7JP.js";import"./chunk-GUCRBWY4.js";import{k as _,t as A}from"./chunk-REOVWAHI.js";import{Bb as o,Cc as C,Db as h,Lb as n,Mb as e,Oc as d,Wb as y,cb as r,fa as v,fc as b,gc as t,hc as E,ic as m,ob as g,qc as P,rb as S,ub as u,xc as l,yc as p}from"./chunk-BEPULU6C.js";import"./chunk-JKOY2XUY.js";var x=class i{authService=v(f);transform(s,a=!1){let c=Array.isArray(s)?s:[s];return a?this.authService.hasAllPermissions(c):this.authService.hasAnyPermission(c)}static \u0275fac=function(a){return new(a||i)};static \u0275pipe=S({name:"hasPermission",type:i,pure:!1})};var j=()=>["users.create","users.edit"],z=()=>["users.view","users.edit"];function k(i,s){if(i&1&&(n(0,"mat-chip",21),t(1),e()),i&2){let a=s.$implicit;r(),m(" ",a," ")}}function V(i,s){i&1&&(n(0,"div",22),t(1," \u2705 You can view users "),e())}function G(i,s){i&1&&(n(0,"div",23),t(1," \u2705 You can create OR edit users "),e())}function J(i,s){i&1&&(n(0,"div",24),t(1," \u2705 You can both view AND edit users "),e())}function K(i,s){i&1&&(n(0,"div"),t(1," \u2705 You have system configuration access "),e())}function Q(i,s){i&1&&(n(0,"div",25),t(1," \u274C No system configuration access "),e())}function W(i,s){i&1&&(n(0,"button",26)(1,"mat-icon"),t(2,"add"),e(),t(3," Create User "),e())}function X(i,s){i&1&&(n(0,"button",27)(1,"mat-icon"),t(2,"edit"),e(),t(3," Edit User "),e())}function Z(i,s){i&1&&(n(0,"button",28)(1,"mat-icon"),t(2,"delete"),e(),t(3," Delete User "),e())}function ee(i,s){i&1&&(n(0,"button",29)(1,"mat-icon"),t(2,"settings"),e(),t(3," Manage Roles "),e())}function te(i,s){i&1&&(n(0,"button",30)(1,"mat-icon"),t(2,"business"),e(),t(3," Create Business "),e())}function ie(i,s){if(i&1&&(n(0,"div",34),t(1),e()),i&2){let a=s.$implicit;r(),m(" ",a," ")}}function ne(i,s){if(i&1&&(n(0,"div",31)(1,"h4",5),t(2,"Debug Info (Admin Only):"),e(),n(3,"div",32),u(4,ie,2,1,"div",33),e()()),i&2){let a=y();r(4),o("ngForOf",a.allUserPermissions())}}var L=class i{authService=v(f);userRoles=d(()=>this.authService.activeRoles().map(s=>s.display_name||s.name));userPermissionCount=d(()=>this.authService.allPermissions().length);hasAdminRole=d(()=>this.authService.hasRole("admin"));currentUserId=d(()=>this.authService.userPermissions()?.userId||null);permissionsLoaded=d(()=>this.authService.userPermissions()!==null);allUserPermissions=d(()=>this.authService.permissionNames());getPermissionCategories(){let s=this.authService.getPermissionsByCategory();return Object.keys(s).map(a=>({name:a,count:s[a].length}))}static \u0275fac=function(a){return new(a||i)};static \u0275cmp=g({type:i,selectors:[["app-permission-examples"]],decls:83,vars:48,consts:[["noSystemAccess",""],[1,"p-6","max-w-4xl","mx-auto"],[1,"text-3xl","font-bold","mb-8"],[1,"mb-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"font-semibold","mb-2"],[1,"flex","flex-wrap","gap-2"],["class","bg-blue-100 text-blue-800",4,"ngFor","ngForOf"],[1,"text-2xl","font-bold","text-green-600"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["class","mb-4 p-3 bg-green-100 rounded",4,"hasPermission"],["class","mb-4 p-3 bg-blue-100 rounded",4,"hasPermission","hasPermissionHasPermissionRequireAll"],["class","mb-4 p-3 bg-purple-100 rounded",4,"hasPermission","hasPermissionHasPermissionRequireAll"],[4,"hasPermission","hasPermissionElse"],[1,"space-y-2"],["mat-raised-button","","color","primary",4,"hasPermission"],["mat-raised-button","","color","accent",4,"hasPermission"],["mat-raised-button","","color","warn",4,"hasPermission"],["mat-raised-button","",4,"hasPermission"],["mat-stroked-button","",4,"hasPermission"],["class","mt-4 p-3 bg-gray-100 rounded",4,"hasPermission"],[1,"bg-blue-100","text-blue-800"],[1,"mb-4","p-3","bg-green-100","rounded"],[1,"mb-4","p-3","bg-blue-100","rounded"],[1,"mb-4","p-3","bg-purple-100","rounded"],[1,"p-3","bg-red-100","rounded","text-red-800"],["mat-raised-button","","color","primary"],["mat-raised-button","","color","accent"],["mat-raised-button","","color","warn"],["mat-raised-button",""],["mat-stroked-button",""],[1,"mt-4","p-3","bg-gray-100","rounded"],[1,"max-h-32","overflow-y-auto","text-xs"],["class","mb-1",4,"ngFor","ngForOf"],[1,"mb-1"]],template:function(a,c){if(a&1&&(n(0,"div",1)(1,"h1",2),t(2,"Permission System Examples"),e(),n(3,"mat-card",3)(4,"mat-card-header")(5,"mat-card-title"),t(6,"Current User Permissions"),e()(),n(7,"mat-card-content")(8,"div",4)(9,"div")(10,"h4",5),t(11,"Current Roles:"),e(),n(12,"div",6),u(13,k,2,1,"mat-chip",7),e()(),n(14,"div")(15,"h4",5),t(16,"Permission Count:"),e(),n(17,"p",8),t(18),e()()()()(),n(19,"div",9)(20,"mat-card")(21,"mat-card-header")(22,"mat-card-title"),t(23,"hasPermission Directive Examples"),e()(),n(24,"mat-card-content"),u(25,V,2,0,"div",10)(26,G,2,0,"div",11)(27,J,2,0,"div",12)(28,K,2,0,"div",13)(29,Q,2,0,"ng-template",null,0,C),e()(),n(31,"mat-card")(32,"mat-card-header")(33,"mat-card-title"),t(34,"Permission Pipe Examples"),e()(),n(35,"mat-card-content")(36,"div",14)(37,"p"),l(38,"hasPermission"),t(39),l(40,"hasPermission"),e(),n(41,"p"),l(42,"hasPermission"),t(43),l(44,"hasPermission"),e(),n(45,"p"),l(46,"hasPermission"),t(47),l(48,"hasPermission"),e(),n(49,"p"),l(50,"hasPermission"),t(51),l(52,"hasPermission"),e()()()(),n(53,"mat-card")(54,"mat-card-header")(55,"mat-card-title"),t(56,"Permission-based Action Buttons"),e()(),n(57,"mat-card-content")(58,"div",6),u(59,W,4,0,"button",15)(60,X,4,0,"button",16)(61,Z,4,0,"button",17)(62,ee,4,0,"button",18)(63,te,4,0,"button",19),e()()(),n(64,"mat-card")(65,"mat-card-header")(66,"mat-card-title"),t(67,"Authorization Service Info"),e()(),n(68,"mat-card-content")(69,"div",14)(70,"p")(71,"strong"),t(72,"Has Admin Role:"),e(),t(73),e(),n(74,"p")(75,"strong"),t(76,"Current User ID:"),e(),t(77),e(),n(78,"p")(79,"strong"),t(80,"Permissions Loaded:"),e(),t(81),e()(),u(82,ne,5,1,"div",20),e()()()()),a&2){let Y=b(30);r(13),o("ngForOf",c.userRoles()),r(5),E(c.userPermissionCount()),r(7),o("hasPermission","users.view"),r(),o("hasPermission",P(46,j))("hasPermissionHasPermissionRequireAll",!1),r(),o("hasPermission",P(47,z))("hasPermissionHasPermissionRequireAll",!0),r(),o("hasPermission","system.config")("hasPermissionElse",Y),r(9),h("text-green-600",p(38,30,"users.view")),r(2),m(" Users View: ",p(40,32,"users.view")?"\u2705":"\u274C"," "),r(2),h("text-green-600",p(42,34,"users.create")),r(2),m(" Users Create: ",p(44,36,"users.create")?"\u2705":"\u274C"," "),r(2),h("text-green-600",p(46,38,"roles.manage")),r(2),m(" Role Management: ",p(48,40,"roles.manage")?"\u2705":"\u274C"," "),r(2),h("text-green-600",p(50,42,"system.config")),r(2),m(" System Config: ",p(52,44,"system.config")?"\u2705":"\u274C"," "),r(8),o("hasPermission","users.create"),r(),o("hasPermission","users.edit"),r(),o("hasPermission","users.delete"),r(),o("hasPermission","roles.manage"),r(),o("hasPermission","business.create"),r(10),m(" ",c.hasAdminRole()?"\u2705":"\u274C",""),r(4),m(" ",c.currentUserId()||"Not logged in",""),r(4),m(" ",c.permissionsLoaded()?"\u2705":"\u274C",""),r(),o("hasPermission","system.debug")}},dependencies:[A,_,T,I,H,D,U,O,N,M,R,w,B,F,q,x],encapsulation:2})};export{L as PermissionExamplesComponent};
