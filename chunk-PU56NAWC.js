import"./chunk-FNU2S2SM.js";import{a as Q,b as U}from"./chunk-7IB7WRLI.js";import{b as I,c as P,d as T,e as k}from"./chunk-XNH753K3.js";import{b as H,f as J,g as K}from"./chunk-J73GYXEA.js";import{b as O,c as j,f as W,i as z}from"./chunk-34MV7HGN.js";import"./chunk-EGMYPSOY.js";import"./chunk-EW3JV62K.js";import{c as N,e as f,h as q,i as A,l as D,n as G,o as V,v as B,x as R}from"./chunk-Z3TDL5JS.js";import"./chunk-MPYKQSNE.js";import{a as E}from"./chunk-QARG4J5O.js";import{G as L,H as F}from"./chunk-T77N2UQ2.js";import"./chunk-7XH4VAXZ.js";import"./chunk-YYV7O7JP.js";import{Ba as v,Ga as m,Ja as x,Ka as d,Pa as s,S as c,Ua as n,Va as a,Wa as C,ab as _,bb as p,gc as y,ha as u,nb as o,ob as g,pc as S,rc as M,sa as l,sc as w,xb as b}from"./chunk-YOTEMOQK.js";import{d as h}from"./chunk-QEZ3K4DX.js";var Z=()=>["/auth/forgot-password"],$=()=>["/auth/signup"];function ee(e,r){e&1&&o(0," Email is required ")}function te(e,r){e&1&&o(0," Invalid email format ")}function ie(e,r){if(e&1&&(n(0,"mat-error"),m(1,ee,1,0)(2,te,1,0),a()),e&2){let i=p();l(),s(i.emailControl!=null&&i.emailControl.hasError("required")?1:i.emailControl!=null&&i.emailControl.hasError("email")?2:-1)}}function ne(e,r){e&1&&o(0," Password is required ")}function oe(e,r){e&1&&o(0," Minimum 6 characters ")}function re(e,r){if(e&1&&(n(0,"mat-error"),m(1,ne,1,0)(2,oe,1,0),a()),e&2){let i=p();l(),s(i.passwordControl!=null&&i.passwordControl.hasError("required")?1:i.passwordControl!=null&&i.passwordControl.hasError("minlength")?2:-1)}}function ae(e,r){if(e&1&&(n(0,"div",10)(1,"div",20)(2,"mat-icon",21),o(3,"info"),a(),n(4,"span",22),o(5),a()()()),e&2){let i=p();l(5),g(i.authMessage())}}function le(e,r){if(e&1&&(n(0,"div",11)(1,"div",23)(2,"mat-icon",21),o(3,"error"),a(),n(4,"span",22),o(5),a()()()),e&2){let i=p();l(5),g(i.error())}}function se(e,r){if(e&1&&(n(0,"div",12)(1,"div",24)(2,"mat-icon",21),o(3,"check_circle"),a(),n(4,"span",22),o(5),a()()()),e&2){let i=p();l(5),g(i.successMessage())}}function me(e,r){e&1&&o(0," Sign In ")}function de(e,r){e&1&&(n(0,"span",14),C(1,"mat-spinner",25),o(2," Signing In... "),a())}var X=class e{authService=c(E);router=c(M);route=c(S);fb=c(B);error=u("");successMessage=u("");authMessage=u("");loading=u(!1);showPassword=u(!1);loginForm;constructor(){this.loginForm=this.fb.group({email:["",[f.required,f.email]],password:["",[f.required,f.minLength(6)]]})}ngOnInit(){this.route.queryParams.subscribe(r=>{r.message&&this.authMessage.set(r.message),r.email&&this.loginForm.patchValue({email:r.email})})}onSubmit(){return h(this,null,function*(){if(this.clearMessages(),!this.loginForm.valid){this.error.set("Please fill in all required fields correctly");return}let{email:r,password:i}=this.loginForm.value;this.loading.set(!0);try{let t=yield this.authService.signIn(r,i);t.data?(this.successMessage.set("Login successful! Redirecting..."),setTimeout(()=>{this.router.navigate(["/dashboard"])},1e3)):this.error.set(t.error?.message||"Login failed. Please try again.")}catch(t){this.error.set(t?.message||"An unexpected error occurred. Please try again.")}finally{this.loading.set(!1)}})}togglePasswordVisibility(){this.showPassword.update(r=>!r)}clearMessages(){this.error.set(""),this.successMessage.set(""),this.authMessage.set("")}get emailControl(){return this.loginForm.get("email")}get passwordControl(){return this.loginForm.get("password")}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=v({type:e,selectors:[["app-login"]],decls:36,vars:18,consts:[[1,"login-container"],[1,"text-center","mb-8"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"space-y-6",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-full"],["matInput","","type","email","formControlName","email","placeholder","your@email.com",3,"disabled"],["matSuffix",""],["matInput","","formControlName","password","placeholder","Enter password",3,"type","disabled"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"mb-4","p-3","bg-blue-50","border","border-blue-200","rounded-lg"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"mb-4","p-3","bg-green-50","border","border-green-200","rounded-lg"],["mat-raised-button","","color","primary","type","submit",1,"w-full","py-3","text-base","font-medium","mb-4",3,"disabled"],[1,"flex","items-center","justify-center","gap-2"],[1,"space-y-3","text-center"],["mat-button","","color","primary",1,"text-sm",3,"routerLink"],[1,"mt-4","pt-4","border-t","border-gray-200"],[1,"text-sm","text-gray-600"],["mat-button","","color","primary",1,"text-sm","font-medium","ml-1",3,"routerLink"],[1,"flex","items-center","text-blue-700"],[1,"mr-2","text-sm"],[1,"text-sm"],[1,"flex","items-center","text-red-700"],[1,"flex","items-center","text-green-700"],["diameter","16"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"div",1)(2,"h2",2),o(3,"Welcome Back"),a(),n(4,"p",3),o(5,"Sign in to your account"),a()(),n(6,"form",4),_("ngSubmit",function(){return t.onSubmit()}),n(7,"mat-form-field",5)(8,"mat-label"),o(9,"Email Address"),a(),C(10,"input",6),n(11,"mat-icon",7),o(12,"email"),a(),m(13,ie,3,1,"mat-error"),a(),n(14,"mat-form-field",5)(15,"mat-label"),o(16,"Password"),a(),C(17,"input",8),n(18,"button",9),_("click",function(){return t.togglePasswordVisibility()}),n(19,"mat-icon"),o(20),a()(),m(21,re,3,1,"mat-error"),a(),m(22,ae,6,1,"div",10)(23,le,6,1,"div",11)(24,se,6,1,"div",12),n(25,"button",13),m(26,me,1,0)(27,de,3,0,"span",14),a(),n(28,"div",15)(29,"a",16),o(30," Forgot your password? "),a(),n(31,"div",17)(32,"p",18),o(33," Don't have an account? "),n(34,"a",19),o(35," Sign up "),a()()()()()()),i&2&&(l(6),d("formGroup",t.loginForm),l(4),d("disabled",t.loading()),l(3),s(t.emailControl!=null&&t.emailControl.invalid&&(t.emailControl!=null&&t.emailControl.touched)?13:-1),l(4),d("type",t.showPassword()?"text":"password")("disabled",t.loading()),l(),x("aria-label","Toggle password visibility")("aria-pressed",t.showPassword()),l(2),g(t.showPassword()?"visibility_off":"visibility"),l(),s(t.passwordControl!=null&&t.passwordControl.invalid&&(t.passwordControl!=null&&t.passwordControl.touched)?21:-1),l(),s(t.authMessage()?22:-1),l(),s(t.error()?23:-1),l(),s(t.successMessage()?24:-1),l(),d("disabled",t.loading()||!t.loginForm.valid),l(),s(t.loading()?27:26),l(3),d("routerLink",b(16,Z)),l(5),d("routerLink",b(17,$)))},dependencies:[y,R,D,N,q,A,G,V,w,H,z,O,j,W,K,J,k,T,P,I,F,L,U,Q],styles:["[_nghost-%COMP%]{display:block}"]})};export{X as LoginComponent};
