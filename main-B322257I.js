import{a as st,b as pt,c as mt}from"./chunk-MWRCKOYM.js";import{a as vi,b as _i}from"./chunk-UOBTZ2HN.js";import{a as Ei}from"./chunk-E73J67BA.js";import{a as Ti}from"./chunk-YEOTPV35.js";import{b as zn}from"./chunk-6FHVBICA.js";import"./chunk-LXDF2C5S.js";import{c as Ci}from"./chunk-E7RQWOJS.js";import{a as gi}from"./chunk-TAHVWCV6.js";import{a as hi}from"./chunk-4GMFS6W6.js";import"./chunk-PVDG46DZ.js";import{a as bi,b as gt}from"./chunk-F2ZQ6V7O.js";import{a as xi,b as yi,c as wi,d as Mi,f as Si,h as Pi,i as ki,k as Oi}from"./chunk-JSJFW26R.js";import{b as Se,c as Pe,d as ke,e as Oe,f as it,g as he,l as lt,m as ct,n as dt}from"./chunk-CXTZ6L32.js";import{b as et}from"./chunk-HANSDEYR.js";import"./chunk-QTMIK4VC.js";import{a as Qn,b as Gn,c as qn,d as Me}from"./chunk-RV2OJUXZ.js";import{a as Wn}from"./chunk-UL7UTRTU.js";import"./chunk-LCCWZAEX.js";import{d as re}from"./chunk-W6RJDLW3.js";import{a as Yn,b as Kn,c as Zn,d as Jn,e as Xn,f as ei,g as ti,h as ni}from"./chunk-FY37IJMK.js";import{b as ht,c as ft}from"./chunk-FYTS3IGZ.js";import{a as fi,b as ut}from"./chunk-4OHTWZSD.js";import{a as at}from"./chunk-WJ4DFVWN.js";import"./chunk-SNNT4QTV.js";import{d as Hn,h as K,i as mi,j as ie,l as ui,m as oe}from"./chunk-3E6WONAP.js";import"./chunk-U2AVJWKL.js";import{e as Yt,f as Xe,o as Ln,v as Un}from"./chunk-V5XDW2Q5.js";import{d as ot,g as di,h as pi,k as rt}from"./chunk-K7KKK75I.js";import{A as Fe,B as De,C as Re,c as ii,h as nt,i as oi,j as ri,k as ge,l as ai,m as si,p as li,y as ci}from"./chunk-U7A7OHU6.js";import{a as tt}from"./chunk-MNGBVTM3.js";import{a as Te,b as Ae}from"./chunk-NALWU7JT.js";import{b as we,c as I,d as M}from"./chunk-MLJYHTLM.js";import{a as Y}from"./chunk-4GWWNNYU.js";import{a as $n}from"./chunk-EPCACDVR.js";import{a as X,c as Wt}from"./chunk-ZKKR2XMO.js";import"./chunk-LDSTDJZ6.js";import{a as Ee}from"./chunk-QD7SSFII.js";import{a as N,b as D}from"./chunk-QFHPWKDD.js";import{F as ze,d as Je,x as jn}from"./chunk-O2FJLJYH.js";import{a as Fn,b as Dn,c as Rn,d as In,e as ye,f as Ze,g as F,j as Bn,k as Nn,l as Vn}from"./chunk-72SEU4B5.js";import{a as Sn,b as Pn}from"./chunk-JFMUERLE.js";import{A as Ke,B as kn,C as On,D as En,E as Tn,F as An,k as ne,r as Mn,t as O}from"./chunk-FI3M32ZM.js";import{$a as l,$b as g,A as rn,B as J,Ba as Lt,D as an,Da as mn,Eb as ce,Fb as x,Fc as Cn,Gb as y,Gc as xn,H as Ge,J as jt,Ja as un,Jb as G,Kb as q,L as qe,Lb as p,Mb as r,Mc as yn,Nb as a,Ob as _,Pb as E,Pc as wn,Qb as k,Qc as He,Rb as We,Rc as R,Sc as j,V as Ht,Vb as w,Vc as te,W as $e,Wc as C,Y as ve,Ya as Ut,Z as zt,Zb as u,aa as L,ba as _e,c as Nt,cd as Ye,da as U,db as gn,dc as Gt,dd as ue,ea as sn,eb as hn,ec as qt,f as en,fa as d,fb as fn,fc as $t,g as Qe,ga as ln,i as tn,ib as bn,jc as ee,k as nn,ka as h,kb as Q,kc as xe,l as on,la as f,lb as vn,lc as V,nc as s,oa as Ve,oc as T,pa as cn,pc as A,q as be,qa as dn,qb as v,rb as Ce,sb as le,sc as de,tc as pe,ua as b,ub as je,uc as me,va as pn,vb as Qt,wb as B,y as Vt,yc as _n}from"./chunk-M7BUBJMW.js";import{a as Z,b as Ne,e as S}from"./chunk-JKOY2XUY.js";var Zi="@",Ji=(()=>{class i{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=d(Ve);loadingSchedulerFn=d(Xi,{optional:!0});_engine;constructor(t,n,o,c,m){this.doc=t,this.delegate=n,this.zone=o,this.animationType=c,this.moduleImpl=m}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-VKLZDSU2.js").then(o=>o),n;return this.loadingSchedulerFn?n=this.loadingSchedulerFn(t):n=t(),n.catch(o=>{throw new zt(5300,!1)}).then(({\u0275createEngine:o,\u0275AnimationRendererFactory:c})=>{this._engine=o(this.animationType,this.doc);let m=new c(this.delegate,this._engine,this.zone);return this.delegate=m,m})}createRenderer(t,n){let o=this.delegate.createRenderer(t,n);if(o.\u0275type===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let c=new Kt(o);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(m=>{let z=m.createRenderer(t,n);c.use(z),this.scheduler??=this.injector.get(pn,null,{optional:!0}),this.scheduler?.notify(10)}).catch(m=>{c.use(o)}),c}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(t){this._engine?.flush(),this.delegate.componentReplaced?.(t)}static \u0275fac=function(n){vn()};static \u0275prov=L({token:i,factory:i.\u0275fac})}return i})(),Kt=class{delegate;replay=[];\u0275type=1;constructor(e){this.delegate=e}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,n,o){this.delegate.insertBefore(e,t,n,o)}removeChild(e,t,n,o){this.delegate.removeChild(e,t,n,o)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,o){this.delegate.setAttribute(e,t,n,o)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,o){this.delegate.setStyle(e,t,n,o)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){this.shouldReplay(t)&&this.replay.push(o=>o.setProperty(e,t,n)),this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n,o){return this.shouldReplay(t)&&this.replay.push(c=>c.listen(e,t,n,o)),this.delegate.listen(e,t,n,o)}shouldReplay(e){return this.replay!==null&&e.startsWith(Zi)}},Xi=new U("");function Ai(i="animations"){return gn("NgAsyncAnimations"),ln([{provide:bn,useFactory:(e,t,n)=>new Ji(e,t,n,i),deps:[cn,Sn,fn]},{provide:un,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}var bt=class i{router=d(F);intercept(e,t){let n=this.getTokenFromStorage(),o=e;return n&&(o=e.clone({setHeaders:{Authorization:`Bearer ${n}`}})),t.handle(o).pipe(an(c=>(c.status===401&&(console.warn("Authentication failed, redirecting to login"),this.clearAuthData(),this.router.navigate(["/auth"],{queryParams:{message:"Your session has expired. Please log in again."}})),on(()=>c))))}getTokenFromStorage(){return typeof window<"u"?localStorage.getItem("access_token"):null}clearAuthData(){typeof window<"u"&&(localStorage.removeItem("access_token"),localStorage.removeItem("current_user"),localStorage.removeItem("userPermissions"),localStorage.removeItem("permissionsTimestamp"))}static \u0275fac=function(t){return new(t||i)};static \u0275prov=L({token:i,factory:i.\u0275fac})};var vt=class i{fb=d(Fe);router=d(F);searchForm;heroSearchQuery=b("");countries=at;ngOnInit(){this.searchForm=this.fb.group({searchQuery:[""]})}onSearch(){let e=this.heroSearchQuery()?.trim(),t={};e&&(t.q=e),Object.keys(t).length>0&&this.router.navigate(["/search"],{queryParams:t})}onFindBusinesses(){this.router.navigate(["/search"])}onListBusiness(){this.router.navigate(["/list-business"])}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["hero-section"]],decls:24,vars:5,consts:[[1,"bg-[#C9F3DD]","relative","overflow-hidden",2,"height","calc(100vh - var(--header-height, 64px))","background-image","url('/assets/images/hero-background.svg')","background-size","cover","background-position","center","background-repeat","no-repeat"],[1,"max-w-7xl","mx-auto","w-full","h-full","px-3","lg:px-8","flex","flex-col","lg:flex-row","relative"],[1,"w-full","lg:w-1/2","h-full","flex","flex-col","justify-center","sm:pt-16","lg:pt-0","relative","z-10","text-center","lg:text-left"],[1,"text-5xl","lg:text-[60px]","font-bold","leading-tight","mb-6","poppins"],[1,"text-[#6B0FAE]"],[1,"block","lg:hidden"],[1,"text-black"],[1,"mt-1"],["src","/assets/svg/VOUCHHER.svg","alt","VouchHer",1,"h-10","lg:h-[51px]","w-auto","mx-auto","lg:mx-0"],[1,"text-lg","lg:text-xl","text-gray-700","mb-8","lg:mb-10","lg:max-w-none","mx-auto","lg:mx-0"],["id","hero-search-anchor",1,"mb-8","w-full","mx-auto","lg:mx-0","lg:max-w-xl"],[3,"searchEvent","searchQueryChange","width","backgroundColor","placeholder","boxShadow","searchQuery"],[1,"flex","flex-col","lg:flex-row","items-stretch","lg:items-start","gap-3","lg:gap-4","lg:px-0"],["mat-flat-button","","color","primary",1,"rounded-full","py-3","lg:py-2.5","px-8","text-base","font-medium","w-full","lg:w-fit",3,"click"],["mat-stroked-button","","color","primary",1,"rounded-full","py-3","lg:py-2.5","px-8","text-base","font-medium","w-full","lg:w-fit","!border-primary-600",3,"click"],[1,"hidden","lg:block","lg:w-[55%]","absolute","inset-y-0","right-0","overflow-visible"],["src","/assets/images/hero-women-images.png","alt","Professional women",1,"w-full","h-full","object-contain","object-bottom","transform","lg:scale-100","lg:translate-x-6"]],template:function(t,n){t&1&&(r(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),s(4," Find "),r(5,"span",4),s(6,"Her."),a(),_(7,"br",5),s(8," Hire "),r(9,"span",6),s(10,"Her."),a(),r(11,"div",7),_(12,"img",8),a()(),r(13,"p",9),s(14," A trusted platform connecting women in Business nationwide. "),a(),r(15,"div",10)(16,"app-search",11),u("searchEvent",function(){return n.onSearch()}),me("searchQueryChange",function(c){return pe(n.heroSearchQuery,c)||(n.heroSearchQuery=c),c}),a()(),r(17,"div",12)(18,"button",13),u("click",function(){return n.onFindBusinesses()}),s(19," Find Businesses "),a(),r(20,"button",14),u("click",function(){return n.onListBusiness()}),s(21," List A Business "),a()()(),r(22,"div",15),_(23,"img",16),a()()()),t&2&&(l(16),p("width","100%")("backgroundColor","white")("placeholder","Search business or service")("boxShadow","0 2px 6px 0 #20212451"),de("searchQuery",n.heroSearchQuery))},dependencies:[O,Re,ie,K,oe,M,I,it,re,D,Me],styles:["[_ngcontent-%COMP%]:root{--mat-select-panel-background-color: orange;--mat-select-enabled-trigger-text-color: red}.mdc-text-field[_ngcontent-%COMP%]{background-color:#fff!important;border-radius:4px}"]})};var _t=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["how-it-works-section"]],decls:46,vars:0,consts:[[1,"bg-white"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"text-center","mb-16"],[1,"text-4xl","md:text-5xl","font-bold","text-gray-900","mb-6"],[1,"text-xl","text-gray-600","max-w-3xl","mx-auto"],[1,"grid","md:grid-cols-2","gap-8","lg:gap-12"],[1,"bg-white","border","border-gray-200","rounded-lg","p-8"],[1,"text-lg","font-semibold","text-primary-500","mb-4"],[1,"space-y-4","text-gray-700"],[1,"font-semibold"],[1,"text-sm","text-gray-600"]],template:function(t,n){t&1&&(E(0,"section",0)(1,"div",1)(2,"div",2)(3,"h3",3),s(4," How it works "),k(),E(5,"p",4),s(6," Connect with talented women in business has never been easier. Bridging the gap between women professionals and companies that value them. "),k()(),E(7,"div",5)(8,"div",6)(9,"h4",7),s(10,"For Finding Business(es)"),k(),E(11,"div",8)(12,"div")(13,"div",9),s(14,"Search for a business"),k(),E(15,"div",10),s(16,"Browse by industry, location or heritage and more."),k()(),E(17,"div")(18,"div",9),s(19,"Apply for desired business"),k(),E(20,"div",10),s(21,"Submit a request to get hired and work."),k()(),E(22,"div")(23,"div",9),s(24,"Get paid"),k(),E(25,"div",10),s(26,"You get paid when work is done or completed with satisfaction from client."),k()()()(),E(27,"div",6)(28,"h4",7),s(29,"For Listing Business(es)"),k(),E(30,"div",8)(31,"div")(32,"div",9),s(33,"Create or list business(es)"),k(),E(34,"div",10),s(35,"Post a business by creating one."),k()(),E(36,"div")(37,"div",9),s(38,"Get Offers or bids"),k(),E(39,"div",10),s(40,"Receive tailored offers, proposals, or bids from professionals ready to work with you."),k()(),E(41,"div")(42,"div",9),s(43,"Pay when job is done"),k(),E(44,"div",10),s(45,"Secure, fair, and risk-free. Make payment once the work is completed."),k()()()()()()())},encapsulation:2})};var Ct=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-why-choose-voucher"]],decls:25,vars:0,consts:[[1,"relative","bg-white","py-12","md:py-16"],[1,"lg:max-w-7xl","mx-auto","lg:px-4","sm:px-6","lg:px-8"],[1,"block","md:hidden","relative"],[1,"absolute","right-0","-top-40","w-[85%]","z-0","pr-0"],["src","/assets/images/dashboard.png","alt","Dashboard preview",1,"w-full","h-auto","rounded-lg","shadow-lg"],[1,"bg-primary-600","text-white","rounded-none","p-6","pt-32","mt-32","relative","z-10","flex","flex-col","justify-center","min-h-[300px]"],[1,"text-2xl","font-bold","mb-4","text-white","text-center"],[1,"text-sm","text-white/90","leading-relaxed","mb-6","text-center","px-4"],[1,"flex","justify-center","pb-2"],["mat-flat-button","",1,"bg-white!","text-primary-600!","rounded-full","px-8","py-3","font-semibold"],[1,"hidden","md:block"],[1,"grid","md:grid-cols-2","gap-6","items-center"],["src","/assets/images/women-talking.png","alt","Two women talking",1,"w-full","h-72","md:h-96","object-cover","rounded-md","shadow-sm"],[1,"pl-0","md:pl-12"],[1,"text-3xl","md:text-4xl","font-bold","mb-4","text-primary-500"],[1,"text-gray-700","mb-6"],["mat-flat-button","","color","primary",1,"px-8","py-3"]],template:function(t,n){t&1&&(r(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),_(4,"img",4),a(),r(5,"div",5)(6,"h3",6),s(7,"Why choose VouchHer"),a(),r(8,"p",7),s(9," We are a professional and trusted hub that connects ambitious women ready to showcase their skills with businesses seeking top talent to grow. Our platform bridges opportunity and expertise, empowering women to get hired while helping companies discover and hire the best. "),a(),r(10,"div",8)(11,"button",9),s(12," Join VouchHer "),a()()()(),r(13,"div",10)(14,"div",11)(15,"div"),_(16,"img",12),a(),r(17,"div",13)(18,"h3",14),s(19,"Why choose VouchHer"),a(),r(20,"p",15),s(21," We are a professional and trusted hub that connects ambitious women ready to showcase their skills with businesses seeking top talent to grow. Our platform bridges opportunity and expertise, empowering women to get hired while helping companies discover and hire the best. "),a(),r(22,"div")(23,"button",16),s(24,"Join VouchHer"),a()()()()()()())},dependencies:[M,I],styles:["[_nghost-%COMP%]{display:block}"]})};var xt=class i{authService=d(Y);router=d(F);constructor(){j(()=>{let e=this.authService.isAuthenticated(),t=this.authService.user();e&&t&&(t.user_mode==="business_owner"?(console.log("Redirecting business owner to dashboard"),this.router.navigate(["/dashboard"])):(console.log("Redirecting client to search page"),this.router.navigate(["/search"])))})}ngOnInit(){}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-home"]],decls:11,vars:3,consts:[["drawer",""],[3,"drawer"],["autosize","",1,"content-body",3,"hasBackdrop"],[1,"drawer",3,"mode"],[1,"bg-white!"],[1,"space-y-16","flex","flex-col","md:space-y-24"]],template:function(t,n){if(t&1&&(_(0,"app-header",1),r(1,"mat-drawer-container",2)(2,"mat-drawer",3,0),_(4,"app-guest-sidenav"),a(),r(5,"mat-drawer-content",4)(6,"div",5),_(7,"hero-section")(8,"how-it-works-section")(9,"app-why-choose-voucher")(10,"footer-component"),a()()()),t&2){let o=ee(3);p("drawer",o),l(),p("hasBackdrop",!0),l(),p("mode","over")}},dependencies:[he,vt,_t,Ct,st,Oe,Pe,ke,Se,K,ie,M,pt],styles:[".drawer[_ngcontent-%COMP%]{height:100vh;border-radius:0}.content-body[_ngcontent-%COMP%]{height:100vh;overflow-y:scroll}"]})};var yt=class i{authService=d(Y);router=d(F);businessService=d(tt);projectService=d(gi);socketService=d(Wn);breakpointObserver=d(Je);favoritesService=d(hi);sidenavOpened=b(!1);isMobile=b(!1);userBusinessCount=b(0);totalServices=b(0);totalProjects=b(0);favoritesCount=R(()=>this.favoritesService.getFavoritesCount());user=this.authService.user;isAuthenticated=this.authService.isAuthenticated;userMode=R(()=>this.user()?.user_mode||"client");isBusinessOwner=R(()=>this.userMode()==="business_owner");isAdmin=R(()=>this.user()?.email?.includes("admin")||!1);mobileSubscription;userModeEffect=j(()=>{let e=this.userMode(),t=this.user(),n=this.isBusinessOwner();console.log("Dashboard signals updated:",{user:t?.email,mode:e,isBusiness:n}),t&&this.loadDashboardCounts()});ngOnInit(){this.setupMobileDetection(),this.loadDashboardCounts(),this.socketService.connect()}ngOnDestroy(){this.mobileSubscription&&this.mobileSubscription.unsubscribe()}setupMobileDetection(){this.mobileSubscription=this.breakpointObserver.observe([X.Handset]).subscribe(e=>{this.isMobile.set(e.matches),e.matches?this.sidenavOpened.set(!1):this.sidenavOpened.set(!0)})}loadDashboardCounts(){return S(this,null,function*(){try{let e=yield this.businessService.getMyBusinessesAsync();this.userBusinessCount.set(e.length);let t=0;for(let n of e)try{let o=yield this.businessService.getBusinessServicesAsync(n._id);t+=o.length}catch(o){console.warn(`Failed to load services for business ${n._id}:`,o)}this.totalServices.set(t);try{let n=yield this.projectService.getAllMyProjectsAsync();this.totalProjects.set(n.length)}catch(n){console.warn("Failed to load projects:",n),this.totalProjects.set(0)}}catch(e){console.error("Error loading dashboard counts:",e)}})}toggleSidenav(){this.sidenavOpened.set(!this.sidenavOpened())}onMenuToggle(){this.toggleSidenav()}onNavigationClick(){this.isMobile()&&this.sidenavOpened.set(!1)}navigateToCreateBusiness(){this.router.navigate(["/dashboard/businesses/create-business"])}createService(){this.router.navigate(["/dashboard/services/create-service"])}getActiveTabTitle(){let e=this.router.url.split("/");switch(e[e.length-1]){case"dashboard":case"":return this.isBusinessOwner()?"Dashboard Overview":"My Projects";case"overview":return"Dashboard Overview";case"businesses":return"My Businesses";case"services":return"My Services";case"projects":return"My Projects";case"notifications":return"Notifications";case"profile":return"Profile";case"settings":return"Settings";default:return this.router.url.includes("/messages")?"Messages":this.isBusinessOwner()?"Dashboard":"My Projects"}}getUserInitials(){let e=this.user();if(!e)return"";if(e.first_name||e.last_name){let t=e.first_name?.charAt(0).toUpperCase()||"",n=e.last_name?.charAt(0).toUpperCase()||"";return t+n}return e.email.charAt(0).toUpperCase()}navigateToDashboard(){this.router.navigate(["/dashboard"])}navigateToProfile(){this.router.navigate(["/dashboard/profile"])}navigateToSettings(){this.router.navigate(["/dashboard/settings"])}navigateToAdmin(){this.router.navigate(["/admin"])}switchToBusinessMode(){return S(this,null,function*(){try{let e=yield this.authService.switchMode("business_owner");e.data?(console.log("Switched to business owner mode successfully"),console.log("Updated user mode:",this.userMode()),this.loadDashboardCounts()):console.error("Failed to switch to business mode:",e.error)}catch(e){console.error("Error switching to business mode:",e)}})}switchToClientMode(){return S(this,null,function*(){try{let e=yield this.authService.switchMode("client");e.data?(console.log("Switched to client mode successfully"),console.log("Updated user mode:",this.userMode()),this.router.navigate(["/search"])):console.error("Failed to switch to client mode:",e.error)}catch(e){console.error("Error switching to client mode:",e)}})}viewProfile(){this.navigateToProfile()}logout(){this.authService.logout(),this.router.navigate(["/auth"])}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-dashboard"]],decls:7,vars:5,consts:[["drawer",""],[3,"drawer"],[3,"hasBackdrop"],["position","start",1,"drawer",3,"opened","disableClose","mode"],[1,"content-body"]],template:function(t,n){if(t&1&&(_(0,"app-header",1),r(1,"mat-drawer-container",2)(2,"mat-drawer",3,0),_(4,"app-user-sidenav"),a(),r(5,"mat-drawer-content",4),_(6,"router-outlet"),a()()),t&2){let o=ee(3);p("drawer",o),l(),p("hasBackdrop",n.isMobile()),l(),p("opened",n.sidenavOpened())("disableClose",!n.isMobile())("mode",n.isMobile()?"over":"side")}},dependencies:[O,Oe,Pe,ke,Se,Me,D,M,et,Ze,Vn,he,mt],styles:[".drawer[_ngcontent-%COMP%]{height:calc(100vh - 64px);border-radius:0}.content-body[_ngcontent-%COMP%]{height:calc(100vh - 64px);overflow-y:scroll}.dashboard-loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:3rem 0}.dashboard-loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite;border-radius:50%;height:3rem;width:3rem;border:2px solid #e5e7eb;border-top:2px solid #2563eb}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.business-item[_ngcontent-%COMP%]:hover{background-color:#f9fafb;transition:background-color .15s ease-in-out}.status-approved[_ngcontent-%COMP%]{background-color:#dcfce7;color:#166534}.status-pending[_ngcontent-%COMP%]{background-color:#fef3c7;color:#92400e}.status-rejected[_ngcontent-%COMP%]{background-color:#fee2e2;color:#991b1b}.status-suspended[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#374151}.create-business-btn[_ngcontent-%COMP%]:hover{background-color:#1d4ed8;transform:translateY(-1px);transition:all .2s ease-in-out}.action-btn[_ngcontent-%COMP%]:hover{background-color:#f9fafb;transform:translateY(-1px);transition:all .15s ease-in-out}.action-btn-danger[_ngcontent-%COMP%]:hover{background-color:#fef2f2;transform:translateY(-1px);transition:all .15s ease-in-out}.stat-card[_ngcontent-%COMP%]:hover{box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;transition:box-shadow .2s ease-in-out}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.6}  .mat-drawer-content{height:calc(100vh - 64px)!important;overflow-y:auto!important;overflow-x:hidden!important;display:flex!important;flex-direction:column!important}  .mat-drawer-container{height:calc(100vh - 64px)!important}@media (max-width: 640px){.business-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.75rem}.action-buttons[_ngcontent-%COMP%]{margin-left:0;width:100%;justify-content:flex-end}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.create-business-btn[_ngcontent-%COMP%]:focus, .action-btn[_ngcontent-%COMP%]:focus, .action-btn-danger[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;box-shadow:0 0 0 2px #2563eb}@media print{.action-buttons[_ngcontent-%COMP%], .create-business-btn[_ngcontent-%COMP%]{display:none}}"]})};var Zt=(i,e)=>{let t=d(Y),n=d(F);return t.isAuthenticated$.pipe(be(o=>o?!0:(n.navigate(["/auth"],{queryParams:{returnUrl:e.url}}),!1)))};var Di=(i,e)=>{let t=d(Y),n=d(F);return t.isAuthenticated$.pipe(be(o=>o?(n.navigate(["/"]),!1):!0))};var Ri=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=Ce({type:i});static \u0275inj=_e({})}return i})();var wt=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=Ce({type:i});static \u0275inj=_e({imports:[ze,Ri,Xe]})}return i})();var Ie=class i{http=d(Ke);apiUrl=Ee.api.baseUrl;categoriesSubject=new Qe([]);categories$=this.categoriesSubject.asObservable();getCategories(){return this.http.get(`${this.apiUrl}/categories`)}getSubcategories(e){let t=e?`${this.apiUrl}/subcategories?categoryId=${e}`:`${this.apiUrl}/subcategories`;return this.http.get(t)}loadCategories(){return S(this,null,function*(){try{let e=yield this.getCategories().toPromise();return e?.success&&e.data?(this.categoriesSubject.next(e.data),e.data):[]}catch(e){return console.error("Error loading categories:",e),[]}})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=L({token:i,factory:i.\u0275fac,providedIn:"root"})};function no(i,e){if(i&1&&_(0,"img",3),i&2){let t=g();p("src",t.getOwnerProfilePicture(),Ut)("alt",t.getOwnerFullName())}}function io(i,e){if(i&1&&(r(0,"span",4),s(1),a()),i&2){let t=g();l(),T(t.getOwnerInitials())}}function oo(i,e){if(i&1&&(r(0,"span"),s(1),a()),i&2){let t=g();l(),T(t.getBusinessLocation())}}function ro(i,e){if(i&1&&(r(0,"span",7),s(1),a()),i&2){let t=g();p("matTooltip",t.getOwnerCountryName()),l(),T(t.getOwnerCountryFlag())}}function ao(i,e){if(i&1&&(r(0,"div",10),_(1,"img",3),r(2,"div",19),s(3),a()()),i&2){let t=g();l(),p("src",t.business().banner_url,Ut)("alt",t.business().name),l(2),A(" ",t.getCategoryInitials()," ")}}function so(i,e){if(i&1&&(r(0,"div",11)(1,"div",20),s(2),a()()),i&2){let t=g();l(2),A(" ",t.getCategoryInitials()," ")}}function lo(i,e){if(i&1&&(r(0,"div",16)(1,"span",21),s(2,"Top Rated"),a(),r(3,"mat-icon",22),s(4,"star"),a(),r(5,"span",23),s(6),a(),r(7,"span",24),s(8),a()()),i&2){let t=g();l(6),T(t.getRatingDisplay()),l(2),A("(",t.getReviewCount(),")")}}function co(i,e){i&1&&(r(0,"div",17),s(1," New Business "),a())}function po(i,e){if(i&1&&(r(0,"div",18),s(1),Cn(2,"currency"),a()),i&2){let t=g();l(),A(" From ",xn(2,1,t.getStartingPrice())," ")}}var Mt=class i{business=C.required();ownerName=C("Business Owner");ownerAvatar=C(null);ownerCountry=C("Unknown");categoryName=C("Uncategorized");businessClick=te();favoriteClick=te();countryFlagMap={USA:"\u{1F1FA}\u{1F1F8}","United States":"\u{1F1FA}\u{1F1F8}",Canada:"\u{1F1E8}\u{1F1E6}",Mexico:"\u{1F1F2}\u{1F1FD}",Cuba:"\u{1F1E8}\u{1F1FA}",Haiti:"\u{1F1ED}\u{1F1F9}","Dominican Republic":"\u{1F1E9}\u{1F1F4}","Puerto Rico":"\u{1F1F5}\u{1F1F7}",Jamaica:"\u{1F1EF}\u{1F1F2}","Trinidad and Tobago":"\u{1F1F9}\u{1F1F9}",Barbados:"\uFFFD\u{1F1E7}",Bahamas:"\uFFFD\u{1F1F8}",Belize:"\u{1F1E7}\u{1F1FF}","Costa Rica":"\u{1F1E8}\uFFFD","El Salvador":"\uFFFD\uFFFD",Guatemala:"\u{1F1EC}\u{1F1F9}",Honduras:"\uFFFD\uFFFD",Nicaragua:"\u{1F1F3}\u{1F1EE}",Panama:"\u{1F1F5}\u{1F1E6}",Grenada:"\uFFFD\uFFFD","Saint Lucia":"\uFFFD\uFFFD","Antigua and Barbuda":"\u{1F1E6}\u{1F1EC}",Dominica:"\uFFFD\uFFFD","Saint Kitts and Nevis":"\uFFFD\uFFFD","Saint Vincent and the Grenadines":"\uFFFD\uFFFD",Argentina:"\u{1F1E6}\u{1F1F7}",Bolivia:"\u{1F1E7}\u{1F1F4}",Brazil:"\u{1F1E7}\u{1F1F7}",Chile:"\u{1F1E8}\u{1F1F1}",Colombia:"\u{1F1E8}\u{1F1F4}",Ecuador:"\u{1F1EA}\u{1F1E8}",Guyana:"\u{1F1EC}\u{1F1FE}",Paraguay:"\u{1F1F5}\u{1F1FE}",Peru:"\u{1F1F5}\u{1F1EA}",Suriname:"\u{1F1F8}\u{1F1F7}",Uruguay:"\u{1F1FA}\u{1F1FE}",Venezuela:"\u{1F1FB}\u{1F1EA}","French Guiana":"\u{1F1EC}\u{1F1EB}","United Kingdom":"\u{1F1EC}\u{1F1E7}",UK:"\u{1F1EC}\u{1F1E7}",England:"\u{1F3F4}\u{E0067}\u{E0062}\u{E0065}\u{E006E}\u{E0067}\u{E007F}",Scotland:"\u{1F3F4}\u{E0067}\u{E0062}\u{E0073}\u{E0063}\u{E0074}\u{E007F}",Wales:"\u{1F3F4}\u{E0067}\u{E0062}\u{E0077}\u{E006C}\u{E0073}\u{E007F}",Ireland:"\u{1F1EE}\u{1F1EA}","Northern Ireland":"\u{1F1EC}\u{1F1E7}",France:"\u{1F1EB}\u{1F1F7}",Germany:"\u{1F1E9}\u{1F1EA}",Italy:"\u{1F1EE}\u{1F1F9}",Spain:"\u{1F1EA}\u{1F1F8}",Portugal:"\u{1F1F5}\u{1F1F9}",Netherlands:"\u{1F1F3}\u{1F1F1}",Belgium:"\u{1F1E7}\u{1F1EA}",Switzerland:"\u{1F1E8}\u{1F1ED}",Austria:"\uFFFD\u{1F1F9}",Sweden:"\u{1F1F8}\uFFFD\u{1F1EA}",Norway:"\uFFFD\u{1F1F4}",Denmark:"\u{1F1E9}\u{1F1F0}",Finland:"\u{1F1EB}\u{1F1EE}",Iceland:"\u{1F1EE}\u{1F1F8}",Greece:"\u{1F1EC}\u{1F1F7}",Poland:"\u{1F1F5}\u{1F1F1}","Czech Republic":"\uFFFD\u{1F1E8}\u{1F1FF}",Hungary:"\u{1F1ED}\u{1F1FA}",Romania:"\u{1F1F7}\u{1F1F4}",Bulgaria:"\u{1F1E7}\u{1F1EC}",Croatia:"\u{1F1ED}\u{1F1F7}",Serbia:"\u{1F1F7}\u{1F1F8}",Slovenia:"\u{1F1F8}\u{1F1EE}",Slovakia:"\uFFFD\uFFFD","Bosnia and Herzegovina":"\u{1F1E7}\u{1F1E6}",Montenegro:"\u{1F1F2}\u{1F1EA}","North Macedonia":"\u{1F1F2}\u{1F1F0}",Albania:"\u{1F1E6}\u{1F1F1}",Kosovo:"\u{1F1FD}\u{1F1F0}",Estonia:"\u{1F1EA}\u{1F1EA}",Latvia:"\u{1F1F1}\u{1F1FB}",Lithuania:"\u{1F1F1}\u{1F1F9}",Belarus:"\uFFFD\u{1F1FE}",Moldova:"\u{1F1F2}\u{1F1E9}",Ukraine:"\u{1F1FA}\u{1F1E6}",Russia:"\u{1F1F7}\u{1F1FA}",Georgia:"\u{1F1EC}\u{1F1EA}",Armenia:"\u{1F1E6}\u{1F1F2}",Azerbaijan:"\u{1F1E6}\u{1F1FF}",Cyprus:"\u{1F1E8}\u{1F1FE}",Malta:"\u{1F1F2}\u{1F1F9}",Luxembourg:"\u{1F1F1}\u{1F1FA}",Monaco:"\u{1F1F2}\u{1F1E8}",Andorra:"\u{1F1E6}\u{1F1E9}","San Marino":"\u{1F1F8}\u{1F1F2}","Vatican City":"\u{1F1FB}\u{1F1E6}",Liechtenstein:"\uFFFD\uFFFD",China:"\u{1F1E8}\u{1F1F3}",Japan:"\u{1F1EF}\u{1F1F5}","South Korea":"\u{1F1F0}\u{1F1F7}","North Korea":"\u{1F1F0}\u{1F1F5}",India:"\u{1F1EE}\u{1F1F3}",Pakistan:"\u{1F1F5}\u{1F1F0}",Bangladesh:"\u{1F1E7}\u{1F1E9}","Sri Lanka":"\u{1F1F1}\u{1F1F0}",Nepal:"\u{1F1F3}\u{1F1F5}",Bhutan:"\u{1F1E7}\u{1F1F9}",Maldives:"\u{1F1F2}\u{1F1FB}",Afghanistan:"\u{1F1E6}\u{1F1EB}",Indonesia:"\u{1F1EE}\u{1F1E9}",Malaysia:"\u{1F1F2}\u{1F1FE}",Singapore:"\u{1F1F8}\u{1F1EC}",Thailand:"\u{1F1F9}\u{1F1ED}",Vietnam:"\u{1F1FB}\u{1F1F3}",Philippines:"\u{1F1F5}\u{1F1ED}",Myanmar:"\u{1F1F2}\u{1F1F2}",Cambodia:"\u{1F1F0}\u{1F1ED}",Laos:"\u{1F1F1}\u{1F1E6}",Brunei:"\u{1F1E7}\u{1F1F3}","East Timor":"\u{1F1F9}\u{1F1F1}","Timor-Leste":"\u{1F1F9}\u{1F1F1}",Mongolia:"\uFFFD\u{1F1F3}",Taiwan:"\u{1F1F9}\uFFFD","Hong Kong":"\uFFFD\u{1F1ED}\u{1F1F0}",Macau:"\u{1F1F2}\u{1F1F4}",Kazakhstan:"\u{1F1F0}\u{1F1FF}",Uzbekistan:"\uFFFD\uFFFD",Turkmenistan:"\u{1F1F9}\u{1F1F2}",Kyrgyzstan:"\uFFFD\u{1F1EC}",Tajikistan:"\u{1F1F9}\u{1F1EF}",Turkey:"\u{1F1F9}\u{1F1F7}",Iran:"\uFFFD\uFFFD",Iraq:"\u{1F1EE}\u{1F1F6}",Syria:"\u{1F1F8}\u{1F1FE}",Lebanon:"\u{1F1F1}\u{1F1E7}",Jordan:"\u{1F1EF}\u{1F1F4}",Israel:"\u{1F1EE}\u{1F1F1}",Palestine:"\u{1F1F5}\u{1F1F8}","Saudi Arabia":"\uFFFD\u{1F1E6}",Yemen:"\u{1F1FE}\u{1F1EA}",Oman:"\uFFFD\uFFFD",UAE:"\u{1F1E6}\uFFFD\u{1F1EA}","United Arab Emirates":"\uFFFD\uFFFD\u{1F1EA}",Qatar:"\uFFFD\u{1F1E6}",Kuwait:"\u{1F1F0}\u{1F1FC}",Bahrain:"\uFFFD\u{1F1ED}",Egypt:"\u{1F1EA}\u{1F1EC}",Libya:"\uFFFD\uFFFD",Tunisia:"\uFFFD\u{1F1F9}\u{1F1F3}",Algeria:"\u{1F1E9}\u{1F1FF}",Morocco:"\u{1F1F2}\u{1F1E6}",Sudan:"\uFFFD\uFFFD","South Sudan":"\u{1F1F8}\u{1F1F8}",Ethiopia:"\uFFFD\uFFFD\u{1F1F9}",Eritrea:"\uFFFD\u{1F1F7}",Djibouti:"\u{1F1E9}\u{1F1EF}",Somalia:"\u{1F1F8}\u{1F1F4}",Kenya:"\u{1F1F0}\u{1F1EA}",Uganda:"\u{1F1FA}\u{1F1EC}",Tanzania:"\u{1F1F9}\u{1F1FF}",Rwanda:"\u{1F1F7}\u{1F1FC}",Burundi:"\u{1F1E7}\u{1F1EE}","South Africa":"\uFFFD\uFFFD",Namibia:"\u{1F1F3}\u{1F1E6}",Botswana:"\u{1F1E7}\u{1F1FC}",Zimbabwe:"\u{1F1FF}\u{1F1FC}",Zambia:"\u{1F1FF}\u{1F1F2}",Malawi:"\uFFFD\uFFFD",Mozambique:"\u{1F1F2}\u{1F1FF}",Madagascar:"\uFFFD\uFFFD",Mauritius:"\u{1F1F2}\u{1F1FA}",Seychelles:"\u{1F1F8}\u{1F1E8}",Comoros:"\u{1F1F0}\u{1F1F2}",Angola:"\uFFFD\uFFFD","Democratic Republic of Congo":"\u{1F1E8}\u{1F1E9}","Republic of Congo":"\u{1F1E8}\u{1F1EC}",Gabon:"\uFFFD\uFFFD",Cameroon:"\u{1F1E8}\uFFFD","Central African Republic":"\uFFFD\uFFFD",Chad:"\uFFFD\uFFFD",Nigeria:"\u{1F1F3}\u{1F1EC}",Niger:"\u{1F1F3}\uFFFD",Benin:"\u{1F1E7}\u{1F1EF}",Togo:"\u{1F1F9}\uFFFD",Ghana:"\uFFFD\u{1F1ED}","Ivory Coast":"\u{1F1E8}\u{1F1EE}","Burkina Faso":"\u{1F1E7}\u{1F1EB}",Mali:"\uFFFD\uFFFD",Senegal:"\u{1F1F8}\uFFFD",Guinea:"\u{1F1EC}\u{1F1F3}","Guinea-Bissau":"\uFFFD\uFFFD","Sierra Leone":"\uFFFD\uFFFD",Liberia:"\uFFFD\uFFFD",Mauritania:"\uFFFD\uFFFD",Gambia:"\u{1F1EC}\u{1F1F2}","Cape Verde":"\uFFFD\uFFFD","Sao Tome and Principe":"\uFFFD\uFFFD","Equatorial Guinea":"\uFFFD\uFFFD",Lesotho:"\u{1F1F1}\u{1F1F8}",Eswatini:"\u{1F1F8}\u{1F1FF}",Swaziland:"\uFFFD\uFFFD",Australia:"\uFFFD\u{1F1FA}","New Zealand":"\u{1F1F3}\u{1F1FF}","Papua New Guinea":"\uFFFD\uFFFD",Fiji:"\uFFFD\uFFFD","Solomon Islands":"\uFFFD\uFFFD",Vanuatu:"\u{1F1FB}\u{1F1FA}",Samoa:"\u{1F1FC}\u{1F1F8}",Tonga:"\u{1F1F9}\uFFFD",Kiribati:"\uFFFD\uFFFD",Micronesia:"\u{1F1EB}\u{1F1F2}","Marshall Islands":"\uFFFD\uFFFD",Palau:"\uFFFD\u{1F1FC}",Nauru:"\uFFFD\uFFFD",Tuvalu:"\uFFFD\uFFFD"};onCardClick(){this.businessClick.emit(this.business())}onFavoriteClick(e){e.stopPropagation(),this.favoriteClick.emit(this.business()._id)}getOwnerFullName(){let e=this.business();if(e.owner_id&&typeof e.owner_id=="object"){let t=e.owner_id,n=t.first_name||"",o=t.last_name||"";return`${n} ${o}`.trim()||"Business Owner"}return"Business Owner"}getOwnerProfilePicture(){let e=this.business();if(e.owner_id&&typeof e.owner_id=="object"){let t=e.owner_id;return t.profile_picture||t.avatar_url||null}return null}getOwnerInitials(){let e=this.business();if(e.owner_id&&typeof e.owner_id=="object"){let t=e.owner_id,n=t.first_name||"",o=t.last_name||"";if(n&&o)return(n.charAt(0)+o.charAt(0)).toUpperCase();if(n)return n.substring(0,2).toUpperCase();if(o)return o.substring(0,2).toUpperCase();if(t.email)return t.email.substring(0,2).toUpperCase()}return"BO"}getOwnerAvatarColor(){let e=["#F44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#FF9800","#FF5722","#795548","#607D8B"],t=this.business();if(t.owner_id&&typeof t.owner_id=="object"){let n=t.owner_id._id||"",o=0;for(let m=0;m<n.length;m++)o=n.charCodeAt(m)+((o<<5)-o);let c=Math.abs(o)%e.length;return e[c]}return e[0]}getOwnerCountryFlag(){let e=this.business();if(e.owner_id&&typeof e.owner_id=="object"){let t=e.owner_id;if(t.country_of_origin)return this.countryFlagMap[t.country_of_origin]||null}return null}getOwnerCountryName(){let e=this.business();return e.owner_id&&typeof e.owner_id=="object"&&e.owner_id.country_of_origin||""}getDefaultBanner(){return"bg-gradient-to-br from-green-400 to-blue-500"}hasRating(){let e=this.business();return e.rating!=null&&e.rating>0}getRatingDisplay(){return this.business().rating?.toFixed(1)||"0.0"}getReviewCount(){return this.business().review_count||0}getReviewText(){return this.getReviewCount()===1?"review":"reviews"}getVisibleTags(){let e=this.business().tags;return e?e.slice(0,2):[]}getExtraTagsCount(){let e=this.business().tags;return e?Math.max(0,e.length-2):0}hasExtraTags(){return this.getExtraTagsCount()>0}getBusinessDescription(){let e=this.business();return e.short_description||e.description||"Professional service provider"}getBusinessLocation(){let e=this.business();return e.city&&e.state?`${e.city}, ${e.state}`:null}hasViewCount(){return(this.business().view_count||0)>0}getBusinessInitials(){let e=this.business().name||"B",t=e.trim().split(" ");return t.length>=2?(t[0][0]+t[1][0]).toUpperCase():e.substring(0,2).toUpperCase()}getCategoryInitials(){let e=this.categoryName()||"SC",t=e.trim().split(" ");return t.length>=2?(t[0][0]+t[1][0]).toUpperCase():e.substring(0,2).toUpperCase()}getStartingPrice(){let e=this.business();if(!e.servicesData||e.servicesData.length===0)return null;let t=e.servicesData.filter(n=>n.price!==void 0&&n.price!==null&&n.price>0);return t.length===0?null:Math.min(...t.map(n=>n.price))}hasStartingPrice(){return this.getStartingPrice()!==null}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-business-card"]],inputs:{business:[1,"business"],ownerName:[1,"ownerName"],ownerAvatar:[1,"ownerAvatar"],ownerCountry:[1,"ownerCountry"],categoryName:[1,"categoryName"]},outputs:{businessClick:"businessClick",favoriteClick:"favoriteClick"},decls:23,vars:13,consts:[[1,"overflow-hidden","cursor-pointer","transition-all","duration-300","hover:-translate-y-1","relative","h-full","flex","flex-col",3,"click"],[1,"!relative"],["mat-card-avatar","",1,"!w-12","!h-12","!rounded-full","!overflow-hidden","!flex","!items-center","!justify-center"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"text-white","font-bold","text-base"],[1,"!text-base","!font-normal","!leading-tight","!m-0","!mb-1","!text-gray-900"],[1,"text-sm!","!text-light","!text-gray-600","!mt-0","!flex","!items-center","!gap-1.5"],[1,"text-lg","leading-none",3,"matTooltip"],[1,"absolute","top-3","right-3","z-10",3,"click"],["size","small",3,"businessId","businessName"],[1,"relative","w-full","h-52","bg-gray-100"],[1,"relative","w-full","h-52","bg-gradient-to-br","from-purple-500","to-indigo-600","flex","items-center","justify-center"],[1,"!p-4","!pt-3","flex-grow","flex","flex-col"],[1,"text-lg","font-bold","text-gray-900","m-0","mb-2","leading-tight"],[1,"text-sm","leading-relaxed","text-gray-700","m-0","mb-3","line-clamp-3","flex-grow"],[1,"flex","justify-between","border-t","border-gray-100","px-4","py-3"],[1,"flex","items-center","gap-1","bg-green-50","px-2.5","py-1","rounded","text-sm"],[1,"bg-secondary-50","text-secondary-700","font-semibold","text-xs","px-2.5","py-1","rounded"],[1,"text-base","font-normal","text-gray-900"],[1,"absolute","top-3","left-3","bg-green-600","text-white","text-xs","font-semibold","px-3","py-1.5","rounded-md"],[1,"bg-green-600","text-white","text-2xl","font-bold","px-4","py-2","rounded-md","absolute","top-3","left-3"],[1,"text-green-700","font-semibold","text-xs"],[1,"!w-4","!h-4","!text-base","!text-yellow-500","!leading-none"],[1,"font-bold","text-gray-900","text-sm"],[1,"text-gray-500","text-xs"]],template:function(t,n){t&1&&(r(0,"mat-card",0),u("click",function(){return n.onCardClick()}),r(1,"mat-card-header",1)(2,"div",2),x(3,no,1,2,"img",3)(4,io,2,1,"span",4),a(),r(5,"mat-card-title",5),s(6),a(),r(7,"mat-card-subtitle",6),x(8,oo,2,1,"span"),x(9,ro,2,2,"span",7),a(),r(10,"div",8),u("click",function(c){return n.onFavoriteClick(c)}),_(11,"app-favorite-button",9),a()(),x(12,ao,4,3,"div",10)(13,so,3,1,"div",11),r(14,"mat-card-content",12)(15,"h3",13),s(16),a(),r(17,"p",14),s(18),a()(),r(19,"mat-card-actions",15),x(20,lo,9,2,"div",16)(21,co,2,0,"div",17),x(22,po,3,3,"div",18),a()()),t&2&&(l(2),xe("background-color",n.getOwnerProfilePicture()?"transparent":n.getOwnerAvatarColor()),l(),y(n.getOwnerProfilePicture()?3:4),l(3),A(" ",n.getOwnerFullName()," "),l(2),y(n.getBusinessLocation()?8:-1),l(),y(n.getOwnerCountryFlag()?9:-1),l(2),p("businessId",n.business()._id)("businessName",n.business().name),l(),y(n.business().banner_url&&n.business().banner_url.trim()!==""?12:13),l(4),T(n.business().name),l(2),A(" ",n.getBusinessDescription()," "),l(2),y(n.hasRating()?20:21),l(2),y(n.hasStartingPrice()?22:-1))},dependencies:[O,ni,Yn,Xn,ti,Zn,ei,Jn,Kn,D,N,M,gt,bi,re,Ei,Mn],styles:["[_nghost-%COMP%]{display:block;width:100%}.business-card[_ngcontent-%COMP%]{border-radius:8px!important}.business-card[_ngcontent-%COMP%]     mat-card-header .mat-mdc-card-avatar{margin-right:0!important}.business-card[_ngcontent-%COMP%]     mat-card-header .mat-mdc-card-header-text{margin:0!important;flex:1}.business-card[_ngcontent-%COMP%]     .mat-mdc-card-content:first-of-type{padding-top:0!important}"]})};function uo(i,e){}var Ii="_mat-bottom-sheet-enter",Bi="_mat-bottom-sheet-exit",go=(()=>{class i extends xi{_breakpointSubscription;_animationsDisabled=Wt();_animationState="void";_animationStateChanged=new hn;_destroyed;constructor(){super();let t=d(Je);this._breakpointSubscription=t.observe([X.Medium,X.Large,X.XLarge]).subscribe(()=>{let n=this._elementRef.nativeElement.classList;n.toggle("mat-bottom-sheet-container-medium",t.isMatched(X.Medium)),n.toggle("mat-bottom-sheet-container-large",t.isMatched(X.Large)),n.toggle("mat-bottom-sheet-container-xlarge",t.isMatched(X.XLarge))})}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._animationsDisabled&&this._simulateAnimation(Ii))}exit(){this._destroyed||(this._elementRef.nativeElement.setAttribute("mat-exit",""),this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._animationsDisabled&&this._simulateAnimation(Bi))}ngOnDestroy(){super.ngOnDestroy(),this._breakpointSubscription.unsubscribe(),this._destroyed=!0}_simulateAnimation(t){this._ngZone.run(()=>{this._handleAnimationEvent(!0,t),setTimeout(()=>this._handleAnimationEvent(!1,t))})}_trapFocus(){super._trapFocus({preventScroll:!0})}_handleAnimationEvent(t,n){let o=n===Ii;(o||n===Bi)&&this._animationStateChanged.emit({toState:o?"visible":"hidden",phase:t?"start":"done"})}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=v({type:i,selectors:[["mat-bottom-sheet-container"]],hostAttrs:["tabindex","-1",1,"mat-bottom-sheet-container"],hostVars:9,hostBindings:function(n,o){n&1&&u("animationstart",function(m){return o._handleAnimationEvent(!0,m.animationName)})("animationend",function(m){return o._handleAnimationEvent(!1,m.animationName)})("animationcancel",function(m){return o._handleAnimationEvent(!1,m.animationName)}),n&2&&(ce("role",o._config.role)("aria-modal",o._config.ariaModal)("aria-label",o._config.ariaLabel),V("mat-bottom-sheet-container-animations-enabled",!o._animationsDisabled)("mat-bottom-sheet-container-enter",o._animationState==="visible")("mat-bottom-sheet-container-exit",o._animationState==="hidden"))},features:[je],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(n,o){n&1&&B(0,uo,0,0,"ng-template",0)},dependencies:[Yt],styles:[`@keyframes _mat-bottom-sheet-enter{from{transform:translateY(100%)}to{transform:none}}@keyframes _mat-bottom-sheet-exit{from{transform:none}to{transform:translateY(100%)}}.mat-bottom-sheet-container{box-shadow:0px 8px 10px -5px rgba(0, 0, 0, 0.2), 0px 16px 24px 2px rgba(0, 0, 0, 0.14), 0px 6px 30px 5px rgba(0, 0, 0, 0.12);padding:8px 16px;min-width:100vw;box-sizing:border-box;display:block;outline:0;max-height:80vh;overflow:auto;position:relative;background:var(--mat-bottom-sheet-container-background-color, var(--mat-sys-surface-container-low));color:var(--mat-bottom-sheet-container-text-color, var(--mat-sys-on-surface));font-family:var(--mat-bottom-sheet-container-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-bottom-sheet-container-text-size, var(--mat-sys-body-large-size));line-height:var(--mat-bottom-sheet-container-text-line-height, var(--mat-sys-body-large-line-height));font-weight:var(--mat-bottom-sheet-container-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-bottom-sheet-container-text-tracking, var(--mat-sys-body-large-tracking))}@media(forced-colors: active){.mat-bottom-sheet-container{outline:1px solid}}.mat-bottom-sheet-container-animations-enabled{transform:translateY(100%)}.mat-bottom-sheet-container-animations-enabled.mat-bottom-sheet-container-enter{animation:_mat-bottom-sheet-enter 195ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-bottom-sheet-container-animations-enabled.mat-bottom-sheet-container-exit{animation:_mat-bottom-sheet-exit 375ms cubic-bezier(0.4, 0, 1, 1) backwards}.mat-bottom-sheet-container-xlarge,.mat-bottom-sheet-container-large,.mat-bottom-sheet-container-medium{border-top-left-radius:var(--mat-bottom-sheet-container-shape, 28px);border-top-right-radius:var(--mat-bottom-sheet-container-shape, 28px)}.mat-bottom-sheet-container-medium{min-width:384px;max-width:calc(100vw - 128px)}.mat-bottom-sheet-container-large{min-width:512px;max-width:calc(100vw - 256px)}.mat-bottom-sheet-container-xlarge{min-width:576px;max-width:calc(100vw - 384px)}
`],encapsulation:2})}return i})(),Le=new U("MatBottomSheetData"),Jt=class{viewContainerRef;panelClass;direction;data=null;hasBackdrop=!0;backdropClass;disableClose=!1;ariaLabel=null;ariaModal=!1;closeOnNavigation=!0;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;height="";minHeight;maxHeight},se=class{_ref;get instance(){return this._ref.componentInstance}get componentRef(){return this._ref.componentRef}containerInstance;disableClose;_afterOpened=new en;_result;_closeFallbackTimeout;constructor(e,t,n){this._ref=e,this.containerInstance=n,this.disableClose=t.disableClose,n._animationStateChanged.pipe(J(o=>o.phase==="done"&&o.toState==="visible"),Ge(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),n._animationStateChanged.pipe(J(o=>o.phase==="done"&&o.toState==="hidden"),Ge(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._ref.close(this._result)}),e.overlayRef.detachments().subscribe(()=>{this._ref.close(this._result)}),rn(this.backdropClick(),this.keydownEvents().pipe(J(o=>o.keyCode===27))).subscribe(o=>{!this.disableClose&&(o.type!=="keydown"||!jn(o))&&(o.preventDefault(),this.dismiss())})}dismiss(e){this.containerInstance&&(this.containerInstance._animationStateChanged.pipe(J(t=>t.phase==="start"),Ge(1)).subscribe(()=>{this._closeFallbackTimeout=setTimeout(()=>this._ref.close(this._result),500),this._ref.overlayRef.detachBackdrop()}),this._result=e,this.containerInstance.exit(),this.containerInstance=null)}afterDismissed(){return this._ref.closed}afterOpened(){return this._afterOpened}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}},ho=new U("mat-bottom-sheet-default-options"),Xt=(()=>{class i{_injector=d(Ve);_parentBottomSheet=d(i,{optional:!0,skipSelf:!0});_animationsDisabled=Wt();_defaultOptions=d(ho,{optional:!0});_bottomSheetRefAtThisLevel=null;_dialog=d(yi);get _openedBottomSheetRef(){let t=this._parentBottomSheet;return t?t._openedBottomSheetRef:this._bottomSheetRefAtThisLevel}set _openedBottomSheetRef(t){this._parentBottomSheet?this._parentBottomSheet._openedBottomSheetRef=t:this._bottomSheetRefAtThisLevel=t}constructor(){}open(t,n){let o=Z(Z({},this._defaultOptions||new Jt),n),c;return this._dialog.open(t,Ne(Z({},o),{disableClose:!0,closeOnOverlayDetachments:!1,maxWidth:"100%",container:go,scrollStrategy:o.scrollStrategy||Ln(this._injector),positionStrategy:Un(this._injector).centerHorizontally().bottom("0"),disableAnimations:this._animationsDisabled,templateContext:()=>({bottomSheetRef:c}),providers:(m,z,$)=>(c=new se(m,o,$),[{provide:se,useValue:c},{provide:Le,useValue:o.data}])})),c.afterDismissed().subscribe(()=>{this._openedBottomSheetRef===c&&(this._openedBottomSheetRef=null)}),this._openedBottomSheetRef?(this._openedBottomSheetRef.afterDismissed().subscribe(()=>c.containerInstance?.enter()),this._openedBottomSheetRef.dismiss()):c.containerInstance.enter(),this._openedBottomSheetRef=c,c}dismiss(t){this._openedBottomSheetRef&&this._openedBottomSheetRef.dismiss(t)}ngOnDestroy(){this._bottomSheetRefAtThisLevel&&this._bottomSheetRefAtThisLevel.dismiss()}static \u0275fac=function(n){return new(n||i)};static \u0275prov=L({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Ni=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=Ce({type:i});static \u0275inj=_e({providers:[Xt],imports:[wi,ze,Xe,ze]})}return i})();var vo=(i,e)=>e.value;function _o(i,e){if(i&1){let t=w();r(0,"mat-list-item",8),u("click",function(){let o=h(t).$implicit,c=g();return f(c.onSortChange(o.value))}),r(1,"div",9)(2,"mat-radio-button",10),u("change",function(){let o=h(t).$implicit,c=g();return f(c.onSortChange(o.value))}),s(3),a()()()}if(i&2){let t=e.$implicit,n=g();l(2),p("value",t.value)("checked",n.selectedSort===t.value),l(),A(" ",t.label," ")}}var Pt=class i{constructor(e){this.data=e;e?.currentSort&&(this.selectedSort=e.currentSort)}bottomSheetRef=d(se);selectedSort="relevance";sortOptions=[{value:"relevance",label:"Relevance"},{value:"best_selling",label:"Best selling"},{value:"newest",label:"Newest arrivals"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"},{value:"rating",label:"Highest Rated"}];onSortChange(e){this.selectedSort=e}showResults(){this.bottomSheetRef.dismiss(this.selectedSort)}close(){this.bottomSheetRef.dismiss()}static \u0275fac=function(t){return new(t||i)(Q(Le))};static \u0275cmp=v({type:i,selectors:[["app-mobile-sort-sheet"]],decls:13,vars:0,consts:[[1,"mobile-sort-sheet"],[1,"sheet-header"],[1,"sheet-title"],["mat-icon-button","",1,"close-button",3,"click"],[1,"sort-options"],[1,"sort-option-item"],[1,"sheet-footer"],["mat-flat-button","","color","primary",1,"show-results-button",3,"click"],[1,"sort-option-item",3,"click"],[1,"option-content"],[1,"sort-radio",3,"change","value","checked"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"h2",2),s(3,"Sort Businesses by"),a(),r(4,"button",3),u("click",function(){return n.close()}),r(5,"mat-icon"),s(6,"close"),a()()(),r(7,"mat-nav-list",4),G(8,_o,4,3,"mat-list-item",5,vo),a(),r(10,"div",6)(11,"button",7),u("click",function(){return n.showResults()}),s(12," Show Results "),a()()()),t&2&&(l(8),q(n.sortOptions))},dependencies:[O,dt,ct,lt,ft,ht,M,I,we,D,N,De],styles:[".mobile-sort-sheet[_ngcontent-%COMP%]{padding:0;min-height:400px;display:flex;flex-direction:column}.sheet-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #e5e7eb}.sheet-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#1f2937}.close-button[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center}.close-button[_ngcontent-%COMP%]     .mat-icon{font-size:20px;width:20px;height:20px}.sort-options[_ngcontent-%COMP%]{flex:1;padding:8px 0;overflow-y:auto}.sort-option-item[_ngcontent-%COMP%]{height:60px;cursor:pointer;transition:background-color .2s}.sort-option-item[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.sort-option-item[_ngcontent-%COMP%]     .mdc-list-item__content{width:100%}.option-content[_ngcontent-%COMP%]{width:100%;padding:0 20px}.sort-radio[_ngcontent-%COMP%]{width:100%}.sort-radio[_ngcontent-%COMP%]     .mdc-form-field{width:100%}.sort-radio[_ngcontent-%COMP%]     .mdc-label{font-size:16px;color:#374151;padding-left:12px}.sort-radio[_ngcontent-%COMP%]     .mdc-radio__native-control:checked~.mdc-radio__background .mdc-radio__inner-circle{border-color:#10b981;background-color:#10b981}.sort-radio[_ngcontent-%COMP%]     .mdc-radio__native-control:checked~.mdc-radio__background .mdc-radio__outer-circle{border-color:#10b981}.sheet-footer[_ngcontent-%COMP%]{padding:16px 20px;border-top:1px solid #e5e7eb;background-color:#fff}.show-results-button[_ngcontent-%COMP%]{width:100%;height:48px;border-radius:8px;font-size:16px;font-weight:600;text-transform:none;letter-spacing:0}"]})};var Co=(i,e)=>e._id,Vi=(i,e)=>e.value,xo=(i,e)=>e.code;function yo(i,e){if(i&1){let t=w();r(0,"mat-list-item",8)(1,"div",14)(2,"mat-checkbox",15),u("change",function(o){let c=h(t).$implicit,m=g();return f(m.onCategoryChange(c._id,o.checked))}),s(3),a()()()}if(i&2){let t=e.$implicit,n=g();l(2),p("checked",n.isCategorySelected(t._id)),l(),A(" ",t.name," ")}}function wo(i,e){if(i&1){let t=w();r(0,"mat-list-item",16),u("click",function(){let o=h(t).$implicit,c=g();return f(c.onBusinessTypeChange(o.value))}),r(1,"div",14)(2,"mat-radio-button",17),u("change",function(){let o=h(t).$implicit,c=g();return f(c.onBusinessTypeChange(o.value))}),s(3),a()()()}if(i&2){let t=e.$implicit,n=g();l(2),p("value",t.value)("checked",n.businessType===t.value),l(),A(" ",t.label," ")}}function Mo(i,e){if(i&1){let t=w();r(0,"mat-list-item",8)(1,"div",14)(2,"mat-checkbox",15),u("change",function(o){let c=h(t).$implicit,m=g();return f(m.onCountryChange(c.name,o.checked))}),s(3),a()()()}if(i&2){let t=e.$implicit,n=g();l(2),p("checked",n.isCountrySelected(t.name)),l(),A(" ",t.name," ")}}function So(i,e){if(i&1){let t=w();r(0,"mat-list-item",16),u("click",function(){let o=h(t).$implicit,c=g();return f(c.onRatingChange(o.value))}),r(1,"div",14)(2,"mat-radio-button",17),u("change",function(){let o=h(t).$implicit,c=g();return f(c.onRatingChange(o.value))}),s(3),a()()()}if(i&2){let t=e.$implicit,n=g();l(2),p("value",t.value)("checked",n.selectedRating===t.value),l(),A(" ",t.label," ")}}function Po(i,e){if(i&1){let t=w();r(0,"button",18),u("click",function(){h(t);let o=g();return f(o.clearAll())}),s(1," Clear All "),a()}}function ko(i,e){if(i&1&&(r(0,"span",13),s(1),a()),i&2){let t=g();l(),T(t.getActiveFiltersCount())}}var kt=class i{constructor(e){this.data=e;e&&(this.categories=e.categories||[],this.countries=e.countries||[],this.selectedCategories=[...e.selectedCategories||[]],this.businessType=e.businessType||"",this.selectedCountries=[...e.selectedCountries||[]],this.selectedRating=e.selectedRating||0)}bottomSheetRef=d(se);selectedCategories=[];businessType="";selectedCountries=[];selectedRating=0;categories=[];countries=[];businessTypeOptions=[{value:"",label:"All Types"},{value:"service",label:"Services"},{value:"product",label:"Products"},{value:"both",label:"Both"}];ratingOptions=[{value:0,label:"All ratings"},{value:1,label:"1+ stars"},{value:2,label:"2+ stars"},{value:3,label:"3+ stars"},{value:4,label:"4+ stars"},{value:5,label:"5 stars"}];isCategorySelected(e){return this.selectedCategories.includes(e)}onCategoryChange(e,t){t?this.selectedCategories.includes(e)||this.selectedCategories.push(e):this.selectedCategories=this.selectedCategories.filter(n=>n!==e)}isCountrySelected(e){return this.selectedCountries.includes(e)}onCountryChange(e,t){t?this.selectedCountries.includes(e)||this.selectedCountries.push(e):this.selectedCountries=this.selectedCountries.filter(n=>n!==e)}onBusinessTypeChange(e){this.businessType=e}onRatingChange(e){this.selectedRating=e}getActiveFiltersCount(){let e=0;return this.selectedCategories.length>0&&e++,this.businessType&&this.businessType!==""&&e++,this.selectedCountries.length>0&&e++,this.selectedRating>0&&e++,e}clearAll(){this.selectedCategories=[],this.businessType="",this.selectedCountries=[],this.selectedRating=0}showResults(){this.bottomSheetRef.dismiss({selectedCategories:this.selectedCategories,businessType:this.businessType,selectedCountries:this.selectedCountries,selectedRating:this.selectedRating})}close(){this.bottomSheetRef.dismiss()}static \u0275fac=function(t){return new(t||i)(Q(Le))};static \u0275cmp=v({type:i,selectors:[["app-mobile-filter-sheet"]],decls:38,vars:2,consts:[[1,"mobile-filter-sheet"],[1,"sheet-header"],[1,"sheet-title"],["mat-icon-button","",1,"close-button",3,"click"],[1,"filter-content"],[1,"filter-section"],[1,"section-title"],[1,"filter-list"],[1,"filter-item"],[1,"sheet-footer"],[1,"footer-actions"],["mat-stroked-button","",1,"clear-button"],["mat-flat-button","","color","primary",1,"show-results-button",3,"click"],[1,"filter-badge"],[1,"option-content"],[1,"filter-checkbox",3,"change","checked"],[1,"filter-item",3,"click"],[1,"filter-radio",3,"change","value","checked"],["mat-stroked-button","",1,"clear-button",3,"click"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"h2",2),s(3,"Filters"),a(),r(4,"button",3),u("click",function(){return n.close()}),r(5,"mat-icon"),s(6,"close"),a()()(),r(7,"div",4)(8,"div",5)(9,"h3",6),s(10,"Category"),a(),r(11,"mat-nav-list",7),G(12,yo,4,2,"mat-list-item",8,Co),a()(),r(14,"div",5)(15,"h3",6),s(16,"Service Type"),a(),r(17,"mat-nav-list",7),G(18,wo,4,3,"mat-list-item",8,Vi),a()(),r(20,"div",5)(21,"h3",6),s(22,"Heritage/Origin"),a(),r(23,"mat-nav-list",7),G(24,Mo,4,2,"mat-list-item",8,xo),a()(),r(26,"div",5)(27,"h3",6),s(28,"Minimum Rating"),a(),r(29,"mat-nav-list",7),G(30,So,4,3,"mat-list-item",8,Vi),a()()(),r(32,"div",9)(33,"div",10),x(34,Po,2,0,"button",11),r(35,"button",12),u("click",function(){return n.showResults()}),s(36," Show Results "),x(37,ko,2,1,"span",13),a()()()()),t&2&&(l(12),q(n.categories),l(6),q(n.businessTypeOptions),l(6),q(n.countries),l(6),q(n.ratingOptions),l(4),y(n.getActiveFiltersCount()>0?34:-1),l(3),y(n.getActiveFiltersCount()>0?37:-1))},dependencies:[O,dt,ct,lt,ft,ht,ut,fi,M,I,we,D,N,wt,De],styles:[".mobile-filter-sheet[_ngcontent-%COMP%]{padding:0;min-height:500px;max-height:90vh;display:flex;flex-direction:column}.sheet-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #e5e7eb;background-color:#fff;position:sticky;top:0;z-index:10}.sheet-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#1f2937}.close-button[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center}.close-button[_ngcontent-%COMP%]     .mat-icon{font-size:20px;width:20px;height:20px}.filter-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:0 0 16px}.filter-section[_ngcontent-%COMP%]{margin-bottom:8px;border-bottom:1px solid #f3f4f6}.filter-section[_ngcontent-%COMP%]:last-child{border-bottom:none}.section-title[_ngcontent-%COMP%]{margin:0;padding:16px 20px 8px;font-size:14px;font-weight:600;color:#6b7280;text-transform:uppercase;letter-spacing:.5px}.filter-list[_ngcontent-%COMP%]{padding:0}.filter-item[_ngcontent-%COMP%]{height:52px;cursor:pointer;transition:background-color .2s}.filter-item[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.filter-item[_ngcontent-%COMP%]     .mdc-list-item__content{width:100%}.option-content[_ngcontent-%COMP%]{width:100%;padding:0 20px}.filter-checkbox[_ngcontent-%COMP%], .filter-radio[_ngcontent-%COMP%]{width:100%}.filter-checkbox[_ngcontent-%COMP%]     .mdc-form-field, .filter-radio[_ngcontent-%COMP%]     .mdc-form-field{width:100%}.filter-checkbox[_ngcontent-%COMP%]     .mdc-label, .filter-radio[_ngcontent-%COMP%]     .mdc-label{font-size:15px;color:#374151;padding-left:12px}.filter-checkbox[_ngcontent-%COMP%]     .mdc-checkbox__native-control:checked~.mdc-checkbox__background{background-color:#10b981;border-color:#10b981}.filter-checkbox[_ngcontent-%COMP%]     .mdc-checkbox__checkmark{color:#fff}.filter-radio[_ngcontent-%COMP%]     .mdc-radio__native-control:checked~.mdc-radio__background .mdc-radio__inner-circle{border-color:#10b981;background-color:#10b981}.filter-radio[_ngcontent-%COMP%]     .mdc-radio__native-control:checked~.mdc-radio__background .mdc-radio__outer-circle{border-color:#10b981}.sheet-footer[_ngcontent-%COMP%]{padding:16px 20px;border-top:1px solid #e5e7eb;background-color:#fff;position:sticky;bottom:0;z-index:10}.footer-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.clear-button[_ngcontent-%COMP%]{height:48px;border-radius:8px;font-size:16px;font-weight:600;text-transform:none;letter-spacing:0;color:#dc2626;border-color:#dc2626}.show-results-button[_ngcontent-%COMP%]{flex:1;height:48px;border-radius:8px;font-size:16px;font-weight:600;text-transform:none;letter-spacing:0;position:relative}.filter-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;background-color:#ffffff4d;border-radius:12px;padding:2px 8px;margin-left:8px;font-size:12px;font-weight:700}"]})};var To=(i,e)=>e._id,Ao=(i,e)=>e.code;function Fo(i,e){if(i&1&&(r(0,"span",28),s(1),a()),i&2){let t=g(2);l(),A(" ",t.getActiveFiltersCount()," ")}}function Do(i,e){if(i&1){let t=w();r(0,"div",4)(1,"app-search",23),me("searchQueryChange",function(o){h(t);let c=g();return pe(c.searchQuery,o)||(c.searchQuery=o),f(o)}),u("searchEvent",function(o){h(t);let c=g();return f(c.onSearchChange(o))}),a(),r(2,"div",24)(3,"button",25),u("click",function(){h(t);let o=g();return f(o.openMobileFilterSheet())}),r(4,"div",26)(5,"mat-icon",27),s(6,"tune"),a(),r(7,"span"),s(8,"Filter"),a(),x(9,Fo,2,1,"span",28),a()(),r(10,"button",29),u("click",function(){h(t);let o=g();return f(o.openMobileSortSheet())}),r(11,"div",26)(12,"mat-icon",27),s(13,"sort"),a(),r(14,"span"),s(15,"Sort"),a()()()()()}if(i&2){let t=g();l(),de("searchQuery",t.searchQuery),p("backgroundColor","#ffffff")("boxShadow","0 2px 6px 0 #20212451")("placeholder","Search business or service"),l(8),y(t.hasActiveFilters()?9:-1)}}function Ro(i,e){if(i&1&&(r(0,"mat-option",9),s(1),a()),i&2){let t=e.$implicit;p("value",t._id),l(),T(t.name)}}function Io(i,e){if(i&1&&(r(0,"mat-option",9),s(1),a()),i&2){let t=e.$implicit;p("value",t.name),l(),T(t.name)}}function Bo(i,e){i&1&&(r(0,"mat-icon"),s(1,"check"),a())}function No(i,e){i&1&&(r(0,"mat-icon"),s(1,"check"),a())}function Vo(i,e){i&1&&(r(0,"mat-icon"),s(1,"check"),a())}function jo(i,e){i&1&&(r(0,"mat-icon"),s(1,"check"),a())}function Ho(i,e){i&1&&(r(0,"mat-icon"),s(1,"check"),a())}function zo(i,e){i&1&&(r(0,"mat-icon"),s(1,"check"),a())}function Lo(i,e){if(i&1){let t=w();r(0,"button",30),u("click",function(){h(t);let o=g();return f(o.clearFilters())}),r(1,"mat-icon"),s(2,"clear"),a(),s(3," Clear filters "),a()}}var Ot=class i{fb=d(Fe);categoryService=d(Ie);elementRef=d(mn);bottomSheet=d(Xt);countries=C([]);showSearchInput=C(!1);totalResults=C(0);initialSearchQuery=C("");initialCategories=C([]);initialBusinessType=C("");initialCountries=C([]);initialRating=C(0);initialSortBy=C("relevance");filtersChange=te();searchQueryControl=new ge("");selectedCategoriesControl=new ge([]);businessTypeControl=new ge("");selectedCountriesControl=new ge([]);selectedRatingControl=new ge(0);sortByControl=new ge("relevance");categories=b([]);hasActiveFilters=b(!1);isScrolled=b(!1);categoriesLoaded=b(!1);get searchQuery(){return this.searchQueryControl.value||""}set searchQuery(e){this.searchQueryControl.setValue(e)}constructor(){j(()=>{if(!this.categoriesLoaded())return;let e=this.initialSearchQuery(),t=this.initialCategories(),n=this.initialBusinessType(),o=this.initialCountries(),c=this.initialRating(),m=this.initialSortBy();e!==this.searchQueryControl.value&&this.searchQueryControl.setValue(e,{emitEvent:!1}),JSON.stringify(t)!==JSON.stringify(this.selectedCategoriesControl.value)&&this.selectedCategoriesControl.setValue(t,{emitEvent:!1}),n!==this.businessTypeControl.value&&this.businessTypeControl.setValue(n,{emitEvent:!1}),JSON.stringify(o)!==JSON.stringify(this.selectedCountriesControl.value)&&this.selectedCountriesControl.setValue(o,{emitEvent:!1}),c!==this.selectedRatingControl.value&&this.selectedRatingControl.setValue(c,{emitEvent:!1}),m!==this.sortByControl.value&&this.sortByControl.setValue(m,{emitEvent:!1}),this.updateActiveFiltersState()})}ngOnInit(){this.loadCategories(),this.searchQueryControl.valueChanges.subscribe(()=>this.updateActiveFiltersState()),this.selectedCategoriesControl.valueChanges.subscribe(()=>this.updateActiveFiltersState()),this.businessTypeControl.valueChanges.subscribe(()=>this.updateActiveFiltersState()),this.selectedCountriesControl.valueChanges.subscribe(()=>this.updateActiveFiltersState()),this.selectedRatingControl.valueChanges.subscribe(()=>this.updateActiveFiltersState()),this.sortByControl.valueChanges.subscribe(()=>this.updateActiveFiltersState()),typeof window<"u"&&window.addEventListener("scroll",this.handleScroll.bind(this),{passive:!0})}ngAfterViewInit(){}ngOnDestroy(){typeof window<"u"&&window.removeEventListener("scroll",this.handleScroll.bind(this))}handleScroll(){let e=window.scrollY;this.isScrolled.set(e>10)}loadCategories(){return S(this,null,function*(){try{let e=yield this.categoryService.getCategories().toPromise();if(e?.success&&e.data){let t=e.data.filter(n=>n.is_active);this.categories.set(t),this.categoriesLoaded.set(!0)}}catch(e){console.error("Error loading categories:",e)}})}onFilterChange(){let e={searchQuery:this.searchQueryControl.value||"",selectedCategories:this.selectedCategoriesControl.value||[],businessType:this.businessTypeControl.value||"",selectedCountries:this.selectedCountriesControl.value||[],selectedRating:this.selectedRatingControl.value||0,sortBy:this.sortByControl.value||"relevance"};this.filtersChange.emit(e)}onSearchChange(e){this.searchQueryControl.setValue(e),this.onFilterChange()}onSortChange(e){this.sortByControl.setValue(e),this.onFilterChange()}getSortLabel(){let e=this.sortByControl.value||"relevance";return{relevance:"Relevance",best_selling:"Best selling",newest:"Newest arrivals",price_low:"Price: Low to High",price_high:"Price: High to Low",rating:"Highest Rated"}[e]||"Relevance"}openMobileSortSheet(){this.bottomSheet.open(Pt,{data:{currentSort:this.sortByControl.value},panelClass:"mobile-sort-bottom-sheet"}).afterDismissed().subscribe(t=>{t&&this.onSortChange(t)})}openMobileFilterSheet(){this.bottomSheet.open(kt,{data:{categories:this.categories(),countries:this.countries(),selectedCategories:this.selectedCategoriesControl.value||[],businessType:this.businessTypeControl.value||"",selectedCountries:this.selectedCountriesControl.value||[],selectedRating:this.selectedRatingControl.value||0},panelClass:"mobile-filter-bottom-sheet"}).afterDismissed().subscribe(t=>{t&&(this.selectedCategoriesControl.setValue(t.selectedCategories),this.businessTypeControl.setValue(t.businessType),this.selectedCountriesControl.setValue(t.selectedCountries),this.selectedRatingControl.setValue(t.selectedRating),this.onFilterChange())})}clearFilters(){this.searchQueryControl.setValue(""),this.selectedCategoriesControl.setValue([]),this.businessTypeControl.setValue(""),this.selectedCountriesControl.setValue([]),this.selectedRatingControl.setValue(0),this.sortByControl.setValue("relevance"),this.onFilterChange()}getActiveFiltersCount(){let e=0;return this.selectedCategoriesControl.value&&this.selectedCategoriesControl.value.length>0&&e++,this.businessTypeControl.value&&this.businessTypeControl.value!==""&&e++,this.selectedCountriesControl.value&&this.selectedCountriesControl.value.length>0&&e++,this.selectedRatingControl.value!==null&&this.selectedRatingControl.value>0&&e++,e}updateActiveFiltersState(){let e=this.searchQueryControl.value&&this.searchQueryControl.value.trim().length>0||this.selectedCategoriesControl.value&&this.selectedCategoriesControl.value.length>0||this.businessTypeControl.value&&this.businessTypeControl.value!==""||this.selectedCountriesControl.value&&this.selectedCountriesControl.value.length>0||this.selectedRatingControl.value!==null&&this.selectedRatingControl.value>0;this.hasActiveFilters.set(!!e)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-search-filters"]],inputs:{countries:[1,"countries"],showSearchInput:[1,"showSearchInput"],totalResults:[1,"totalResults"],initialSearchQuery:[1,"initialSearchQuery"],initialCategories:[1,"initialCategories"],initialBusinessType:[1,"initialBusinessType"],initialCountries:[1,"initialCountries"],initialRating:[1,"initialRating"],initialSortBy:[1,"initialSortBy"]},outputs:{filtersChange:"filtersChange"},decls:82,vars:35,consts:[["sortMenu","matMenu"],[1,"filters-container","fixed","top-16","left-0","right-0","z-40","bg-white","border-b","border-gray-200","transition-shadow","duration-300"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-4"],[1,"space-y-4"],[1,"lg:hidden"],[1,"hidden","lg:flex","lg:flex-row","lg:items-center","gap-3"],[1,"flex","flex-wrap","items-center","gap-2"],["appearance","outline",1,"compact-field"],["multiple","",3,"selectionChange","formControl"],[3,"value"],[3,"selectionChange","formControl"],["value",""],["value","service"],["value","product"],["value","both"],[1,"flex","items-center","gap-3","ml-auto"],["mat-stroked-button","",1,"sort-button",3,"matMenuTriggerFor"],[1,"ml-1"],["mat-menu-item","",3,"click"],[4,"ngIf"],["mat-stroked-button","","type","button","color","warn",1,"clear-button"],[1,"text-sm","text-gray-600"],[1,"font-medium"],[3,"searchQueryChange","searchEvent","searchQuery","backgroundColor","boxShadow","placeholder"],[1,"grid","grid-cols-2","gap-3","mt-3"],["mat-stroked-button","",1,"mobile-filter-button",3,"click"],[1,"flex","items-center","justify-center","gap-2"],[1,"text-green-600"],[1,"bg-green-600","text-white","text-xs","rounded-full","px-2","py-0.5","ml-1"],["mat-stroked-button","",1,"mobile-sort-button",3,"click"],["mat-stroked-button","","type","button","color","warn",1,"clear-button",3,"click"]],template:function(t,n){if(t&1){let o=w();r(0,"div",1)(1,"div",2)(2,"div",3),x(3,Do,16,5,"div",4),r(4,"div",5)(5,"div",6)(6,"mat-form-field",7)(7,"mat-label"),s(8,"Category"),a(),r(9,"mat-select",8),u("selectionChange",function(){return h(o),f(n.onFilterChange())}),G(10,Ro,2,2,"mat-option",9,To),a()(),r(12,"mat-form-field",7)(13,"mat-label"),s(14,"Service Type"),a(),r(15,"mat-select",10),u("selectionChange",function(){return h(o),f(n.onFilterChange())}),r(16,"mat-option",11),s(17,"All Types"),a(),r(18,"mat-option",12),s(19,"Services"),a(),r(20,"mat-option",13),s(21,"Products"),a(),r(22,"mat-option",14),s(23,"Both"),a()()(),r(24,"mat-form-field",7)(25,"mat-label"),s(26,"Heritage/Origin"),a(),r(27,"mat-select",8),u("selectionChange",function(){return h(o),f(n.onFilterChange())}),G(28,Io,2,2,"mat-option",9,Ao),a()(),r(30,"mat-form-field",7)(31,"mat-label"),s(32,"Minimum Rating"),a(),r(33,"mat-select",10),u("selectionChange",function(){return h(o),f(n.onFilterChange())}),r(34,"mat-option",9),s(35,"All ratings"),a(),r(36,"mat-option",9),s(37,"1+ stars"),a(),r(38,"mat-option",9),s(39,"2+ stars"),a(),r(40,"mat-option",9),s(41,"3+ stars"),a(),r(42,"mat-option",9),s(43,"4+ stars"),a(),r(44,"mat-option",9),s(45,"5 stars"),a()()()(),r(46,"div",15)(47,"button",16),s(48),r(49,"mat-icon",17),s(50,"expand_more"),a()(),r(51,"mat-menu",null,0)(53,"button",18),u("click",function(){return h(o),f(n.onSortChange("relevance"))}),B(54,Bo,2,0,"mat-icon",19),r(55,"span"),s(56,"Relevance"),a()(),r(57,"button",18),u("click",function(){return h(o),f(n.onSortChange("best_selling"))}),B(58,No,2,0,"mat-icon",19),r(59,"span"),s(60,"Best selling"),a()(),r(61,"button",18),u("click",function(){return h(o),f(n.onSortChange("newest"))}),B(62,Vo,2,0,"mat-icon",19),r(63,"span"),s(64,"Newest arrivals"),a()(),r(65,"button",18),u("click",function(){return h(o),f(n.onSortChange("price_low"))}),B(66,jo,2,0,"mat-icon",19),r(67,"span"),s(68,"Price: Low to High"),a()(),r(69,"button",18),u("click",function(){return h(o),f(n.onSortChange("price_high"))}),B(70,Ho,2,0,"mat-icon",19),r(71,"span"),s(72,"Price: High to Low"),a()(),r(73,"button",18),u("click",function(){return h(o),f(n.onSortChange("rating"))}),B(74,zo,2,0,"mat-icon",19),r(75,"span"),s(76,"Highest Rated"),a()()(),x(77,Lo,4,0,"button",20),a()(),r(78,"div",21)(79,"span",22),s(80),a(),s(81," businesses found "),a()()()()}if(t&2){let o=ee(52);V("shadow-md",n.isScrolled()),l(3),y(n.showSearchInput()?3:-1),l(6),p("formControl",n.selectedCategoriesControl),l(),q(n.categories()),l(5),p("formControl",n.businessTypeControl),l(12),p("formControl",n.selectedCountriesControl),l(),q(n.countries()),l(5),p("formControl",n.selectedRatingControl),l(),p("value",0),l(2),p("value",1),l(2),p("value",2),l(2),p("value",3),l(2),p("value",4),l(2),p("value",5),l(3),p("matMenuTriggerFor",o),l(),A(" Sort by: ",n.getSortLabel()," "),l(6),p("ngIf",n.sortByControl.value==="relevance"),l(),V("ml-6",n.sortByControl.value!=="relevance"),l(3),p("ngIf",n.sortByControl.value==="best_selling"),l(),V("ml-6",n.sortByControl.value!=="best_selling"),l(3),p("ngIf",n.sortByControl.value==="newest"),l(),V("ml-6",n.sortByControl.value!=="newest"),l(3),p("ngIf",n.sortByControl.value==="price_low"),l(),V("ml-6",n.sortByControl.value!=="price_low"),l(3),p("ngIf",n.sortByControl.value==="price_high"),l(),V("ml-6",n.sortByControl.value!=="price_high"),l(3),p("ngIf",n.sortByControl.value==="rating"),l(),V("ml-6",n.sortByControl.value!=="rating"),l(2),y(n.hasActiveFilters()?77:-1),l(3),T(n.totalResults())}},dependencies:[O,ne,Re,nt,li,M,I,D,N,Me,Gn,Qn,qn,re,K,rt,ot,ie,mi,Hn,oe,Ni,it],styles:[".search-filter-menu .mat-mdc-menu-content{padding:8px 0}  .search-filter-menu .mat-mdc-menu-item{min-height:44px}  .search-filter-menu .mat-mdc-menu-item:hover{background-color:#20aa6214}  mat-chip{cursor:pointer}.filters-container[_ngcontent-%COMP%]{position:fixed;top:64px;left:0;right:0;z-index:40;background-color:#fff}  .compact-field{width:auto;min-width:160px}  .compact-field .mat-mdc-form-field-infix{padding:8px 0;min-height:40px}  .compact-field .mat-mdc-text-field-wrapper{padding:0 12px}  .compact-field .mat-mdc-form-field-subscript-wrapper{display:none}  .sort-button{height:40px;border-radius:20px;padding:0 16px;font-size:14px;white-space:nowrap}  .sort-button .mat-icon{font-size:18px;width:18px;height:18px;margin-left:4px}  .mobile-filter-button,   .mobile-sort-button{height:48px;border-radius:8px;font-size:16px;font-weight:500;border:1px solid #e5e7eb}  .mobile-filter-button .mat-icon,   .mobile-sort-button .mat-icon{font-size:20px;width:20px;height:20px}  .clear-button{height:40px;border-radius:20px;padding:0 16px;font-size:14px;white-space:nowrap}  .clear-button .mat-icon{font-size:18px;width:18px;height:18px;margin-right:4px}  .mobile-sort-bottom-sheet .mat-bottom-sheet-container,   .mobile-filter-bottom-sheet .mat-bottom-sheet-container{padding:0;border-radius:16px 16px 0 0;max-height:90vh}"]})};var Uo=()=>[12,24,48],Qo=(i,e)=>e._id;function Go(i,e){i&1&&_(0,"app-user-sidenav")}function qo(i,e){i&1&&_(0,"app-guest-sidenav")}function $o(i,e){i&1&&(r(0,"div",12),_(1,"mat-spinner",15),r(2,"span",16),s(3,"Finding services..."),a()())}function Wo(i,e){if(i&1&&(r(0,"div",13)(1,"div",17)(2,"mat-icon",18),s(3,"error"),a(),r(4,"span",19),s(5),a()()()),i&2){let t=g();l(5),T(t.error())}}function Yo(i,e){if(i&1){let t=w();r(0,"div",14)(1,"mat-icon",20),s(2,"search_off"),a(),r(3,"h3",21),s(4,"No services found"),a(),r(5,"p",22),s(6,"Try adjusting your search terms or filters"),a(),r(7,"button",23),u("click",function(){h(t);let o=g();return f(o.clearFilters())}),s(8," Clear filters "),a()()}}function Ko(i,e){if(i&1){let t=w();r(0,"app-business-card",27),u("businessClick",function(o){h(t);let c=g(2);return f(c.onBusinessClick(o))}),a()}if(i&2){let t=e.$implicit,n=g(2);p("business",t)("ownerName",n.getOwnerName(t))("ownerAvatar",n.getOwnerAvatar(t))("ownerCountry",n.getOwnerCountry(t))("categoryName",n.getCategoryName(t))}}function Zo(i,e){if(i&1){let t=w();r(0,"div",26)(1,"mat-paginator",28),u("page",function(o){h(t);let c=g(2);return f(c.onPageChange(o.pageIndex+1))}),a()()}if(i&2){let t=g(2);l(),p("length",t.total())("pageSize",12)("pageIndex",t.currentPage()-1)("pageSizeOptions",_n(4,Uo))}}function Jo(i,e){if(i&1&&(r(0,"div",24),G(1,Ko,1,5,"app-business-card",25,Qo),a(),x(3,Zo,2,5,"div",26)),i&2){let t=g();l(),q(t.businesses()),l(2),y(t.totalPages()>1?3:-1)}}var Et=class i{route=d(ye);router=d(F);fb=d(Fe);businessService=d(tt);categoryService=d(Ie);authService=d(Y);headerComponent;searchQuery=b("");selectedCountries=b([]);selectedCategories=b([]);selectedBusinessTypes=b([]);selectedRating=b(0);selectedSortBy=b("relevance");businesses=b([]);categories=b([]);loading=b(!1);error=b(null);total=b(0);currentPage=b(1);totalPages=b(0);filtersOpen=b(!1);currentUser=R(()=>this.authService.user());isClientMode=R(()=>{let e=this.authService.user();return!e||e.user_mode==="client"});filterForm;countries=at;businessTypes=[{value:"service",label:"Service"},{value:"product",label:"Product"},{value:"both",label:"Both"}];ratingOptions=[{value:0,label:"All ratings"},{value:1,label:"1+ stars"},{value:2,label:"2+ stars"},{value:3,label:"3+ stars"},{value:4,label:"4+ stars"},{value:5,label:"5 stars"}];hasResults=R(()=>this.businesses().length>0);hasSearched=R(()=>this.searchQuery()||this.selectedCountries().length>0||this.selectedCategories().length>0||this.selectedBusinessTypes().length>0||this.selectedRating()>0);hasActiveFilters=R(()=>{let e=this.filterForm?.value;return!!(e?.selectedCountries?.length>0||e?.businessType||e?.location||e?.selectedCategories?.length>0||e?.selectedBusinessTypes?.length>0||e?.selectedRating>0)});constructor(){j(()=>{if(this.headerComponent){let e=this.headerComponent.headerSearchQuery();e!==this.searchQuery()&&(this.searchQuery.set(e),this.filterForm?.patchValue({searchQuery:e},{emitEvent:!1}),this.onSearch())}}),j(()=>{let e=this.searchQuery();this.headerComponent&&e!==this.headerComponent.headerSearchQuery()&&this.headerComponent.headerSearchQuery.set(e)})}ngOnInit(){this.initializeForm(),this.loadCategories(),this.route.queryParams.subscribe(e=>{this.searchQuery.set(e.q||""),this.selectedCountries.set(e.countries?e.countries.split(","):[]),this.selectedCategories.set(e.categories?e.categories.split(","):[]),this.selectedBusinessTypes.set(e.businessType?[e.businessType]:[]),this.selectedRating.set(parseInt(e.rating)||0),this.selectedSortBy.set(e.sortBy||"relevance"),this.currentPage.set(parseInt(e.page)||1),this.filterForm.patchValue({searchQuery:this.searchQuery(),selectedCountries:this.selectedCountries(),selectedCategories:this.selectedCategories(),selectedBusinessTypes:this.selectedBusinessTypes(),selectedRating:this.selectedRating()},{emitEvent:!1}),this.performSearch()})}initializeForm(){this.filterForm=this.fb.group({searchQuery:[this.searchQuery()],selectedCountries:[this.selectedCountries()],selectedCategories:[this.selectedCategories()],selectedBusinessTypes:[this.selectedBusinessTypes()],selectedRating:[this.selectedRating()],businessType:[""],location:[""]})}loadCategories(){return S(this,null,function*(){try{let e=yield this.categoryService.loadCategories();this.categories.set(e)}catch(e){console.error("Error loading categories:",e)}})}performSearch(){return S(this,null,function*(){let e=this.searchQuery(),t=this.selectedCountries(),n=this.selectedCategories(),o=this.selectedBusinessTypes(),c=this.selectedRating(),m=this.selectedSortBy(),z=this.currentPage(),$=t.length>0||n.length>0||o.length>0||c>0||m&&m!=="relevance";if(!e&&!$&&this.isClientMode()){this.loadVerifiedBusinesses();return}if(!e&&!$){this.businesses.set([]),this.total.set(0),this.totalPages.set(0);return}try{this.loading.set(!0),this.error.set(null);let W={};n.length>0&&(W.categories=n),o.length>0&&o[0]&&(W.businessType=o[0]),c>0&&(W.rating=c),m&&m!=="relevance"&&(W.sortBy=m);let Be=yield this.businessService.searchBusinesses(e||void 0,t.length>0?t:void 0,z,12,W).toPromise();Be?.success&&Be.data?(this.businesses.set(Be.data.businesses),this.total.set(Be.data.total),this.totalPages.set(Be.data.totalPages)):this.error.set("Failed to search businesses")}catch(W){console.error("Search error:",W),this.error.set("An error occurred while searching")}finally{this.loading.set(!1)}})}loadVerifiedBusinesses(){return S(this,null,function*(){try{this.loading.set(!0),this.error.set(null);let e=yield this.businessService.searchBusinesses(void 0,void 0,this.currentPage(),12,{featured:!0}).toPromise();e?.success&&e.data?(this.businesses.set(e.data.businesses),this.total.set(e.data.total),this.totalPages.set(e.data.totalPages)):this.error.set("Failed to load verified businesses")}catch(e){console.error("Load verified businesses error:",e),this.error.set("An error occurred while loading verified businesses")}finally{this.loading.set(!1)}})}onFiltersChange(e){let t={page:1};e.searchQuery?.trim()&&(t.q=e.searchQuery.trim()),e.selectedCountries&&e.selectedCountries.length>0&&(t.countries=e.selectedCountries.join(",")),e.selectedCategories&&e.selectedCategories.length>0&&(t.categories=e.selectedCategories.join(",")),e.businessType&&(t.businessType=e.businessType),e.selectedRating&&e.selectedRating>0&&(t.rating=e.selectedRating),e.sortBy&&e.sortBy!=="relevance"&&(t.sortBy=e.sortBy),this.router.navigate(["/search"],{queryParams:t})}onSearch(){let e=this.filterForm.value,t={page:1};e.searchQuery?.trim()&&(t.q=e.searchQuery.trim()),e.selectedCountries&&e.selectedCountries.length>0&&(t.countries=e.selectedCountries.join(",")),e.selectedCategories&&e.selectedCategories.length>0&&(t.categories=e.selectedCategories.join(",")),e.selectedBusinessTypes&&e.selectedBusinessTypes.length>0&&(t.businessTypes=e.selectedBusinessTypes.join(",")),e.selectedRating&&e.selectedRating>0&&(t.rating=e.selectedRating),this.router.navigate(["/search"],{queryParams:t})}clearFilters(){this.filterForm.reset({searchQuery:"",selectedCountries:[],selectedCategories:[],selectedBusinessTypes:[],selectedRating:0,businessType:"",location:""}),this.onSearch()}toggleFilters(){this.filtersOpen.update(e=>!e)}onPageChange(e){let t=this.route.snapshot.queryParams;this.router.navigate(["/search"],{queryParams:Ne(Z({},t),{page:e})})}getOwnerName(e){let t=e.owner_id;return t?.first_name&&t?.last_name?`${t.first_name} ${t.last_name}`:t?.first_name?t.first_name:t?.email?t.email:"Business Owner"}getOwnerCountry(e){return e.owner_id?.country_of_origin||"Unknown"}getCategoryName(e){return e.category_id?.name||"Uncategorized"}getOwnerAvatar(e){return e.owner_id?.profile_image_url||null}onBusinessClick(e){this.router.navigate(["/business/profile",e._id])}generatePageNumbers(){let e=this.totalPages(),t=this.currentPage(),n=5;if(e<=n)return Array.from({length:e},(m,z)=>z+1);let o=Math.max(1,t-Math.floor(n/2)),c=Math.min(e,o+n-1);return Array.from({length:c-o+1},(m,z)=>o+z)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-search"]],viewQuery:function(t,n){if(t&1&&Gt(he,5),t&2){let o;qt(o=$t())&&(n.headerComponent=o.first)}},decls:19,vars:26,consts:[["drawer",""],["drawerContent",""],[3,"drawer","maxWidth"],["autosize","",1,"content-body",3,"hasBackdrop"],[1,"drawer",3,"mode"],[1,"bg-[#F4F2EE]!"],[1,"min-h-screen","bg-[#F4F2EE]"],[1,"hidden","lg:block"],[3,"filtersChange","countries","totalResults","initialSearchQuery","initialCategories","initialBusinessType","initialCountries","initialRating","initialSortBy"],[1,"lg:hidden"],[3,"filtersChange","countries","showSearchInput","totalResults","initialSearchQuery","initialCategories","initialBusinessType","initialCountries","initialRating","initialSortBy"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8","pt-[212px]","lg:pt-[172px]"],[1,"flex","justify-center","items-center","py-12"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4","mb-6"],[1,"text-center","py-12"],["diameter","50"],[1,"ml-4","text-gray-600"],[1,"flex","items-center"],[1,"text-red-500","mr-2"],[1,"text-red-700"],[1,"text-6xl","text-gray-400","mb-4"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-600","mb-4"],["mat-raised-button","","color","primary",3,"click"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-6","mb-8"],[3,"business","ownerName","ownerAvatar","ownerCountry","categoryName"],[1,"flex","justify-left"],[3,"businessClick","business","ownerName","ownerAvatar","ownerCountry","categoryName"],["showFirstLastButtons","",3,"page","length","pageSize","pageIndex","pageSizeOptions"]],template:function(t,n){if(t&1){let o=w();_(0,"app-header",2),r(1,"mat-drawer-container",3)(2,"mat-drawer",4,0),x(4,Go,1,0,"app-user-sidenav")(5,qo,1,0,"app-guest-sidenav"),a(),r(6,"mat-drawer-content",5,1)(8,"div",6)(9,"div",7)(10,"app-search-filters",8),u("filtersChange",function(m){return h(o),f(n.onFiltersChange(m))}),a()(),r(11,"div",9)(12,"app-search-filters",10),u("filtersChange",function(m){return h(o),f(n.onFiltersChange(m))}),a()(),r(13,"div",11),x(14,$o,4,0,"div",12),x(15,Wo,6,1,"div",13),x(16,Yo,9,0,"div",14),x(17,Jo,4,1),a(),_(18,"footer-component"),a()()()}if(t&2){let o=ee(3);p("drawer",o)("maxWidth","max-w-7xl"),l(),p("hasBackdrop",!0),l(),p("mode","over"),l(2),y(n.currentUser()?4:5),l(6),p("countries",n.countries)("totalResults",n.total())("initialSearchQuery",n.searchQuery())("initialCategories",n.selectedCategories())("initialBusinessType",n.selectedBusinessTypes()[0]||"")("initialCountries",n.selectedCountries())("initialRating",n.selectedRating())("initialSortBy",n.selectedSortBy()),l(2),p("countries",n.countries)("showSearchInput",!0)("totalResults",n.total())("initialSearchQuery",n.searchQuery())("initialCategories",n.selectedCategories())("initialBusinessType",n.selectedBusinessTypes()[0]||"")("initialCountries",n.selectedCountries())("initialRating",n.selectedRating())("initialSortBy",n.selectedSortBy()),l(2),y(n.loading()?14:-1),l(),y(n.error()?15:-1),l(),y(!n.loading()&&n.hasSearched()&&!n.hasResults()?16:-1),l(),y(!n.loading()&&n.hasResults()?17:-1)}},dependencies:[O,Re,ie,K,oe,M,I,ut,re,D,N,_i,vi,Ae,Te,Ci,Oe,Pe,ke,Se,wt,et,gt,he,st,Mt,Ot,mt,pt],styles:[".drawer[_ngcontent-%COMP%]{height:calc(100vh - 64px);border-radius:0}.content-body[_ngcontent-%COMP%]{height:calc(100vh - 64px);overflow-y:scroll}.line-clamp-1[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:1;line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.business-card[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.business-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 25px 50px -12px #00000040}.business-gradient-1[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)}.business-gradient-2[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f093fb,#f5576c)}.business-gradient-3[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4facfe,#00f2fe)}.business-gradient-4[_ngcontent-%COMP%]{background:linear-gradient(135deg,#43e97b,#38f9d7)}.business-gradient-5[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fa709a,#fee140)}.search-form[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{transition:all .3s ease}.search-form[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{transform:scale(1.02);box-shadow:0 10px 25px -5px #3b82f64d}.filter-pill[_ngcontent-%COMP%]{transition:all .2s ease}.filter-pill[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}.rating-stars[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]{transition:color .2s ease}.business-type-badge.service[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dbeafe,#bfdbfe);color:#1e40af}.business-type-badge.product[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dcfce7,#bbf7d0);color:#166534}.business-type-badge.both[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fef3c7,#fde68a);color:#92400e}.featured-badge[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_glow 2s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_glow{0%{box-shadow:0 0 5px #fbbf2480}to{box-shadow:0 0 20px #fbbf24cc}}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.business-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]{height:120px}.business-card[_ngcontent-%COMP%]   .business-logo[_ngcontent-%COMP%]{width:60px;height:60px}}*[_ngcontent-%COMP%]{transition:color .2s ease,background-color .2s ease,border-color .2s ease,transform .2s ease,box-shadow .2s ease}"]})};var Tt=class i{constructor(e){this.http=e}apiUrl=`${Ee.api.baseUrl}/paypal-accounts`;getConnectUrl(){return this.http.get(`${this.apiUrl}/connect-url`)}connectAccount(e){return this.http.post(`${this.apiUrl}/connect`,e)}getAccounts(){return this.http.get(this.apiUrl)}getAccount(e){return this.http.get(`${this.apiUrl}/${e}`)}refreshAccount(e){return this.http.post(`${this.apiUrl}/${e}/refresh`,{})}disconnectAccount(e){return this.http.post(`${this.apiUrl}/${e}/disconnect`,{})}verifyAccount(e){return this.http.post(`${this.apiUrl}/${e}/verify`,{})}initiatePayPalConnection(e){return S(this,null,function*(){try{let t=yield this.getConnectUrl().toPromise();if(!t?.auth_url)throw new Error("Failed to get PayPal OAuth URL");let n=window.open(t.auth_url,"paypal-oauth","width=500,height=600,scrollbars=yes,resizable=yes");if(!n)throw new Error("Popup blocked. Please allow popups for this site.");return new Promise((o,c)=>{let m=setInterval(()=>{n.closed&&(clearInterval(m),c(new Error("PayPal connection was cancelled")))},1e3),z=$=>{$.origin===window.location.origin&&($.data.type==="PAYPAL_OAUTH_SUCCESS"?(clearInterval(m),window.removeEventListener("message",z),n.close(),this.connectAccount({code:$.data.code,state:$.data.state}).subscribe({next:W=>o(W),error:W=>c(W)})):$.data.type==="PAYPAL_OAUTH_ERROR"&&(clearInterval(m),window.removeEventListener("message",z),n.close(),c(new Error($.data.error||"PayPal connection failed"))))};window.addEventListener("message",z)})}catch(t){throw console.error("PayPal connection error:",t),t}})}static \u0275fac=function(t){return new(t||i)(sn(Ke))};static \u0275prov=L({token:i,factory:i.\u0275fac,providedIn:"root"})};function tr(i,e){i&1&&(r(0,"div",4),_(1,"mat-spinner",5),r(2,"h2"),s(3,"Connecting PayPal Account"),a(),r(4,"p"),s(5,"Please wait while we connect your PayPal account..."),a()())}function nr(i,e){if(i&1&&(r(0,"div",12)(1,"p")(2,"strong"),s(3,"Email:"),a(),s(4),a(),r(5,"p")(6,"strong"),s(7,"Status:"),a(),s(8),a()()),i&2){let t=g(2);l(4),A(" ",t.connectedAccount.email),l(4),A(" ",t.connectedAccount.is_verified?"Verified":"Not Verified")}}function ir(i,e){if(i&1){let t=w();r(0,"div",6)(1,"mat-icon",7),s(2,"check_circle"),a(),r(3,"h2"),s(4,"PayPal Account Connected!"),a(),r(5,"p"),s(6,"Your PayPal account has been successfully connected."),a(),B(7,nr,9,2,"div",8),r(8,"div",9)(9,"button",10),u("click",function(){h(t);let o=g();return f(o.goToPayPalAccounts())}),s(10," View PayPal Accounts "),a(),r(11,"button",11),u("click",function(){h(t);let o=g();return f(o.goToWithdrawals())}),s(12," Create Withdrawal "),a()()()}if(i&2){let t=g();l(7),p("ngIf",t.connectedAccount)}}function or(i,e){if(i&1){let t=w();r(0,"div",13)(1,"mat-icon",14),s(2,"error"),a(),r(3,"h2"),s(4,"Connection Failed"),a(),r(5,"p"),s(6),a(),r(7,"div",9)(8,"button",10),u("click",function(){h(t);let o=g();return f(o.retry())}),s(9," Try Again "),a(),r(10,"button",11),u("click",function(){h(t);let o=g();return f(o.goToPayPalAccounts())}),s(11," Go Back "),a()()()}if(i&2){let t=g();l(6),T(t.errorMessage)}}var At=class i{constructor(e,t,n){this.route=e;this.router=t;this.paypalService=n}processing=!0;success=!1;error=!1;errorMessage="";connectedAccount=null;ngOnInit(){this.handleCallback()}handleCallback(){this.route.queryParams.subscribe(e=>{let t=e.code,n=e.state,o=e.error,c=e.error_description;if(o){this.handleError(c||o);return}if(!t||!n){this.handleError("Missing authorization code or state parameter");return}this.paypalService.connectAccount({code:t,state:n}).subscribe({next:m=>{this.processing=!1,this.success=!0,this.connectedAccount=m,window.opener&&(window.opener.postMessage({type:"PAYPAL_OAUTH_SUCCESS",code:t,state:n,account:m},window.location.origin),window.close())},error:m=>{console.error("PayPal connection error:",m),this.handleError(m.error?.message||"Failed to connect PayPal account"),window.opener&&(window.opener.postMessage({type:"PAYPAL_OAUTH_ERROR",error:m.error?.message||"Failed to connect PayPal account"},window.location.origin),window.close())}})})}handleError(e){this.processing=!1,this.error=!0,this.errorMessage=e}retry(){this.processing=!0,this.error=!1,this.success=!1,this.handleCallback()}goToPayPalAccounts(){this.router.navigate(["/paypal-accounts"])}goToWithdrawals(){this.router.navigate(["/withdrawals"])}static \u0275fac=function(t){return new(t||i)(Q(ye),Q(F),Q(Tt))};static \u0275cmp=v({type:i,selectors:[["app-paypal-callback"]],decls:4,vars:3,consts:[[1,"callback-container"],["class","processing-state",4,"ngIf"],["class","success-state",4,"ngIf"],["class","error-state",4,"ngIf"],[1,"processing-state"],["diameter","48"],[1,"success-state"],[1,"success-icon"],["class","account-info",4,"ngIf"],[1,"actions"],["mat-raised-button","","color","primary",3,"click"],["mat-stroked-button","",3,"click"],[1,"account-info"],[1,"error-state"],[1,"error-icon"]],template:function(t,n){t&1&&(r(0,"div",0),B(1,tr,6,0,"div",1)(2,ir,13,1,"div",2)(3,or,12,1,"div",3),a()),t&2&&(l(),p("ngIf",n.processing),l(),p("ngIf",n.success&&!n.processing),l(),p("ngIf",n.error&&!n.processing))},dependencies:[O,ne,Ae,Te,D,N,M,I],styles:[".callback-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:24px;background:linear-gradient(135deg,#667eea,#764ba2)}.processing-state[_ngcontent-%COMP%], .success-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{background:#fff;padding:48px 32px;border-radius:16px;box-shadow:0 20px 40px #0000001a;text-align:center;max-width:500px;width:100%}.processing-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .success-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:24px 0 16px;font-size:1.5rem;font-weight:600}.processing-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .success-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;color:#666;line-height:1.6}.success-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#4caf50;margin-bottom:16px}.error-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#f44336;margin-bottom:16px}.account-info[_ngcontent-%COMP%]{background:#f5f5f5;padding:16px;border-radius:8px;margin:24px 0;text-align:left}.account-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;color:#333}.actions[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:center;flex-wrap:wrap;margin-top:32px}@media (max-width: 768px){.actions[_ngcontent-%COMP%]{flex-direction:column}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})};function rr(i,e){i&1&&(r(0,"div",4),_(1,"mat-spinner",5),r(2,"h2"),s(3,"Verifying Stripe Account"),a(),r(4,"p"),s(5,"Please wait while we verify your Stripe account setup..."),a()())}function ar(i,e){if(i&1){let t=w();r(0,"div",6)(1,"mat-icon",7),s(2,"check_circle"),a(),r(3,"h2"),s(4,"Stripe Account Connected Successfully!"),a(),r(5,"p"),s(6,"Your Stripe account has been set up and is ready for withdrawals."),a(),r(7,"div",8)(8,"button",9),u("click",function(){h(t);let o=g();return f(o.goToEarnings())}),s(9," View Earnings "),a(),r(10,"button",10),u("click",function(){h(t);let o=g();return f(o.goToDashboard())}),s(11," Back to Dashboard "),a()()()}}function sr(i,e){if(i&1){let t=w();r(0,"div",11)(1,"mat-icon",12),s(2,"error"),a(),r(3,"h2"),s(4,"Setup Incomplete"),a(),r(5,"p"),s(6),a(),r(7,"div",8)(8,"button",13),u("click",function(){h(t);let o=g();return f(o.retrySetup())}),s(9," Try Again "),a(),r(10,"button",10),u("click",function(){h(t);let o=g();return f(o.goToDashboard())}),s(11," Back to Dashboard "),a()()()}if(i&2){let t=g();l(6),T(t.errorMessage)}}var Ue=class i{constructor(e,t,n){this.route=e;this.router=t;this.stripeConnectService=n}processing=!0;success=!1;error=!1;errorMessage="";ngOnInit(){return S(this,null,function*(){this.route.queryParams.subscribe(e=>S(this,null,function*(){e.success==="true"?yield this.handleSuccess():e.success==="false"?yield this.handleError():yield this.checkAccountStatus()}))})}handleSuccess(){return S(this,null,function*(){try{let e=yield this.stripeConnectService.getAccountStatus().toPromise();e?.payouts_enabled&&!e?.requirements_due?(this.processing=!1,this.success=!0):(this.processing=!1,this.error=!0,this.errorMessage="Account setup is not yet complete. Please try the onboarding process again.")}catch{this.processing=!1,this.error=!0,this.errorMessage="Failed to verify account status. Please try again."}})}handleError(){return S(this,null,function*(){this.processing=!1,this.error=!0,this.errorMessage="Account setup was not completed. You can try setting up your Stripe account again."})}checkAccountStatus(){return S(this,null,function*(){try{let e=yield this.stripeConnectService.getAccountStatus().toPromise();e?.payouts_enabled&&!e?.requirements_due?(this.processing=!1,this.success=!0):(this.processing=!1,this.error=!0,this.errorMessage="Account setup is incomplete. Please complete the onboarding process.")}catch{this.processing=!1,this.error=!0,this.errorMessage="Failed to check account status. Please try again."}})}retrySetup(){return S(this,null,function*(){try{this.processing=!0;let e=yield this.stripeConnectService.createOnboardingLink().toPromise();window.location.href=e.url}catch{this.processing=!1,this.errorMessage="Failed to create setup link. Please try again later."}})}goToEarnings(){this.router.navigate(["/dashboard/earnings"])}goToDashboard(){this.router.navigate(["/dashboard"])}static \u0275fac=function(t){return new(t||i)(Q(ye),Q(F),Q(Ti))};static \u0275cmp=v({type:i,selectors:[["app-stripe-callback"]],decls:4,vars:3,consts:[[1,"callback-container"],["class","processing-state",4,"ngIf"],["class","success-state",4,"ngIf"],["class","error-state",4,"ngIf"],[1,"processing-state"],["diameter","48"],[1,"success-state"],[1,"success-icon"],[1,"actions"],["mat-raised-button","","color","primary",3,"click"],["mat-button","",3,"click"],[1,"error-state"],[1,"error-icon"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,n){t&1&&(r(0,"div",0),B(1,rr,6,0,"div",1)(2,ar,12,0,"div",2)(3,sr,12,1,"div",3),a()),t&2&&(l(),p("ngIf",n.processing),l(),p("ngIf",n.success&&!n.processing),l(),p("ngIf",n.error&&!n.processing))},dependencies:[O,ne,Ae,Te,D,N,M,I],styles:[".callback-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:24px;background:#f5f5f5}.processing-state[_ngcontent-%COMP%], .success-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{text-align:center;max-width:400px;padding:48px 32px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a}.success-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#4caf50;margin-bottom:24px}.error-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#f44336;margin-bottom:24px}h2[_ngcontent-%COMP%]{margin:16px 0;color:#333}p[_ngcontent-%COMP%]{margin:16px 0;color:#666;line-height:1.5}.actions[_ngcontent-%COMP%]{margin-top:32px;display:flex;gap:16px;justify-content:center;flex-wrap:wrap}mat-spinner[_ngcontent-%COMP%]{margin-bottom:24px}@media (max-width: 768px){.processing-state[_ngcontent-%COMP%], .success-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{padding:32px 24px;margin:16px}.actions[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;max-width:200px}}"]})};var Hi=[{path:"",component:xt},{path:"search",component:Et},{path:"auth",loadChildren:()=>import("./chunk-5H5JRXWX.js").then(i=>i.AUTH_ROUTES),canActivate:[Di]},{path:"login",redirectTo:"auth/login"},{path:"signup",redirectTo:"auth/signup"},{path:"dashboard",component:yt,loadChildren:()=>import("./chunk-6IO5FVKA.js").then(i=>i.DASHBOARD_ROUTES),canActivate:[Zt]},{path:"admin",loadChildren:()=>import("./chunk-HXY7N3MT.js").then(i=>i.adminRoutes),canActivate:[Zt]},{path:"business",loadChildren:()=>import("./chunk-AK64J5DH.js").then(i=>i.BUSINESS_ROUTES)},{path:"paypal/callback",component:At},{path:"stripe/return",component:Ue},{path:"stripe/refresh",component:Ue}];function zi(i){i||(i=d(dn));let e=new Nt(t=>{if(i.destroyed){t.next();return}return i.onDestroy(t.next.bind(t))});return t=>t.pipe($e(e))}function Li(i){let e=wn(i);return new Nt(t=>{let n=e?.onDestroy(()=>t.complete()),o=i.subscribe(c=>t.next(c));return()=>{o.unsubscribe(),n?.()}})}function lr(i,e){i&1&&We(0,"div",3)}function cr(i,e){i&1&&(E(0,"div",4),We(1,"div",5),k())}var dr={min:8,max:100,speed:200,debounceTime:0,trickleSpeed:300,fadeOutSpeed:50,relative:!1,flat:!1,spinner:!1,direction:"ltr+",spinnerPosition:"right",trickleFunc:i=>i>=0&&i<20?10:i>=20&&i<50?4:i>=50&&i<80?2:i>=80&&i<99?.5:0},Ui=new U("NG_PROGRESS_OPTIONS",{providedIn:"root",factory:()=>dr});var Ft=(function(i){return i.START="START",i.COMPLETE="COMPLETE",i})(Ft||{});function pr(i){let e=ue(i)||0;return e<100&&e>=0?e:0}function mr(i){let e=ue(i)||100;return e>0&&e<=100?e:100}var Dt=(()=>{let e=class e{constructor(){this.defaultOptions=d(Ui),this.min=C(this.defaultOptions.min,{transform:pr}),this.max=C(this.defaultOptions.max,{transform:mr}),this.speed=C(this.defaultOptions.speed,{transform:ue}),this.trickleSpeed=C(this.defaultOptions.trickleSpeed,{transform:ue}),this.fadeOutSpeed=C(this.defaultOptions.fadeOutSpeed,{transform:ue}),this.debounceTime=C(this.defaultOptions.debounceTime,{transform:ue}),this.trickleFunc=C(this.defaultOptions.trickleFunc),this.config=R(()=>({max:this.max(),min:this.min(),speed:this.speed(),trickleSpeed:this.trickleSpeed(),fadeOutSpeed:this.fadeOutSpeed(),trickleFunc:this.trickleFunc(),debounceTime:this.debounceTime()})),this._progress=b(0),this._active=b(!1),this.active=R(()=>this._active()),this.progress=R(()=>this._progress()),this.started=te(),this.completed=te(),this._trigger=new Qe(null);let n;j(o=>{let c=this.config();He(()=>{n=this._trigger.pipe(J(m=>!!m),Ht(m=>m===Ft.START?Vt(c.debounceTime).pipe(Ht(()=>this.onTrickling(c))):this.onComplete(c))).subscribe(),o(()=>n?.unsubscribe())})})}start(){this.started.emit(),this._trigger.next(Ft.START),this._active.set(!0)}complete(){this._trigger.next(Ft.COMPLETE)}inc(n){let o=this.progress();this.active()?(typeof n!="number"&&(n=this.config().trickleFunc(o)),this.set(o+n)):this.start()}set(n){this._active.set(!0),this._progress.set(this.clamp(n))}clamp(n){return Math.max(this.config().min,Math.min(this.config().max,n))}onTrickling(n){return this.active()||this.set(n.min),Vt(0,n.trickleSpeed).pipe(ve(()=>this.inc()))}onComplete(n){return this.active()?(this.completed.emit(),nn({}).pipe(ve(()=>this._progress.set(100)),jt(n.speed+140),ve(()=>this._active.set(!1)),jt(n.fadeOutSpeed),qe(()=>this._progress.set(0)),$e(Li(this.started)))):tn}};e.\u0275fac=function(o){return new(o||e)},e.\u0275dir=le({type:e,selectors:[["","ngProgressRef",""]],inputs:{min:[1,"min"],max:[1,"max"],speed:[1,"speed"],trickleSpeed:[1,"trickleSpeed"],fadeOutSpeed:[1,"fadeOutSpeed"],debounceTime:[1,"debounceTime"],trickleFunc:[1,"trickleFunc"]},outputs:{started:"started",completed:"completed"},exportAs:["ngProgressRef"]});let i=e;return i})(),Qi=(()=>{let e=class e{constructor(){this.config=d(Ui),this.progressRef=d(Dt,{host:!0,self:!0}),this.flat=C(this.config.flat,{transform:Ye}),this.spinner=C(this.config.spinner,{transform:Ye}),this.relative=C(this.config.relative,{transform:Ye}),this.spinnerPosition=C(this.config.spinnerPosition),this.direction=C(this.config.direction),this.progressTransform=R(()=>`translate3d(${this.progressRef.progress()}%,0,0)`)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=v({type:e,selectors:[["ng-progress"]],hostAttrs:["role","progressbar"],hostVars:12,hostBindings:function(o,c){o&2&&(ce("spinnerPosition",c.spinnerPosition())("direction",c.direction()),xe("--_ng-progress-speed",c.progressRef.speed()+"ms")("--_ng-progress-fade-out-speed",c.progressRef.fadeOutSpeed()+"ms"),V("ng-progress-bar",!0)("ng-progress-bar-active",c.progressRef.active())("ng-progress-bar-relative",c.relative()))},inputs:{flat:[1,"flat"],spinner:[1,"spinner"],relative:[1,"relative"],spinnerPosition:[1,"spinnerPosition"],direction:[1,"direction"]},exportAs:["ngProgress"],features:[Qt([{directive:Dt,inputs:["min","min","max","max","speed","speed","trickleSpeed","trickleSpeed","fadeOutSpeed","fadeOutSpeed","debounceTime","debounceTime"],outputs:["started","started","completed","completed"]}])],decls:5,vars:4,consts:[[1,"ng-progress-bar-wrapper"],[1,"ng-bar-placeholder"],[1,"ng-bar"],[1,"ng-meteor"],[1,"ng-spinner"],[1,"ng-spinner-icon"]],template:function(o,c){o&1&&(E(0,"div",0)(1,"div",1)(2,"div",2),x(3,lr,1,0,"div",3),k()(),x(4,cr,2,0,"div",4),k()),o&2&&(l(2),xe("transform",c.progressTransform()),l(),y(c.flat()?-1:3),l(),y(c.spinner()?4:-1))},styles:['[_nghost-%COMP%]{--_ng-progress-thickness: var(--ng-progress-thickness, 2);--_ng-progress-thickness-px: calc(var(--_ng-progress-thickness) * 1px);--_ng-progress-thickness-add-one: calc(var(--_ng-progress-thickness) + 1);--_ng-progress-meteor-position-px: calc(var(--_ng-progress-thickness-add-one) * -1px);--_ng-progress-color: var(--ng-progress-color, #1B95E0);--_ng-progress-holder-color: var(--ng-progress-holder-color, transparent);--_ng-progress-ease: var(--ng-progress-ease, linear);--_ng-progress-spinner-thickness: var(--ng-progress-spinner-thickness, 2);--_ng-progress-spinner-thickness-px: calc(var(--_ng-progress-spinner-thickness) * 1px);--_ng-progress-spinner-spacing: var(--ng-progress-spinner-spacing, 15);--_ng-progress-spinner-spacing-px: calc(var(--_ng-progress-spinner-spacing) * 1px);--_ng-progress-spinner-size: var(--ng-progress-spinner-size, 18);--_ng-progress-spinner-size-px: calc(var(--_ng-progress-spinner-size) * 1px);--_ng-progress-spinner-speed: var(--ng-progress-spinner-speed, .25s);z-index:999999;pointer-events:none}.ng-progress-bar-active[_nghost-%COMP%]   .ng-progress-bar-wrapper[_ngcontent-%COMP%]{filter:alpha(opacity=100);opacity:1;transition:none}.ng-progress-bar-active[_nghost-%COMP%]   .ng-bar[_ngcontent-%COMP%]{transition:all var(--_ng-progress-speed) var(--_ng-progress-ease)}.ng-progress-bar-relative[_nghost-%COMP%]   .ng-progress-bar-wrapper[_ngcontent-%COMP%]{position:relative}[direction="ltr+"][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%], [direction=ltr-][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%]{rotate:calc(var(--_ng-progress-thickness-add-one) * 1deg)}[direction="ltr+"][_nghost-%COMP%]   .ng-bar[_ngcontent-%COMP%], [direction="rtl+"][_nghost-%COMP%]   .ng-bar[_ngcontent-%COMP%]{margin-left:-100%}[direction="ltr+"][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%], [direction="rtl+"][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%]{right:0}[direction="ltr+"][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%], [direction=rtl-][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%]{top:var(--_ng-progress-meteor-position-px)}[direction=ltr-][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%], [direction="rtl+"][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%]{bottom:var(--_ng-progress-meteor-position-px)}[direction=ltr-][_nghost-%COMP%]   .ng-bar-placeholder[_ngcontent-%COMP%], [direction="rtl+"][_nghost-%COMP%]   .ng-bar-placeholder[_ngcontent-%COMP%]{transform:rotate(180deg)}[direction=ltr-][_nghost-%COMP%]   .ng-spinner-icon[_ngcontent-%COMP%], [direction="rtl+"][_nghost-%COMP%]   .ng-spinner-icon[_ngcontent-%COMP%]{animation-direction:reverse}[direction="rtl+"][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%], [direction=rtl-][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%]{rotate:calc(var(--_ng-progress-thickness-add-one) * -1deg)}[_nghost-%COMP%]   .ng-spinner[_ngcontent-%COMP%]{top:var(--_ng-progress-spinner-spacing-px)}[spinnerPosition=left][_nghost-%COMP%]   .ng-spinner[_ngcontent-%COMP%]{left:var(--_ng-progress-spinner-spacing-px)}[spinnerPosition=right][_nghost-%COMP%]   .ng-spinner[_ngcontent-%COMP%]{right:var(--_ng-progress-spinner-spacing-px)}.ng-progress-bar-wrapper[_ngcontent-%COMP%]{position:fixed;z-index:999999;top:0;left:0;width:100%;transform:scale(1);filter:alpha(opacity=0);opacity:0;transition:opacity var(--_ng-progress-fade-out-speed) linear}.ng-bar-placeholder[_ngcontent-%COMP%]{position:absolute;height:var(--_ng-progress-thickness-px);width:100%}.ng-bar[_ngcontent-%COMP%]{width:100%;height:100%;transform:translate(-100%,0,0);background:var(--_ng-progress-color)}.ng-meteor[_ngcontent-%COMP%]{display:block;position:absolute;width:100px;height:100%;opacity:1;box-shadow:0 0 10px var(--_ng-progress-color),0 0 5px var(--_ng-progress-color)}.ng-spinner[_ngcontent-%COMP%]{position:absolute;display:block;z-index:1031;top:10px}.ng-spinner-icon[_ngcontent-%COMP%]{box-sizing:border-box;animation:_ngcontent-%COMP%_spinner-animation var(--_ng-progress-spinner-speed) linear infinite;border-style:solid;border-color:transparent;border-radius:50%;border-top-color:var(--_ng-progress-color);border-left-color:var(--_ng-progress-color);width:var(--_ng-progress-spinner-size-px);height:var(--_ng-progress-spinner-size-px);border-width:var(--_ng-progress-spinner-thickness-px)}@keyframes _ngcontent-%COMP%_spinner-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}'],changeDetection:0});let i=e;return i})();var ur=new U("NG_PROGRESS_HTTP_OPTIONS",{providedIn:"root",factory:()=>null});var gr=new U("NgProgressHttpCounter",{providedIn:"root",factory:()=>b(0)});function $i(i,e){let t=d(ur),n=d(gr);return i.headers.has("ignoreProgressBar")?e(i.clone({headers:i.headers.delete("ignoreProgressBar")})):t&&hr(i,t)?e(i):He(()=>(n.set(n()+1),e(i).pipe(qe(()=>{n.set(n()-1)}))))}function hr(i,e){let t=i.url.toLowerCase();return e.matcher&&e.silentApis?.length?qi(t,e.matcher)&&Gi(t,e.silentApis):e.silentApis?.length?Gi(t,e.silentApis):e.matcher?qi(t,e.matcher):!1}function Gi(i,e){return!!e.find(t=>i.includes(t.toLowerCase()))}function qi(i,e){return!!i.match(e)}var Wi={providers:[yn({eventCoalescing:!0}),Bn(Hi,Nn()),On(An(),Tn(),En([$i])),Ai(),zn(),{provide:kn,useClass:bt,multi:!0}]};function fr(i,e){if(i&1&&(r(0,"div",15)(1,"mat-icon"),s(2,"error"),a(),r(3,"span"),s(4),a()()),i&2){let t=g();l(4),T(t.errorMessage)}}var Rt=class i{dialogRef=d(Mi);username="";password="";errorMessage="";showPassword=!1;CORRECT_USERNAME="admin";CORRECT_PASSWORD="adminalexolalinsey";onSubmit(){this.username===this.CORRECT_USERNAME&&this.password===this.CORRECT_PASSWORD?(sessionStorage.setItem("authGateAccess","true"),this.dialogRef.close(!0)):(this.errorMessage="Invalid username or password. Please try again.",this.password="")}togglePasswordVisibility(){this.showPassword=!this.showPassword}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-auth-gate-modal"]],decls:30,vars:7,consts:[["authForm","ngForm"],[1,"auth-gate-container"],[1,"auth-gate-header"],["mat-dialog-title",""],[1,"subtitle"],[3,"ngSubmit"],[1,"form-group"],["appearance","outline",1,"full-width"],["matInput","","type","text","name","username","required","","autocomplete","username","placeholder","Enter username",3,"ngModelChange","ngModel"],["matPrefix",""],["matInput","","name","password","required","","autocomplete","current-password","placeholder","Enter password",3,"ngModelChange","type","ngModel"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["class","error-message",4,"ngIf"],[1,"actions"],["mat-raised-button","","color","primary","type","submit",1,"submit-button",3,"disabled"],[1,"error-message"]],template:function(t,n){if(t&1){let o=w();r(0,"div",1)(1,"div",2)(2,"h2",3),s(3,"Authorization Required"),a(),r(4,"p",4),s(5,"Please enter your credentials to access this application"),a()(),r(6,"mat-dialog-content")(7,"form",5,0),u("ngSubmit",function(){return h(o),f(n.onSubmit())}),r(9,"div",6)(10,"mat-form-field",7)(11,"mat-label"),s(12,"Username"),a(),r(13,"input",8),me("ngModelChange",function(m){return h(o),pe(n.username,m)||(n.username=m),f(m)}),a(),r(14,"mat-icon",9),s(15,"person"),a()()(),r(16,"div",6)(17,"mat-form-field",7)(18,"mat-label"),s(19,"Password"),a(),r(20,"input",10),me("ngModelChange",function(m){return h(o),pe(n.password,m)||(n.password=m),f(m)}),a(),r(21,"mat-icon",9),s(22,"lock"),a(),r(23,"button",11),u("click",function(){return h(o),f(n.togglePasswordVisibility())}),r(24,"mat-icon"),s(25),a()()()(),B(26,fr,5,1,"div",12),r(27,"div",13)(28,"button",14),s(29," Access Application "),a()()()()()}t&2&&(l(13),de("ngModel",n.username),l(7),p("type",n.showPassword?"text":"password"),de("ngModel",n.password),l(3),ce("aria-label","Toggle password visibility"),l(2),T(n.showPassword?"visibility_off":"visibility"),l(),p("ngIf",n.errorMessage),l(2),p("disabled",!n.username||!n.password))},dependencies:[O,ne,De,si,ii,nt,oi,ci,ai,ri,Oi,Pi,ki,K,rt,ot,di,pi,oe,ui,M,I,we,D,N],styles:[".auth-gate-container[_ngcontent-%COMP%]{padding:20px;max-width:450px;min-width:350px}@media (max-width: 480px){.auth-gate-container[_ngcontent-%COMP%]{min-width:280px;padding:16px}}.auth-gate-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px}.auth-gate-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 8px;font-size:24px;font-weight:600;color:#333}.auth-gate-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#666}mat-dialog-content[_ngcontent-%COMP%]{padding:0;margin:0;overflow:visible}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:20px}.full-width[_ngcontent-%COMP%]{width:100%}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px;background-color:#ffebee;border-radius:4px;margin-bottom:16px;color:#c62828;font-size:14px}.error-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.actions[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:24px}.actions[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;font-weight:500;text-transform:uppercase}  .auth-gate-dialog .mat-mdc-dialog-container{border-radius:8px;box-shadow:0 11px 15px -7px #0003,0 24px 38px 3px #00000024,0 9px 46px 8px #0000001f}mat-form-field[_ngcontent-%COMP%]   mat-icon[matPrefix][_ngcontent-%COMP%]{margin-right:8px;color:#666}"]})};var It=class i{dialog=d(Si);dialogRef=null;checkAuthGate(){return!Ee.production||sessionStorage.getItem("authGateAccess")==="true"?Promise.resolve(!0):this.showAuthGateModal()}showAuthGateModal(){return this.dialogRef?Promise.resolve(!1):(this.dialogRef=this.dialog.open(Rt,{disableClose:!0,panelClass:"auth-gate-dialog",width:"450px",maxWidth:"90vw",hasBackdrop:!0,backdropClass:"auth-gate-backdrop"}),new Promise(e=>{this.dialogRef.afterClosed().subscribe(t=>{this.dialogRef=null,e(t===!0)})}))}clearAuthGate(){sessionStorage.removeItem("authGateAccess")}static \u0275fac=function(t){return new(t||i)};static \u0275prov=L({token:i,factory:i.\u0275fac,providedIn:"root"})};var br={minDuration:0,startEvents:[Fn],completeEvents:[Dn,Rn,In]},vr=new U("NG_PROGRESS_ROUTER_OPTIONS",{providedIn:"root",factory:()=>br});function Yi(i,e){return e.some(t=>i instanceof t)}var _r=(()=>{let e=class e{constructor(){this.router=d(F),this.config=d(vr),this.progressRef=d(Dt,{host:!0,self:!0});let n;this.router.events.pipe(J(o=>Yi(o,[...this.config.startEvents,...this.config.completeEvents])),be(o=>Yi(o,this.config.startEvents)),ve(o=>{clearTimeout(n),o?this.progressRef.start():n=setTimeout(()=>{this.progressRef.complete()},this.config.minDuration)}),zi()).subscribe()}};e.\u0275fac=function(o){return new(o||e)},e.\u0275dir=le({type:e});let i=e;return i})(),Ki=(()=>{let e=class e extends _r{};e.\u0275fac=(()=>{let n;return function(c){return(n||(n=Lt(e)))(c||e)}})(),e.\u0275dir=le({type:e,selectors:[["ng-progress","ngProgressRouter",""]],features:[je]});let i=e;return i})();function Cr(i,e){i&1&&_(0,"router-outlet")}function xr(i,e){i&1&&(r(0,"div",0),_(1,"div",2),r(2,"p"),s(3,"Verifying access..."),a()())}var Bt=class i{title="putheron";isAuthenticated=!1;authorizationService=d($n);authGateService=d(It);constructor(){typeof window<"u"&&(window.authService=this.authorizationService,console.log("\u{1F527} Authorization service exposed as window.authService for debugging"),console.log("\u{1F4A1} Use window.authService.debugAuthState() to inspect permissions"))}ngOnInit(){return S(this,null,function*(){this.isAuthenticated=yield this.authGateService.checkAuthGate()})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-root"]],decls:3,vars:1,consts:[[1,"auth-gate-loading"],["ngProgressRouter","",1,"root-progress-bar"],[1,"spinner"]],template:function(t,n){t&1&&(x(0,Cr,1,0,"router-outlet")(1,xr,4,0,"div",0),_(2,"ng-progress",1)),t&2&&y(n.isAuthenticated?0:1)},dependencies:[O,Ze,Qi,Ki],styles:[".auth-gate-loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.auth-gate-loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}.auth-gate-loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;font-weight:500;margin:0}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.root-progress-bar[_ngcontent-%COMP%]{--ng-progress-thickness: 3}.root-progress-bar[_ngcontent-%COMP%]     .ng-bar-placeholder{background-color:#d3d3d3}.root-progress-bar[_ngcontent-%COMP%]     .ng-bar{background:#690aac;background:linear-gradient(to right,#690aac,#00f260)}"]})};Pn(Bt,Wi).catch(i=>console.error(i));
