import{a as se,b as de,c as ce}from"./chunk-UXJC6K5I.js";import{a as ue,b as fe}from"./chunk-EN3D2EIX.js";import{a as pe,b as Ce}from"./chunk-DB3WM5P2.js";import{b as oe}from"./chunk-LDTUW3TX.js";import{a as ne}from"./chunk-WJ4DFVWN.js";import"./chunk-DGKIS4CL.js";import{a as le,b as me}from"./chunk-UW2ATRRX.js";import{d as O,h as X,i as Z,j as ee,l as te,m as ie}from"./chunk-66HTC5NI.js";import{d as W,e as Y,h as K,k as Q}from"./chunk-67MRJSI2.js";import"./chunk-WIJXL5PX.js";import"./chunk-RNGT6N3O.js";import"./chunk-UNULKHHN.js";import{a as ae,b as re}from"./chunk-F52GGYS4.js";import"./chunk-2TVU5X7D.js";import{B as J,c as A,e as d,h as z,i as G,l as U,p as $,r as j,z as H}from"./chunk-6HVQSJLB.js";import"./chunk-3DWAHAUX.js";import{b as R,c as B,d as D}from"./chunk-CAUPKMHV.js";import{a as L}from"./chunk-SY63MTEM.js";import"./chunk-SRA5OYUU.js";import{s as q,t as I}from"./chunk-EZYZDCTR.js";import"./chunk-FTO62232.js";import"./chunk-LIZM4CZI.js";import"./chunk-QD7SSFII.js";import{b as F,d as k,e as V}from"./chunk-ARLYTOMD.js";import"./chunk-GTSDDWM5.js";import{t as N}from"./chunk-Z5YYMG7R.js";import{Db as P,Eb as l,Fb as m,Ib as S,Jb as v,Kb as s,Lb as o,Mb as n,Nb as p,Qc as T,Ub as E,Yb as y,_a as r,_b as u,fa as f,ka as h,la as x,mc as a,nc as _,pb as M,ua as g,xc as w}from"./chunk-ME5BD2TS.js";import{e as b}from"./chunk-JKOY2XUY.js";var he=()=>["/auth/login"],ge=(i,t)=>t.code,ye=(i,t)=>t.name;function Se(i,t){i&1&&(o(0,"mat-error"),a(1,"Required"),n())}function ve(i,t){i&1&&(o(0,"mat-error"),a(1,"Required"),n())}function be(i,t){i&1&&(o(0,"mat-error"),a(1,"Phone number is required"),n())}function Ee(i,t){if(i&1&&(o(0,"mat-error"),a(1),n()),i&2){let e=u(2);r(),_(e.phoneControl==null||e.phoneControl.errors==null||e.phoneControl.errors.usaPhone==null?null:e.phoneControl.errors.usaPhone.message)}}function we(i,t){if(i&1&&(o(0,"mat-option",14),a(1),n()),i&2){let e=t.$implicit;s("value",e.code),r(),_(e.name)}}function Me(i,t){i&1&&(o(0,"mat-error"),a(1,"Required"),n())}function Pe(i,t){i&1&&(o(0,"mat-option",13),a(1,"Select state first"),n())}function Te(i,t){if(i&1&&(o(0,"mat-option",14),a(1),n()),i&2){let e=t.$implicit;s("value",e.name),r(),_(e.name)}}function Ne(i,t){if(i&1&&(o(0,"mat-option",13),a(1,"Select city"),n(),S(2,Te,2,2,"mat-option",14,ye)),i&2){let e=u(2);r(2),v(e.availableCities())}}function Fe(i,t){i&1&&(o(0,"mat-error"),a(1,"Required"),n())}function ke(i,t){i&1&&(o(0,"mat-error"),a(1,"Please select an option"),n())}function Ve(i,t){i&1&&a(0," Email is required ")}function Oe(i,t){i&1&&a(0," Invalid email format ")}function qe(i,t){if(i&1&&(o(0,"mat-error"),l(1,Ve,1,0)(2,Oe,1,0),n()),i&2){let e=u(2);r(),m(e.emailControl!=null&&e.emailControl.hasError("required")?1:e.emailControl!=null&&e.emailControl.hasError("email")?2:-1)}}function Ie(i,t){if(i&1&&(o(0,"mat-option",14),a(1),n()),i&2){let e=t.$implicit;s("value",e.name),r(),_(e.name)}}function Re(i,t){i&1&&(o(0,"mat-error"),a(1,"Required"),n())}function Be(i,t){i&1&&a(0," Password is required ")}function De(i,t){i&1&&a(0," Minimum 6 characters ")}function Le(i,t){if(i&1&&(o(0,"mat-error"),l(1,Be,1,0)(2,De,1,0),n()),i&2){let e=u(2);r(),m(e.passwordControl!=null&&e.passwordControl.hasError("required")?1:e.passwordControl!=null&&e.passwordControl.hasError("minlength")?2:-1)}}function Ae(i,t){i&1&&a(0," Create Account ")}function ze(i,t){i&1&&(o(0,"span",27),p(1,"mat-spinner",31),a(2," Creating... "),n())}function Ge(i,t){if(i&1){let e=E();o(0,"div",2)(1,"h2",3),a(2,"Join Our Community"),n(),o(3,"p",4),a(4,"Create your account to get started"),n()(),o(5,"form",5),y("ngSubmit",function(){h(e);let C=u();return x(C.onSubmit())}),o(6,"div",6)(7,"mat-form-field",7)(8,"mat-label"),a(9,"First Name"),n(),p(10,"input",8),o(11,"mat-icon",9),a(12,"person"),n(),l(13,Se,2,0,"mat-error"),n(),o(14,"mat-form-field",7)(15,"mat-label"),a(16,"Last Name"),n(),p(17,"input",10),l(18,ve,2,0,"mat-error"),n()(),o(19,"mat-form-field",7)(20,"mat-label"),a(21,"Phone Number"),n(),p(22,"input",11),o(23,"mat-icon",9),a(24,"phone"),n(),l(25,be,2,0,"mat-error"),l(26,Ee,2,1,"mat-error"),n(),o(27,"div",6)(28,"mat-form-field",7)(29,"mat-label"),a(30,"State"),n(),o(31,"mat-select",12),y("selectionChange",function(C){h(e);let xe=u();return x(xe.onStateSelected(C.value))}),o(32,"mat-option",13),a(33,"Select state"),n(),S(34,we,2,2,"mat-option",14,ge),n(),o(36,"mat-icon",9),a(37,"location_on"),n(),l(38,Me,2,0,"mat-error"),n(),o(39,"mat-form-field",7)(40,"mat-label"),a(41,"City"),n(),o(42,"mat-select",15),l(43,Pe,2,0,"mat-option",13)(44,Ne,4,0),n(),o(45,"mat-icon",9),a(46,"location_city"),n(),l(47,Fe,2,0,"mat-error"),n()(),o(48,"div",16)(49,"h4",17),a(50,"I want to:"),n(),o(51,"mat-radio-group",18)(52,"div",19)(53,"mat-radio-button",20),a(54," Find women-owned businesses "),n(),o(55,"mat-radio-button",21),a(56," Offer services through my business "),n()()(),l(57,ke,2,0,"mat-error"),n(),o(58,"div",6)(59,"mat-form-field",7)(60,"mat-label"),a(61,"Email Address"),n(),p(62,"input",22),o(63,"mat-icon",9),a(64,"email"),n(),l(65,qe,3,1,"mat-error"),n(),o(66,"mat-form-field",7)(67,"mat-label"),a(68,"Heritage"),n(),o(69,"mat-select",23)(70,"mat-option",13),a(71,"Select country"),n(),S(72,Ie,2,2,"mat-option",14,ge),n(),o(74,"mat-icon",9),a(75,"public"),n(),l(76,Re,2,0,"mat-error"),n()(),o(77,"mat-form-field",7)(78,"mat-label"),a(79,"Password"),n(),p(80,"input",24),o(81,"button",25),y("click",function(){h(e);let C=u();return x(C.togglePasswordVisibility())}),o(82,"mat-icon"),a(83),n()(),l(84,Le,3,1,"mat-error"),n(),o(85,"button",26),l(86,Ae,1,0)(87,ze,3,0,"span",27),n(),o(88,"div",28)(89,"p",29),a(90," Already have an account? "),o(91,"a",30),a(92," Sign in "),n()()()()}if(i&2){let e=u();r(5),s("formGroup",e.signupForm),r(5),s("disabled",e.loading()),r(3),m(e.firstNameControl!=null&&e.firstNameControl.invalid&&(e.firstNameControl!=null&&e.firstNameControl.touched)?13:-1),r(4),s("disabled",e.loading()),r(),m(e.lastNameControl!=null&&e.lastNameControl.invalid&&(e.lastNameControl!=null&&e.lastNameControl.touched)?18:-1),r(4),s("disabled",e.loading()),r(3),m(e.phoneControl!=null&&e.phoneControl.hasError("required")&&(e.phoneControl!=null&&e.phoneControl.touched)?25:-1),r(),m(e.phoneControl!=null&&e.phoneControl.hasError("usaPhone")&&(e.phoneControl!=null&&e.phoneControl.touched)?26:-1),r(5),s("disabled",e.loading()),r(3),v(e.usStates),r(4),m(e.stateControl!=null&&e.stateControl.invalid&&(e.stateControl!=null&&e.stateControl.touched)?38:-1),r(4),s("disabled",e.loading()||e.availableCities().length===0),r(),m(e.availableCities().length===0?43:44),r(4),m(e.cityControl!=null&&e.cityControl.invalid&&(e.cityControl!=null&&e.cityControl.touched)?47:-1),r(4),s("disabled",e.loading()),r(6),m(e.userTypeControl!=null&&e.userTypeControl.invalid&&(e.userTypeControl!=null&&e.userTypeControl.touched)?57:-1),r(5),s("disabled",e.loading()),r(3),m(e.emailControl!=null&&e.emailControl.invalid&&(e.emailControl!=null&&e.emailControl.touched)?65:-1),r(4),s("disabled",e.loading()),r(3),v(e.countries),r(4),m(e.countryOfOriginControl!=null&&e.countryOfOriginControl.invalid&&(e.countryOfOriginControl!=null&&e.countryOfOriginControl.touched)?76:-1),r(4),s("type",e.showPassword()?"text":"password")("disabled",e.loading()),r(),P("aria-label","Toggle password visibility")("aria-pressed",e.showPassword()),r(2),_(e.showPassword()?"visibility_off":"visibility"),r(),m(e.passwordControl!=null&&e.passwordControl.invalid&&(e.passwordControl!=null&&e.passwordControl.touched)?84:-1),r(),s("disabled",e.loading()||!e.signupForm.valid),r(),m(e.loading()?87:86),r(5),s("routerLink",w(28,he))}}function Ue(i,t){i&1&&a(0," Resend Verification Email ")}function $e(i,t){i&1&&(o(0,"span",27),p(1,"mat-spinner",31),a(2," Sending... "),n())}function je(i,t){if(i&1){let e=E();o(0,"div",1)(1,"div",32)(2,"mat-icon",33),a(3,"email"),n(),o(4,"h2",3),a(5,"Check Your Email"),n(),o(6,"p",34),a(7," We've sent a verification link to: "),n(),o(8,"p",35),a(9),n(),o(10,"p",4),a(11," Click the link in the email to verify your account and complete your registration. "),n()(),o(12,"div",36)(13,"button",37),y("click",function(){h(e);let C=u();return x(C.resendVerification())}),l(14,Ue,1,0)(15,$e,3,0,"span",27),n(),o(16,"button",38),a(17," Back to Login "),n()(),o(18,"div",39)(19,"p",40),a(20," Didn't receive the email? Check your spam folder or try resending. "),n()()()}if(i&2){let e=u();r(9),_(e.verificationEmail()),r(4),s("disabled",e.loading()),r(),m(e.loading()?15:14),r(2),s("routerLink",w(4,he))}}var _e=class i{authService=f(L);router=f(k);route=f(F);fb=f(H);citiesService=f(ue);snackBar=f(le);filteredCities=g([]);availableCities=g([]);loading=g(!1);showPassword=g(!1);showVerificationStep=g(!1);verificationEmail=g("");signupForm;countries=ne;usStates=fe;constructor(){this.signupForm=this.fb.group({firstName:["",[d.required]],lastName:["",[d.required]],phone:["",[d.required,pe.usaPhone]],state:["",[d.required]],city:["",[d.required]],userType:["",[d.required]],email:["",[d.required,d.email]],countryOfOrigin:["",[d.required]],password:["",[d.required,d.minLength(6)]]}),T(()=>{let t=this.stateControl?.value;t?this.loadCitiesForState(t):this.availableCities.set([])})}ngOnInit(){this.route.queryParams.subscribe(t=>{t.message&&this.snackBar.open(t.message,"Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-info"]})})}onSubmit(){return b(this,null,function*(){if(!this.signupForm.valid){this.snackBar.open("Please fill in all required fields correctly","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-error"]});return}let t=this.signupForm.value,e={first_name:t.firstName,last_name:t.lastName,email:t.email,password:t.password,phone:t.phone,state:t.state,city:t.city,country_of_origin:t.countryOfOrigin,is_buyer:t.userType==="buyer",is_seller:t.userType==="seller"};this.loading.set(!0);try{let c=yield this.authService.signUp(e);c.data?(this.snackBar.open("Account created successfully! Please check your email to verify your account.","Close",{duration:6e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-success"]}),this.showVerificationMessage(t.email)):this.snackBar.open(c.error?.message||"Registration failed. Please try again.","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-error"]})}catch(c){this.snackBar.open(c?.message||"An unexpected error occurred. Please try again.","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-error"]})}finally{this.loading.set(!1)}})}showVerificationMessage(t){this.verificationEmail.set(t),this.showVerificationStep.set(!0),this.signupForm.disable()}resendVerification(){return b(this,null,function*(){if(this.verificationEmail()){this.loading.set(!0);try{let t=yield this.authService.resendEmailVerification(this.verificationEmail());t.success?this.snackBar.open("Verification email sent! Please check your inbox.","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-success"]}):this.snackBar.open(t.message||"Failed to resend verification email.","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-error"]})}catch(t){this.snackBar.open(t?.message||"Failed to resend verification email.","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-error"]})}finally{this.loading.set(!1)}}})}onStateSelected(t){this.loadCitiesForState(t),this.signupForm.get("city")?.setValue("")}loadCitiesForState(t){let e=this.citiesService.getCitiesByState(t);this.availableCities.set(e)}togglePasswordVisibility(){this.showPassword.update(t=>!t)}get firstNameControl(){return this.signupForm.get("firstName")}get lastNameControl(){return this.signupForm.get("lastName")}get phoneControl(){return this.signupForm.get("phone")}get stateControl(){return this.signupForm.get("state")}get cityControl(){return this.signupForm.get("city")}get userTypeControl(){return this.signupForm.get("userType")}get emailControl(){return this.signupForm.get("email")}get countryOfOriginControl(){return this.signupForm.get("countryOfOrigin")}get passwordControl(){return this.signupForm.get("password")}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-signup"]],decls:3,vars:2,consts:[[1,"signup-container"],[1,"text-center","space-y-6"],[1,"text-center","mb-8"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-2","gap-4"],["appearance","outline"],["matInput","","formControlName","firstName","placeholder","First name",3,"disabled"],["matSuffix",""],["matInput","","formControlName","lastName","placeholder","Last name",3,"disabled"],["matInput","","type","tel","appPhoneFormat","","formControlName","phone","placeholder","(555) 123-4567",3,"disabled"],["formControlName","state",3,"selectionChange","disabled"],["value",""],[3,"value"],["formControlName","city",3,"disabled"],[1,"space-y-3","p-4","bg-gray-50","rounded-lg"],[1,"text-sm","font-medium","text-gray-700","mb-3"],["formControlName","userType",1,"radio-group-inline",3,"disabled"],[1,"radio-options"],["value","buyer",1,"radio-option"],["value","seller",1,"radio-option"],["matInput","","type","email","formControlName","email","placeholder","your@email.com",3,"disabled"],["formControlName","countryOfOrigin",3,"disabled"],["matInput","","formControlName","password","placeholder","Enter password",3,"type","disabled"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"w-full","py-3","text-base","font-medium","mb-4",3,"disabled"],[1,"flex","items-center","justify-center","gap-2"],[1,"mt-4","pt-4","border-t","border-gray-200","text-center"],[1,"text-sm","text-gray-600"],["mat-button","","color","primary",1,"text-sm","font-medium","ml-1",3,"routerLink"],["diameter","16"],[1,"mb-6"],[1,"text-6xl","text-blue-500","mb-4"],[1,"text-gray-600","mb-4"],[1,"text-lg","font-medium","text-gray-900","mb-4"],[1,"space-y-3"],["mat-raised-button","","color","accent",1,"w-full","py-3","text-base","font-medium",3,"click","disabled"],["mat-button","","color","primary",1,"w-full","py-3","text-base","font-medium",3,"routerLink"],[1,"mt-6","pt-4","border-t","border-gray-200"],[1,"text-sm","text-gray-500"]],template:function(e,c){e&1&&(o(0,"div",0),l(1,Ge,93,29),l(2,je,21,5,"div",1),n()),e&2&&(r(),m(c.showVerificationStep()?-1:1),r(),m(c.showVerificationStep()?2:-1))},dependencies:[N,J,U,A,z,G,$,j,V,X,Q,W,Y,K,ie,te,ee,Z,O,D,B,R,I,q,oe,ce,se,de,re,ae,me,Ce],styles:["[_nghost-%COMP%]{display:block}"]})};export{_e as SignupComponent};
