import{a as me,b as se,c as de}from"./chunk-6FYCUCL2.js";import{a as ce,b as Ce}from"./chunk-IYHRCE6R.js";import{a as pe,b as ue}from"./chunk-JQ4VKR4I.js";import{b as ae}from"./chunk-5IB3J52A.js";import{a as oe}from"./chunk-WJ4DFVWN.js";import"./chunk-OIXXJWNI.js";import{d as O,h as Z,i as ee,j as te,l as ie,m as ne}from"./chunk-HUQJ3NC3.js";import{d as z,e as K,h as Q,k as X}from"./chunk-SQHEFKI2.js";import"./chunk-HOTTC6Q3.js";import{A as Y,c as G,e as p,h as U,i as $,l as j,p as H,q as J,y as W}from"./chunk-IOQBSONU.js";import"./chunk-RNGT6N3O.js";import"./chunk-IXXIICYU.js";import"./chunk-W25ODU66.js";import{a as re,b as le}from"./chunk-ZH2LY4H3.js";import"./chunk-ECO3GEC4.js";import{b as R,c as A,d as L,e as D}from"./chunk-SUTJIGUH.js";import{a as B}from"./chunk-5X5YCIDJ.js";import"./chunk-QSI3HFOI.js";import{p as k,q}from"./chunk-A72LFUZP.js";import"./chunk-IGUJQH2A.js";import"./chunk-IZ7UM5CL.js";import"./chunk-YYV7O7JP.js";import{a as P,c as I,d as V}from"./chunk-MEFNJ5SS.js";import"./chunk-GUCRBWY4.js";import{t as N}from"./chunk-REOVWAHI.js";import{Ab as T,Bb as s,Ea as C,Gb as l,Jb as v,Kb as y,Lb as o,Mb as i,Nb as f,Pc as F,Rb as E,Vb as h,Wb as d,cb as r,fa as g,gc as a,hc as c,na as x,oa as S,ob as M,qc as w,ub as m}from"./chunk-BEPULU6C.js";import{e as b}from"./chunk-JKOY2XUY.js";var ge=()=>["/auth/login"],fe=(t,n)=>n.code,Se=(t,n)=>n.name;function he(t,n){t&1&&(o(0,"mat-error"),a(1,"Required"),i())}function ve(t,n){t&1&&(o(0,"mat-error"),a(1,"Required"),i())}function ye(t,n){t&1&&(o(0,"mat-error"),a(1,"Phone number is required"),i())}function be(t,n){if(t&1&&(o(0,"mat-error"),a(1),i()),t&2){let e=d(2);r(),c(e.phoneControl==null||e.phoneControl.errors==null||e.phoneControl.errors.usaPhone==null?null:e.phoneControl.errors.usaPhone.message)}}function Ee(t,n){if(t&1&&(o(0,"mat-option",14),a(1),i()),t&2){let e=n.$implicit;s("value",e.code),r(),c(e.name)}}function we(t,n){t&1&&(o(0,"mat-error"),a(1,"Required"),i())}function Me(t,n){t&1&&(o(0,"mat-option",13),a(1,"Select state first"),i())}function Te(t,n){if(t&1&&(o(0,"mat-option",14),a(1),i()),t&2){let e=n.$implicit;s("value",e.name),r(),c(e.name)}}function Fe(t,n){if(t&1&&(o(0,"mat-option",13),a(1,"Select city"),i(),v(2,Te,2,2,"mat-option",14,Se)),t&2){let e=d(2);r(2),y(e.availableCities())}}function Ne(t,n){t&1&&(o(0,"mat-error"),a(1,"Required"),i())}function Pe(t,n){t&1&&(o(0,"mat-error"),a(1,"Please select an option"),i())}function Ie(t,n){t&1&&a(0," Email is required ")}function Ve(t,n){t&1&&a(0," Invalid email format ")}function Oe(t,n){if(t&1&&(o(0,"mat-error"),m(1,Ie,1,0)(2,Ve,1,0),i()),t&2){let e=d(2);r(),l(e.emailControl!=null&&e.emailControl.hasError("required")?1:e.emailControl!=null&&e.emailControl.hasError("email")?2:-1)}}function ke(t,n){if(t&1&&(o(0,"mat-option",14),a(1),i()),t&2){let e=n.$implicit;s("value",e.name),r(),c(e.name)}}function qe(t,n){t&1&&(o(0,"mat-error"),a(1,"Required"),i())}function Re(t,n){t&1&&a(0," Password is required ")}function Ae(t,n){t&1&&a(0," Minimum 6 characters ")}function Le(t,n){if(t&1&&(o(0,"mat-error"),m(1,Re,1,0)(2,Ae,1,0),i()),t&2){let e=d(2);r(),l(e.passwordControl!=null&&e.passwordControl.hasError("required")?1:e.passwordControl!=null&&e.passwordControl.hasError("minlength")?2:-1)}}function De(t,n){if(t&1&&(o(0,"div",26)(1,"div",34)(2,"mat-icon",35),a(3,"info"),i(),o(4,"span",36),a(5),i()()()),t&2){let e=d(2);r(5),c(e.authMessage())}}function Be(t,n){if(t&1&&(o(0,"div",27)(1,"div",37)(2,"mat-icon",35),a(3,"error"),i(),o(4,"span",36),a(5),i()()()),t&2){let e=d(2);r(5),c(e.error())}}function Ge(t,n){if(t&1&&(o(0,"div",28)(1,"div",38)(2,"mat-icon",35),a(3,"check_circle"),i(),o(4,"span",36),a(5),i()()()),t&2){let e=d(2);r(5),c(e.successMessage())}}function Ue(t,n){t&1&&a(0," Create Account ")}function $e(t,n){t&1&&(o(0,"span",30),f(1,"mat-spinner",39),a(2," Creating... "),i())}function je(t,n){if(t&1){let e=E();o(0,"div",2)(1,"h2",3),a(2,"Join Our Community"),i(),o(3,"p",4),a(4,"Create your account to get started"),i()(),o(5,"form",5),h("ngSubmit",function(){x(e);let _=d();return S(_.onSubmit())}),o(6,"div",6)(7,"mat-form-field",7)(8,"mat-label"),a(9,"First Name"),i(),f(10,"input",8),o(11,"mat-icon",9),a(12,"person"),i(),m(13,he,2,0,"mat-error"),i(),o(14,"mat-form-field",7)(15,"mat-label"),a(16,"Last Name"),i(),f(17,"input",10),m(18,ve,2,0,"mat-error"),i()(),o(19,"mat-form-field",7)(20,"mat-label"),a(21,"Phone Number"),i(),f(22,"input",11),o(23,"mat-icon",9),a(24,"phone"),i(),m(25,ye,2,0,"mat-error")(26,be,2,1,"mat-error"),i(),o(27,"div",6)(28,"mat-form-field",7)(29,"mat-label"),a(30,"State"),i(),o(31,"mat-select",12),h("selectionChange",function(_){x(e);let xe=d();return S(xe.onStateSelected(_.value))}),o(32,"mat-option",13),a(33,"Select state"),i(),v(34,Ee,2,2,"mat-option",14,fe),i(),o(36,"mat-icon",9),a(37,"location_on"),i(),m(38,we,2,0,"mat-error"),i(),o(39,"mat-form-field",7)(40,"mat-label"),a(41,"City"),i(),o(42,"mat-select",15),m(43,Me,2,0,"mat-option",13)(44,Fe,4,0),i(),o(45,"mat-icon",9),a(46,"location_city"),i(),m(47,Ne,2,0,"mat-error"),i()(),o(48,"div",16)(49,"h4",17),a(50,"I want to:"),i(),o(51,"mat-radio-group",18)(52,"div",19)(53,"mat-radio-button",20),a(54," Find women-owned businesses "),i(),o(55,"mat-radio-button",21),a(56," Offer services through my business "),i()()(),m(57,Pe,2,0,"mat-error"),i(),o(58,"div",6)(59,"mat-form-field",7)(60,"mat-label"),a(61,"Email Address"),i(),f(62,"input",22),o(63,"mat-icon",9),a(64,"email"),i(),m(65,Oe,3,1,"mat-error"),i(),o(66,"mat-form-field",7)(67,"mat-label"),a(68,"Heritage"),i(),o(69,"mat-select",23)(70,"mat-option",13),a(71,"Select country"),i(),v(72,ke,2,2,"mat-option",14,fe),i(),o(74,"mat-icon",9),a(75,"public"),i(),m(76,qe,2,0,"mat-error"),i()(),o(77,"mat-form-field",7)(78,"mat-label"),a(79,"Password"),i(),f(80,"input",24),o(81,"button",25),h("click",function(){x(e);let _=d();return S(_.togglePasswordVisibility())}),o(82,"mat-icon"),a(83),i()(),m(84,Le,3,1,"mat-error"),i(),m(85,De,6,1,"div",26)(86,Be,6,1,"div",27)(87,Ge,6,1,"div",28),o(88,"button",29),m(89,Ue,1,0)(90,$e,3,0,"span",30),i(),o(91,"div",31)(92,"p",32),a(93," Already have an account? "),o(94,"a",33),a(95," Sign in "),i()()()()}if(t&2){let e=d();r(5),s("formGroup",e.signupForm),r(5),s("disabled",e.loading()),r(3),l(e.firstNameControl!=null&&e.firstNameControl.invalid&&(e.firstNameControl!=null&&e.firstNameControl.touched)?13:-1),r(4),s("disabled",e.loading()),r(),l(e.lastNameControl!=null&&e.lastNameControl.invalid&&(e.lastNameControl!=null&&e.lastNameControl.touched)?18:-1),r(4),s("disabled",e.loading()),r(3),l(e.phoneControl!=null&&e.phoneControl.hasError("required")&&(e.phoneControl!=null&&e.phoneControl.touched)?25:-1),r(),l(e.phoneControl!=null&&e.phoneControl.hasError("usaPhone")&&(e.phoneControl!=null&&e.phoneControl.touched)?26:-1),r(5),s("disabled",e.loading()),r(3),y(e.usStates),r(4),l(e.stateControl!=null&&e.stateControl.invalid&&(e.stateControl!=null&&e.stateControl.touched)?38:-1),r(4),s("disabled",e.loading()||e.availableCities().length===0),r(),l(e.availableCities().length===0?43:44),r(4),l(e.cityControl!=null&&e.cityControl.invalid&&(e.cityControl!=null&&e.cityControl.touched)?47:-1),r(4),s("disabled",e.loading()),r(6),l(e.userTypeControl!=null&&e.userTypeControl.invalid&&(e.userTypeControl!=null&&e.userTypeControl.touched)?57:-1),r(5),s("disabled",e.loading()),r(3),l(e.emailControl!=null&&e.emailControl.invalid&&(e.emailControl!=null&&e.emailControl.touched)?65:-1),r(4),s("disabled",e.loading()),r(3),y(e.countries),r(4),l(e.countryOfOriginControl!=null&&e.countryOfOriginControl.invalid&&(e.countryOfOriginControl!=null&&e.countryOfOriginControl.touched)?76:-1),r(4),s("type",e.showPassword()?"text":"password")("disabled",e.loading()),r(),T("aria-label","Toggle password visibility")("aria-pressed",e.showPassword()),r(2),c(e.showPassword()?"visibility_off":"visibility"),r(),l(e.passwordControl!=null&&e.passwordControl.invalid&&(e.passwordControl!=null&&e.passwordControl.touched)?84:-1),r(),l(e.authMessage()?85:-1),r(),l(e.error()?86:-1),r(),l(e.successMessage()?87:-1),r(),s("disabled",e.loading()||!e.signupForm.valid),r(),l(e.loading()?90:89),r(5),s("routerLink",w(31,ge))}}function He(t,n){if(t&1&&(o(0,"div",27)(1,"div",37)(2,"mat-icon",35),a(3,"error"),i(),o(4,"span",36),a(5),i()()()),t&2){let e=d(2);r(5),c(e.error())}}function Je(t,n){if(t&1&&(o(0,"div",28)(1,"div",38)(2,"mat-icon",35),a(3,"check_circle"),i(),o(4,"span",36),a(5),i()()()),t&2){let e=d(2);r(5),c(e.successMessage())}}function We(t,n){t&1&&a(0," Resend Verification Email ")}function Ye(t,n){t&1&&(o(0,"span",30),f(1,"mat-spinner",39),a(2," Sending... "),i())}function ze(t,n){if(t&1){let e=E();o(0,"div",1)(1,"div",40)(2,"mat-icon",41),a(3,"email"),i(),o(4,"h2",3),a(5,"Check Your Email"),i(),o(6,"p",42),a(7," We've sent a verification link to: "),i(),o(8,"p",43),a(9),i(),o(10,"p",4),a(11," Click the link in the email to verify your account and complete your registration. "),i()(),m(12,He,6,1,"div",27)(13,Je,6,1,"div",28),o(14,"div",44)(15,"button",45),h("click",function(){x(e);let _=d();return S(_.resendVerification())}),m(16,We,1,0)(17,Ye,3,0,"span",30),i(),o(18,"button",46),a(19," Back to Login "),i()(),o(20,"div",47)(21,"p",48),a(22," Didn't receive the email? Check your spam folder or try resending. "),i()()()}if(t&2){let e=d();r(9),c(e.verificationEmail()),r(3),l(e.error()?12:-1),r(),l(e.successMessage()?13:-1),r(2),s("disabled",e.loading()),r(),l(e.loading()?17:16),r(2),s("routerLink",w(6,ge))}}var _e=class t{authService=g(B);router=g(I);route=g(P);fb=g(W);citiesService=g(ce);error=C("");successMessage=C("");authMessage=C("");filteredCities=C([]);availableCities=C([]);loading=C(!1);showPassword=C(!1);showVerificationStep=C(!1);verificationEmail=C("");signupForm;countries=oe;usStates=Ce;constructor(){this.signupForm=this.fb.group({firstName:["",[p.required]],lastName:["",[p.required]],phone:["",[p.required,pe.usaPhone]],state:["",[p.required]],city:["",[p.required]],userType:["",[p.required]],email:["",[p.required,p.email]],countryOfOrigin:["",[p.required]],password:["",[p.required,p.minLength(6)]]}),F(()=>{let n=this.stateControl?.value;n?this.loadCitiesForState(n):this.availableCities.set([])})}ngOnInit(){this.route.queryParams.subscribe(n=>{n.message&&this.authMessage.set(n.message)})}onSubmit(){return b(this,null,function*(){if(this.clearMessages(),!this.signupForm.valid){this.error.set("Please fill in all required fields correctly");return}let n=this.signupForm.value,e={first_name:n.firstName,last_name:n.lastName,email:n.email,password:n.password,phone:n.phone,state:n.state,city:n.city,country_of_origin:n.countryOfOrigin,is_buyer:n.userType==="buyer",is_seller:n.userType==="seller"};this.loading.set(!0);try{let u=yield this.authService.signUp(e);u.data?(this.successMessage.set("Account created successfully! Please check your email to verify your account."),this.showVerificationMessage(n.email)):this.error.set(u.error?.message||"Registration failed. Please try again.")}catch(u){this.error.set(u?.message||"An unexpected error occurred. Please try again.")}finally{this.loading.set(!1)}})}showVerificationMessage(n){this.verificationEmail.set(n),this.showVerificationStep.set(!0),this.signupForm.disable()}resendVerification(){return b(this,null,function*(){if(this.verificationEmail()){this.loading.set(!0);try{let n=yield this.authService.resendEmailVerification(this.verificationEmail());n.success?(this.successMessage.set("Verification email sent! Please check your inbox."),this.error.set("")):this.error.set(n.message||"Failed to resend verification email.")}catch(n){this.error.set(n?.message||"Failed to resend verification email.")}finally{this.loading.set(!1)}}})}onStateSelected(n){this.loadCitiesForState(n),this.signupForm.get("city")?.setValue("")}loadCitiesForState(n){let e=this.citiesService.getCitiesByState(n);this.availableCities.set(e)}togglePasswordVisibility(){this.showPassword.update(n=>!n)}clearMessages(){this.error.set(""),this.successMessage.set(""),this.authMessage.set("")}get firstNameControl(){return this.signupForm.get("firstName")}get lastNameControl(){return this.signupForm.get("lastName")}get phoneControl(){return this.signupForm.get("phone")}get stateControl(){return this.signupForm.get("state")}get cityControl(){return this.signupForm.get("city")}get userTypeControl(){return this.signupForm.get("userType")}get emailControl(){return this.signupForm.get("email")}get countryOfOriginControl(){return this.signupForm.get("countryOfOrigin")}get passwordControl(){return this.signupForm.get("password")}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=M({type:t,selectors:[["app-signup"]],decls:3,vars:2,consts:[[1,"signup-container"],[1,"text-center","space-y-6"],[1,"text-center","mb-8"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-2","gap-4"],["appearance","outline"],["matInput","","formControlName","firstName","placeholder","First name",3,"disabled"],["matSuffix",""],["matInput","","formControlName","lastName","placeholder","Last name",3,"disabled"],["matInput","","type","tel","appPhoneFormat","","formControlName","phone","placeholder","(555) 123-4567",3,"disabled"],["formControlName","state",3,"selectionChange","disabled"],["value",""],[3,"value"],["formControlName","city",3,"disabled"],[1,"space-y-3","p-4","bg-gray-50","rounded-lg"],[1,"text-sm","font-medium","text-gray-700","mb-3"],["formControlName","userType",1,"radio-group-inline",3,"disabled"],[1,"radio-options"],["value","buyer",1,"radio-option"],["value","seller",1,"radio-option"],["matInput","","type","email","formControlName","email","placeholder","your@email.com",3,"disabled"],["formControlName","countryOfOrigin",3,"disabled"],["matInput","","formControlName","password","placeholder","Enter password",3,"type","disabled"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"mb-4","p-3","bg-blue-50","border","border-blue-200","rounded-lg"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"mb-4","p-3","bg-green-50","border","border-green-200","rounded-lg"],["mat-raised-button","","color","primary","type","submit",1,"w-full","py-3","text-base","font-medium","mb-4",3,"disabled"],[1,"flex","items-center","justify-center","gap-2"],[1,"mt-4","pt-4","border-t","border-gray-200","text-center"],[1,"text-sm","text-gray-600"],["mat-button","","color","primary",1,"text-sm","font-medium","ml-1",3,"routerLink"],[1,"flex","items-center","text-blue-700"],[1,"mr-2","text-sm"],[1,"text-sm"],[1,"flex","items-center","text-red-700"],[1,"flex","items-center","text-green-700"],["diameter","16"],[1,"mb-6"],[1,"text-6xl","text-blue-500","mb-4"],[1,"text-gray-600","mb-4"],[1,"text-lg","font-medium","text-gray-900","mb-4"],[1,"space-y-3"],["mat-raised-button","","color","accent",1,"w-full","py-3","text-base","font-medium",3,"click","disabled"],["mat-button","","color","primary",1,"w-full","py-3","text-base","font-medium",3,"routerLink"],[1,"mt-6","pt-4","border-t","border-gray-200"],[1,"text-sm","text-gray-500"]],template:function(e,u){e&1&&(o(0,"div",0),m(1,je,96,32)(2,ze,23,7,"div",1),i()),e&2&&(r(),l(u.showVerificationStep()?-1:1),r(),l(u.showVerificationStep()?2:-1))},dependencies:[N,Y,j,G,U,$,H,J,V,Z,X,z,K,Q,ne,ie,te,ee,O,D,L,A,R,q,k,ae,de,me,se,le,re,ue],styles:["[_nghost-%COMP%]{display:block}"]})};export{_e as SignupComponent};
