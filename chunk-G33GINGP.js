import{a as Et,b as jt}from"./chunk-X3KBKZTE.js";import{c as kt}from"./chunk-KD3MQ7OS.js";import{a as wt}from"./chunk-UOOFGMWV.js";import{a as St,b as yt,c as Mt,h as Pt}from"./chunk-PJBTWK4Y.js";import{c as gt,d as xt,e as Ct,f as bt}from"./chunk-HRVUN4EW.js";import{a as ht}from"./chunk-GNNJNILE.js";import{a as at,b as st}from"./chunk-VLA5YAO4.js";import"./chunk-M75U4SGI.js";import{a as ue}from"./chunk-KHUZYUCG.js";import"./chunk-UAFHO54Y.js";import"./chunk-BA2EXSEK.js";import{a as ct,b as dt,c as mt,e as ut,f as pt,g as vt,h as pe}from"./chunk-R2F2B62Q.js";import{b as Be,c as De,d as Oe,e as Re,g as ze,h as tt,i as it,k as nt,l as ot,m as rt,n as me}from"./chunk-P4WRWHWY.js";import"./chunk-IK6JUFTK.js";import"./chunk-DKE3OTJ7.js";import"./chunk-KLROSHLT.js";import"./chunk-B7X6HNXL.js";import"./chunk-TE5HKKWZ.js";import{b as de,d as oe}from"./chunk-SQ5Q2QHJ.js";import{a as E,b as $,c as B,f as q,g as j}from"./chunk-5J5HWN7Y.js";import"./chunk-UV22CJPJ.js";import{b as lt}from"./chunk-V4Y4CMTG.js";import"./chunk-KGCA3U4R.js";import{a as _t,b as ft}from"./chunk-33K4CE3V.js";import{h as Je,j as Ke,l as Ze,m as et}from"./chunk-XZTS425U.js";import"./chunk-32WIJ6DZ.js";import"./chunk-7N3ULFJ6.js";import{d as Ge,e as We,f as Ye,h as Qe,k as Xe}from"./chunk-K76RD3AY.js";import{B as Ue,c as Ve,e as ne,h as Ne,i as Fe,l as Le,p as Ae,r as $e,y as qe,z as He}from"./chunk-LJVLI66S.js";import{a as ce}from"./chunk-EWH2HRUY.js";import{a as J,b as K}from"./chunk-4LADR266.js";import{b as Q,c as X,d as A}from"./chunk-AT26KLTR.js";import{a as le}from"./chunk-NZJEVKY3.js";import"./chunk-TL7YA3DG.js";import"./chunk-CGBMKB7Q.js";import"./chunk-WF66C34H.js";import"./chunk-QD7SSFII.js";import{a as O,b as R}from"./chunk-QYFERLBL.js";import"./chunk-VBZ52KF5.js";import{b as ae,d as se}from"./chunk-WBPYOJYK.js";import"./chunk-6N4JLV7X.js";import{t as P}from"./chunk-TZYYMUAL.js";import{Eb as d,Fb as m,Gb as D,Hb as te,Ib as w,Jb as S,Kb as x,Lb as r,Mb as o,Nb as f,Pc as V,Tc as I,Ub as h,Uc as C,Ya as L,Yb as _,_a as s,_b as c,fa as T,ic as Y,jc as ie,ka as p,kc as N,la as v,lc as Ie,ma as F,mc as a,na as ee,nc as g,oc as b,pb as M,pc as W,qc as re,ua as y}from"./chunk-4R5BQBA3.js";import{e as G}from"./chunk-JKOY2XUY.js";var Bt=(i,t)=>t._id;function Dt(i,t){i&1&&(r(0,"div",3),f(1,"div",4),o())}function Ot(i,t){if(i&1){let e=h();r(0,"div",5),a(1,"Error"),o(),r(2,"div",6)(3,"div",7)(4,"div",8)(5,"mat-icon",9),a(6,"error_outline"),o()(),r(7,"h3",10),a(8),o()()(),r(9,"div",11)(10,"button",12),_("click",function(){p(e);let l=c();return v(l.onCancel())}),a(11," Cancel "),o(),r(12,"button",13),_("click",function(){p(e);let l=c();return v(l.ngOnInit())}),a(13," Try Again "),o()()}if(i&2){let e=c();s(8),g(e.error())}}function Rt(i,t){if(i&1&&(r(0,"div",15),a(1),o()),i&2){let e,n=c(2);s(),g((e=n.business())==null?null:e.name)}}function Vt(i,t){if(i&1&&f(0,"img",45),i&2){let e=c(3);x("src",e.business().logo_url,L)("alt",e.business().name)}}function Nt(i,t){i&1&&(r(0,"div",46)(1,"mat-icon",50),a(2,"business"),o()())}function Ft(i,t){if(i&1&&(r(0,"mat-card",18)(1,"mat-card-content")(2,"div",44),d(3,Vt,1,2,"img",45)(4,Nt,3,0,"div",46),r(5,"div",47)(6,"h3",48),a(7),o(),r(8,"p",49),a(9),o()()()()()),i&2){let e,n,l,u=c(2);s(3),m((e=u.business())!=null&&e.logo_url?3:4),s(4),g((n=u.business())==null?null:n.name),s(2),g(((l=u.business())==null?null:l.short_description)||((l=u.business())==null?null:l.description)||"No description available")}}function Lt(i,t){if(i&1&&(r(0,"mat-error"),a(1),o()),i&2){let e=c(2);s(),g(e.getFieldError(e.projectInfoForm,"title"))}}function At(i,t){if(i&1&&(r(0,"mat-error"),a(1),o()),i&2){let e=c(2);s(),g(e.getFieldError(e.projectInfoForm,"description"))}}function $t(i,t){i&1&&(r(0,"div",26),f(1,"mat-spinner",51),o())}function qt(i,t){i&1&&(r(0,"div",27)(1,"mat-icon",52),a(2,"info"),o(),r(3,"p"),a(4,"No services available for this business"),o()())}function Ht(i,t){if(i&1&&(r(0,"span",62),a(1),o()),i&2){let e=c().$implicit;s(),b(" ",e.pricing_type," ")}}function Ut(i,t){if(i&1){let e=h();r(0,"div",54)(1,"label",56)(2,"input",57),_("change",function(){let l=p(e).$implicit,u=c(3);return v(u.onServiceToggle(l._id))}),o(),r(3,"div",47)(4,"h4",58),a(5),o(),r(6,"p",59),a(7),o(),r(8,"div",60)(9,"span",61),a(10),o(),d(11,Ht,2,1,"span",62),o()()()()}if(i&2){let e=t.$implicit,n=c(3);s(2),x("value",e._id)("checked",n.isServiceSelected()(e._id)),s(3),g(e.name),s(2),g(e.description),s(3),b(" ",n.formatPrice(e.price||0)," "),s(),m(e.pricing_type?11:-1)}}function zt(i,t){if(i&1&&(r(0,"div",55),a(1),o()),i&2){let e=c(3);s(),b(" ",e.getFieldError(e.projectInfoForm,"selectedServices")," ")}}function Gt(i,t){if(i&1&&(r(0,"div",53),w(1,Ut,12,6,"div",54,Bt),o(),d(3,zt,2,1,"div",55)),i&2){let e=c(2);s(),S(e.services()),s(2),m(e.isFieldInvalid(e.projectInfoForm,"selectedServices")?3:-1)}}function Wt(i,t){if(i&1&&(r(0,"div",28)(1,"div",63)(2,"div")(3,"h4",64),a(4,"Estimated Total"),o(),r(5,"p",65),a(6),o()(),r(7,"div",66),a(8),o()()()),i&2){let e=c(2);s(6),b("",e.selectedServices().length," service(s) selected"),s(2),b(" ",e.formatPrice(e.totalEstimatedCost())," ")}}function Yt(i,t){if(i&1){let e=h();r(0,"div",33),f(1,"img",67),r(2,"button",68),_("click",function(){p(e);let l=c(2);return v(l.removeImage())}),r(3,"mat-icon",69),a(4,"close"),o()()()}if(i&2){let e=c(2);s(),x("src",e.imagePreview(),L)}}function Qt(i,t){if(i&1){let e=h();r(0,"div",34)(1,"input",70,2),_("change",function(l){p(e);let u=c(2);return v(u.onImageSelect(l))}),o(),r(3,"mat-icon",36),a(4,"cloud_upload"),o(),r(5,"p",37),a(6,"Click to upload project image"),o(),r(7,"button",71),_("click",function(){p(e);let l=Y(2);return v(l.click())}),a(8," Choose Image "),o(),r(9,"p",39),a(10,"JPG, PNG up to 5MB"),o()()}}function Xt(i,t){if(i&1){let e=h();r(0,"div",72)(1,"div",73)(2,"mat-icon",74),a(3),o(),r(4,"div")(5,"p",75),a(6),o(),r(7,"p",76),a(8),o()()(),r(9,"button",77),_("click",function(){let l=p(e).$index,u=c(3);return v(u.removeAttachment(l))}),r(10,"mat-icon",69),a(11,"delete"),o()()()}if(i&2){let e=t.$implicit,n=c(3);s(3),g(n.getFileIcon(e.type)),s(3),g(e.name),s(2),g(n.formatFileSize(e.size))}}function Jt(i,t){if(i&1&&(r(0,"div",40)(1,"h5",58),a(2,"Attached Files:"),o(),w(3,Xt,12,3,"div",72,D),o()),i&2){let e=c(2);s(3),S(e.attachmentPreviews())}}function Kt(i,t){i&1&&(f(0,"mat-spinner",78),a(1," Submitting Request... "))}function Zt(i,t){i&1&&a(0," Submit Request ")}function ei(i,t){if(i&1){let e=h();r(0,"div",14)(1,"div")(2,"span"),a(3,"Request a New Project"),o(),d(4,Rt,2,1,"div",15),o(),r(5,"button",16),_("click",function(){p(e);let l=c();return v(l.onCancel())}),r(6,"mat-icon"),a(7,"close"),o()()(),r(8,"mat-dialog-content",17),d(9,Ft,10,3,"mat-card",18),r(10,"form",19),_("ngSubmit",function(){p(e);let l=c();return v(l.onProjectSubmit())}),r(11,"div",20)(12,"mat-form-field",21)(13,"mat-label"),a(14,"Project Title"),o(),f(15,"input",22),r(16,"mat-hint"),a(17,"Be specific about what you need"),o(),d(18,Lt,2,1,"mat-error"),o(),r(19,"mat-form-field",21)(20,"mat-label"),a(21,"Project Description"),o(),r(22,"textarea",23),a(23,"                  "),o(),r(24,"mat-hint"),a(25,"Provide as much detail as possible to help the business understand your needs"),o(),d(26,At,2,1,"mat-error"),o(),r(27,"div",24)(28,"h3",25),a(29,"Select Services"),o(),d(30,$t,2,0,"div",26)(31,qt,5,0,"div",27)(32,Gt,4,1),o(),d(33,Wt,9,2,"div",28),r(34,"mat-form-field",21)(35,"mat-label"),a(36,"Project Deadline (Optional)"),o(),f(37,"input",29)(38,"mat-datepicker-toggle",30)(39,"mat-datepicker",null,0),r(41,"mat-hint"),a(42,"When would you like this project completed?"),o()(),r(43,"mat-form-field",21)(44,"mat-label"),a(45,"Additional Notes (Optional)"),o(),r(46,"textarea",31),a(47,"                  "),o(),r(48,"mat-hint"),a(49,"Special requirements, preferences, or additional context"),o()(),r(50,"div",24)(51,"h4",25),a(52,"Project Image (Optional)"),o(),r(53,"p",32),a(54,"Add an image to help illustrate your project requirements"),o(),d(55,Yt,5,1,"div",33)(56,Qt,11,0,"div",34),o(),r(57,"div",24)(58,"h4",25),a(59,"Attachments (Optional)"),o(),r(60,"p",32),a(61,"Attach files that provide more details about your project"),o(),r(62,"div",34)(63,"input",35,1),_("change",function(l){p(e);let u=c();return v(u.onFilesSelect(l))}),o(),r(65,"mat-icon",36),a(66,"attach_file"),o(),r(67,"p",37),a(68,"Click to attach files"),o(),r(69,"button",38),_("click",function(){p(e);let l=Y(64);return v(l.click())}),a(70," Choose Files "),o(),r(71,"p",39),a(72,"Documents, images, PDFs up to 10MB each (max 5 files)"),o()(),d(73,Jt,5,0,"div",40),o()()()(),r(74,"mat-dialog-actions",41)(75,"button",42),_("click",function(){p(e);let l=c();return v(l.onCancel())}),a(76," Cancel "),o(),r(77,"button",43),_("click",function(){p(e);let l=c();return v(l.onProjectSubmit())}),d(78,Kt,2,0)(79,Zt,1,0),o()()}if(i&2){let e=Y(40),n=c();s(4),m(n.business()?4:-1),s(5),m(n.business()?9:-1),s(),x("formGroup",n.projectInfoForm),s(8),m(n.isFieldInvalid(n.projectInfoForm,"title")?18:-1),s(8),m(n.isFieldInvalid(n.projectInfoForm,"description")?26:-1),s(4),m(n.servicesLoading()?30:n.services().length===0?31:32),s(3),m(n.selectedServices().length>0?33:-1),s(4),x("matDatepicker",e),s(),x("for",e),s(17),m(n.imagePreview()?55:56),s(18),m(n.attachmentPreviews().length>0?73:-1),s(2),x("disabled",n.submitting()),s(2),x("disabled",!n.canSubmit()),s(),m(n.submitting()?78:79)}}var ve=class i{formBuilder=T(He);projectService=T(ue);businessService=T(ce);authService=T(le);router=T(se);route=T(ae);dashboardRefreshService=T(wt);dialogRef=T(ct);dialogData=T(dt);loading=y(!1);error=y(null);business=y(null);services=y([]);servicesLoading=y(!1);submitting=y(!1);imagePreview=y(null);attachmentPreviews=y([]);imageFile=null;attachmentFiles=[];projectInfoForm;user=this.authService.user;selectedServiceIds=y([]);selectedServices=V(()=>{let t=this.selectedServiceIds();return this.services().filter(e=>t.includes(e._id))});isServiceSelected=V(()=>{let t=this.selectedServiceIds();return e=>t.includes(e)});totalEstimatedCost=V(()=>this.selectedServices().reduce((t,e)=>t+(e.price||0),0));canSubmit=V(()=>{let t=this.projectInfoForm?.valid||!1,e=this.selectedServices().length>0,n=!this.submitting();return t&&e&&n});atLeastOneService(t){let e=t.value;return!e||!Array.isArray(e)||e.length===0?{atLeastOneService:!0}:null}futureDateValidator(t){if(!t.value)return null;let e=new Date(t.value),n=new Date;return n.setHours(0,0,0,0),e<n?{pastDate:!0}:null}constructor(){this.projectInfoForm=this.formBuilder.group({title:["",[ne.required,ne.maxLength(200)]],description:["",[ne.maxLength(1e3)]],selectedServices:[[],[ne.required,this.atLeastOneService]],deadline:["",[this.futureDateValidator]],additionalNotes:["",[ne.maxLength(500)]]})}ngOnInit(){if(!this.user()){this.dialogRef?this.dialogRef.close({error:"Authentication required"}):this.router.navigate(["/auth"]);return}let t=this.dialogData?.businessId||this.route.snapshot.params.businessId;if(!t){this.error.set("Business ID is required"),this.dialogRef?this.dialogRef.close({error:"Business ID is required"}):this.router.navigate(["/"]);return}this.loadBusinessAndServices(t),this.projectInfoForm.get("selectedServices")?.valueChanges.subscribe(e=>{if(this.selectedServiceIds.set(e||[]),this.dialogData?.preSelectedServiceId&&!e?.includes(this.dialogData.preSelectedServiceId)){let n=e||[];if(!n.includes(this.dialogData.preSelectedServiceId)){let l=[...n,this.dialogData.preSelectedServiceId];this.projectInfoForm.get("selectedServices")?.setValue(l,{emitEvent:!1}),this.selectedServiceIds.set(l)}}})}loadBusinessAndServices(t){return G(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let e=yield this.businessService.getBusinessAsync(t);this.business.set(e),this.servicesLoading.set(!0);let n=yield this.businessService.getBusinessServicesAsync(t);this.services.set(n.filter(l=>l.is_active)),this.dialogData?.preSelectedServiceId&&n.find(u=>u._id===this.dialogData?.preSelectedServiceId&&u.is_active)&&(this.projectInfoForm.get("selectedServices")?.setValue([this.dialogData.preSelectedServiceId]),this.selectedServiceIds.set([this.dialogData.preSelectedServiceId]))}catch(e){console.error("Error loading business data:",e),this.error.set("Failed to load business information")}finally{this.loading.set(!1),this.servicesLoading.set(!1)}})}onProjectSubmit(){return G(this,null,function*(){if(this.projectInfoForm.invalid){this.markFormGroupTouched(this.projectInfoForm);return}this.submitting.set(!0),this.error.set(null);try{let t=this.projectInfoForm.value,e=this.business();if(!e)throw new Error("Business information not loaded");let n={title:t.title,description:t.description,business_id:e._id,selected_services:t.selectedServices,deadline:t.deadline?new Date(t.deadline).toISOString():void 0,additional_notes:t.additionalNotes};console.log("Creating project request:",n);let l=yield this.projectService.createProjectAsync(n);if(console.log("\u2705 Project request created successfully:",l),this.imageFile)try{console.log("Uploading project image..."),yield this.projectService.uploadProjectImageAsync(l._id,this.imageFile),console.log("\u2705 Project image uploaded successfully")}catch(u){console.warn("\u26A0\uFE0F Failed to upload project image:",u)}if(this.attachmentFiles.length>0)try{console.log("Uploading project attachments..."),yield this.projectService.uploadProjectAttachmentsAsync(l._id,this.attachmentFiles),console.log("\u2705 Project attachments uploaded successfully")}catch(u){console.warn("\u26A0\uFE0F Failed to upload project attachments:",u)}console.log("Refreshing dashboard and navigating..."),this.dashboardRefreshService.triggerRefresh(),this.dialogRef?this.dialogRef.close({success:!0,project:l,message:"Project request submitted successfully!"}):this.router.navigate(["/dashboard/projects",l._id]),console.log("=== Project Request Submission Process Completed Successfully ===")}catch(t){console.error("\u274C Error in project request submission:",t),console.error("Full error object:",t);let e="Failed to submit project request. Please try again.";t.error&&t.error.message?e=t.error.message:t.message&&(e=t.message),this.error.set(e)}finally{this.submitting.set(!1)}})}onCancel(){this.dialogRef?this.dialogRef.close({cancelled:!0}):this.router.navigate(["/"])}onBackToBusiness(){if(this.dialogRef)this.dialogRef.close({cancelled:!0});else{let t=this.business();t?this.router.navigate(["/business/profile",t._id]):this.router.navigate(["/"])}}markFormGroupTouched(t){Object.keys(t.controls).forEach(e=>{t.get(e)?.markAsTouched()})}formatPrice(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}isFieldInvalid(t,e){let n=t.get(e);return!!(n&&n.invalid&&n.touched)}getFieldError(t,e){let n=t.get(e);if(n&&n.errors&&n.touched){if(n.errors.required)return`${e} is required`;if(n.errors.maxlength)return`${e} is too long`;if(n.errors.requiredTrue)return"You must accept the terms";if(n.errors.atLeastOneService)return"Please select at least one service";if(n.errors.pastDate)return"Deadline cannot be in the past"}return""}onServiceToggle(t){let e=this.projectInfoForm.get("selectedServices"),n=e.value||[],l;n.includes(t)?l=n.filter(u=>u!==t):l=[...n,t],e.setValue(l),e.markAsTouched(),this.selectedServiceIds.set(l)}onImageSelect(t){let e=t.target;if(e.files&&e.files.length>0){let n=e.files[0];if(!n.type.startsWith("image/")){this.error.set("Please select an image file.");return}if(n.size>5*1024*1024){this.error.set("Image file size must be less than 5MB.");return}this.imageFile=n;let l=new FileReader;l.onload=u=>{this.imagePreview.set(u.target?.result)},l.readAsDataURL(n),this.error.set(null)}}removeImage(){this.imageFile=null,this.imagePreview.set(null)}onFilesSelect(t){let e=t.target;if(e.files&&e.files.length>0){let n=Array.from(e.files);for(let k of n)if(k.size>10*1024*1024){this.error.set(`File "${k.name}" is too large. Maximum size is 10MB.`);return}if(this.attachmentFiles.length+n.length>5){this.error.set("Maximum 5 files allowed.");return}this.attachmentFiles.push(...n);let l=this.attachmentPreviews(),u=n.map(k=>({name:k.name,url:URL.createObjectURL(k),type:k.type,size:k.size}));this.attachmentPreviews.set([...l,...u]),this.error.set(null)}}removeAttachment(t){this.attachmentFiles.splice(t,1);let e=this.attachmentPreviews();URL.revokeObjectURL(e[t].url),e.splice(t,1),this.attachmentPreviews.set([...e])}formatFileSize(t){if(t===0)return"0 Bytes";let e=1024,n=["Bytes","KB","MB","GB"],l=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,l)).toFixed(2))+" "+n[l]}getFileIcon(t){return t.startsWith("image/")?"image":t.includes("pdf")?"picture_as_pdf":t.includes("word")||t.includes("document")?"description":t.includes("sheet")||t.includes("excel")?"table_chart":t.includes("presentation")||t.includes("powerpoint")?"slideshow":t.includes("text")?"text_snippet":"attach_file"}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-create-project-steps"]],decls:3,vars:1,consts:[["picker",""],["fileInput",""],["imageInput",""],["mat-dialog-content","",1,"flex","justify-center","items-center","py-20"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-blue-600"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"text-center","py-8"],[1,"text-red-400","mb-4"],[1,"text-6xl"],[1,"text-lg","font-medium","text-gray-900","mb-2"],["mat-dialog-actions","","align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"],["mat-dialog-title","",1,"flex!","items-center!","justify-between!"],[1,"text-sm","font-normal","text-gray-600","mt-1"],["mat-icon-button","",1,"text-gray-400","hover:text-gray-600",3,"click"],[1,"scrollable-content"],[1,"mb-6"],[3,"ngSubmit","formGroup"],[1,"space-y-6"],["appearance","outline",1,"w-full"],["matInput","","formControlName","title","placeholder","Enter your project title","maxlength","200"],["matInput","","formControlName","description","placeholder","Describe your project requirements in detail","rows","4","maxlength","1000"],[1,"space-y-4"],[1,"text-lg","font-medium","text-gray-900"],[1,"flex","justify-center","py-8"],[1,"text-center","py-8","text-gray-500"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-4"],["matInput","","formControlName","deadline","placeholder","Choose a deadline",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","additionalNotes","placeholder","Any additional requirements or special instructions","rows","3","maxlength","500"],[1,"text-sm","text-gray-600"],[1,"relative","inline-block"],[1,"border-2","border-dashed","border-gray-300","rounded-lg","p-6","text-center","hover:border-gray-400","transition-colors"],["type","file","multiple","",1,"hidden",3,"change"],[1,"text-gray-400","text-4xl","mb-2"],[1,"text-gray-600","mb-2"],["type","button",1,"bg-gray-600","text-white","px-4","py-2","rounded-lg","hover:bg-gray-700","transition-colors",3,"click"],[1,"text-xs","text-gray-500","mt-2"],[1,"space-y-2"],["align","end"],["mat-button","",3,"click","disabled"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"flex","items-center","space-x-4"],[1,"w-16","h-16","rounded-lg","object-cover",3,"src","alt"],[1,"w-16","h-16","rounded-lg","bg-gray-200","flex","items-center","justify-center"],[1,"flex-1"],[1,"text-xl","font-semibold","text-gray-900"],[1,"text-gray-600"],[1,"text-gray-500","text-2xl"],["diameter","32"],[1,"text-4xl","mb-2"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"border","rounded-lg","p-4","hover:border-blue-300","transition-colors"],[1,"text-red-600","text-sm","mt-2"],[1,"flex","items-start","space-x-3","cursor-pointer"],["type","checkbox",1,"mt-1","h-4","w-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500",3,"change","value","checked"],[1,"font-medium","text-gray-900"],[1,"text-sm","text-gray-600","mt-1"],[1,"flex","justify-between","items-center","mt-2"],[1,"text-lg","font-semibold","text-blue-600"],[1,"text-xs","text-gray-500","bg-gray-100","px-2","py-1","rounded"],[1,"flex","justify-between","items-center"],[1,"font-medium","text-blue-900"],[1,"text-sm","text-blue-700"],[1,"text-2xl","font-bold","text-blue-900"],["alt","Project preview",1,"w-32","h-32","object-cover","rounded-lg","border","border-gray-200",3,"src"],["type","button",1,"absolute","-top-2","-right-2","bg-red-100","text-red-600","rounded-full","p-1","hover:bg-red-200","transition-colors",3,"click"],[1,"text-sm"],["type","file","accept","image/*",1,"hidden",3,"change"],["type","button",1,"bg-blue-600","text-white","px-4","py-2","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"flex","items-center","justify-between","p-3","bg-gray-50","rounded-lg","border","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"text-gray-500"],[1,"text-sm","font-medium","text-gray-900","truncate","max-w-xs"],[1,"text-xs","text-gray-500"],["type","button",1,"text-red-600","hover:text-red-700","p-1",3,"click"],["diameter","20",1,"mr-2"]],template:function(e,n){e&1&&d(0,Dt,2,0,"div",3)(1,Ot,14,1)(2,ei,80,14),e&2&&m(n.loading()?0:n.error()?1:2)},dependencies:[P,Ue,Le,Ve,Ne,Fe,qe,Ae,$e,Je,Xe,Ge,Ye,We,Qe,et,Ze,Ke,lt,Pt,St,yt,Mt,A,X,Q,R,O,K,J,j,E,B,pe,ut,vt,pt],styles:[".business-info-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;box-shadow:0 1px 3px #0000001a}.mat-mdc-checkbox[_ngcontent-%COMP%]   .mat-mdc-checkbox-frame[_ngcontent-%COMP%]{border-color:#d1d5db}.mat-mdc-checkbox.mat-mdc-checkbox-checked[_ngcontent-%COMP%]   .mat-mdc-checkbox-background[_ngcontent-%COMP%]{background-color:#3b82f6}.mat-mdc-form-field[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{border-radius:8px}.mat-mdc-form-field.mat-focused[_ngcontent-%COMP%]   .mdc-notched-outline__leading[_ngcontent-%COMP%], .mat-mdc-form-field.mat-focused[_ngcontent-%COMP%]   .mdc-notched-outline__notch[_ngcontent-%COMP%], .mat-mdc-form-field.mat-focused[_ngcontent-%COMP%]   .mdc-notched-outline__trailing[_ngcontent-%COMP%]{border-color:#3b82f6}.mat-mdc-raised-button[_ngcontent-%COMP%]{border-radius:8px;font-weight:600;text-transform:none;box-shadow:0 1px 3px #0000001a}.mat-mdc-raised-button.mat-primary[_ngcontent-%COMP%]{background-color:#3b82f6}.mat-mdc-raised-button.mat-primary[_ngcontent-%COMP%]:hover{background-color:#2563eb}.mat-mdc-outlined-button[_ngcontent-%COMP%]{border-radius:8px;font-weight:500;text-transform:none;border-color:#d1d5db;color:#374151}.mat-mdc-outlined-button[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.service-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.service-card[_ngcontent-%COMP%]:hover{border-color:#3b82f6;box-shadow:0 4px 6px -1px #0000001a}.service-card.selected[_ngcontent-%COMP%]{border-color:#3b82f6;background-color:#eff6ff}.loading-spinner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:2rem}.error-message[_ngcontent-%COMP%]{background-color:#fef2f2;border:1px solid #fecaca;color:#dc2626;padding:1rem;border-radius:8px;margin-bottom:1rem}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;max-height:90vh}[_nghost-%COMP%]   .mat-mdc-dialog-title[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10;margin:0;padding:20px 24px 16px;background-color:#fff;border-bottom:1px solid #e5e7eb;flex-shrink:0}[_nghost-%COMP%]   .mat-mdc-dialog-title[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px}[_nghost-%COMP%]   .mat-mdc-dialog-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px 24px;margin:0}[_nghost-%COMP%]   .mat-mdc-dialog-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}[_nghost-%COMP%]   .mat-mdc-dialog-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:3px}[_nghost-%COMP%]   .mat-mdc-dialog-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}[_nghost-%COMP%]   .mat-mdc-dialog-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}[_nghost-%COMP%]   .mat-mdc-dialog-content[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 1px 3px #0000001a}[_nghost-%COMP%]   .mat-mdc-dialog-actions[_ngcontent-%COMP%]{position:sticky;bottom:0;z-index:10;padding:16px 24px 24px;margin:0;background-color:#fff;border-top:1px solid #e5e7eb;flex-shrink:0}[_nghost-%COMP%]   .mat-mdc-dialog-actions[_ngcontent-%COMP%]   .mat-mdc-button[_ngcontent-%COMP%]{margin-left:8px}.mat-mdc-dialog-container[_nghost-%COMP%]{max-height:90vh;max-width:700px;width:90vw}.create-project-modal[_nghost-%COMP%]   .mat-mdc-dialog-container[_ngcontent-%COMP%], .create-project-modal   [_nghost-%COMP%]   .mat-mdc-dialog-container[_ngcontent-%COMP%]{max-height:90vh!important;max-width:700px!important;width:90vw!important;padding:0!important;display:flex!important;flex-direction:column!important}.scrollable-content[_ngcontent-%COMP%]{scroll-behavior:smooth;padding-bottom:20px!important}.scrollable-content[_ngcontent-%COMP%]   .space-y-6[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{margin-bottom:40px}.service-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out;cursor:pointer}.service-card[_ngcontent-%COMP%]:hover{border-color:#3b82f6;box-shadow:0 2px 8px #3b82f626}.service-card.selected[_ngcontent-%COMP%]{border-color:#3b82f6;background-color:#eff6ff;box-shadow:0 2px 8px #3b82f626}.mat-mdc-dialog-title[_ngcontent-%COMP%]:before{display:inline-block;width:0;height:40px;content:none!important;vertical-align:0}"]})};function ti(i,t){if(i&1&&f(0,"div",25)(1,"div",26),i&2){let e,n=c();ie("background-image","url("+((e=n.business())==null?null:e.banner_url)+")")}}function ii(i,t){i&1&&f(0,"div",3)}function ni(i,t){if(i&1){let e=h();r(0,"button",27),_("click",function(){p(e);let l=c();return v(l.editBusinessClick.emit())}),F(),r(1,"svg",28),f(2,"path",29),o(),a(3," Edit Business "),o(),ee(),r(4,"button",30),_("click",function(){p(e);let l=c();return v(l.addServiceClick.emit())}),F(),r(5,"svg",28),f(6,"path",31),o(),a(7," Add Service "),o()}}function oi(i,t){if(i&1){let e=h();r(0,"button",27),_("click",function(){p(e);let l=c(2);return v(l.visitWebsiteClick.emit())}),F(),r(1,"svg",28),f(2,"path",37),o(),a(3," Visit Website "),o()}}function ri(i,t){if(i&1&&(r(0,"button",33),F(),r(1,"svg",28),f(2,"path",38),o(),a(3),o()),i&2){let e,n=c(2);s(3),b(" ",(e=n.business())==null?null:e.contact_phone," ")}}function ai(i,t){if(i&1){let e=h();r(0,"button",32),_("click",function(){p(e);let l=c();return v(l.startProjectClick.emit())}),a(1),o(),d(2,oi,4,0,"button",33),d(3,ri,4,1,"button",33),r(4,"button",34),_("click",function(){p(e);let l=c();return v(l.reportBusinessClick.emit())}),F(),r(5,"svg",35),f(6,"path",36),o()()}if(i&2){let e,n,l=c();Ie(l.activeServicesCount()===0?"inline-flex items-center px-8 py-3 bg-gray-300 text-gray-500 rounded-full cursor-not-allowed font-semibold shadow-lg":"inline-flex items-center px-8 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-full transition-all font-semibold shadow-lg"),x("disabled",l.activeServicesCount()===0),s(),b(" ",l.activeServicesCount()===0?"No Services Available":"Request Service"," "),s(),m((e=l.business())!=null&&e.website?2:-1),s(),m((n=l.business())!=null&&n.contact_phone?3:-1)}}function si(i,t){if(i&1&&f(0,"img",13),i&2){let e=c();x("src",e.business().logo_url,L)("alt",e.business().name+" logo")}}function li(i,t){i&1&&(r(0,"div",14),F(),r(1,"svg",39),f(2,"path",40),o()())}function ci(i,t){if(i&1&&a(0),i&2){let e=c();W(" ",e.business().city,", ",e.business().state," ")}}function di(i,t){if(i&1&&a(0),i&2){let e=c();b(" ",e.business().city," ")}}function mi(i,t){if(i&1&&a(0),i&2){let e=c();b(" ",e.business().state," ")}}function ui(i,t){if(i&1){let e=h();r(0,"a",41),_("click",function(){let l=p(e).$implicit,u=c();return v(u.scrollToSection.emit(l.toLowerCase()))}),a(1),o()}if(i&2){let e=t.$implicit,n=c();x("active",n.activeSection()===e.toLowerCase()),s(),b(" ",e," ")}}var fe=class i{business=C.required();isOwner=C.required();activeServicesCount=C.required();businessTypeDisplay=C.required();activeSection=C("about");editBusinessClick=I();addServiceClick=I();startProjectClick=I();visitWebsiteClick=I();reportBusinessClick=I();scrollToSection=I();links=["About","Services","Portfolio","Reviews"];static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-business-profile-header"]],inputs:{business:[1,"business"],isOwner:[1,"isOwner"],activeServicesCount:[1,"activeServicesCount"],businessTypeDisplay:[1,"businessTypeDisplay"],activeSection:[1,"activeSection"]},outputs:{editBusinessClick:"editBusinessClick",addServiceClick:"addServiceClick",startProjectClick:"startProjectClick",visitWebsiteClick:"visitWebsiteClick",reportBusinessClick:"reportBusinessClick",scrollToSection:"scrollToSection"},decls:53,vars:11,consts:[["tabPanel",""],[1,"relative","max-w-7xl","mx-auto","overflow-hidden"],[1,"relative","h-96","w-full","overflow-hidden"],[1,"absolute","inset-0","bg-gradient-to-r","from-blue-600","to-indigo-700"],[1,"absolute","bottom-8","w-full"],[1,"px-8"],[1,"flex","items-center","justify-between"],[1,"ml-48"],[1,"text-4xl","lg:text-5xl","font-bold","text-white","drop-shadow-lg"],[1,"flex","items-center","gap-3"],[1,"bg-white","border-b","border-gray-200","relative"],[1,"px-8","relative"],[1,"absolute","-top-20","left-8","z-20"],[1,"h-40","w-40","rounded-full","object-cover","border-4","border-white","shadow-xl","bg-white",3,"src","alt"],[1,"h-40","w-40","rounded-full","bg-white","flex","items-center","justify-center","border-4","border-white","shadow-xl"],[1,"pt-6","pb-4","ml-48","flex","items-center","justify-between"],[1,"text-base","text-gray-600"],[1,"text-sm","text-gray-500","mt-1"],[1,"flex","items-center","gap-8","mr-8"],[1,"text-center"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-xs","text-gray-500"],[1,"sticky","top-0","z-40","bg-white","border-t","border-gray-200","shadow-sm"],["mat-tab-nav-bar","","mat-stretch-tabs","false","mat-align-tabs","start",3,"tabPanel"],["mat-tab-link","",3,"active"],[1,"absolute","inset-0","w-full","h-full","bg-cover","bg-center","bg-no-repeat"],[1,"absolute","inset-0","bg-opacity-20"],[1,"inline-flex","items-center","px-6","py-2.5","bg-white","hover:bg-gray-50","rounded-lg","text-gray-700","transition-all","font-medium","shadow-lg",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"inline-flex","items-center","px-6","py-2.5","bg-primary-600","hover:bg-primary-700","text-white","rounded-lg","transition-all","font-medium","shadow-lg",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[3,"click","disabled"],[1,"inline-flex","items-center","px-6","py-2.5","bg-white","hover:bg-gray-50","rounded-lg","text-gray-700","transition-all","font-medium","shadow-lg"],["title","Report Business",1,"inline-flex","items-center","justify-center","p-2.5","bg-white","hover:bg-gray-50","text-gray-700","rounded-lg","transition-all","shadow-lg",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6v1a2 2 0 01-2 2H5a2 2 0 01-2-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-20","h-20","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],["mat-tab-link","",3,"click","active"]],template:function(e,n){if(e&1&&(r(0,"mat-card",1)(1,"div",2),d(2,ti,2,2)(3,ii,1,0,"div",3),r(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1",8),a(9),o()(),r(10,"div",9),d(11,ni,8,0)(12,ai,7,6),o()()()()(),r(13,"div",10)(14,"div",11)(15,"div",12),d(16,si,1,2,"img",13)(17,li,3,0,"div",14),o(),r(18,"div",15)(19,"div")(20,"p",16),a(21),o(),r(22,"p",17),d(23,ci,1,2)(24,di,1,1)(25,mi,1,1),o()(),r(26,"div",18)(27,"div",19)(28,"div",20),a(29),o(),r(30,"div",21),a(31,"Rating"),o()(),r(32,"div",19)(33,"div",20),a(34),o(),r(35,"div",21),a(36,"Reviews"),o()(),r(37,"div",19)(38,"div",20),a(39),o(),r(40,"div",21),a(41,"Views"),o()(),r(42,"div",19)(43,"div",20),a(44),o(),r(45,"div",21),a(46,"Services"),o()()()()(),r(47,"div",22)(48,"nav",23),w(49,ui,2,2,"a",24,te),o(),f(51,"mat-tab-nav-panel",null,0),o()()()),e&2){let l,u,k,Ee,je,Te,It=Y(52);s(2),m((l=n.business())!=null&&l.banner_url?2:3),s(7),b(" ",(u=n.business())==null?null:u.name," "),s(2),m(n.isOwner()?11:12),s(5),m((k=n.business())!=null&&k.logo_url?16:17),s(5),b(" ",n.businessTypeDisplay()," "),s(2),m(n.business().city&&n.business().state?23:n.business().city?24:n.business().state?25:-1),s(6),b("",((Ee=n.business())==null?null:Ee.rating)||0,"/5"),s(5),g(((je=n.business())==null?null:je.review_count)||0),s(5),g(((Te=n.business())==null?null:Te.view_count)||0),s(5),g(n.activeServicesCount()),s(4),x("tabPanel",It),s(),S(n.links)}},dependencies:[P,bt,gt,Ct,xt,j,E],encapsulation:2})};function pi(i,t){if(i&1){let e=h();r(0,"div",2)(1,"img",18),_("error",function(l){p(e);let u=c();return v(u.onImageError(l))}),o()()}if(i&2){let e=c();s(),x("src",e.service().images[0],L)("alt",e.service().name)}}function vi(i,t){i&1&&(r(0,"div",3)(1,"mat-icon",19),a(2,"image"),o()())}function _i(i,t){i&1&&(r(0,"div",5),a(1," Featured "),o())}function fi(i,t){i&1&&(r(0,"div",6),a(1," Active "),o())}function gi(i,t){if(i&1&&(r(0,"p",9),a(1),o()),i&2){let e=c();s(),b(" ",e.service().short_description," ")}}function xi(i,t){i&1&&f(0,"div",10)}function Ci(i,t){if(i&1&&(r(0,"div",14)(1,"span",20),a(2),o()()),i&2){let e=c();s(2),b(" ",e.formatDuration(e.service().duration)," ")}}function bi(i,t){if(i&1&&(r(0,"li",23)(1,"mat-icon",25),a(2,"check_circle"),o(),r(3,"span",26),a(4),o()()),i&2){let e=t.$implicit;s(4),g(e)}}function hi(i,t){if(i&1&&(r(0,"p",24),a(1),o()),i&2){let e=c(2);s(),W(" +",e.service().features.length-3," more feature",e.service().features.length-3>1?"s":""," ")}}function wi(i,t){if(i&1&&(r(0,"div",15)(1,"h4",21),a(2,"Includes:"),o(),r(3,"ul",22),w(4,bi,5,1,"li",23,te),o(),d(6,hi,2,2,"p",24),o()),i&2){let e=c();s(4),S(e.service().features.slice(0,3)),s(2),m(e.service().features.length>3?6:-1)}}function Si(i,t){if(i&1){let e=h();r(0,"button",27),_("click",function(){p(e);let l=c();return v(l.onEditClick())}),r(1,"mat-icon"),a(2,"edit"),o()(),r(3,"button",28)(4,"mat-icon"),a(5,"delete"),o()()}}function yi(i,t){if(i&1){let e=h();r(0,"button",29),_("click",function(){p(e);let l=c();return v(l.onStartProjectClick())}),r(1,"mat-icon",30),a(2,"send"),o(),a(3," Start Project "),o()}}var ge=class i{service=C.required();isOwner=C.required();isFeatured=C(!1);editClick=I();startProjectClick=I();formatPrice(t,e){if(!t)return"Contact for pricing";let n=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t);switch(e){case"hourly":return`${n}/hour`;case"project":return`${n}/project`;case"custom":return`Starting at ${n}`;case"fixed":default:return n}}formatDuration(t){return t||""}onEditClick(){this.editClick.emit(this.service()._id)}onStartProjectClick(){this.startProjectClick.emit(this.service()._id)}onImageError(t){let e=t.target;e.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="300"%3E%3Crect width="400" height="300" fill="%23e5e7eb"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-family="sans-serif" font-size="18" fill="%239ca3af"%3ENo Image%3C/text%3E%3C/svg%3E'}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-service-card"]],inputs:{service:[1,"service"],isOwner:[1,"isOwner"],isFeatured:[1,"isFeatured"]},outputs:{editClick:"editClick",startProjectClick:"startProjectClick"},decls:21,vars:9,consts:[[1,"h-full","flex","flex-col","!shadow-none","!border","!border-gray-200","hover:!border-primary","transition-all","duration-300","!overflow-hidden","!rounded-2xl"],[1,"relative"],[1,"relative","h-48","overflow-hidden","bg-gray-100"],[1,"relative","h-48","bg-gradient-to-br","from-gray-100","to-gray-200","flex","items-center","justify-center"],[1,"absolute","top-3","left-3","flex","gap-2"],[1,"bg-yellow-100","text-yellow-800","px-3","py-1.5","rounded-full","text-xs","font-semibold","shadow-sm"],[1,"bg-green-100","text-green-800","px-3","py-1.5","rounded-full","text-xs","font-semibold","shadow-sm"],[1,"flex-1","p-6","flex","flex-col"],[1,"text-xl","font-bold","text-gray-900","mb-2","line-clamp-2"],[1,"text-sm","text-gray-600","mb-4","line-clamp-2","flex-1"],[1,"mb-4","flex-1"],[1,"flex","items-center","justify-between","mb-6","pb-6","border-b","border-gray-200"],[1,"flex","items-baseline","gap-1"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-right"],[1,"mb-6"],[1,"flex","items-center","gap-3","pt-4","border-t","border-gray-100"],["mat-raised-button","","color","primary",1,"!w-full","!font-semibold","!text-sm","!h-11"],[1,"w-full","h-full","object-cover",3,"error","src","alt"],[1,"!text-6xl","!w-16","!h-16","text-gray-400"],[1,"text-base","font-medium","text-gray-600"],[1,"text-sm","font-semibold","text-gray-700","mb-3"],[1,"space-y-2"],[1,"flex","items-start","gap-2","text-sm","text-gray-700"],[1,"text-xs","text-gray-500","mt-2","ml-7"],[1,"!w-5","!h-5","!text-base","text-green-600","flex-shrink-0","mt-0.5"],[1,"flex-1"],["mat-icon-button","",1,"!text-gray-600","hover:!text-primary",3,"click"],["mat-icon-button","",1,"!text-red-600","hover:!text-red-700"],["mat-raised-button","","color","primary",1,"!w-full","!font-semibold","!text-sm","!h-11",3,"click"],[1,"mr-2"]],template:function(e,n){e&1&&(r(0,"mat-card",0)(1,"div",1),d(2,pi,2,2,"div",2)(3,vi,3,0,"div",3),r(4,"div",4),d(5,_i,2,0,"div",5),d(6,fi,2,0,"div",6),o()(),r(7,"div",7)(8,"h3",8),a(9),o(),d(10,gi,2,1,"p",9)(11,xi,1,0,"div",10),r(12,"div",11)(13,"div",12)(14,"span",13),a(15),o()(),d(16,Ci,3,1,"div",14),o(),d(17,wi,7,1,"div",15),r(18,"div",16),d(19,Si,6,0)(20,yi,4,0,"button",17),o()()()),e&2&&(s(2),m(n.service().images&&n.service().images.length>0?2:3),s(3),m(n.isFeatured()?5:-1),s(),m(n.service().is_active?6:-1),s(3),b(" ",n.service().name," "),s(),m(n.service().short_description?10:11),s(5),b(" ",n.formatPrice(n.service().price,n.service().pricing_type)," "),s(),m(n.service().duration?16:-1),s(),m(n.service().features&&n.service().features.length>0?17:-1),s(2),m(n.isOwner()?19:20))},dependencies:[P,j,E,A,X,Q,R,O,oe,me],encapsulation:2})};var Mi=(i,t)=>t._id;function Pi(i,t){i&1&&(r(0,"div",3),f(1,"mat-spinner",6),r(2,"span",7),a(3,"Loading services..."),o()())}function ki(i,t){if(i&1){let e=h();r(0,"button",13),_("click",function(){p(e);let l=c(2);return v(l.onAddService())}),r(1,"mat-icon"),a(2,"add"),o(),a(3," Add Your First Service "),o()}}function Ei(i,t){if(i&1&&(r(0,"div",4)(1,"div",8)(2,"mat-icon",9),a(3,"settings"),o()(),r(4,"h3",10),a(5,"No Services Yet"),o(),r(6,"p",11),a(7,"This business hasn't added any services yet."),o(),d(8,ki,4,0,"button",12),o()),i&2){let e=c();s(8),m(e.isOwner()?8:-1)}}function ji(i,t){if(i&1){let e=h();r(0,"button",24),_("click",function(){p(e);let l=c(2);return v(l.onAddService())}),r(1,"mat-icon"),a(2,"add"),o(),a(3," Add Service "),o()}}function Ti(i,t){if(i&1){let e=h();r(0,"div",18)(1,"button",25),_("click",function(){p(e);let l=c(2);return v(l.prevSlide())}),r(2,"mat-icon"),a(3,"chevron_left"),o()(),r(4,"button",25),_("click",function(){p(e);let l=c(2);return v(l.nextSlide())}),r(5,"mat-icon"),a(6,"chevron_right"),o()()()}if(i&2){let e=c(2);s(),x("disabled",e.currentIndex()===0),s(3),x("disabled",e.currentIndex()===e.getTotalPages()-1)}}function Ii(i,t){if(i&1){let e=h();r(0,"div",21)(1,"app-service-card",26),_("editClick",function(l){p(e);let u=c(2);return v(u.onEditService(l))})("startProjectClick",function(l){p(e);let u=c(2);return v(u.onStartProject(l))}),o()()}if(i&2){let e=t.$implicit,n=c(2);s(),x("service",e)("isOwner",n.isOwner())("isFeatured",e.is_featured||!1)}}function Bi(i,t){if(i&1){let e=h();r(0,"div",28),_("click",function(){let l=p(e).$index,u=c(3);return v(u.goToSlide(l))}),o()}if(i&2){let e=t.$index,n=c(3);N("active",n.currentIndex()===e)}}function Di(i,t){if(i&1&&(r(0,"div",22),w(1,Bi,1,2,"div",27,D),o()),i&2){let e=c(2);s(),S(e.getPageArray())}}function Oi(i,t){if(i&1){let e=h();r(0,"div",23)(1,"button",29),_("click",function(){p(e);let l=c(2);return v(l.goToSlide(0))}),a(2," Show all services \u2192 "),o()()}}function Ri(i,t){if(i&1&&(r(0,"div",5)(1,"div",14)(2,"div")(3,"p",15),a(4),o()(),r(5,"div",16),d(6,ji,4,0,"button",17),d(7,Ti,7,2,"div",18),o()(),r(8,"div",19)(9,"div",20),w(10,Ii,2,3,"div",21,Mi),o()(),d(12,Di,3,0,"div",22),d(13,Oi,3,0,"div",23),o()),i&2){let e=c();s(4),b("",e.activeServices().length," service(s) available"),s(2),m(e.isOwner()?6:-1),s(),m(e.getTotalPages()>1?7:-1),s(2),ie("transform","translateX(-"+e.currentIndex()*e.getSlideWidth()+"%)"),s(),S(e.activeServices()),s(2),m(e.getTotalPages()>1?12:-1),s(),m(e.getTotalPages()>1?13:-1)}}var xe=class i{activeServices=C.required();featuredServices=C.required();servicesLoading=C.required();isOwner=C.required();addServiceClick=I();editServiceClick=I();startProjectClick=I();currentIndex=y(0);itemsPerPage=3;onAddService(){this.addServiceClick.emit()}onEditService(t){this.editServiceClick.emit(t)}onStartProject(t){this.startProjectClick.emit(t)}getSlideWidth(){return 80}nextSlide(){let t=this.activeServices(),e=Math.max(0,t.length-3);this.currentIndex()<t.length-3&&this.currentIndex.update(n=>Math.min(n+2,e))}prevSlide(){this.currentIndex()>0&&this.currentIndex.update(t=>Math.max(t-2,0))}goToSlide(t){this.currentIndex.set(t*2)}getTotalPages(){return Math.ceil(this.activeServices().length/2)}getPageArray(){return Array.from({length:this.getTotalPages()},(t,e)=>e)}getVisibleServices(){let t=this.currentIndex()*this.itemsPerPage,e=t+this.itemsPerPage;return this.activeServices().slice(t,e)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-business-services-section"]],inputs:{activeServices:[1,"activeServices"],featuredServices:[1,"featuredServices"],servicesLoading:[1,"servicesLoading"],isOwner:[1,"isOwner"]},outputs:{addServiceClick:"addServiceClick",editServiceClick:"editServiceClick",startProjectClick:"startProjectClick"},decls:9,vars:1,consts:[["id","services",1,"scroll-mt-24","mb-8"],[1,"!mb-4"],[1,"!text-2xl"],[1,"flex","justify-center","items-center","h-32"],[1,"text-center","py-16"],[1,"relative"],["diameter","40"],[1,"ml-3","text-gray-600"],[1,"p-4","bg-gray-50","rounded-full","w-20","h-20","mx-auto","mb-6","flex","items-center","justify-center"],[1,"!w-10","!h-10","!text-4xl","text-gray-300"],[1,"text-xl","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],["mat-raised-button","","color","primary"],["mat-raised-button","","color","primary",3,"click"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-sm","text-gray-500"],[1,"flex","items-center","gap-3"],["mat-stroked-button","","color","primary"],[1,"flex","items-center","gap-2"],[1,"slider-container"],[1,"slider-track"],[1,"slide-item"],[1,"flex","justify-center","items-center","gap-2","mt-6"],[1,"text-center","mt-4"],["mat-stroked-button","","color","primary",3,"click"],["mat-icon-button","",1,"!bg-gray-100","hover:!bg-gray-200","disabled:!opacity-50",3,"click","disabled"],[3,"editClick","startProjectClick","service","isOwner","isFeatured"],[1,"slide-indicator",3,"active"],[1,"slide-indicator",3,"click"],["mat-button","","color","primary",3,"click"]],template:function(e,n){e&1&&(r(0,"section",0)(1,"mat-card")(2,"mat-card-header",1)(3,"mat-card-title",2),a(4," Services "),o()(),r(5,"mat-card-content"),d(6,Pi,4,0,"div",3)(7,Ei,9,1,"div",4)(8,Ri,14,7,"div",5),o()()()),e&2&&(s(6),m(n.servicesLoading()?6:n.activeServices().length===0?7:8))},dependencies:[P,j,E,B,q,$,A,X,Q,R,O,K,J,ge],styles:[".slider-container[_ngcontent-%COMP%]{position:relative;overflow:hidden;width:100%}.slider-track[_ngcontent-%COMP%]{display:flex;gap:1.5rem;transition:transform .4s ease-in-out;will-change:transform}.slide-item[_ngcontent-%COMP%]{flex:0 0 calc(40% - 1rem);min-width:0}@media (max-width: 767px){.slide-item[_ngcontent-%COMP%]{flex:0 0 calc(100% - 1.5rem)}}@media (min-width: 768px) and (max-width: 1023px){.slide-item[_ngcontent-%COMP%]{flex:0 0 calc(50% - 1rem)}}@media (min-width: 1024px){.slide-item[_ngcontent-%COMP%]{flex:0 0 calc(40% - 1rem)}}.slide-indicator[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background-color:#d1d5db;cursor:pointer;transition:all .3s ease;border:none}.slide-indicator.active[_ngcontent-%COMP%]{background-color:#374151;width:24px;border-radius:4px}.slide-indicator[_ngcontent-%COMP%]:hover:not(.active){background-color:#9ca3af;transform:scale(1.2)}.nav-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}"]})};function Ni(i,t){if(i&1&&f(0,"img",2),i&2){let e=c();x("src",e.project().image_url,L)("alt",e.project().title)}}function Fi(i,t){i&1&&(r(0,"div",3)(1,"mat-icon",18),a(2,"work"),o()())}function Li(i,t){if(i&1&&(r(0,"mat-chip",21),a(1),o()),i&2){let e=t.$implicit,n=c(2);s(),b(" ",n.getServiceName(e)," ")}}function Ai(i,t){if(i&1&&(r(0,"mat-chip",22),a(1),o()),i&2){let e=c(2);s(),b(" +",e.project().selected_services.length-3," more ")}}function $i(i,t){if(i&1&&(r(0,"div",17)(1,"p",19),a(2,"Services Used:"),o(),r(3,"div",20),w(4,Li,2,1,"mat-chip",21,D),d(6,Ai,2,1,"mat-chip",22),o()()),i&2){let e=c();s(4),S(e.project().selected_services.slice(0,3)),s(2),m(e.project().selected_services.length>3?6:-1)}}var Ce=class i{project=C.required();viewClick=I();onViewProject(){this.viewClick.emit(this.project())}getClientName(t){return typeof t.client_id=="object"&&t.client_id?`${t.client_id.first_name} ${t.client_id.last_name}`:"Unknown Client"}formatProjectPrice(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}formatProjectDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}getServiceName(t){return typeof t=="string"?t:t?.name||"Service"}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-portfolio-card"]],inputs:{project:[1,"project"]},outputs:{viewClick:"viewClick"},decls:32,vars:7,consts:[[1,"portfolio-card","h-full","cursor-pointer","hover:shadow-lg","transition-shadow","duration-200","!rounded-2xl","border","border-gray-200",3,"click"],[1,"relative","h-48","bg-gradient-to-br","from-blue-50","to-indigo-100","overflow-hidden"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"w-full","h-full","flex","items-center","justify-center"],[1,"absolute","top-3","right-3"],[1,"!bg-green-100","!text-green-800"],[1,"!w-4","!h-4","!text-base","mr-1"],[1,"!p-6"],[1,"mb-3"],[1,"text-lg","font-semibold","text-gray-900","line-clamp-1"],[1,"text-sm","text-gray-600","mb-4","line-clamp-2"],[1,"space-y-2"],[1,"flex","items-center","justify-between","text-sm"],[1,"text-gray-500"],[1,"font-medium","text-gray-900"],[1,"font-semibold","text-green-600"],[1,"text-gray-700"],[1,"mt-4","pt-4","border-t","border-gray-100"],[1,"!w-16","!h-16","!text-6xl","text-gray-300"],[1,"text-xs","text-gray-500","mb-2"],[1,"flex","flex-wrap","gap-1"],[1,"!bg-blue-50","!text-blue-700","!text-xs","!px-2","!py-1"],[1,"!bg-gray-100","!text-gray-600","!text-xs","!px-2","!py-1"]],template:function(e,n){e&1&&(r(0,"mat-card",0),_("click",function(){return n.onViewProject()}),r(1,"div",1),d(2,Ni,1,2,"img",2)(3,Fi,3,0,"div",3),r(4,"div",4)(5,"mat-chip",5)(6,"mat-icon",6),a(7,"check_circle"),o(),a(8," Completed "),o()()(),r(9,"mat-card-content",7)(10,"div",8)(11,"h3",9),a(12),o()(),r(13,"p",10),a(14),o(),r(15,"div",11)(16,"div",12)(17,"span",13),a(18,"Client:"),o(),r(19,"span",14),a(20),o()(),r(21,"div",12)(22,"span",13),a(23,"Project Value:"),o(),r(24,"span",15),a(25),o()(),r(26,"div",12)(27,"span",13),a(28,"Completed:"),o(),r(29,"span",16),a(30),o()()(),d(31,$i,7,1,"div",17),o()()),e&2&&(s(2),m(n.project().image_url?2:3),s(10),g(n.project().title),s(2),b(" ",n.project().description||"No description provided"," "),s(6),g(n.getClientName(n.project())),s(5),g(n.formatProjectPrice(n.project().offered_price)),s(5),g(n.formatProjectDate(n.project().completed_at||n.project().updatedAt)),s(),m(n.project().selected_services&&n.project().selected_services.length>0?31:-1))},dependencies:[P,j,E,B,A,R,O,oe,de],styles:[".portfolio-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;transition:all .2s ease-in-out}.portfolio-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.portfolio-card[_ngcontent-%COMP%]     .mat-mdc-card-content{flex:1;display:flex;flex-direction:column}"]})};var qi=(i,t)=>t._id;function Hi(i,t){i&1&&(r(0,"div",3),f(1,"mat-spinner",6),r(2,"span",7),a(3,"Loading portfolio..."),o()())}function Ui(i,t){i&1&&(r(0,"div",4)(1,"div",8)(2,"mat-icon",9),a(3,"work_outline"),o()(),r(4,"h3",10),a(5,"No Completed Projects Yet"),o(),r(6,"p",11),a(7,"Completed projects will appear here to showcase this business's work."),o()())}function zi(i,t){if(i&1){let e=h();r(0,"div",14)(1,"button",19),_("click",function(){p(e);let l=c(2);return v(l.prevSlide())}),r(2,"mat-icon"),a(3,"chevron_left"),o()(),r(4,"button",19),_("click",function(){p(e);let l=c(2);return v(l.nextSlide())}),r(5,"mat-icon"),a(6,"chevron_right"),o()()()}if(i&2){let e=c(2);s(),x("disabled",e.currentIndex()===0),s(3),x("disabled",e.currentIndex()>=e.completedProjects().length-3)}}function Gi(i,t){if(i&1){let e=h();r(0,"div",17)(1,"app-portfolio-card",20),_("viewClick",function(l){p(e);let u=c(2);return v(u.onViewProject(l))}),o()()}if(i&2){let e=t.$implicit;s(),x("project",e)}}function Wi(i,t){if(i&1){let e=h();r(0,"div",22),_("click",function(){let l=p(e).$index,u=c(3);return v(u.goToSlide(l))}),o()}if(i&2){let e=t.$index,n=c(3);N("active",n.getCurrentPage()===e)}}function Yi(i,t){if(i&1&&(r(0,"div",18),w(1,Wi,1,2,"div",21,D),o()),i&2){let e=c(2);s(),S(e.getPageArray())}}function Qi(i,t){if(i&1&&(r(0,"div",5)(1,"div",12)(2,"div")(3,"p",13),a(4),o()(),d(5,zi,7,2,"div",14),o(),r(6,"div",15)(7,"div",16),w(8,Gi,2,1,"div",17,qi),o()(),d(10,Yi,3,0,"div",18),o()),i&2){let e=c();s(4),b("",e.completedProjects().length," completed project(s)"),s(),m(e.getTotalPages()>1?5:-1),s(2),ie("transform","translateX(-"+e.currentIndex()*e.getSlideWidth()+"%)"),s(),S(e.completedProjects()),s(2),m(e.getTotalPages()>1?10:-1)}}var be=class i{completedProjects=C.required();portfolioLoading=C.required();viewProjectClick=I();currentIndex=y(0);onViewProject(t){this.viewProjectClick.emit(t)}getSlideWidth(){return 80}nextSlide(){let t=this.completedProjects(),e=Math.max(0,t.length-3);this.currentIndex()<t.length-3&&this.currentIndex.update(n=>Math.min(n+2,e))}prevSlide(){this.currentIndex()>0&&this.currentIndex.update(t=>Math.max(t-2,0))}goToSlide(t){this.currentIndex.set(t*2)}getTotalPages(){return Math.ceil(this.completedProjects().length/2)}getPageArray(){return Array.from({length:this.getTotalPages()},(t,e)=>e)}getCurrentPage(){return Math.floor(this.currentIndex()/2)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-business-portfolio-section"]],inputs:{completedProjects:[1,"completedProjects"],portfolioLoading:[1,"portfolioLoading"]},outputs:{viewProjectClick:"viewProjectClick"},decls:9,vars:2,consts:[["id","portfolio",1,"scroll-mt-24","mb-8"],[1,"!mb-4"],[1,"!text-2xl"],[1,"flex","justify-center","items-center","h-32"],[1,"text-center","py-16"],[1,"relative"],["diameter","40"],[1,"ml-3","text-gray-600"],[1,"p-4","bg-gray-50","rounded-full","w-20","h-20","mx-auto","mb-6","flex","items-center","justify-center"],[1,"!w-10","!h-10","!text-4xl","text-gray-300"],[1,"text-xl","font-medium","text-gray-900","mb-2"],[1,"text-gray-500"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-sm","text-gray-500"],[1,"flex","items-center","gap-2"],[1,"slider-container"],[1,"slider-track"],[1,"slide-item"],[1,"flex","justify-center","items-center","gap-2","mt-6"],["mat-icon-button","",1,"!bg-gray-100","hover:!bg-gray-200","disabled:!opacity-50",3,"click","disabled"],[3,"viewClick","project"],[1,"slide-indicator",3,"active"],[1,"slide-indicator",3,"click"]],template:function(e,n){e&1&&(r(0,"section",0)(1,"mat-card")(2,"mat-card-header",1)(3,"mat-card-title",2),a(4),o()(),r(5,"mat-card-content"),d(6,Hi,4,0,"div",3)(7,Ui,8,0,"div",4)(8,Qi,11,5,"div",5),o()()()),e&2&&(s(4),b(" Portfolio (",n.completedProjects().length,") "),s(2),m(n.portfolioLoading()?6:n.completedProjects().length===0?7:8))},dependencies:[P,j,E,B,q,$,A,Q,R,O,K,J,Ce],styles:[".slider-container[_ngcontent-%COMP%]{position:relative;overflow:hidden;width:100%}.slider-track[_ngcontent-%COMP%]{display:flex;gap:1.5rem;transition:transform .4s ease-in-out;will-change:transform}.slide-item[_ngcontent-%COMP%]{flex:0 0 calc(40% - 1rem);min-width:0}@media (max-width: 767px){.slide-item[_ngcontent-%COMP%]{flex:0 0 calc(100% - 1.5rem)}}@media (min-width: 768px) and (max-width: 1023px){.slide-item[_ngcontent-%COMP%]{flex:0 0 calc(50% - 1rem)}}@media (min-width: 1024px){.slide-item[_ngcontent-%COMP%]{flex:0 0 calc(40% - 1rem)}}.slide-indicator[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background-color:#d1d5db;cursor:pointer;transition:all .3s ease;border:none}.slide-indicator.active[_ngcontent-%COMP%]{background-color:#374151;width:24px;border-radius:4px}.slide-indicator[_ngcontent-%COMP%]:hover:not(.active){background-color:#9ca3af;transform:scale(1.2)}"]})};function Xi(i,t){if(i&1&&(r(0,"mat-icon",12),a(1," star "),o()),i&2){let e=t.$implicit;N("text-yellow-400",e)("text-gray-300",!e)}}function Ji(i,t){if(i&1&&(r(0,"p",10),a(1),o()),i&2){let e=c();s(),g(e.review().review_text||e.review().comment)}}function Ki(i,t){if(i&1&&(r(0,"mat-chip",13)(1,"mat-icon",17),a(2,"star"),o(),a(3),o()),i&2){let e=c(2);s(3),b(" Service Quality: ",e.review().service_quality,"/5 ")}}function Zi(i,t){if(i&1&&(r(0,"mat-chip",14)(1,"mat-icon",17),a(2,"chat"),o(),a(3),o()),i&2){let e=c(2);s(3),b(" Communication: ",e.review().communication,"/5 ")}}function en(i,t){if(i&1&&(r(0,"mat-chip",15)(1,"mat-icon",17),a(2,"schedule"),o(),a(3),o()),i&2){let e=c(2);s(3),b(" Timeliness: ",e.review().timeliness,"/5 ")}}function tn(i,t){if(i&1&&(r(0,"mat-chip",16)(1,"mat-icon",17),a(2,"attach_money"),o(),a(3),o()),i&2){let e=c(2);s(3),b(" Value: ",e.review().value_for_money,"/5 ")}}function nn(i,t){if(i&1&&(r(0,"div",11),d(1,Ki,4,1,"mat-chip",13),d(2,Zi,4,1,"mat-chip",14),d(3,en,4,1,"mat-chip",15),d(4,tn,4,1,"mat-chip",16),o()),i&2){let e=c();s(),m(e.review().service_quality?1:-1),s(),m(e.review().communication?2:-1),s(),m(e.review().timeliness?3:-1),s(),m(e.review().value_for_money?4:-1)}}var he=class i{review=C.required();getStarArray(t){let e=[];for(let n=1;n<=5;n++)e.push(n<=Math.round(t));return e}getReviewerName(){let t=this.review();return t.reviewer?`${t.reviewer.first_name} ${t.reviewer.last_name}`:"Anonymous"}getProjectTitle(){let t=this.review();return typeof t.project_id=="object"&&t.project_id?t.project_id.title:"Project"}formatReviewDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}hasDetailedRatings(){let t=this.review();return!!(t.service_quality||t.communication||t.timeliness||t.value_for_money)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-review-card"]],inputs:{review:[1,"review"]},decls:20,vars:6,consts:[[1,"review-card"],[1,"flex","items-start","justify-between","mb-4"],[1,"flex","items-center","gap-3"],[1,"flex-shrink-0","w-10","h-10","bg-gray-200","rounded-full","flex","items-center","justify-center"],[1,"!w-6","!h-6","!text-2xl","text-gray-500"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"flex","items-center","gap-2"],[1,"flex"],[1,"!w-4","!h-4","!text-base",3,"text-yellow-400","text-gray-300"],[1,"text-gray-700","mb-4"],[1,"flex","flex-wrap","gap-2","pt-4","border-t","border-gray-100"],[1,"!w-4","!h-4","!text-base"],[1,"!bg-blue-50","!text-blue-700"],[1,"!bg-green-50","!text-green-700"],[1,"!bg-purple-50","!text-purple-700"],[1,"!bg-orange-50","!text-orange-700"],[1,"!w-4","!h-4","!text-base","mr-1"]],template:function(e,n){e&1&&(r(0,"mat-card",0)(1,"mat-card-content")(2,"div",1)(3,"div",2)(4,"div",3)(5,"mat-icon",4),a(6,"person"),o()(),r(7,"div")(8,"h4",5),a(9),o(),r(10,"p",6),a(11),o()()(),r(12,"div",7)(13,"div",8),w(14,Xi,2,4,"mat-icon",9,D),o(),r(16,"span",5),a(17),o()()(),d(18,Ji,2,1,"p",10),d(19,nn,5,4,"div",11),o()()),e&2&&(s(9),g(n.getReviewerName()),s(2),W("",n.formatReviewDate(n.review().createdAt)," \u2022 ",n.getProjectTitle()),s(3),S(n.getStarArray(n.review().rating)),s(3),b("",n.review().rating,"/5"),s(),m(n.review().review_text||n.review().comment?18:-1),s(),m(n.hasDetailedRatings()?19:-1))},dependencies:[P,j,E,B,R,O,oe,de],styles:[".review-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:.75rem;transition:box-shadow .2s ease;margin-bottom:1.5rem}.review-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.review-card[_ngcontent-%COMP%]     .mat-mdc-card-content{padding:1.5rem;overflow:visible}.review-card[_ngcontent-%COMP%]     mat-icon{overflow:visible;line-height:1}"]})};function on(i,t){if(i&1&&(r(0,"mat-icon",9),a(1," star "),o()),i&2){let e=t.$implicit;N("text-yellow-400",e)("text-gray-300",!e)}}function rn(i,t){if(i&1&&(r(0,"mat-icon",17),a(1," star "),o()),i&2){let e=t.$implicit;N("text-yellow-400",e)("text-gray-300",!e)}}function an(i,t){if(i&1&&(r(0,"div",11)(1,"span",12),a(2,"Service Quality"),o(),r(3,"div",13)(4,"div",14),w(5,rn,2,4,"mat-icon",15,D),o(),r(7,"span",16),a(8),o()()()),i&2){let e=c(2);s(5),S(e.getStarArray(e.reviewStats().service_quality_avg)),s(3),g(e.formatRating(e.reviewStats().service_quality_avg))}}function sn(i,t){if(i&1&&(r(0,"mat-icon",17),a(1," star "),o()),i&2){let e=t.$implicit;N("text-yellow-400",e)("text-gray-300",!e)}}function ln(i,t){if(i&1&&(r(0,"div",11)(1,"span",12),a(2,"Communication"),o(),r(3,"div",13)(4,"div",14),w(5,sn,2,4,"mat-icon",15,D),o(),r(7,"span",16),a(8),o()()()),i&2){let e=c(2);s(5),S(e.getStarArray(e.reviewStats().communication_avg)),s(3),g(e.formatRating(e.reviewStats().communication_avg))}}function cn(i,t){if(i&1&&(r(0,"mat-icon",17),a(1," star "),o()),i&2){let e=t.$implicit;N("text-yellow-400",e)("text-gray-300",!e)}}function dn(i,t){if(i&1&&(r(0,"div",11)(1,"span",12),a(2,"Timeliness"),o(),r(3,"div",13)(4,"div",14),w(5,cn,2,4,"mat-icon",15,D),o(),r(7,"span",16),a(8),o()()()),i&2){let e=c(2);s(5),S(e.getStarArray(e.reviewStats().timeliness_avg)),s(3),g(e.formatRating(e.reviewStats().timeliness_avg))}}function mn(i,t){if(i&1&&(r(0,"mat-icon",17),a(1," star "),o()),i&2){let e=t.$implicit;N("text-yellow-400",e)("text-gray-300",!e)}}function un(i,t){if(i&1&&(r(0,"div",11)(1,"span",12),a(2,"Value for Money"),o(),r(3,"div",13)(4,"div",14),w(5,mn,2,4,"mat-icon",15,D),o(),r(7,"span",16),a(8),o()()()),i&2){let e=c(2);s(5),S(e.getStarArray(e.reviewStats().value_for_money_avg)),s(3),g(e.formatRating(e.reviewStats().value_for_money_avg))}}function pn(i,t){if(i&1&&(r(0,"div",8)(1,"h4",10),a(2,"Rating Breakdown"),o(),d(3,an,9,1,"div",11),d(4,ln,9,1,"div",11),d(5,dn,9,1,"div",11),d(6,un,9,1,"div",11),o()),i&2){let e=c();s(3),m(e.reviewStats().service_quality_avg?3:-1),s(),m(e.reviewStats().communication_avg?4:-1),s(),m(e.reviewStats().timeliness_avg?5:-1),s(),m(e.reviewStats().value_for_money_avg?6:-1)}}var we=class i{averageRating=C.required();totalReviews=C.required();reviewStats=C(null);getStarArray(t){let e=[];for(let n=1;n<=5;n++)e.push(n<=Math.round(t));return e}formatRating(t){return t.toFixed(1)}getRatingLabel(t){return t>=4.5?"Excellent":t>=4?"Very Good":t>=3.5?"Good":t>=3?"Average":t>=2?"Below Average":"Poor"}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-review-stats"]],inputs:{averageRating:[1,"averageRating"],totalReviews:[1,"totalReviews"],reviewStats:[1,"reviewStats"]},decls:14,vars:5,consts:[[1,"stats-card","!bg-gray-50"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"text-center"],[1,"text-4xl","font-bold","text-gray-900","mb-2"],[1,"flex","justify-center","items-center","mb-2"],[1,"!w-6","!h-6","!text-2xl",3,"text-yellow-400","text-gray-300"],[1,"text-sm","text-gray-600"],[1,"text-sm","text-gray-500","mt-1"],[1,"space-y-2"],[1,"!w-6","!h-6","!text-2xl"],[1,"font-medium","text-gray-900","mb-3"],[1,"flex","items-center","justify-between","text-sm"],[1,"text-gray-600"],[1,"flex","items-center","gap-2"],[1,"flex"],[1,"!w-4","!h-4","!text-base",3,"text-yellow-400","text-gray-300"],[1,"font-medium"],[1,"!w-4","!h-4","!text-base"]],template:function(e,n){e&1&&(r(0,"mat-card",0)(1,"mat-card-content")(2,"div",1)(3,"div",2)(4,"div",3),a(5),o(),r(6,"div",4),w(7,on,2,4,"mat-icon",5,D),o(),r(9,"div",6),a(10),o(),r(11,"div",7),a(12),o()(),d(13,pn,7,4,"div",8),o()()()),e&2&&(s(5),g(n.formatRating(n.averageRating())),s(2),S(n.getStarArray(n.averageRating())),s(3),g(n.getRatingLabel(n.averageRating())),s(2),W(" ",n.totalReviews()," ",n.totalReviews()===1?"review":"reviews"," "),s(),m(n.reviewStats()?13:-1))},dependencies:[P,j,E,B,R,O],styles:[".stats-card[_ngcontent-%COMP%]{border-radius:.75rem}.stats-card[_ngcontent-%COMP%]     .mat-mdc-card-content{padding:1.5rem;overflow:visible}.stats-card[_ngcontent-%COMP%]     mat-icon{overflow:visible;line-height:1}"]})};var vn=(i,t)=>t._id;function _n(i,t){if(i&1&&(r(0,"mat-icon",11),a(1," star "),o()),i&2){let e=t.$implicit;N("text-yellow-400",e)("text-gray-300",!e)}}function fn(i,t){if(i&1&&(r(0,"div",4)(1,"div",7),w(2,_n,2,4,"mat-icon",8,D),o(),r(4,"span",9),a(5),o(),r(6,"span",10),a(7),o()()),i&2){let e=c();s(2),S(e.getStarArray(e.averageRating())),s(3),g(e.formatRating(e.averageRating())),s(2),W(" (",e.totalReviews()," ",e.totalReviews()===1?"review":"reviews",") ")}}function gn(i,t){i&1&&(r(0,"div",5),f(1,"mat-spinner",12),r(2,"span",13),a(3,"Loading reviews..."),o()())}function xn(i,t){i&1&&(r(0,"div",6)(1,"div",14)(2,"mat-icon",15),a(3,"star_outline"),o()(),r(4,"h3",16),a(5,"No Reviews Yet"),o(),r(6,"p",17),a(7,"This business hasn't received any reviews yet."),o()())}function Cn(i,t){if(i&1&&f(0,"app-review-card",21),i&2){let e=t.$implicit;x("review",e)}}function bn(i,t){if(i&1&&(r(0,"div",22)(1,"button",23)(2,"mat-icon"),a(3,"expand_more"),o(),a(4),o()()),i&2){let e=c(2);s(4),b(" View All ",e.totalReviews()," Reviews ")}}function hn(i,t){if(i&1&&(r(0,"div",18),f(1,"app-review-stats",19),o(),r(2,"div")(3,"h3",20),a(4,"Recent Reviews"),o(),w(5,Cn,1,1,"app-review-card",21,vn),d(7,bn,5,1,"div",22),o()),i&2){let e=c();s(),x("averageRating",e.averageRating())("totalReviews",e.totalReviews())("reviewStats",e.reviewStats()),s(4),S(e.recentReviews()),s(2),m(e.totalReviews()>5?7:-1)}}var Se=class i{recentReviews=C.required();totalReviews=C.required();averageRating=C.required();reviewStats=C(null);reviewsLoading=C.required();hasReviews=C.required();getStarArray(t){let e=[];for(let n=1;n<=5;n++)e.push(n<=Math.round(t));return e}formatRating(t){return t.toFixed(1)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-business-reviews-section"]],inputs:{recentReviews:[1,"recentReviews"],totalReviews:[1,"totalReviews"],averageRating:[1,"averageRating"],reviewStats:[1,"reviewStats"],reviewsLoading:[1,"reviewsLoading"],hasReviews:[1,"hasReviews"]},decls:11,vars:2,consts:[["id","reviews",1,"scroll-mt-24","mb-8"],[1,"!mb-4"],[1,"flex","items-center","justify-between","w-full"],[1,"!text-2xl"],[1,"flex","items-center","gap-2"],[1,"flex","justify-center","items-center","py-8"],[1,"text-center","py-12"],[1,"flex","items-center"],[1,"!w-5","!h-5","!text-xl",3,"text-yellow-400","text-gray-300"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"!w-5","!h-5","!text-xl"],["diameter","40"],[1,"ml-3","text-gray-600"],[1,"p-4","bg-gray-50","rounded-full","w-20","h-20","mx-auto","mb-6","flex","items-center","justify-center"],[1,"!w-10","!h-10","!text-4xl","text-gray-300"],[1,"text-xl","font-medium","text-gray-900","mb-2"],[1,"text-gray-500"],[1,"mb-8"],[3,"averageRating","totalReviews","reviewStats"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[3,"review"],[1,"text-center","pt-4"],["mat-stroked-button","","color","primary"]],template:function(e,n){e&1&&(r(0,"section",0)(1,"mat-card")(2,"mat-card-header",1)(3,"div",2)(4,"mat-card-title",3),a(5,"Reviews & Ratings"),o(),d(6,fn,8,3,"div",4),o()(),r(7,"mat-card-content"),d(8,gn,4,0,"div",5)(9,xn,8,0,"div",6)(10,hn,8,4),o()()()),e&2&&(s(6),m(n.hasReviews()?6:-1),s(2),m(n.reviewsLoading()?8:n.hasReviews()?10:9))},dependencies:[P,j,E,B,q,$,A,X,R,O,K,J,he,we],encapsulation:2})};function wn(i,t){if(i&1&&(r(0,"p",2),a(1),o()),i&2){let e=c();s(),g(e.business().description)}}function Sn(i,t){i&1&&(r(0,"p",3),a(1,"No description provided."),o())}function yn(i,t){if(i&1&&(r(0,"span",7),a(1),o()),i&2){let e=t.$implicit;s(),b(" ",e," ")}}function Mn(i,t){if(i&1&&(r(0,"div",4)(1,"h4",5),a(2,"Tags"),o(),r(3,"div",6),w(4,yn,2,1,"span",7,te),o()()),i&2){let e=c();s(4),S(e.businessTags())}}var ye=class i{business=C.required();businessTags=C([]);static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-business-about"]],inputs:{business:[1,"business"],businessTags:[1,"businessTags"]},decls:8,vars:2,consts:[[1,"!mb-4"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-700","leading-relaxed","text-lg"],[1,"text-gray-500","italic"],[1,"mt-6"],[1,"text-sm","font-medium","text-gray-900","mb-3"],[1,"flex","flex-wrap","gap-2"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-sm","bg-blue-50","text-blue-700","border","border-blue-200"]],template:function(e,n){e&1&&(r(0,"mat-card")(1,"mat-card-header",0)(2,"mat-card-title",1),a(3,"About This Business"),o()(),r(4,"mat-card-content"),d(5,wn,2,1,"p",2)(6,Sn,2,0,"p",3),d(7,Mn,6,0,"div",4),o()()),e&2&&(s(5),m(n.business().description?5:6),s(2),m(n.businessTags().length>0?7:-1))},dependencies:[P,j,E,B,q,$],encapsulation:2})};function Pn(i,t){i&1&&(r(0,"div",3),f(1,"div",6),r(2,"span",7),a(3,"Loading owner..."),o()())}function kn(i,t){if(i&1&&f(0,"img",9),i&2){let e=c(2);x("src",e.owner().avatar_url,L)("alt",(e.owner().first_name+" "+(e.owner().last_name||"")).trim()+" profile")}}function En(i,t){i&1&&(r(0,"div",10),F(),r(1,"svg",16),f(2,"path",17),o()())}function jn(i,t){if(i&1&&(r(0,"p",13),a(1),o()),i&2){let e,n=c(2);s(),g((e=n.owner())==null?null:e.bio)}}function Tn(i,t){if(i&1&&(r(0,"div",14),F(),r(1,"svg",18),f(2,"path",19)(3,"path",20),o(),ee(),r(4,"span",21),a(5),o()()),i&2){let e,n=c(2);s(5),re(" ",(e=n.owner())==null?null:e.city,"",(e=n.owner())!=null&&e.city&&((e=n.owner())!=null&&e.country)?", ":"","",(e=n.owner())==null?null:e.country," ")}}function In(i,t){if(i&1){let e=h();r(0,"button",22),_("click",function(){p(e);let l=c(2);return v(l.contactOwnerClick.emit())}),F(),r(1,"svg",23),f(2,"path",24),o(),a(3," Contact Owner "),o()}}function Bn(i,t){if(i&1&&(r(0,"div",4)(1,"div",8),d(2,kn,1,2,"img",9)(3,En,3,0,"div",10),r(4,"div")(5,"h4",11),a(6),o(),r(7,"p",12),a(8,"Business Owner"),o()()(),d(9,jn,2,1,"p",13),d(10,Tn,6,3,"div",14),d(11,In,4,0,"button",15),o()),i&2){let e,n,l,u,k=c();s(2),m((e=k.owner())!=null&&e.avatar_url?2:3),s(4),g((((n=k.owner())==null?null:n.first_name)+" "+(((n=k.owner())==null?null:n.last_name)||"")).trim()),s(3),m((l=k.owner())!=null&&l.bio?9:-1),s(),m((u=k.owner())!=null&&u.city||(u=k.owner())!=null&&u.country?10:-1),s(),m(k.isOwner()?-1:11)}}function Dn(i,t){i&1&&(r(0,"p",5),a(1,"Owner information not available"),o())}var Me=class i{owner=C(null);loading=C(!1);isOwner=C.required();contactOwnerClick=I();static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-business-owner"]],inputs:{owner:[1,"owner"],loading:[1,"loading"],isOwner:[1,"isOwner"]},outputs:{contactOwnerClick:"contactOwnerClick"},decls:8,vars:1,consts:[[1,"mb-8"],[1,"!mb-4"],[1,"text-lg","font-semibold","text-gray-900"],[1,"flex","items-center","justify-center","py-4"],[1,"space-y-4"],[1,"text-sm","text-gray-500","text-center","py-4"],[1,"animate-spin","rounded-full","h-6","w-6","border-b-2","border-gray-600"],[1,"ml-2","text-gray-600","text-sm"],[1,"flex","items-center","space-x-3"],[1,"h-12","w-12","rounded-full","object-cover",3,"src","alt"],[1,"h-12","w-12","rounded-full","bg-gray-100","flex","items-center","justify-center"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"text-sm","text-gray-700"],[1,"flex","items-center","space-x-2"],[1,"w-full","inline-flex","items-center","justify-center","px-4","py-2","border","border-gray-300","rounded-lg","text-gray-700","hover:bg-gray-50","transition-colors"],["fill","currentColor","viewBox","0 0 20 20",1,"w-6","h-6","text-gray-400"],["fill-rule","evenodd","d","M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule","evenodd"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"text-sm","text-gray-600"],[1,"w-full","inline-flex","items-center","justify-center","px-4","py-2","border","border-gray-300","rounded-lg","text-gray-700","hover:bg-gray-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"]],template:function(e,n){e&1&&(r(0,"mat-card",0)(1,"mat-card-header",1)(2,"mat-card-title",2),a(3,"Business Owner"),o()(),r(4,"mat-card-content"),d(5,Pn,4,0,"div",3)(6,Bn,12,5,"div",4)(7,Dn,2,0,"p",5),o()()),e&2&&(s(5),m(n.loading()?5:n.owner()?6:7))},dependencies:[P,j,E,B,q,$],encapsulation:2})};function On(i,t){if(i&1&&(r(0,"span",4),a(1),o()),i&2){let e=c(2);s(),re(" ",e.business().city,"",e.business().city&&e.business().state?", ":"","",e.business().state," ")}}function Rn(i,t){if(i&1&&(r(0,"mat-list-item")(1,"mat-icon",1),a(2,"location_on"),o(),r(3,"span",2),a(4,"Address"),o(),r(5,"span",3),a(6),o(),d(7,On,2,3,"span",4),o()),i&2){let e=c();s(6),g(e.business().address),s(),m(e.business().city||e.business().state?7:-1)}}function Vn(i,t){if(i&1&&(r(0,"mat-list-item")(1,"mat-icon",1),a(2,"email"),o(),r(3,"span",2),a(4,"Email"),o(),r(5,"span",3),a(6),o()()),i&2){let e=c();s(6),g(e.business().contact_email)}}function Nn(i,t){if(i&1&&(r(0,"mat-list-item")(1,"mat-icon",1),a(2,"phone"),o(),r(3,"span",2),a(4,"Phone"),o(),r(5,"span",3),a(6),o()()),i&2){let e=c();s(6),g(e.business().contact_phone)}}function Fn(i,t){if(i&1&&(r(0,"mat-list-item")(1,"mat-icon",1),a(2,"language"),o(),r(3,"span",2),a(4,"Website"),o(),r(5,"a",5),a(6),o()()),i&2){let e=c();s(5),x("href",e.business().website,L),s(),b(" ",e.business().website," ")}}var Pe=class i{business=C.required();static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-business-information"]],inputs:{business:[1,"business"]},decls:10,vars:4,consts:[[1,"!mb-4"],["matListItemIcon",""],["matListItemTitle",""],["matListItemLine",""],["matListItemLine","",1,"text-gray-500"],["matListItemLine","","target","_blank",1,"text-primary","hover:underline",3,"href"]],template:function(e,n){e&1&&(r(0,"mat-card")(1,"mat-card-header",0)(2,"mat-card-title"),a(3,"Business Information"),o()(),r(4,"mat-card-content")(5,"mat-nav-list"),d(6,Rn,8,2,"mat-list-item"),d(7,Vn,7,1,"mat-list-item"),d(8,Nn,7,1,"mat-list-item"),d(9,Fn,7,2,"mat-list-item"),o()()()),e&2&&(s(6),m(n.business().address?6:-1),s(),m(n.business().contact_email?7:-1),s(),m(n.business().contact_phone?8:-1),s(),m(n.business().website?9:-1))},dependencies:[P,j,E,B,q,$,me,rt,ot,nt,it,tt,R,O],encapsulation:2})};function Ln(i,t){i&1&&f(0,"app-user-sidenav")}function An(i,t){i&1&&f(0,"app-guest-sidenav")}function $n(i,t){i&1&&(r(0,"div",6)(1,"div",7)(2,"div",8),f(3,"div",9),r(4,"span",10),a(5,"Loading business profile..."),o()()()())}function qn(i,t){if(i&1){let e=h();r(0,"div",6)(1,"div",7)(2,"div",11)(3,"div",12),F(),r(4,"svg",13),f(5,"path",14),o(),ee(),r(6,"div")(7,"h3",15),a(8,"Error Loading Business"),o(),r(9,"p",16),a(10),o(),r(11,"button",17),_("click",function(){p(e);let l=c();return v(l.goBack())}),a(12," Go Back "),o()()()()()()}if(i&2){let e=c();s(10),g(e.error())}}function Hn(i,t){if(i&1){let e=h();r(0,"app-business-profile-header",18),_("editBusinessClick",function(){p(e);let l=c();return v(l.editBusiness())})("addServiceClick",function(){p(e);let l=c();return v(l.addService())})("startProjectClick",function(){p(e);let l=c();return v(l.startProject())})("visitWebsiteClick",function(){p(e);let l=c();return v(l.visitWebsite())})("reportBusinessClick",function(){p(e);let l=c();return v(l.openReportDialog())})("scrollToSection",function(l){p(e);let u=c();return v(u.scrollToSection(l))}),o(),r(1,"div",19)(2,"div",20)(3,"div",21)(4,"section",22),f(5,"app-business-about",23),o(),r(6,"app-business-services-section",24),_("addServiceClick",function(){p(e);let l=c();return v(l.addService())})("editServiceClick",function(l){p(e);let u=c();return v(u.editService(l))})("startProjectClick",function(l){p(e);let u=c();return v(u.startProjectWithService(l))}),o(),r(7,"app-business-portfolio-section",25),_("viewProjectClick",function(l){p(e);let u=c();return v(u.viewProject(l))}),o(),f(8,"app-business-reviews-section",26),o(),r(9,"div",27)(10,"app-business-owner",28),_("contactOwnerClick",function(){p(e);let l=c();return v(l.contactOwner())}),o(),f(11,"app-business-information",29),o()()()}if(i&2){let e,n=c();x("business",n.business())("isOwner",n.isOwner())("activeServicesCount",n.activeServices().length)("businessTypeDisplay",n.getBusinessTypeDisplay(((e=n.business())==null?null:e.business_type)||""))("activeSection",n.activeSection()),s(5),x("business",n.business())("businessTags",n.businessTags()),s(),x("activeServices",n.activeServices())("featuredServices",n.featuredServices())("servicesLoading",n.servicesLoading())("isOwner",n.isOwner()),s(),x("completedProjects",n.completedProjects())("portfolioLoading",n.portfolioLoading()),s(),x("recentReviews",n.recentReviews())("totalReviews",n.totalReviews())("averageRating",n.averageRating())("reviewStats",n.reviewStats())("reviewsLoading",n.reviewsLoading())("hasReviews",n.hasReviews()),s(2),x("owner",n.owner())("loading",n.loading())("isOwner",n.isOwner()),s(),x("business",n.business())}}var Tt=class i{route=T(ae);router=T(se);businessService=T(ce);authService=T(le);projectService=T(ue);reviewService=T(ht);dialog=T(mt);snackBar=T(_t);reportsService=T(kt);loading=y(!1);servicesLoading=y(!1);portfolioLoading=y(!1);reviewsLoading=y(!1);error=y(null);businessId=null;business=y(null);owner=y(null);services=y([]);projects=y([]);reviews=y([]);reviewStats=y(null);isOwner=V(()=>{let t=this.authService.user(),e=this.business();if(!t||!e)return!1;let n=typeof e.owner_id=="string"?e.owner_id:e.owner_id?._id;return t._id===n});currentUser=V(()=>this.authService.user());activeServices=V(()=>this.services().filter(t=>t.is_active));featuredServices=V(()=>this.services().filter(t=>t.is_featured&&t.is_active));businessTags=V(()=>this.business()?.tags||[]);completedProjects=V(()=>this.projects().filter(t=>t.status==="completed"));averageRating=V(()=>this.reviewStats()?.average_rating||0);totalReviews=V(()=>this.reviews().length);hasReviews=V(()=>this.reviews().length>0);recentReviews=V(()=>this.reviews().sort((t,e)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()).slice(0,5));activeSection=y("about");navigationSections=V(()=>[{id:"about",label:"About",icon:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},{id:"services",label:`Services (${this.activeServices().length})`,icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"},{id:"portfolio",label:`Portfolio (${this.completedProjects().length})`,icon:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V8a2 2 0 012-2V6"},{id:"reviews",label:`Reviews (${this.totalReviews()}) ${this.averageRating()>0?"\u2B50"+this.averageRating().toFixed(1):""}`,icon:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"}]);ngOnInit(){this.route.params.subscribe(t=>{let e=t.id;e&&(this.businessId=e,this.loadBusiness(),this.loadServices(e),this.loadProjects(e),this.loadReviews(e))})}loadBusiness(){return G(this,null,function*(){if(this.businessId){this.loading.set(!0);try{let t=yield this.businessService.getBusinessAsync(this.businessId);t&&(this.business.set(t),t.owner_id&&typeof t.owner_id=="object"&&this.owner.set(t.owner_id))}catch(t){console.error("Error loading business:",t)}finally{this.loading.set(!1)}}})}loadServices(t){return G(this,null,function*(){try{this.servicesLoading.set(!0);let e=yield this.businessService.getBusinessServicesAsync(t,!1);this.services.set(e)}catch(e){console.error("Error loading services:",e)}finally{this.servicesLoading.set(!1)}})}loadProjects(t){return G(this,null,function*(){try{this.portfolioLoading.set(!0);let e=yield this.projectService.getBusinessPortfolioAsync(t);this.projects.set(e)}catch(e){console.error("Error loading projects:",e)}finally{this.portfolioLoading.set(!1)}})}loadReviews(t){return G(this,null,function*(){try{this.reviewsLoading.set(!0);let e=yield this.reviewService.getBusinessReviewsAsync(t);this.reviews.set(e);let n=yield this.reviewService.getBusinessRatingStatsAsync(t);this.reviewStats.set(n)}catch(e){console.error("Error loading reviews:",e)}finally{this.reviewsLoading.set(!1)}})}formatPrice(t,e){if(!t)return"Contact for pricing";let n=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t);switch(e){case"hourly":return`${n}/hour`;case"project":return`${n}/project`;case"custom":return`Starting at ${n}`;default:return n}}formatDuration(t){return t||"Duration varies"}getBusinessTypeDisplay(t){switch(t){case"service":return"Service Business";case"product":return"Product Business";case"both":return"Service & Product Business";default:return"Business"}}goBack(){this.router.navigate(["/search"])}editBusiness(){let t=this.business();t&&this.router.navigate(["dashboard","businesses","edit",t._id])}addService(){let t=this.business();t&&this.router.navigate(["dashboard","services","create-service"],{queryParams:{businessId:t._id}})}editService(t){this.router.navigate(["/dashboard/services/edit-service",t])}contactBusiness(){let t=this.business();t?.contact_email&&(window.location.href=`mailto:${t.contact_email}`)}startProject(){let t=this.business(),e=this.authService.user();if(!e){this.router.navigate(["/auth"]);return}if(!t)return;if(this.activeServices().length===0){alert("This business has no active services available for projects. Please contact them directly or check back later.");return}let n=typeof t.owner_id=="string"?t.owner_id:t.owner_id?._id;if(e._id===n){alert("You cannot start a project with your own business.");return}this.openCreateProjectModal(t._id)}startProjectWithService(t){let e=this.business(),n=this.authService.user();if(!n){this.router.navigate(["/auth"]);return}if(!e)return;let l=typeof e.owner_id=="string"?e.owner_id:e.owner_id?._id;if(n._id===l){alert("You cannot start a project with your own business.");return}this.openCreateProjectModal(e._id,t)}contactOwner(){let t=this.owner();t?.email&&(window.location.href=`mailto:${t.email}`)}visitWebsite(){let t=this.business();t?.website&&window.open(t.website,"_blank")}scrollToSection(t){this.activeSection.set(t);let e=document.getElementById(t);if(e){let u=e.getBoundingClientRect().top+window.pageYOffset-80;window.scrollTo({top:u,behavior:"smooth"})}}getServicesLabel(){return`Services (${this.activeServices().length})`}getPortfolioLabel(){return`Portfolio (${this.completedProjects().length})`}getClientName(t){return typeof t.client_id=="object"&&t.client_id?`${t.client_id.first_name} ${t.client_id.last_name}`:"Unknown Client"}getServiceName(t){return typeof t=="object"&&t&&"name"in t?t.name:"Service"}getStarArray(t){let e=[];for(let n=1;n<=5;n++)e.push(n<=Math.round(t));return e}formatReviewDate(t){if(!t)return"Date not specified";let e=new Date(t),l=new Date().getTime()-e.getTime(),u=Math.floor(l/(1e3*60*60*24));return u===0?"Today":u===1?"Yesterday":u<7?`${u} days ago`:u<30?`${Math.floor(u/7)} weeks ago`:u<365?`${Math.floor(u/30)} months ago`:e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}formatRating(t){return t.toFixed(1)}getRatingLabel(t){return t>=4.5?"Excellent":t>=4?"Very Good":t>=3.5?"Good":t>=3?"Fair":t>=2.5?"Poor":"Very Poor"}getReviewerName(t){if(t.user_id&&typeof t.user_id=="object"){let e=t.user_id.first_name||"",n=t.user_id.last_name||"";return`${e} ${n}`.trim()||"Anonymous"}return"Anonymous"}getProjectTitle(t){return t.project_id&&typeof t.project_id=="object"&&t.project_id.title?t.project_id.title:"Project"}formatProjectDate(t){return t?new Date(t).toLocaleDateString():"Unknown"}formatProjectPrice(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}viewProject(t){this.router.navigate(["/dashboard/projects",t._id])}openReportDialog(){return G(this,null,function*(){let t=this.business();if(console.log("Opening report dialog for business:",t),!t)return;let e=this.authService.user();if(!e){this.router.navigate(["/auth"]);return}let n=typeof t.owner_id=="string"?t.owner_id:t.owner_id?._id;if(e._id===n)return;this.dialog.open(Et,{width:"500px",data:{reportType:"business",targetId:t._id,targetName:t.name,contextInfo:`Business profile: ${t.business_type||"Unknown Type"} - ${t.short_description||"No description"}`}}).afterClosed().subscribe(u=>G(this,null,function*(){if(u)try{let k={reported_business_id:t._id,report_type:"business",reason:u.reason,custom_reason:u.customReason,description:u.description,is_anonymous:u.isAnonymous};yield this.reportsService.submitReportAsync(k),this.dialog.open(jt,{width:"400px",data:{entityType:"business",entityName:t.name}})}catch(k){console.error("Failed to submit report:",k)}}))})}openCreateProjectModal(t,e){this.dialog.open(ve,{data:{businessId:t,preSelectedServiceId:e},panelClass:"create-project-modal",disableClose:!0,autoFocus:!1}).afterClosed().subscribe(l=>{if(l&&l.success&&l.project){console.log("Project created successfully:",l);let u=this.snackBar.open("Project request submitted successfully! The business owner will review your request.","View Project",{duration:8e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["success-snackbar"]}),k=!1;u.onAction().subscribe(()=>{k=!0,this.router.navigate(["/dashboard/projects",l.project._id])}),u.afterDismissed().subscribe(()=>{k||this.router.navigate(["/dashboard/projects",l.project._id])})}})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-business-profile"]],decls:11,vars:5,consts:[["drawer",""],[3,"drawer"],["autosize","",1,"content-body",3,"hasBackdrop"],[1,"drawer",3,"mode"],[1,"bg-[#F4F2EE]!"],[1,"min-h-screen","bg-[#F4F2EE]!"],[1,"bg-white"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8"],[1,"flex","justify-center","items-center","h-32"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-blue-600"],[1,"ml-3","text-gray-600"],[1,"bg-red-50","border-l-4","border-red-400","p-6","rounded-r-lg"],[1,"flex","items-center"],["fill","currentColor","viewBox","0 0 20 20",1,"w-6","h-6","text-red-400","mr-3"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"text-lg","font-medium","text-red-900","mb-2"],[1,"text-red-700","mb-4"],[1,"inline-flex","items-center","px-4","py-2","bg-red-100","text-red-800","rounded-lg","hover:bg-red-200","transition-colors",3,"click"],[3,"editBusinessClick","addServiceClick","startProjectClick","visitWebsiteClick","reportBusinessClick","scrollToSection","business","isOwner","activeServicesCount","businessTypeDisplay","activeSection"],[1,"max-w-7xl","mx-auto","py-8"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-2","space-y-8"],["id","about",1,"scroll-mt-24"],[3,"business","businessTags"],[1,"mt-8",3,"addServiceClick","editServiceClick","startProjectClick","activeServices","featuredServices","servicesLoading","isOwner"],[1,"mt-8",3,"viewProjectClick","completedProjects","portfolioLoading"],[3,"recentReviews","totalReviews","averageRating","reviewStats","reviewsLoading","hasReviews"],[1,"lg:col-span-1","space-y-8"],[3,"contactOwnerClick","owner","loading","isOwner"],[3,"business"]],template:function(e,n){if(e&1&&(f(0,"app-header",1),r(1,"mat-drawer-container",2)(2,"mat-drawer",3,0),d(4,Ln,1,0,"app-user-sidenav")(5,An,1,0,"app-guest-sidenav"),o(),r(6,"mat-drawer-content",4)(7,"div",5),d(8,$n,6,0,"div",6)(9,qn,13,1,"div",6)(10,Hn,12,23),o()()()),e&2){let l=Y(3);x("drawer",l),s(),x("hasBackdrop",!0),s(),x("mode","over"),s(2),m(n.currentUser()?4:5),s(4),m(n.loading()?8:n.error()?9:n.business()?10:-1)}},dependencies:[P,ze,pe,ft,Re,De,Oe,Be,at,st,fe,xe,be,Se,ye,Me,Pe],styles:[`.drawer[_ngcontent-%COMP%]{height:calc(100vh - 64px);border-radius:0}.content-body[_ngcontent-%COMP%]{height:calc(100vh - 64px);overflow-y:scroll}.mat-mdc-tab-group[_ngcontent-%COMP%]     .mat-mdc-tab-header{border-bottom:1px solid #e5e7eb}.mat-mdc-tab-group[_ngcontent-%COMP%]     .mat-mdc-tab-label{font-weight:500;color:#6b7280}.mat-mdc-tab-group[_ngcontent-%COMP%]     .mat-mdc-tab-label.mdc-tab--active{color:#2563eb}.mat-mdc-tab-group[_ngcontent-%COMP%]     .mat-mdc-tab-body-wrapper{min-height:400px}.banner-text[_ngcontent-%COMP%]{text-shadow:2px 2px 4px rgba(0,0,0,.7),1px 1px 2px rgba(0,0,0,.5)}.banner-button[_ngcontent-%COMP%]{backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)}.service-card[_ngcontent-%COMP%]{transition:transform .2s ease,box-shadow .2s ease}.service-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 25px -5px #0000001a,0 10px 10px -5px #0000000a}.project-card[_ngcontent-%COMP%]{transition:transform .2s ease,box-shadow .2s ease;cursor:pointer}.project-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a}.project-card[_ngcontent-%COMP%]   .project-image[_ngcontent-%COMP%]{position:relative;overflow:hidden}.project-card[_ngcontent-%COMP%]   .project-image[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:#0000;transition:background .3s ease}.project-card[_ngcontent-%COMP%]   .project-image[_ngcontent-%COMP%]:hover:after{background:#0000001a}.featured-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;font-size:.75rem;padding:.25rem .5rem;border-radius:9999px;font-weight:600}.testimonial[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f5f7fa,#c3cfe2);border-left:4px solid #2563eb}.testimonial[_ngcontent-%COMP%]:before{content:'"';font-size:1.5rem;color:#2563eb;font-weight:700}.line-clamp-1[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:1;line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.line-clamp-3[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}@media (max-width: 768px){.business-header[_ngcontent-%COMP%]   .flex-col[_ngcontent-%COMP%]{text-align:center}.service-card[_ngcontent-%COMP%], .project-card[_ngcontent-%COMP%]{margin-bottom:1rem}.portfolio-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (min-width: 768px) and (max-width: 1024px){.portfolio-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (min-width: 1024px){.portfolio-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}`]})};export{Tt as BusinessProfileComponent};
