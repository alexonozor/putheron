import"./chunk-RNGT6N3O.js";import"./chunk-BHOLZRE5.js";import{a as P,b as I}from"./chunk-ZH2LY4H3.js";import"./chunk-IRZPH2WJ.js";import{c as k,e as T}from"./chunk-SUTJIGUH.js";import{a as M}from"./chunk-OXH2TMZD.js";import"./chunk-DD4BNXLG.js";import{p as w,q as S}from"./chunk-A72LFUZP.js";import"./chunk-IGUJQH2A.js";import"./chunk-XDG5LX4L.js";import"./chunk-4KL26AYK.js";import{a as C,c as V}from"./chunk-MEFNJ5SS.js";import"./chunk-GUCRBWY4.js";import{t as b}from"./chunk-REOVWAHI.js";import{Ea as p,Gb as c,Lb as t,Mb as i,Nb as E,Rb as g,Vb as y,Wb as s,cb as l,fa as x,gc as n,hc as v,na as u,oa as f,ob as h,ub as _}from"./chunk-BEPULU6C.js";import{e as d}from"./chunk-JKOY2XUY.js";function q(r,o){r&1&&(t(0,"div",2),E(1,"mat-spinner",4),t(2,"h2",5),n(3,"Verifying your email..."),i(),t(4,"p",6),n(5,"Please wait while we verify your email address."),i()())}function A(r,o){if(r&1&&(t(0,"p",10),n(1," Verified: "),t(2,"strong"),n(3),i()()),r&2){let e=s(2);l(3),v(e.userEmail())}}function B(r,o){if(r&1){let e=g();t(0,"div",3)(1,"div",7)(2,"mat-icon",8),n(3,"check_circle"),i(),t(4,"h2",9),n(5,"Email Verified!"),i(),t(6,"p",6),n(7,"Your email address has been successfully verified."),i(),_(8,A,4,1,"p",10),i(),t(9,"div",11)(10,"p",12),n(11,"You will be redirected to login in a few seconds..."),i(),t(12,"button",13),y("click",function(){u(e);let m=s();return f(m.goToLogin())}),n(13," Go to Login Now "),i()()()}if(r&2){let e=s();l(8),c(e.userEmail()?8:-1)}}function D(r,o){if(r&1){let e=g();t(0,"button",19),y("click",function(){u(e);let m=s(2);return f(m.resendVerification())}),n(1," Resend Verification Email "),i()}}function F(r,o){if(r&1){let e=g();t(0,"div",3)(1,"div",7)(2,"mat-icon",14),n(3,"error_outline"),i(),t(4,"h2",9),n(5,"Verification Failed"),i(),t(6,"p",15),n(7),i()(),t(8,"div",11),_(9,D,2,0,"button",16),t(10,"button",17),y("click",function(){u(e);let m=s();return f(m.goToSignup())}),n(11," Back to Sign Up "),i(),t(12,"button",18),y("click",function(){u(e);let m=s();return f(m.goToLogin())}),n(13," Already have a verified account? Login "),i()()()}if(r&2){let e=s();l(7),v(e.error()),l(2),c(e.userEmail()?9:-1)}}var L=class r{authService=x(M);router=x(V);route=x(C);verifying=p(!0);success=p(!1);error=p("");userEmail=p("");ngOnInit(){return d(this,null,function*(){this.route.queryParams.subscribe(o=>d(this,null,function*(){let e=o.token;e?yield this.verifyEmail(e):(this.verifying.set(!1),this.error.set("Invalid verification link. Please request a new verification email."))}))})}verifyEmail(o){return d(this,null,function*(){try{let e=yield this.authService.verifyEmail(o);e.success?(this.success.set(!0),this.userEmail.set(e.data?.user?.email||""),setTimeout(()=>{this.router.navigate(["/auth/login"],{queryParams:{message:"Email verified successfully! Please log in to your account."}})},5e3)):this.error.set(e.message||"Verification failed. Please try again.")}catch(e){this.error.set(e?.message||"Verification failed. The link may be invalid or expired.")}finally{this.verifying.set(!1)}})}resendVerification(){return d(this,null,function*(){if(!this.userEmail()){this.error.set("Unable to resend verification. Please try registering again.");return}try{(yield this.authService.resendEmailVerification(this.userEmail())).success&&this.router.navigate(["/auth/signup"],{queryParams:{message:"Verification email sent. Please check your inbox.",email:this.userEmail()}})}catch(o){this.error.set(o?.message||"Failed to resend verification email.")}})}goToSignup(){this.router.navigate(["/auth/signup"])}goToLogin(){this.router.navigate(["/auth/login"])}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=h({type:r,selectors:[["app-verify-email"]],decls:5,vars:3,consts:[[1,"min-h-screen","bg-gradient-to-br","from-blue-500","to-purple-600","flex","items-center","justify-center","p-4"],[1,"w-full","max-w-md","bg-white","rounded-2xl","shadow-xl","p-8"],[1,"text-center","space-y-4"],[1,"text-center","space-y-6"],["diameter","40",1,"mx-auto"],[1,"text-xl","font-semibold","text-gray-900"],[1,"text-gray-600"],[1,"mb-6"],[1,"text-6xl","text-green-500","mb-4"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-sm","text-gray-500","mt-2"],[1,"space-y-3"],[1,"text-sm","text-gray-600"],["mat-raised-button","","color","primary",1,"w-full","py-3","text-base","font-medium",3,"click"],[1,"text-6xl","text-red-500","mb-4"],[1,"text-red-600","mb-4"],["mat-raised-button","","color","accent",1,"w-full","py-3","text-base","font-medium","mb-3"],["mat-stroked-button","","color","primary",1,"w-full","py-3","text-base","font-medium","mb-2",3,"click"],["mat-button","","color","primary",1,"w-full","py-3","text-base","font-medium",3,"click"],["mat-raised-button","","color","accent",1,"w-full","py-3","text-base","font-medium","mb-3",3,"click"]],template:function(e,a){e&1&&(t(0,"div",0)(1,"div",1),_(2,q,6,0,"div",2)(3,B,14,1,"div",3)(4,F,14,2,"div",3),i()()),e&2&&(l(2),c(a.verifying()?2:-1),l(),c(!a.verifying()&&a.success()?3:-1),l(),c(!a.verifying()&&!a.success()&&a.error()?4:-1))},dependencies:[b,T,k,S,w,I,P],encapsulation:2})};export{L as VerifyEmailComponent};
