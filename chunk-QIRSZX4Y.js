import{Ca as u,Vb as c,hb as l,qb as d}from"./chunk-ZABOWSPW.js";var g=class a{static usaPhone(){return e=>{if(!e.value)return null;let n=e.value.toString().trim();return[/^\(\d{3}\)\s?\d{3}-\d{4}$/,/^\d{3}-\d{3}-\d{4}$/,/^\d{3}\.\d{3}\.\d{4}$/,/^\d{3}\s\d{3}\s\d{4}$/,/^\d{10}$/,/^\+1\s?\(\d{3}\)\s?\d{3}-\d{4}$/,/^\+1-\d{3}-\d{3}-\d{4}$/,/^\+1\s\d{3}\s\d{3}\s\d{4}$/,/^\+1\d{10}$/].some(i=>i.test(n))?null:{usaPhone:{message:"Please enter a valid USA phone number (e.g., (123) 456-7890, 123-456-7890, or +1 123 456 7890)",actualValue:n}}}}static formatUsaPhone(e){if(!e)return"";let t=e.replace(/[^\d+]/g,"");if(t.startsWith("+1")?t=t.substring(2):t.startsWith("1")&&t.length===11&&(t=t.substring(1)),t.length===10){let r=t.substring(0,3),i=t.substring(3,6),s=t.substring(6,10);return`(${r}) ${i}-${s}`}return e}static stripPhoneFormatting(e){if(!e)return"";let n=e.replace(/[^\d+]/g,"");return n.length===10?n="+1"+n:n.length===11&&n.startsWith("1")&&(n="+"+n),n}static autoFormatPhone(e){e.addEventListener("input",n=>{let t=n.target,r=t.value,i=a.formatUsaPhone(r);if(i!==r){let s=t.selectionStart||0;t.value=i;let o=Math.min(s+(i.length-r.length),i.length);t.setSelectionRange(o,o)}})}};var m=class a{constructor(e){this.el=e;this.element=this.el.nativeElement}element;ngOnInit(){this.element.type="tel",this.element.setAttribute("autocomplete","tel")}onInput(e){let n=e.target,t=n.selectionStart||0,r=n.value,i=this.formatPhoneNumber(r);if(i!==r){n.value=i;let s=this.calculateNewCursorPosition(r,i,t);setTimeout(()=>{n.setSelectionRange(s,s)},0)}}onKeyDown(e){let n=e.target;[8,9,27,13,46].includes(e.keyCode)||e.ctrlKey&&[65,67,86,88,90].includes(e.keyCode)||e.keyCode>=35&&e.keyCode<=39||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.keyCode!==107&&e.keyCode!==187&&e.preventDefault()}onPaste(e){e.preventDefault();let n=e.clipboardData?.getData("text")||"",t=this.formatPhoneNumber(n),r=e.target;r.value=t,r.dispatchEvent(new Event("input",{bubbles:!0}))}formatPhoneNumber(e){let n=e.replace(/[^\d+]/g,"");if(n.startsWith("+1")){let r=n.substring(2);return r.length===0?"+1":r.length<=3?`+1 (${r}`:r.length<=6?`+1 (${r.substring(0,3)}) ${r.substring(3)}`:`+1 (${r.substring(0,3)}) ${r.substring(3,6)}-${r.substring(6,10)}`}if(n.startsWith("+"))return n;let t=n;return t.length===11&&t.startsWith("1")&&(t=t.substring(1)),t.length===0?"":t.length<=3?`(${t}`:t.length<=6?`(${t.substring(0,3)}) ${t.substring(3)}`:t.length<=10?`(${t.substring(0,3)}) ${t.substring(3,6)}-${t.substring(6)}`:`(${t.substring(0,3)}) ${t.substring(3,6)}-${t.substring(6,10)}`}calculateNewCursorPosition(e,n,t){let r=e.substring(0,t).replace(/\D/g,"").length,i=0,s=0;for(let o=0;o<n.length&&s<r;o++)/\d/.test(n[o])&&s++,i=o+1;return Math.min(i,n.length)}static \u0275fac=function(n){return new(n||a)(l(u))};static \u0275dir=d({type:a,selectors:[["","appPhoneFormat",""]],hostBindings:function(n,t){n&1&&c("input",function(i){return t.onInput(i)})("keydown",function(i){return t.onKeyDown(i)})("paste",function(i){return t.onPaste(i)})}})};export{g as a,m as b};
