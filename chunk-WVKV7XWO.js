import{a as Te,b as Ee,e as Pt,f as St,g as Tt,h as Et,i as It}from"./chunk-TFOI7QYO.js";import{$ as Dt,A as me,B as pe,K as ue,L as ge,M as qe,N as bt,O as vt,Q as z,R as H,W as Ct,_ as xt,aa as $e,ca as N,d as ce,da as he,ea as De,f as gt,ga as Me,h as Be,ha as wt,i as ht,la as Ae,o as ft,p as _t,pa as we,qa as Oe,ra as Pe,s as yt,t as U,ta as Ot,u as de,ua as Se,x as Ve,z as Ge}from"./chunk-MPFH6BTS.js";import{$a as je,Bc as At,C as F,Ca as T,Da as ie,Dc as Ce,Ea as q,Eb as re,Fa as j,Fc as xe,Ga as rt,Ha as _,Ja as ne,K as X,Ka as f,Ma as $,Mb as dt,Pa as M,Pb as mt,Q as k,R as J,Ra as lt,S as w,Sa as ke,Ta as Le,Tb as le,U as r,Ua as s,Va as o,Wa as v,Wb as pt,Z as O,_ as P,_a as I,a as D,ab as C,b as Xe,ba as ee,bb as h,ca as G,d as u,ea as te,fa as tt,fb as ae,gb as oe,h as b,ha as L,hb as se,hc as ut,ja as S,kc as Mt,l as Je,lb as c,mb as Ne,mc as R,na as it,nb as y,o as g,pc as fe,qa as nt,qc as _e,s as K,ta as m,tc as ye,ua as at,vb as ct,vc as be,wa as ot,wc as ve,x as et,xa as st,y as V}from"./chunk-FUFQGJ2J.js";function Ht(n,i){}var E=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext};var ze=(()=>{class n extends vt{_elementRef=r(L);_focusTrapFactory=r(_t);_config;_interactivityChecker=r(ft);_ngZone=r(tt);_overlayRef=r($e);_focusMonitor=r(ht);_renderer=r(ot);_changeDetectorRef=r(re);_injector=r(G);_platform=r(gt);_document=r(dt,{optional:!0});_portalOutlet;_focusTrapped=new b;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=r(E,{optional:!0})||new E,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){let t=this._ariaLabelledByQueue.indexOf(e);t>-1&&(this._ariaLabelledByQueue.splice(t,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();let t=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),t}attachTemplatePortal(e){this._portalOutlet.hasAttached();let t=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),t}attachDomPortal=e=>{this._portalOutlet.hasAttached();let t=this._portalOutlet.attachDomPortal(e);return this._contentAttached(),t};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,t){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let a=()=>{l(),p(),e.removeAttribute("tabindex")},l=this._renderer.listen(e,"blur",a),p=this._renderer.listen(e,"mousedown",a)})),e.focus(t)}_focusByCssSelector(e,t){let a=this._elementRef.nativeElement.querySelector(e);a&&this._forceFocus(a,t)}_trapFocus(e){this._isDestroyed||nt(()=>{let t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus(e);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(e)||this._focusDialogContainer(e);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',e);break;default:this._focusByCssSelector(this._config.autoFocus,e);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let e=this._config.restoreFocus,t=null;if(typeof e=="string"?t=this._document.querySelector(e):typeof e=="boolean"?t=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(t=e),this._config.restoreFocus&&t&&typeof t.focus=="function"){let a=ce(),l=this._elementRef.nativeElement;(!a||a===this._document.body||a===l||l.contains(a))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(e){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus(e)}_containsFocus(){let e=this._elementRef.nativeElement,t=ce();return e===t||e.contains(t)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=ce()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=T({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(t,a){if(t&1&&ae(z,7),t&2){let l;oe(l=se())&&(a._portalOutlet=l.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,a){t&2&&ne("id",a._config.id||null)("role",a._config.role)("aria-modal",a._config.ariaModal)("aria-labelledby",a._config.ariaLabel?null:a._ariaLabelledByQueue[0])("aria-label",a._config.ariaLabel)("aria-describedby",a._config.ariaDescribedBy||null)},features:[j],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,a){t&1&&_(0,Ht,0,0,"ng-template",0)},dependencies:[z],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return n})(),W=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new b;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(i,e){this.overlayRef=i,this.config=e,this.disableClose=e.disableClose,this.backdropClick=i.backdropClick(),this.keydownEvents=i.keydownEvents(),this.outsidePointerEvents=i.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(t=>{t.keyCode===27&&!this.disableClose&&!de(t)&&(t.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=i.detachments().subscribe(()=>{e.closeOnOverlayDetachments!==!1&&this.close()})}close(i,e){if(this.containerInstance){let t=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),t.next(i),t.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(i="",e=""){return this.overlayRef.updateSize({width:i,height:e}),this}addPanelClass(i){return this.overlayRef.addPanelClass(i),this}removePanelClass(i){return this.overlayRef.removePanelClass(i),this}},Wt=new w("DialogScrollStrategy",{providedIn:"root",factory:()=>{let n=r(N);return()=>n.scrollStrategies.block()}}),Yt=new w("DialogData"),Qt=new w("DefaultDialogConfig");var He=(()=>{class n{_overlay=r(N);_injector=r(G);_defaultOptions=r(Qt,{optional:!0});_parentDialog=r(n,{optional:!0,skipSelf:!0});_overlayContainer=r(Dt);_idGenerator=r(U);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new b;_afterOpenedAtThisLevel=new b;_ariaHiddenElements=new Map;_scrollStrategy=r(Wt);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=K(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(X(void 0)));constructor(){}open(e,t){let a=this._defaultOptions||new E;t=D(D({},a),t),t.id=t.id||this._idGenerator.getId("cdk-dialog-"),t.id&&this.getDialogById(t.id);let l=this._getOverlayConfig(t),p=this._overlay.create(l),d=new W(p,t),x=this._attachContainer(p,d,t);if(d.containerInstance=x,!this.openDialogs.length){let Fe=this._overlayContainer.getContainerElement();x._focusTrapped?x._focusTrapped.pipe(F(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(Fe)}):this._hideNonDialogContentFromAssistiveTechnology(Fe)}return this._attachDialogContent(e,d,x,t),this.openDialogs.push(d),d.closed.subscribe(()=>this._removeOpenDialog(d,!0)),this.afterOpened.next(d),d}closeAll(){Ue(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(t=>t.id===e)}ngOnDestroy(){Ue(this._openDialogsAtThisLevel,e=>{e.config.closeOnDestroy===!1&&this._removeOpenDialog(e,!1)}),Ue(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){let t=new xt({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(t.backdropClass=e.backdropClass),t}_attachContainer(e,t,a){let l=a.injector||a.viewContainerRef?.injector,p=[{provide:E,useValue:a},{provide:W,useValue:t},{provide:$e,useValue:e}],d;a.container?typeof a.container=="function"?d=a.container:(d=a.container.type,p.push(...a.container.providers(a))):d=ze;let x=new qe(d,a.viewContainerRef,G.create({parent:l||this._injector,providers:p}));return e.attach(x).instance}_attachDialogContent(e,t,a,l){if(e instanceof at){let p=this._createInjector(l,t,a,void 0),d={$implicit:l.data,dialogRef:t};l.templateContext&&(d=D(D({},d),typeof l.templateContext=="function"?l.templateContext():l.templateContext)),a.attachTemplatePortal(new bt(e,null,d,p))}else{let p=this._createInjector(l,t,a,this._injector),d=a.attachComponentPortal(new qe(e,l.viewContainerRef,p));t.componentRef=d,t.componentInstance=d.instance}}_createInjector(e,t,a,l){let p=e.injector||e.viewContainerRef?.injector,d=[{provide:Yt,useValue:e.data},{provide:W,useValue:t}];return e.providers&&(typeof e.providers=="function"?d.push(...e.providers(t,e,a)):d.push(...e.providers)),e.direction&&(!p||!p.get(Ve,null,{optional:!0}))&&d.push({provide:Ve,useValue:{value:e.direction,change:Je()}}),G.create({parent:p||l,providers:d})}_removeOpenDialog(e,t){let a=this.openDialogs.indexOf(e);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((l,p)=>{l?p.setAttribute("aria-hidden",l):p.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),t&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(e){if(e.parentElement){let t=e.parentElement.children;for(let a=t.length-1;a>-1;a--){let l=t[a];l!==e&&l.nodeName!=="SCRIPT"&&l.nodeName!=="STYLE"&&!l.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(l,l.getAttribute("aria-hidden")),l.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(t){return new(t||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ue(n,i){let e=n.length;for(;e--;)i(n[e])}var Ft=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=ie({type:n});static \u0275inj=J({providers:[He],imports:[he,H,yt,H]})}return n})();function Zt(n,i){}var Q=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;componentFactoryResolver;enterAnimationDuration;exitAnimationDuration},We="mdc-dialog--open",kt="mdc-dialog--opening",Lt="mdc-dialog--closing",Kt=150,Xt=75,Bt=(()=>{class n extends ze{_animationMode=r(it,{optional:!0});_animationStateChanged=new te;_animationsEnabled=this._animationMode!=="NoopAnimations";_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?Nt(this._config.enterAnimationDuration)??Kt:0;_exitAnimationDuration=this._animationsEnabled?Nt(this._config.exitAnimationDuration)??Xt:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(jt,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(kt,We)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(We),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(We),this._animationsEnabled?(this._hostElement.style.setProperty(jt,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Lt)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(e){this._actionSectionCount+=e,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(kt,Lt)}_waitForAnimationToComplete(e,t){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(t,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(e):e()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(e){let t=super.attachComponentPortal(e);return t.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),t}static \u0275fac=(()=>{let e;return function(a){return(e||(e=ee(n)))(a||n)}})();static \u0275cmp=T({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(t,a){t&2&&(je("id",a._config.id),ne("aria-modal",a._config.ariaModal)("role",a._config.role)("aria-labelledby",a._config.ariaLabel?null:a._ariaLabelledByQueue[0])("aria-label",a._config.ariaLabel)("aria-describedby",a._config.ariaDescribedBy||null),$("_mat-animation-noopable",!a._animationsEnabled)("mat-mdc-dialog-container-with-actions",a._actionSectionCount>0))},features:[j],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(t,a){t&1&&(s(0,"div",0)(1,"div",1),_(2,Zt,0,0,"ng-template",2),o()())},dependencies:[z],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mdc-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return n})(),jt="--mat-dialog-transition-duration";function Nt(n){return n==null?null:typeof n=="number"?n:n.endsWith("ms")?Be(n.substring(0,n.length-2)):n.endsWith("s")?Be(n.substring(0,n.length-1))*1e3:n==="0"?0:null}var Y=function(n){return n[n.OPEN=0]="OPEN",n[n.CLOSING=1]="CLOSING",n[n.CLOSED=2]="CLOSED",n}(Y||{}),A=class{_ref;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new b;_beforeClosed=new b;_result;_closeFallbackTimeout;_state=Y.OPEN;_closeInteractionType;constructor(i,e,t){this._ref=i,this._containerInstance=t,this.disableClose=e.disableClose,this.id=i.id,i.addPanelClass("mat-mdc-dialog-panel"),t._animationStateChanged.pipe(V(a=>a.state==="opened"),F(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(V(a=>a.state==="closed"),F(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),i.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),et(this.backdropClick(),this.keydownEvents().pipe(V(a=>a.keyCode===27&&!this.disableClose&&!de(a)))).subscribe(a=>{this.disableClose||(a.preventDefault(),Vt(this,a.type==="keydown"?"keyboard":"mouse"))})}close(i){this._result=i,this._containerInstance._animationStateChanged.pipe(V(e=>e.state==="closing"),F(1)).subscribe(e=>{this._beforeClosed.next(i),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=Y.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(i){let e=this._ref.config.positionStrategy;return i&&(i.left||i.right)?i.left?e.left(i.left):e.right(i.right):e.centerHorizontally(),i&&(i.top||i.bottom)?i.top?e.top(i.top):e.bottom(i.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(i="",e=""){return this._ref.updateSize(i,e),this}addPanelClass(i){return this._ref.addPanelClass(i),this}removePanelClass(i){return this._ref.removePanelClass(i),this}getState(){return this._state}_finishDialogClose(){this._state=Y.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function Vt(n,i,e){return n._closeInteractionType=i,n.close(e)}var B=new w("MatMdcDialogData"),Gt=new w("mat-mdc-dialog-default-options"),qt=new w("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let n=r(N);return()=>n.scrollStrategies.block()}});var Ye=(()=>{class n{_overlay=r(N);_defaultOptions=r(Gt,{optional:!0});_scrollStrategy=r(qt);_parentDialog=r(n,{optional:!0,skipSelf:!0});_idGenerator=r(U);_dialog=r(He);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new b;_afterOpenedAtThisLevel=new b;dialogConfigClass=Q;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=K(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(X(void 0)));constructor(){this._dialogRefConstructor=A,this._dialogContainerType=Bt,this._dialogDataToken=B}open(e,t){let a;t=D(D({},this._defaultOptions||new Q),t),t.id=t.id||this._idGenerator.getId("mat-mdc-dialog-"),t.scrollStrategy=t.scrollStrategy||this._scrollStrategy();let l=this._dialog.open(e,Xe(D({},t),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:t},{provide:E,useValue:t}]},templateContext:()=>({dialogRef:a}),providers:(p,d,x)=>(a=new this._dialogRefConstructor(p,t,x),a.updatePosition(t?.position),[{provide:this._dialogContainerType,useValue:x},{provide:this._dialogDataToken,useValue:d.data},{provide:this._dialogRefConstructor,useValue:a}])}));return a.componentRef=l.componentRef,a.componentInstance=l.componentInstance,this.openDialogs.push(a),this.afterOpened.next(a),a.afterClosed().subscribe(()=>{let p=this.openDialogs.indexOf(a);p>-1&&(this.openDialogs.splice(p,1),this.openDialogs.length||this._getAfterAllClosed().next())}),a}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(t=>t.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let t=e.length;for(;t--;)e[t].close()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $t=(()=>{class n{_dialogRef=r(A,{optional:!0});_elementRef=r(L);_dialog=r(Ye);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=Jt(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(t){return new(t||n)};static \u0275dir=q({type:n})}return n})(),Qe=(()=>{class n extends $t{id=r(U).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let e;return function(a){return(e||(e=ee(n)))(a||n)}})();static \u0275dir=q({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(t,a){t&2&&je("id",a.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],features:[j]})}return n})(),Ze=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=q({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],features:[rt([Ct])]})}return n})(),Ke=(()=>{class n extends $t{align;_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static \u0275fac=(()=>{let e;return function(a){return(e||(e=ee(n)))(a||n)}})();static \u0275dir=q({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(t,a){t&2&&$("mat-mdc-dialog-actions-align-start",a.align==="start")("mat-mdc-dialog-actions-align-center",a.align==="center")("mat-mdc-dialog-actions-align-end",a.align==="end")},inputs:{align:"align"},features:[j]})}return n})();function Jt(n,i){let e=n.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?i.find(t=>t.id===e.id):null}var Z=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=ie({type:n});static \u0275inj=J({providers:[Ye],imports:[Ft,he,H,Ge,Ge]})}return n})();var Re=class n{http=r(pt);configService=r(ut);get apiUrl(){return this.configService.getApiUrl("/chat")}createOrGetChat(i){return this.http.post(this.apiUrl,i)}createOrGetChatAsync(i){return u(this,null,function*(){return(yield g(this.createOrGetChat(i))).data})}getUserChats(){return this.http.get(this.apiUrl)}getUserChatsAsync(){return u(this,null,function*(){return(yield g(this.getUserChats())).data})}getChatById(i){return this.http.get(`${this.apiUrl}/${i}`)}getChatByIdAsync(i){return u(this,null,function*(){return(yield g(this.getChatById(i))).data})}getChatMessages(i,e=1,t=50){return this.http.get(`${this.apiUrl}/${i}/messages?page=${e}&limit=${t}`)}getChatMessagesAsync(i,e=1,t=50){return u(this,null,function*(){return(yield g(this.getChatMessages(i,e,t))).data})}sendMessage(i,e){return this.http.post(`${this.apiUrl}/${i}/messages`,e)}sendMessageAsync(i,e){return u(this,null,function*(){return(yield g(this.sendMessage(i,e))).data})}updateMessage(i,e,t){return this.http.patch(`${this.apiUrl}/${i}/messages/${e}`,t)}updateMessageAsync(i,e,t){return u(this,null,function*(){return(yield g(this.updateMessage(i,e,t))).data})}deleteMessage(i,e){return this.http.delete(`${this.apiUrl}/${i}/messages/${e}`)}deleteMessageAsync(i,e){return u(this,null,function*(){yield g(this.deleteMessage(i,e))})}markMessagesAsRead(i){return this.http.post(`${this.apiUrl}/${i}/mark-read`,{})}markMessagesAsReadAsync(i){return u(this,null,function*(){yield g(this.markMessagesAsRead(i))})}getUnreadMessageCount(){return this.http.get(`${this.apiUrl}/unread-count`)}getUnreadMessageCountAsync(){return u(this,null,function*(){return(yield g(this.getUnreadMessageCount())).data.count})}getChatByProjectId(i){return this.http.get(`${this.apiUrl}/project/${i}`)}getChatByProjectIdAsync(i){return u(this,null,function*(){return(yield g(this.getChatByProjectId(i))).data})}getChatUnreadCount(i){return this.http.get(`${this.apiUrl}/${i}/unread-count`)}getChatUnreadCountAsync(i){return u(this,null,function*(){return(yield g(this.getChatUnreadCount(i))).data.count})}uploadChatFiles(i,e,t){let a=new FormData;return e.forEach(l=>{a.append("files",l)}),t&&a.append("content",t),this.http.post(`${this.apiUrl}/${i}/upload-files`,a)}uploadChatFilesAsync(i,e,t){return u(this,null,function*(){return(yield g(this.uploadChatFiles(i,e,t))).data})}requestAdditionalPayment(i,e){return this.http.post(`${this.apiUrl}/${i}/request-payment`,e)}requestAdditionalPaymentAsync(i,e){return u(this,null,function*(){return(yield g(this.requestAdditionalPayment(i,e))).data})}respondToPaymentRequest(i,e,t){return this.http.post(`${this.apiUrl}/${i}/respond-payment/${e}`,t)}respondToPaymentRequestAsync(i,e,t){return u(this,null,function*(){return(yield g(this.respondToPaymentRequest(i,e,t))).data})}createAdditionalPaymentIntent(i,e){return this.http.post(`${this.apiUrl}/${i}/payment-intent/${e}`,{})}createAdditionalPaymentIntentAsync(i,e){return u(this,null,function*(){return(yield g(this.createAdditionalPaymentIntent(i,e))).data})}confirmAdditionalPayment(i,e,t){return this.http.post(`${this.apiUrl}/${i}/confirm-additional-payment/${e}`,{paymentIntentId:t})}confirmAdditionalPaymentAsync(i,e,t){return u(this,null,function*(){return(yield g(this.confirmAdditionalPayment(i,e,t))).data})}requestCompletion(i,e){return this.http.post(`${this.apiUrl}/${i}/request-completion`,e)}requestCompletionAsync(i,e){return u(this,null,function*(){return(yield g(this.requestCompletion(i,e))).data})}respondToCompletionRequest(i,e,t){return this.http.post(`${this.apiUrl}/${i}/respond-completion/${e}`,t)}respondToCompletionRequestAsync(i,e,t){return u(this,null,function*(){return(yield g(this.respondToCompletionRequest(i,e,t))).data})}static \u0275fac=function(e){return new(e||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};var ri=["stripeElements"];function li(n,i){n&1&&(s(0,"mat-error"),c(1," Please select a payment method "),o())}function ci(n,i){if(n&1&&(s(0,"form",9)(1,"mat-form-field",15)(2,"mat-label"),c(3,"Payment Method"),o(),s(4,"mat-select",16)(5,"mat-option",17),c(6,"Credit/Debit Card"),o()(),_(7,li,2,0,"mat-error",18),o(),s(8,"div",19)(9,"mat-icon"),c(10,"info"),o(),s(11,"p"),c(12,"This payment will be processed securely via Stripe."),o()()()),n&2){let e,t=h();f("formGroup",t.paymentForm),m(7),f("ngIf",(e=t.paymentForm.get("paymentMethod"))==null?null:e.hasError("required"))}}function di(n,i){if(n&1&&(s(0,"div",21)(1,"mat-icon"),c(2,"error"),o(),s(3,"span"),c(4),o()()),n&2){let e=h(2);m(4),Ne(e.stripeError())}}function mi(n,i){if(n&1&&(s(0,"div",10),v(1,"div",20,0),_(3,di,5,1,"div",21),o()),n&2){let e=h();m(3),M(e.stripeError()?3:-1)}}function pi(n,i){n&1&&(s(0,"div",11),v(1,"mat-spinner",22),s(2,"p"),c(3,"Processing payment..."),o()())}function ui(n,i){if(n&1){let e=I();s(0,"button",23),C("click",function(){O(e);let a=h();return P(a.setupStripePayment())}),s(1,"mat-icon"),c(2,"credit_card"),o(),c(3," Proceed to Payment "),o()}if(n&2){let e=h();f("disabled",e.paymentForm.invalid||e.processing())}}function gi(n,i){if(n&1){let e=I();s(0,"button",23),C("click",function(){O(e);let a=h();return P(a.processPayment())}),s(1,"mat-icon"),c(2,"lock"),o(),c(3," Complete Payment "),o()}if(n&2){let e=h();f("disabled",e.processing())}}var Ut=class n{constructor(i){this.data=i;this.paymentForm=this.formBuilder.group({paymentMethod:["card",[R.required]]})}stripeElementsRef;dialogRef=r(A);formBuilder=r(Ce);stripeService=r(Pt);chatService=r(Re);cdr=r(re);paymentForm;showStripeForm=S(!1);processing=S(!1);stripeError=S(null);elements=null;paymentElement=null;clientSecret=null;ngOnInit(){}ngAfterViewInit(){}setupStripePayment(){return u(this,null,function*(){if(!this.paymentForm.invalid){this.processing.set(!0),this.stripeError.set(null);try{let i=yield this.chatService.createAdditionalPaymentIntentAsync(this.data.chatId,this.data.messageId);this.clientSecret=i.clientSecret;let{elements:e,paymentElement:t}=yield this.stripeService.createElement(this.clientSecret);this.elements=e,this.paymentElement=t,this.showStripeForm.set(!0),this.cdr.detectChanges(),setTimeout(()=>{this.stripeElementsRef?.nativeElement?this.paymentElement.mount(this.stripeElementsRef.nativeElement):this.stripeError.set("Unable to initialize payment form")},100)}catch(i){console.error("Error setting up payment:",i),this.stripeError.set(i.message||"Failed to setup payment")}finally{this.processing.set(!1)}}})}processPayment(){return u(this,null,function*(){if(!this.elements||!this.clientSecret){this.stripeError.set("Payment not properly initialized");return}this.processing.set(!0),this.stripeError.set(null);try{let{error:i,paymentIntent:e}=yield this.stripeService.confirmPaymentWithoutRedirect(this.clientSecret,this.elements);if(i){this.stripeError.set(i.message||"Payment failed");return}if(e?.status==="succeeded"){yield this.chatService.confirmAdditionalPaymentAsync(this.data.chatId,this.data.messageId,e.id);let t={amount:this.data.amount,description:this.data.description,paymentMethod:this.paymentForm.value.paymentMethod,paymentIntentId:e.id};this.dialogRef.close(t)}else this.stripeError.set("Payment was not completed successfully")}catch(i){console.error("Error processing payment:",i),this.stripeError.set(i.message||"Payment processing failed")}finally{this.processing.set(!1)}})}onCancel(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||n)(st(B))};static \u0275cmp=T({type:n,selectors:[["app-payment-modal"]],viewQuery:function(e,t){if(e&1&&ae(ri,5,L),e&2){let a;oe(a=se())&&(t.stripeElementsRef=a.first)}},decls:26,vars:7,consts:[["stripeElements",""],["mat-dialog-title","",1,"dialog-title"],[1,"title-icon"],["mat-dialog-content","",1,"dialog-content"],[1,"payment-details"],[1,"amount-section"],[1,"amount-display"],[1,"description-section"],[1,"business-name"],[1,"payment-form",3,"formGroup"],[1,"stripe-form"],[1,"loading-overlay"],["mat-dialog-actions","","align","end"],["mat-button","",3,"click","disabled"],["mat-raised-button","","color","primary",3,"disabled"],["appearance","outline",1,"full-width"],["formControlName","paymentMethod"],["value","card"],[4,"ngIf"],[1,"payment-note"],[1,"stripe-elements"],[1,"error-message"],["diameter","40"],["mat-raised-button","","color","primary",3,"click","disabled"]],template:function(e,t){e&1&&(s(0,"h1",1)(1,"mat-icon",2),c(2,"payment"),o(),c(3," Make Payment "),o(),s(4,"div",3)(5,"div",4)(6,"div",5)(7,"h3"),c(8,"Payment Amount"),o(),s(9,"div",6),c(10),o()(),s(11,"div",7)(12,"h3"),c(13,"Payment For"),o(),s(14,"p"),c(15),o(),s(16,"p",8),c(17),o()()(),_(18,ci,13,2,"form",9)(19,mi,4,1,"div",10)(20,pi,4,0,"div",11),o(),s(21,"div",12)(22,"button",13),C("click",function(){return t.onCancel()}),c(23," Cancel "),o(),_(24,ui,4,1,"button",14)(25,gi,4,1,"button",14),o()),e&2&&(m(10),y(" $",t.data.amount," "),m(5),Ne(t.data.description),m(2),y("To: ",t.data.businessName,""),m(),M(t.showStripeForm()?19:18),m(2),M(t.processing()?20:-1),m(2),f("disabled",t.processing()),m(2),M(t.showStripeForm()?25:24))},dependencies:[le,mt,xe,ye,fe,_e,be,ve,Z,Qe,Ke,Ze,ge,ue,we,Ae,Me,wt,Se,pe,me,Pe,Oe,De,Ee,Te],styles:[".dialog-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:20px;font-weight:600;margin-bottom:0}.title-icon[_ngcontent-%COMP%]{color:#10b981;font-size:24px}.dialog-content[_ngcontent-%COMP%]{min-width:400px;max-width:500px}.payment-details[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;padding:20px;margin-bottom:20px}.amount-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.amount-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#64748b;margin:0 0 8px;text-transform:uppercase;letter-spacing:.5px}.amount-display[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#10b981;margin-bottom:16px}.description-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#64748b;margin:0 0 8px;text-transform:uppercase;letter-spacing:.5px}.description-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;color:#374151;line-height:1.5}.business-name[_ngcontent-%COMP%]{font-weight:600;color:#1f2937}.payment-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.full-width[_ngcontent-%COMP%]{width:100%}.payment-note[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px;padding:12px;background:#dbeafe;border:1px solid #bfdbfe;border-radius:8px;margin-top:16px}.payment-note[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#3b82f6;font-size:20px;margin-top:2px}.payment-note[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#1e40af;line-height:1.4}mat-dialog-actions[_ngcontent-%COMP%]{padding-top:16px}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:18px}.stripe-form[_ngcontent-%COMP%]{margin:20px 0}.stripe-elements[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:8px;padding:16px;background:#fff}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#ef4444;margin-top:12px;font-size:14px}.error-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#ffffffe6;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;border-radius:12px}.loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-weight:500;color:#64748b}"]})};var hi=()=>[1,2,3,4,5],fi=(n,i)=>i._id;function _i(n,i){n&1&&(s(0,"div",2),v(1,"mat-spinner",5),s(2,"span",6),c(3,"Loading projects..."),o()())}function yi(n,i){if(n&1){let e=I();s(0,"div",3)(1,"mat-icon",7),c(2,"work_off"),o(),s(3,"h3",8),c(4,"No Completed Projects"),o(),s(5,"p",9),c(6,"You need to complete a project with this business before you can leave a review."),o(),s(7,"button",10),C("click",function(){O(e);let a=h();return P(a.dialogRef.close())}),c(8," Close "),o()()}}function bi(n,i){if(n&1&&(s(0,"span",32),c(1),o()),n&2){let e=h().$implicit,t=h(2);m(),y(" - Completed ",t.formatDate(e.completed_at),"")}}function vi(n,i){if(n&1&&(s(0,"mat-option",14),c(1),_(2,bi,2,1,"span",32),o()),n&2){let e=i.$implicit;f("value",e._id),m(),y(" ",e.title," "),m(),M(e.completed_at?2:-1)}}function Ci(n,i){if(n&1){let e=I();s(0,"mat-icon",33),C("click",function(){let a=O(e).$implicit,l=h(2);return P(l.setRating(a))}),c(1," star "),o()}if(n&2){let e,t,a=i.$implicit,l=h(2);$("text-yellow-400",a<=((e=l.reviewForm.get("rating"))==null?null:e.value))("text-gray-300",a>((t=l.reviewForm.get("rating"))==null?null:t.value))}}function xi(n,i){n&1&&v(0,"mat-spinner",31)}function Di(n,i){if(n&1){let e=I();s(0,"form",11),C("ngSubmit",function(){O(e);let a=h();return P(a.submitReview())}),s(1,"mat-form-field",12)(2,"mat-label"),c(3,"Select Project"),o(),s(4,"mat-select",13),ke(5,vi,3,3,"mat-option",14,fi),o()(),s(7,"div",15)(8,"label",16),c(9,"Overall Rating *"),o(),s(10,"div",17),ke(11,Ci,2,4,"mat-icon",18,lt),s(13,"span",19),c(14),o()()(),s(15,"mat-form-field",12)(16,"mat-label"),c(17,"Review"),o(),s(18,"textarea",20),c(19,"            "),o()(),s(20,"div",21)(21,"div")(22,"label",16),c(23,"Service Quality"),o(),s(24,"mat-slider",22),v(25,"input",23),o(),s(26,"div",24),c(27),o()(),s(28,"div")(29,"label",16),c(30,"Communication"),o(),s(31,"mat-slider",22),v(32,"input",25),o(),s(33,"div",24),c(34),o()(),s(35,"div")(36,"label",16),c(37,"Timeliness"),o(),s(38,"mat-slider",22),v(39,"input",26),o(),s(40,"div",24),c(41),o()(),s(42,"div")(43,"label",16),c(44,"Value for Money"),o(),s(45,"mat-slider",22),v(46,"input",27),o(),s(47,"div",24),c(48),o()()(),s(49,"div",28)(50,"button",29),C("click",function(){O(e);let a=h();return P(a.dialogRef.close())}),c(51," Cancel "),o(),s(52,"button",30),_(53,xi,1,0,"mat-spinner",31),c(54," Submit Review "),o()()()}if(n&2){let e,t,a,l,p,d=h();f("formGroup",d.reviewForm),m(5),Le(d.completedProjects()),m(6),Le(ct(12,hi)),m(3),y("",((e=d.reviewForm.get("rating"))==null?null:e.value)||0,"/5"),m(10),f("displayWith",d.formatSliderLabel),m(3),y("",((t=d.reviewForm.get("service_quality"))==null?null:t.value)||0,"/5"),m(4),f("displayWith",d.formatSliderLabel),m(3),y("",((a=d.reviewForm.get("communication"))==null?null:a.value)||0,"/5"),m(4),f("displayWith",d.formatSliderLabel),m(3),y("",((l=d.reviewForm.get("timeliness"))==null?null:l.value)||0,"/5"),m(4),f("displayWith",d.formatSliderLabel),m(3),y("",((p=d.reviewForm.get("value_for_money"))==null?null:p.value)||0,"/5"),m(4),f("disabled",!d.reviewForm.valid||d.submitting()),m(),M(d.submitting()?53:-1)}}var zt=class n{reviewSubmitted=new te;fb=r(Ce);reviewService=r(St);dialogRef=r(A);data=r(B,{optional:!0});completedProjects=S([]);submitting=S(!1);loadingProjects=S(!1);get businessId(){return this.data?.businessId||""}get businessName(){return this.data?.businessName||"Business"}get projectId(){return this.data?.projectId||null}get projectTitle(){return this.data?.projectTitle||"Current Project"}reviewForm;constructor(){this.reviewForm=this.fb.group({project_id:["",R.required],rating:[0,[R.required,R.min(1),R.max(5)]],review_text:[""],service_quality:[5],communication:[5],timeliness:[5],value_for_money:[5]})}ngOnInit(){this.projectId?(this.reviewForm.patchValue({project_id:this.projectId}),this.completedProjects.set([{_id:this.projectId,title:this.projectTitle,business_id:{_id:this.businessId,name:this.businessName},completed_at:new Date,client_id:"",business_owner_id:"",status:"completed"}])):this.loadCompletedProjects()}loadCompletedProjects(){return u(this,null,function*(){try{this.loadingProjects.set(!0);let e=(yield this.reviewService.getCompletedProjectsForReviewAsync()).filter(t=>t.business_id._id===this.businessId);this.completedProjects.set(e)}catch(i){console.error("Error loading completed projects:",i)}finally{this.loadingProjects.set(!1)}})}setRating(i){this.reviewForm.patchValue({rating:i})}formatSliderLabel(i){return`${i}`}formatDate(i){return i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Date not specified"}submitReview(){return u(this,null,function*(){if(!this.reviewForm.invalid)try{this.submitting.set(!0);let i=this.reviewForm.value,e={project_id:i.project_id,rating:i.rating,review_text:i.review_text||void 0,service_quality:i.service_quality,communication:i.communication,timeliness:i.timeliness,value_for_money:i.value_for_money};yield this.reviewService.createReviewAsync(e),this.reviewSubmitted.emit(),this.dialogRef.close(!0)}catch(i){console.error("Error submitting review:",i)}finally{this.submitting.set(!1)}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=T({type:n,selectors:[["app-review-form"]],outputs:{reviewSubmitted:"reviewSubmitted"},decls:6,vars:1,consts:[[1,"p-6"],[1,"text-xl","font-semibold","text-gray-900","mb-4"],[1,"flex","items-center","justify-center","py-8"],[1,"text-center","py-8"],[3,"formGroup"],["diameter","40"],[1,"ml-3","text-gray-600"],[1,"text-gray-400","text-6xl","mb-4"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-600","mb-4"],["mat-button","","color","primary",3,"click"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"w-full","mb-4"],["formControlName","project_id","required",""],[3,"value"],[1,"mb-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"flex","items-center","space-x-2"],[1,"cursor-pointer","text-2xl","hover:text-yellow-400","transition-colors",3,"text-yellow-400","text-gray-300"],[1,"ml-2","text-sm","text-gray-600"],["matInput","","formControlName","review_text","rows","4","placeholder","Share your experience working with this business..."],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-6"],["min","1","max","5","step","1","discrete","",3,"displayWith"],["matSliderThumb","","formControlName","service_quality"],[1,"text-xs","text-gray-500","mt-1"],["matSliderThumb","","formControlName","communication"],["matSliderThumb","","formControlName","timeliness"],["matSliderThumb","","formControlName","value_for_money"],[1,"flex","justify-end","space-x-3"],["type","button","mat-button","",3,"click"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["diameter","20",1,"mr-2"],[1,"text-sm","text-gray-500"],[1,"cursor-pointer","text-2xl","hover:text-yellow-400","transition-colors",3,"click"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"h2",1),c(2,"Leave a Review"),o(),_(3,_i,4,0,"div",2)(4,yi,9,0,"div",3)(5,Di,55,13,"form",4),o()),e&2&&(m(3),M(t.loadingProjects()?3:t.completedProjects().length===0?4:5))},dependencies:[le,xe,ye,Mt,fe,_e,At,be,ve,Z,we,Ae,Me,Se,Ot,ge,ue,Pe,Oe,De,pe,me,It,Tt,Et,Ee,Te],styles:["[_nghost-%COMP%]{display:block;max-width:600px}.mat-mdc-slider[_ngcontent-%COMP%]{width:100%}mat-icon.text-yellow-400[_ngcontent-%COMP%]{color:#fbbf24}mat-icon.text-gray-300[_ngcontent-%COMP%]{color:#d1d5db}"]})};export{A as a,Ye as b,Qe as c,Ze as d,Ke as e,Z as f,Re as g,Ut as h,zt as i};
