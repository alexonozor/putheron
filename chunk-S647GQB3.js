import{Ba as p,La as u,P as l,T as g,Vb as b,bb as d,cb as m,d as t,gc as h,n as i}from"./chunk-TOAB6CW6.js";var v=class o{http=g(b);config=g(h);apiUrl=`${this.config.apiBaseUrl}/businesses`;getCategories(){return this.http.get(`${this.config.apiBaseUrl}/categories`)}getCategoriesAsync(){return t(this,null,function*(){try{return(yield i(this.getCategories())).data||[]}catch(s){throw console.error("Error fetching categories:",s),s}})}getSubcategories(s){return this.http.get(`${this.config.apiBaseUrl}/subcategories/category/${s}`)}getSubcategoriesAsync(s){return t(this,null,function*(){try{return(yield i(this.getSubcategories(s))).data||[]}catch(e){throw console.error("Error fetching subcategories:",e),e}})}getMyBusinesses(){return this.http.get(`${this.apiUrl}/my-businesses`)}getMyBusinessesAsync(){return t(this,null,function*(){try{return(yield i(this.getMyBusinesses())).data?.businesses||[]}catch(s){throw console.error("Error fetching my businesses:",s),s}})}getBusiness(s){return this.http.get(`${this.apiUrl}/${s}`)}getBusinessAsync(s){return t(this,null,function*(){try{return(yield i(this.getBusiness(s))).data||null}catch(e){throw console.error("Error fetching business:",e),e}})}createBusiness(s){return this.http.post(this.apiUrl,s)}createBusinessAsync(s){return t(this,null,function*(){try{let e=yield i(this.createBusiness(s));if(!e.success||!e.data)throw new Error(e.error||"Failed to create business");return e.data}catch(e){throw console.error("Error creating business:",e),e}})}updateBusiness(s,e){return this.http.patch(`${this.apiUrl}/${s}`,e)}updateBusinessAsync(s,e){return t(this,null,function*(){try{let r=yield i(this.updateBusiness(s,e));if(!r.success||!r.data)throw new Error(r.error||"Failed to update business");return r.data}catch(r){throw console.error("Error updating business:",r),r}})}deleteBusiness(s){return this.http.delete(`${this.apiUrl}/${s}`)}deleteBusinessAsync(s){return t(this,null,function*(){try{let e=yield i(this.deleteBusiness(s));if(!e.success)throw new Error(e.error||"Failed to delete business")}catch(e){throw console.error("Error deleting business:",e),e}})}getAllBusinesses(s=1,e=20,r,n){let a=`${this.apiUrl}?page=${s}&limit=${e}`;return r&&(a+=`&categoryId=${r}`),n&&(a+=`&subcategoryId=${n}`),this.http.get(a)}searchBusinesses(s,e=1,r=20){return this.http.get(`${this.apiUrl}/search?q=${encodeURIComponent(s)}&page=${e}&limit=${r}`)}getServices(s=1,e=10,r={}){let n=new URLSearchParams({page:s.toString(),limit:e.toString()});return Object.entries(r).forEach(([a,c])=>{c!=null&&n.append(a,c.toString())}),this.http.get(`${this.config.apiBaseUrl}/services?${n.toString()}`)}getServicesAsync(){return t(this,arguments,function*(s=1,e=10,r={}){try{return(yield i(this.getServices(s,e,r))).data||{services:[],total:0,page:1,totalPages:0}}catch(n){throw console.error("Error fetching services:",n),n}})}getBusinessServices(s,e=!1){let r=e?"?includeInactive=true":"";return this.http.get(`${this.config.apiBaseUrl}/services/business/${s}${r}`)}getBusinessServicesAsync(s,e=!1){return t(this,null,function*(){try{return(yield i(this.getBusinessServices(s,e))).data||[]}catch(r){throw console.error("Error fetching business services:",r),r}})}getService(s){return this.http.get(`${this.config.apiBaseUrl}/services/${s}`)}getServiceAsync(s){return t(this,null,function*(){try{return(yield i(this.getService(s))).data||null}catch(e){throw console.error("Error fetching service:",e),e}})}getServiceBySlug(s){return this.http.get(`${this.config.apiBaseUrl}/services/slug/${s}`)}getServiceBySlugAsync(s){return t(this,null,function*(){try{return(yield i(this.getServiceBySlug(s))).data||null}catch(e){throw console.error("Error fetching service by slug:",e),e}})}createService(s,e){return this.http.post(`${this.config.apiBaseUrl}/services/${s}`,e)}createServiceAsync(s,e){return t(this,null,function*(){try{let r=yield i(this.createService(s,e));if(!r.success||!r.data)throw new Error(r.message||"Failed to create service");return r.data}catch(r){throw console.error("Error creating service:",r),r}})}updateService(s,e){return this.http.patch(`${this.config.apiBaseUrl}/services/${s}`,e)}updateServiceAsync(s,e){return t(this,null,function*(){try{let r=yield i(this.updateService(s,e));if(!r.success||!r.data)throw new Error(r.message||"Failed to update service");return r.data}catch(r){throw console.error("Error updating service:",r),r}})}deleteService(s){return this.http.delete(`${this.config.apiBaseUrl}/services/${s}`)}deleteServiceAsync(s){return t(this,null,function*(){try{let e=yield i(this.deleteService(s));if(!e.success)throw new Error(e.message||"Failed to delete service")}catch(e){throw console.error("Error deleting service:",e),e}})}reorderServices(s,e){return this.http.put(`${this.config.apiBaseUrl}/services/reorder/${s}`,{serviceIds:e})}reorderServicesAsync(s,e){return t(this,null,function*(){try{let r=yield i(this.reorderServices(s,e));if(!r.success)throw new Error(r.message||"Failed to reorder services")}catch(r){throw console.error("Error reordering services:",r),r}})}uploadLogo(s,e){let r=new FormData;return r.append("logo",e),this.http.post(`${this.apiUrl}/${s}/upload-logo`,r)}uploadLogoAsync(s,e){return t(this,null,function*(){return(yield i(this.uploadLogo(s,e))).data})}uploadBanner(s,e){let r=new FormData;return r.append("banner",e),this.http.post(`${this.apiUrl}/${s}/upload-banner`,r)}uploadBannerAsync(s,e){return t(this,null,function*(){return(yield i(this.uploadBanner(s,e))).data})}uploadServiceImages(s,e){let r=new FormData;return e.forEach(n=>{r.append("images",n)}),this.http.post(`${this.config.apiBaseUrl}/services/${s}/upload-images`,r)}uploadServiceImagesAsync(s,e){return t(this,null,function*(){return(yield i(this.uploadServiceImages(s,e))).data})}deleteServiceImage(s,e){return this.http.delete(`${this.config.apiBaseUrl}/services/${s}/delete-image`,{body:{imageUrl:e}})}deleteServiceImageAsync(s,e){return t(this,null,function*(){yield i(this.deleteServiceImage(s,e))})}static \u0275fac=function(e){return new(e||o)};static \u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})};var f=["mat-internal-form-field",""],S=["*"],U=(()=>{class o{labelPosition;static \u0275fac=function(r){return new(r||o)};static \u0275cmp=p({type:o,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(r,n){r&2&&u("mdc-form-field--align-end",n.labelPosition==="before")},inputs:{labelPosition:"labelPosition"},attrs:f,ngContentSelectors:S,decls:1,vars:0,template:function(r,n){r&1&&(d(),m(0))},styles:[`.mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}
`],encapsulation:2,changeDetection:0})}return o})();export{v as a,U as b};
