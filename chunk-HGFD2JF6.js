import{a as _e,b as fe,c as xe}from"./chunk-5FYHGJK4.js";import{a as se,b as de,c as le,e as pe,f as me,g as ue,h as U}from"./chunk-KS5T35IU.js";import{a as ce,b as ge}from"./chunk-5WOC22XK.js";import{h as N,l as ae,m as B}from"./chunk-3E6WONAP.js";import"./chunk-U2AVJWKL.js";import"./chunk-V5XDW2Q5.js";import{d as re,k as oe}from"./chunk-K7KKK75I.js";import{B as j,c as ee,h as te,l as ie,y as ne}from"./chunk-U7A7OHU6.js";import{b as k}from"./chunk-NALWU7JT.js";import{c as q,d as T}from"./chunk-MLJYHTLM.js";import"./chunk-ZKKR2XMO.js";import"./chunk-LDSTDJZ6.js";import"./chunk-QD7SSFII.js";import{a as X,b as A}from"./chunk-QFHPWKDD.js";import"./chunk-O2FJLJYH.js";import{e as J,g as $,l as K}from"./chunk-72SEU4B5.js";import"./chunk-JFMUERLE.js";import{i as D,j as W,k as E,n as Y,t as R}from"./chunk-FI3M32ZM.js";import{$a as s,$b as p,Ac as H,Cc as w,Fc as O,Gc as Q,Lb as l,Mb as i,Nb as n,Ob as b,Vb as y,Ya as L,Zb as g,fa as S,ka as f,kb as P,la as x,ma as I,na as C,nc as a,oc as m,pc as _,qb as M,sc as V,tc as G,ua as v,uc as F,wb as u}from"./chunk-M7BUBJMW.js";import{a as z,e as h}from"./chunk-JKOY2XUY.js";var Ie=(r,t,e,o)=>({"bg-blue-100":r,"bg-green-100":t,"bg-gray-100":e,"bg-yellow-100":o}),we=(r,t,e,o)=>({"text-blue-600":r,"text-green-600":t,"text-gray-600":e,"text-yellow-600":o});function he(r,t){r&1&&(i(0,"span",17),a(1,"*"),n())}function Ce(r,t){if(r&1){let e=y();i(0,"mat-form-field",9)(1,"mat-label"),a(2," Resolution Action "),u(3,he,2,0,"span",15),n(),i(4,"input",16),F("ngModelChange",function(d){f(e);let c=p();return G(c.resolutionAction,d)||(c.resolutionAction=d),x(d)}),n()()}if(r&2){let e=p();s(3),l("ngIf",e.data.newStatus==="resolved"),s(),V("ngModel",e.resolutionAction),l("required",e.data.newStatus==="resolved")}}var Z=class r{constructor(t,e){this.dialogRef=t;this.data=e}adminNotes=v("");resolutionAction=v("");getStatusIcon(){switch(this.data.newStatus){case"under_review":return"search";case"resolved":return"check_circle";case"dismissed":return"cancel";case"pending":return"schedule";default:return"help"}}getStatusDisplayText(){switch(this.data.newStatus){case"under_review":return"Under Review";case"resolved":return"Resolved";case"dismissed":return"Dismissed";case"pending":return"Pending";default:return this.data.newStatus}}getButtonColor(){switch(this.data.newStatus){case"under_review":return"primary";case"resolved":return"primary";case"dismissed":return"warn";case"pending":return"accent";default:return"primary"}}updateStatus(){if(this.data.newStatus==="resolved"&&!this.resolutionAction())return;let t={status:this.data.newStatus,adminNotes:this.adminNotes(),resolutionAction:this.resolutionAction()};this.dialogRef.close(t)}cancel(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||r)(P(se),P(de))};static \u0275cmp=M({type:r,selectors:[["app-status-update-dialog"]],decls:24,vars:18,consts:[[1,"bg-white"],[1,"flex","items-start","p-6","pb-4"],[1,"mx-auto","flex-shrink-0","flex","items-center","justify-center","h-12","w-12","rounded-full","sm:mx-0","sm:h-10","sm:w-10",3,"ngClass"],[1,"h-6","w-6",3,"ngClass"],[1,"mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left","flex-1"],["mat-dialog-title","",1,"text-lg","leading-6","font-medium","text-gray-900"],["mat-dialog-content","",1,"mt-4","space-y-4"],[1,"text-sm","text-gray-500"],[1,"font-medium","capitalize"],["appearance","outline",1,"w-full"],["matInput","","rows","3","placeholder","Add notes about your decision...",3,"ngModelChange","ngModel"],["appearance","outline","class","w-full",4,"ngIf"],["mat-dialog-actions","",1,"flex","flex-row-reverse","gap-3","p-6","pt-0"],["mat-raised-button","",1,"min-w-24",3,"click","color","disabled"],["mat-button","","color","warn",3,"click"],["class","text-red-500",4,"ngIf"],["matInput","","placeholder","Describe the action taken...",3,"ngModelChange","ngModel","required"],[1,"text-red-500"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-icon",3),a(4),n()(),i(5,"div",4)(6,"h2",5),a(7," Update Report Status "),n(),i(8,"div",6)(9,"p",7),a(10," Change status to: "),i(11,"span",8),a(12),n()(),i(13,"mat-form-field",9)(14,"mat-label"),a(15,"Admin Notes (Optional)"),n(),i(16,"textarea",10),F("ngModelChange",function(c){return G(o.adminNotes,c)||(o.adminNotes=c),c}),a(17,"              "),n()(),u(18,Ce,5,3,"mat-form-field",11),n()()(),i(19,"div",12)(20,"button",13),g("click",function(){return o.updateStatus()}),a(21," Update Status "),n(),i(22,"button",14),g("click",function(){return o.cancel()}),a(23," Cancel "),n()()()),e&2&&(s(2),l("ngClass",w(8,Ie,o.data.newStatus==="under_review",o.data.newStatus==="resolved",o.data.newStatus==="dismissed",o.data.newStatus==="pending")),s(),l("ngClass",w(13,we,o.data.newStatus==="under_review",o.data.newStatus==="resolved",o.data.newStatus==="dismissed",o.data.newStatus==="pending")),s(),_(" ",o.getStatusIcon()," "),s(8),m(o.getStatusDisplayText()),s(4),V("ngModel",o.adminNotes),s(2),l("ngIf",o.data.newStatus==="resolved"||o.data.newStatus==="dismissed"),s(2),l("color",o.getButtonColor())("disabled",o.data.newStatus==="resolved"&&!o.resolutionAction()))},dependencies:[R,D,E,j,ee,te,ne,ie,U,pe,ue,me,T,q,N,oe,re,B,ae,A,X,k],encapsulation:2})};var Me=(r,t,e,o)=>({"bg-red-500":r,"bg-blue-500":t,"bg-green-500":e,"bg-purple-500":o}),De=(r,t)=>({"bg-blue-600 hover:bg-blue-700 text-white":r,"bg-gray-300 text-gray-500":t}),Ee=(r,t,e,o)=>({"bg-green-100 text-green-800":r,"bg-yellow-100 text-yellow-800":t,"bg-red-100 text-red-800":e,"bg-gray-100 text-gray-800":o});function Re(r,t){r&1&&(i(0,"div",3),b(1,"div",4),i(2,"span",5),a(3,"Loading report details..."),n()())}function Ae(r,t){if(r&1){let e=y();i(0,"div",6)(1,"div",7),I(),i(2,"svg",8),b(3,"path",9),n(),C(),i(4,"div")(5,"p",10),a(6,"Error loading report"),n(),i(7,"p",11),a(8),n(),i(9,"div",12)(10,"button",13),g("click",function(){f(e);let d=p();return x(d.loadReportDetails(d.reportId()))}),a(11," Try Again "),n(),i(12,"button",14),g("click",function(){f(e);let d=p();return x(d.goBack())}),a(13," Go Back "),n()()()()()}if(r&2){let e=p();s(8),m(e.error())}}function Te(r,t){r&1&&(i(0,"div",58)(1,"div",59),b(2,"div",60),i(3,"span",61),a(4,"Updating report status..."),n()()())}function ke(r,t){if(r&1&&(i(0,"div",62)(1,"p",63),a(2,"Custom Reason:"),n(),i(3,"p",64),a(4),n()()),r&2){let e=p(2);s(4),m(e.report().custom_reason)}}function je(r,t){if(r&1&&(i(0,"div",65)(1,"h4",66),a(2,"Additional Details:"),n(),i(3,"p",67),a(4),n()()),r&2){let e=p(2);s(4),m(e.report().description)}}function Ne(r,t){if(r&1&&(i(0,"div",72),I(),i(1,"svg",73),b(2,"path",74),n(),C(),i(3,"a",75),a(4," View Evidence "),n()()),r&2){let e=t.$implicit;s(3),l("href",e,L)}}function Be(r,t){if(r&1&&(i(0,"div",68)(1,"h4",69),a(2,"Evidence Files:"),n(),i(3,"div",70),u(4,Ne,5,1,"div",71),n()()),r&2){let e=p(2);s(4),l("ngForOf",e.getEvidenceUrls())}}function Ue(r,t){r&1&&(i(0,"span",82),a(1," Inactive "),n())}function Ze(r,t){if(r&1){let e=y();i(0,"div",76)(1,"div",31)(2,"img",77),g("error",function(d){f(e);let c=p(2);return x(c.onImageError(d))}),n()(),i(3,"div",33)(4,"h3",34),a(5),n(),i(6,"p",78),a(7),n(),i(8,"div",79)(9,"span",80),a(10),O(11,"titlecase"),n(),u(12,Ue,2,0,"span",81),n()()()}if(r&2){let e=p(2);s(2),l("src",e.getBusinessLogoUrl(),L)("alt",e.getBusinessName()+" logo"),s(3),m(e.getBusinessName()),s(2),m(e.getBusinessSlug()),s(2),l("ngClass",w(9,Ee,e.getBusinessStatus()==="approved",e.getBusinessStatus()==="pending",e.getBusinessStatus()==="rejected",e.getBusinessStatus()==="suspended")),s(),_(" ",Q(11,7,e.getBusinessStatus())," "),s(2),l("ngIf",!e.isBusinessActive())}}function Le(r,t){r&1&&(I(),i(0,"svg",83),b(1,"path",84),n())}function Pe(r,t){if(r&1&&(i(0,"div",65)(1,"h4",66),a(2,"Admin Notes:"),n(),i(3,"p",67),a(4),n()()),r&2){let e=p(3);s(4),m(e.report().admin_notes)}}function Ve(r,t){if(r&1&&(i(0,"div",87)(1,"h4",88),a(2,"Resolution Action:"),n(),i(3,"p",89),a(4),n()()),r&2){let e=p(3);s(4),m(e.report().resolution_action)}}function Ge(r,t){if(r&1&&(i(0,"div",78),a(1),n()),r&2){let e=p(3);s(),_(" Reviewed on ",e.formatDate(e.report().reviewed_at)," ")}}function Fe(r,t){if(r&1&&(i(0,"div",27)(1,"h2",28),a(2,"Admin Review"),n(),i(3,"div",29),u(4,Pe,5,1,"div",37)(5,Ve,5,1,"div",85)(6,Ge,2,1,"div",86),n()()),r&2){let e=p(2);s(4),l("ngIf",e.report().admin_notes),s(),l("ngIf",e.report().resolution_action),s(),l("ngIf",e.report().reviewed_at)}}function ze(r,t){r&1&&(i(0,"span",94),I(),i(1,"svg",95),b(2,"circle",96)(3,"path",97),n(),a(4," Updating... "),n())}function He(r,t){if(r&1&&(i(0,"span"),a(1),n()),r&2){let e=p().$implicit;s(),m(e.label)}}function Oe(r,t){if(r&1){let e=y();i(0,"div",90)(1,"button",91),g("click",function(){let d=f(e).$implicit,c=p(2);return x(c.openStatusModal(d.status))}),u(2,ze,5,0,"span",92)(3,He,2,1,"span",93),n()()}if(r&2){let e=t.$implicit,o=p(2);s(),l("disabled",!o.canUpdateStatus()||o.report().status===e.status||o.updatingStatus())("ngClass",e.color),s(),l("ngIf",o.updatingStatus()),s(),l("ngIf",!o.updatingStatus())}}function Qe(r,t){if(r&1){let e=y();i(0,"div",15),u(1,Te,5,0,"div",16),i(2,"div",17)(3,"div",18)(4,"button",19),g("click",function(){f(e);let d=p();return x(d.goBack())}),I(),i(5,"svg",20),b(6,"path",21),n(),a(7," Back to Reports "),n(),C(),b(8,"div",22),i(9,"h1",23),a(10,"Report Details"),n()(),i(11,"span",24),a(12),n()(),i(13,"div",25)(14,"div",26)(15,"div",27)(16,"h2",28),a(17,"Report Overview"),n(),i(18,"div",29)(19,"div",30)(20,"div",31)(21,"span",32),a(22),n()(),i(23,"div",33)(24,"h3",34),a(25),n(),i(26,"p",35),a(27),n(),u(28,ke,5,1,"div",36),n()(),u(29,je,5,1,"div",37)(30,Be,5,1,"div",38),n()(),i(31,"div",27)(32,"h2",28),a(33,"Reported Entity"),n(),u(34,Ze,13,14,"div",39),i(35,"div",40)(36,"div",41)(37,"span",42),a(38,"Entity Type:"),n(),i(39,"span",43),a(40),n()(),i(41,"div",41)(42,"span",42),a(43,"Entity Name:"),n(),i(44,"span",44),a(45),n()(),i(46,"div",45)(47,"span",42),a(48,"Entity ID:"),n(),i(49,"span",46),a(50),n()()(),i(51,"div",47)(52,"button",48),g("click",function(){f(e);let d=p();return x(d.viewEntityProfile())}),i(53,"span",49),u(54,Le,2,0,"svg",50),a(55),n()()()(),u(56,Fe,7,3,"div",51),n(),i(57,"div",52)(58,"div",27)(59,"h2",28),a(60,"Report Information"),n(),i(61,"div",40)(62,"div",41)(63,"span",42),a(64,"Report ID:"),n(),i(65,"span",53),a(66),n()(),i(67,"div",41)(68,"span",42),a(69,"Reported By:"),n(),i(70,"span",44),a(71),n()(),i(72,"div",41)(73,"span",42),a(74,"Anonymous:"),n(),i(75,"span",54),a(76),n()(),i(77,"div",41)(78,"span",42),a(79,"Submitted:"),n(),i(80,"span",44),a(81),n()(),i(82,"div",45)(83,"span",42),a(84,"Last Updated:"),n(),i(85,"span",44),a(86),n()()()(),i(87,"div",27)(88,"h2",28),a(89,"Admin Actions"),n(),i(90,"div",40),u(91,Oe,4,4,"div",55),n(),i(92,"div",47)(93,"p",56),a(94," Current Status: "),i(95,"span",57),a(96),n()()()()()()()}if(r&2){let e=p();s(),l("ngIf",e.updatingStatus()),s(10),l("ngClass",e.getStatusColorClass(e.report().status)),s(),_(" ",e.getStatusDisplayText(e.report().status)," "),s(9),l("ngClass",w(27,Me,e.report().report_type==="user",e.report().report_type==="business",e.report().report_type==="project",e.report().report_type==="message")),s(),_(" ",e.report().report_type.charAt(0).toUpperCase()," "),s(3),m(e.getReportTypeDisplayText(e.report().report_type)),s(2),m(e.getReasonDisplayText(e.report().reason)),s(),l("ngIf",e.report().custom_reason),s(),l("ngIf",e.report().description),s(),l("ngIf",e.hasEvidenceUrls()),s(4),l("ngIf",e.getBusinessDetails()),s(6),m(e.report().report_type),s(5),m(e.getReportedEntityName()),s(5),_(" ",e.getReportedEntityId()," "),s(2),l("disabled",!e.canViewEntityProfile())("ngClass",H(32,De,e.canViewEntityProfile(),!e.canViewEntityProfile())),s(2),l("ngIf",e.canViewEntityProfile()),s(),_(" View ",e.report().report_type==="user"?"User Profile":e.report().report_type==="business"?"Business Profile":"Entity Details"," "),s(),l("ngIf",e.report().admin_notes||e.report().resolution_action),s(10),m(e.report()._id),s(5),m(e.getReporterName()),s(4),l("ngClass",e.report().is_anonymous?"text-orange-600":"text-gray-900"),s(),_(" ",e.report().is_anonymous?"Yes":"No"," "),s(5),m(e.formatDate(e.report().createdAt)),s(5),m(e.formatDate(e.report().updatedAt)),s(5),l("ngForOf",e.getStatusActions()),s(5),m(e.getStatusDisplayText(e.report().status))}}var ve=class r{router=S($);route=S(J);reportsService=S(xe);dialog=S(le);snackBar=S(ce);reportId=v("");report=v(null);loading=v(!1);error=v(null);updatingStatus=v(!1);ReportType=_e;ReportReason=fe;ngOnInit(){this.route.params.subscribe(t=>{let e=t.id;e&&(this.reportId.set(e),this.loadReportDetails(e))})}loadReportDetails(t){return h(this,null,function*(){try{this.loading.set(!0),this.error.set(null);let e=yield this.reportsService.getReportAsync(t);this.report.set(e)}catch(e){console.error("Failed to load report details:",e),this.error.set("Failed to load report details. Please try again.")}finally{this.loading.set(!1)}})}goBack(){this.router.navigate(["/admin/reports"])}openStatusModal(t){let e=this.report();if(!e)return;let o={currentStatus:e.status,newStatus:t,reportId:e._id};this.dialog.open(Z,{width:"500px",data:o,disableClose:!1}).afterClosed().subscribe(c=>h(this,null,function*(){c&&(yield this.updateReportStatus(c))}))}updateReportStatus(t){return h(this,null,function*(){let e=this.report();if(e)try{this.updatingStatus.set(!0);let o={status:t.status,admin_notes:t.adminNotes,resolution_action:t.resolutionAction};console.log("Updating report status:",z({reportId:e._id},o));let d=yield this.reportsService.updateReportStatusAsync(e._id,o);this.report.set(d),console.log("Report status updated successfully:",d),this.snackBar.open(`Report status updated to "${this.reportsService.getStatusDisplayText(t.status)}"`,"Close",{duration:5e3,panelClass:["success-snackbar"]})}catch(o){console.error("Failed to update report status:",o);let d="Failed to update report status. Please try again.";o instanceof Error&&(d=o.message),this.snackBar.open(`Error: ${d}`,"Close",{duration:8e3,panelClass:["error-snackbar"]})}finally{this.updatingStatus.set(!1)}})}formatDate(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}getStatusColorClass(t){return this.reportsService.getStatusColorClass(t)}getReasonDisplayText(t){return this.reportsService.getReasonDisplayText(t)}getStatusDisplayText(t){return this.reportsService.getStatusDisplayText(t)}getReportTypeIcon(t){switch(t){case"user":return"person";case"business":return"business";case"project":return"work";case"message":return"chat";default:return"report"}}getReportTypeDisplayText(t){switch(t){case"user":return"User Report";case"business":return"Business Report";case"project":return"Project Report";case"message":return"Message Report";default:return"Unknown Report"}}getReportedEntityName(){let t=this.report();if(!t)return"Unknown Entity";if(t.reported_user_id&&typeof t.reported_user_id=="object"){let e=t.reported_user_id;return`${e.first_name||""} ${e.last_name||""}`.trim()||e.email||"Unknown User"}return t.reported_business_id&&typeof t.reported_business_id=="object"?t.reported_business_id.name||"Unknown Business":"Unknown Entity"}getReporterName(){let t=this.report();if(!t)return"Unknown";if(t.is_anonymous)return"Anonymous User";if(t.reporter_id&&typeof t.reporter_id=="object"){let e=t.reporter_id;return`${e.first_name||""} ${e.last_name||""}`.trim()||e.email||"Unknown User"}return"Unknown User"}canUpdateStatus(){return this.report()!==null&&!this.updatingStatus()}hasEvidenceUrls(){let t=this.report();return t!==null&&t.evidence_urls!==void 0&&t.evidence_urls.length>0}getEvidenceUrls(){return this.report()?.evidence_urls||[]}getReportedEntityId(){let t=this.report();return t?t.reported_user_id?typeof t.reported_user_id=="object"?t.reported_user_id._id||"N/A":t.reported_user_id:t.reported_business_id?typeof t.reported_business_id=="object"?t.reported_business_id._id||"N/A":t.reported_business_id:t.reported_project_id?typeof t.reported_project_id=="object"?t.reported_project_id._id||"N/A":t.reported_project_id:t.reported_message_id?typeof t.reported_message_id=="object"?t.reported_message_id._id||"N/A":t.reported_message_id:"N/A":"N/A"}getBusinessDetails(){let t=this.report();return!t?.reported_business_id||typeof t.reported_business_id!="object"?null:t.reported_business_id}getBusinessLogoUrl(){return this.getBusinessDetails()?.logo_url||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iMjAiIGZpbGw9IiNGM0Y0RjYiLz4KPHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4PSIxMiIgeT0iMTIiPgo8cGF0aCBkPSJNMTQgOEMxNCA5LjEgMTMuMSAxMCAxMiAxMEgxMEM4LjkgMTAgOCA5LjEgOCA4VjZDOCA0LjkgOC45IDQgMTAgNEgxMkMxMy4xIDQgMTQgNC45IDE0IDZWOFoiIGZpbGw9IiM5Q0EzQUYiLz4KPHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4PSIxMiIgeT0iMTIiPgo8L3N2Zz4K"}getBusinessName(){return this.getBusinessDetails()?.name||"Unknown Business"}getBusinessSlug(){return this.getBusinessDetails()?.slug||""}getBusinessStatus(){return this.getBusinessDetails()?.status||"unknown"}isBusinessActive(){return this.getBusinessDetails()?.is_active===!0}onImageError(t){let e=t.target;e&&(e.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iMjAiIGZpbGw9IiNGM0Y0RjYiLz4KPHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4PSIxMiIgeT0iMTIiPgo8cGF0aCBkPSJNMTQgOEMxNCA5LjEgMTMuMSAxMCAxMiAxMEgxMEM4LjkgMTAgOCA5LjEgOCA4VjZDOCA0LjkgOC45IDQgMTAgNEgxMkMxMy4xIDQgMTQgNC45IDE0IDZWOFoiIGZpbGw9IiM5Q0EzQUYiLz4KPC9zdmc+Cg==")}viewEntityProfile(){let t=this.report();if(!t){this.snackBar.open("No report data available","Close",{duration:3e3});return}let e=t.report_type,o=!1;try{if(e==="business"&&t.reported_business_id){let d=typeof t.reported_business_id=="object"?t.reported_business_id._id:t.reported_business_id;d&&(this.router.navigate(["/admin/dashboard/businesses/details",d]),o=!0)}else if(e==="user"&&t.reported_user_id){let d=typeof t.reported_user_id=="object"?t.reported_user_id._id:t.reported_user_id;d&&(this.router.navigate(["/admin/dashboard/users/details",d]),o=!0)}else if(e==="project"&&t.reported_project_id){let d=typeof t.reported_project_id=="object"?t.reported_project_id._id:t.reported_project_id;d&&(this.router.navigate(["/admin/dashboard/projects/details",d]),o=!0)}o||this.snackBar.open(`Unable to navigate to ${e} profile. Entity ID not available.`,"Close",{duration:5e3})}catch(d){console.error("Navigation error:",d),this.snackBar.open(`Failed to navigate to ${e} profile. Please try again.`,"Close",{duration:5e3})}}canViewEntityProfile(){let t=this.report();if(!t)return!1;let e=t.report_type;return e==="business"&&t.reported_business_id?!!(typeof t.reported_business_id=="object"?t.reported_business_id?._id:t.reported_business_id):e==="user"&&t.reported_user_id?!!(typeof t.reported_user_id=="object"?t.reported_user_id?._id:t.reported_user_id):e==="project"&&t.reported_project_id?!!(typeof t.reported_project_id=="object"?t.reported_project_id?._id:t.reported_project_id):!1}getStatusActions(){return[{status:"under_review",label:"Mark as Under Review",color:"bg-blue-600 hover:bg-blue-700"},{status:"resolved",label:"Resolve Report",color:"bg-green-600 hover:bg-green-700"},{status:"dismissed",label:"Dismiss Report",color:"bg-gray-600 hover:bg-gray-700"},{status:"pending",label:"Mark as Pending",color:"bg-yellow-600 hover:bg-yellow-700"}]}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=M({type:r,selectors:[["app-admin-report-details"]],decls:3,vars:3,consts:[["class","flex items-center justify-center py-12",4,"ngIf"],["class","bg-red-50 border border-red-200 rounded-md p-4 m-6",4,"ngIf"],["class","space-y-6 p-6 relative",4,"ngIf"],[1,"flex","items-center","justify-center","py-12"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-blue-600"],[1,"ml-3","text-gray-600"],[1,"bg-red-50","border","border-red-200","rounded-md","p-4","m-6"],[1,"flex"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-red-400","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"],[1,"text-red-800","font-medium"],[1,"text-red-600","text-sm","mt-1"],[1,"mt-3","space-x-3"],[1,"bg-red-100","hover:bg-red-200","text-red-800","px-3","py-1","rounded","text-sm","font-medium","transition-colors",3,"click"],[1,"bg-gray-100","hover:bg-gray-200","text-gray-800","px-3","py-1","rounded","text-sm","font-medium","transition-colors",3,"click"],[1,"space-y-6","p-6","relative"],["class","absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-50 rounded-lg",4,"ngIf"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],[1,"flex","items-center","text-gray-600","hover:text-gray-900","transition-colors",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"h-6","border-l","border-gray-300"],[1,"text-2xl","font-bold","text-gray-900"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-sm","font-medium",3,"ngClass"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2","space-y-6"],[1,"bg-white","rounded-lg","border","border-gray-200","p-6"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"space-y-4"],[1,"flex","items-start","space-x-4"],[1,"flex-shrink-0"],[1,"inline-flex","items-center","justify-center","h-12","w-12","rounded-full","text-white","text-lg","font-medium",3,"ngClass"],[1,"flex-1"],[1,"text-lg","font-medium","text-gray-900"],[1,"text-sm","text-gray-600","mb-2"],["class","bg-yellow-50 border border-yellow-200 rounded-md p-3",4,"ngIf"],["class","bg-gray-50 rounded-md p-4",4,"ngIf"],["class","bg-blue-50 rounded-md p-4",4,"ngIf"],["class","flex items-center space-x-4 mb-4 p-4 bg-gray-50 rounded-md",4,"ngIf"],[1,"space-y-3"],[1,"flex","justify-between","items-center","py-2","border-b","border-gray-100"],[1,"text-sm","font-medium","text-gray-600"],[1,"text-sm","text-gray-900","capitalize"],[1,"text-sm","text-gray-900"],[1,"flex","justify-between","items-center","py-2"],[1,"text-sm","text-gray-500","font-mono"],[1,"mt-4","pt-4","border-t","border-gray-200"],[1,"w-full","px-4","py-2","rounded-md","text-sm","font-medium","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled","ngClass"],[1,"flex","items-center","justify-center"],["class","h-4 w-4 mr-2","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","bg-white rounded-lg border border-gray-200 p-6",4,"ngIf"],[1,"space-y-6"],[1,"text-sm","text-gray-900","font-mono"],[1,"text-sm",3,"ngClass"],["class","w-full",4,"ngFor","ngForOf"],[1,"text-xs","text-gray-500"],[1,"font-medium"],[1,"absolute","inset-0","bg-white","bg-opacity-75","flex","items-center","justify-center","z-50","rounded-lg"],[1,"flex","flex-col","items-center","space-y-3"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"text-sm","text-gray-600","font-medium"],[1,"bg-yellow-50","border","border-yellow-200","rounded-md","p-3"],[1,"text-sm","font-medium","text-yellow-800","mb-1"],[1,"text-sm","text-yellow-700"],[1,"bg-gray-50","rounded-md","p-4"],[1,"text-sm","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-700","whitespace-pre-wrap"],[1,"bg-blue-50","rounded-md","p-4"],[1,"text-sm","font-medium","text-blue-900","mb-2"],[1,"space-y-2"],["class","flex items-center space-x-2",4,"ngFor","ngForOf"],[1,"flex","items-center","space-x-2"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"],["target","_blank",1,"text-sm","text-blue-600","hover:text-blue-800","underline",3,"href"],[1,"flex","items-center","space-x-4","mb-4","p-4","bg-gray-50","rounded-md"],[1,"h-12","w-12","rounded-full","object-cover","bg-gray-200",3,"error","src","alt"],[1,"text-sm","text-gray-500"],[1,"flex","items-center","mt-1"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",3,"ngClass"],["class","ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",4,"ngIf"],[1,"ml-2","inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-red-100","text-red-800"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"],["class","bg-green-50 rounded-md p-4",4,"ngIf"],["class","text-sm text-gray-500",4,"ngIf"],[1,"bg-green-50","rounded-md","p-4"],[1,"text-sm","font-medium","text-green-900","mb-2"],[1,"text-sm","text-green-700"],[1,"w-full"],[1,"w-full","px-4","py-2","text-sm","font-medium","text-white","rounded-md","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled","ngClass"],["class","inline-flex items-center",4,"ngIf"],[4,"ngIf"],[1,"inline-flex","items-center"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,o){e&1&&u(0,Re,4,0,"div",0)(1,Ae,14,1,"div",1)(2,Qe,97,35,"div",2),e&2&&(l("ngIf",o.loading()),s(),l("ngIf",o.error()&&!o.loading()),s(),l("ngIf",o.report()&&!o.loading()&&!o.error()))},dependencies:[R,D,W,E,K,j,U,T,N,B,A,k,ge,Y],encapsulation:2})};export{ve as AdminReportDetailsComponent};
