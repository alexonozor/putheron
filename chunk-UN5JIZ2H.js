import{a as b}from"./chunk-LIZM4CZI.js";import{A as c,z as g}from"./chunk-Z5YYMG7R.js";import{aa as m,fa as o,o as i}from"./chunk-ME5BD2TS.js";import{e as n}from"./chunk-JKOY2XUY.js";var l=class a{http=o(c);configService=o(b);get apiUrl(){return this.configService.getApiUrl("/admin/reviews")}getReviews(e={}){let t=new g;return e.page&&(t=t.set("page",e.page.toString())),e.limit&&(t=t.set("limit",e.limit.toString())),e.sortBy&&(t=t.set("sortBy",e.sortBy)),e.sortOrder&&(t=t.set("sortOrder",e.sortOrder)),e.rating&&(t=t.set("rating",e.rating.toString())),e.search&&(t=t.set("search",e.search)),e.dateFrom&&(t=t.set("dateFrom",e.dateFrom)),e.dateTo&&(t=t.set("dateTo",e.dateTo)),e.businessId&&(t=t.set("businessId",e.businessId)),e.userId&&(t=t.set("userId",e.userId)),e.isVerified!==void 0&&(t=t.set("isVerified",e.isVerified.toString())),e.isFlagged!==void 0&&(t=t.set("isFlagged",e.isFlagged.toString())),this.http.get(this.apiUrl,{params:t})}getReviewsAsync(){return n(this,arguments,function*(e={}){let t=yield i(this.getReviews(e)),s=e.limit||25,r=t.data.page||1,d=t.data.total||0,u=t.data.totalPages||0;return{reviews:t.data.reviews||[],pagination:{total:d,totalPages:u,currentPage:r,perPage:s,hasNext:r<u,hasPrev:r>1},stats:null}})}getReviewStats(){return this.http.get(`${this.apiUrl}/stats`)}getReviewStatsAsync(){return n(this,null,function*(){return(yield i(this.getReviewStats())).data})}getReview(e){return this.http.get(`${this.apiUrl}/${e}`)}getReviewAsync(e){return n(this,null,function*(){return(yield i(this.getReview(e))).data})}updateReviewStatus(e,t,s,r){return this.http.patch(`${this.apiUrl}/${e}/status`,{is_verified:t,is_flagged:s,flagged_reason:r})}updateReviewStatusAsync(e,t,s,r){return n(this,null,function*(){return(yield i(this.updateReviewStatus(e,t,s,r))).data})}deleteReview(e){return this.http.delete(`${this.apiUrl}/${e}`)}deleteReviewAsync(e){return n(this,null,function*(){yield i(this.deleteReview(e))})}bulkUpdateReviews(e,t){return this.http.post(`${this.apiUrl}/bulk-update`,{reviewIds:e,updateData:t})}bulkUpdateReviewsAsync(e,t){return n(this,null,function*(){return(yield i(this.bulkUpdateReviews(e,t))).data})}exportReviews(e){let t=new g;return e.rating&&(t=t.set("rating",e.rating.toString())),e.search&&(t=t.set("search",e.search)),e.dateFrom&&(t=t.set("dateFrom",e.dateFrom)),e.dateTo&&(t=t.set("dateTo",e.dateTo)),e.businessId&&(t=t.set("businessId",e.businessId)),e.format&&(t=t.set("format",e.format)),this.http.get(`${this.apiUrl}/export`,{params:t})}exportReviewsAsync(e){return n(this,null,function*(){return(yield i(this.exportReviews(e))).data})}getStatusColor(e,t){return t?"bg-red-100 text-red-800":e?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}getStatusLabel(e,t){return t?"Flagged":e?"Verified":"Unverified"}getRatingColor(e){return e>=4.5?"text-green-600":e>=3.5?"text-yellow-600":e>=2.5?"text-orange-600":"text-red-600"}formatDate(e){try{return(typeof e=="string"?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Unknown"}}getUserName(e){return typeof e=="object"&&e.first_name?`${e.first_name} ${e.last_name}`:"Unknown User"}getBusinessName(e){return typeof e=="object"&&e.name?e.name:"Unknown Business"}getProjectTitle(e){return typeof e=="object"&&e.title?e.title:"Unknown Project"}generateStarDisplay(e){let t=Math.floor(e),s=e%1>=.5,r=5-t-(s?1:0);return"\u2605".repeat(t)+(s?"\u2606":"")+"\u2606".repeat(r)}static \u0275fac=function(t){return new(t||a)};static \u0275prov=m({token:a,factory:a.\u0275fac,providedIn:"root"})};export{l as a};
