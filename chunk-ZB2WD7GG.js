import{a as ji}from"./chunk-J4I6U27G.js";import{a as Ti,b as ki}from"./chunk-TA6G6XR5.js";import{a as vi}from"./chunk-2565PBBS.js";import{d as Di,e as Fi,f as Ii,g as Ri,h as Ni}from"./chunk-BPBJQFSI.js";import{a as pt,b as ut,f as ie}from"./chunk-VTECMAB6.js";import{a as $t,b as Wt,c as Pi,d as Mi}from"./chunk-YDWGWZ6F.js";import{a as Ei}from"./chunk-NFSNY3TG.js";import{a as wi,b as Si}from"./chunk-5ZYUDIOR.js";import"./chunk-DI7FIG2Y.js";import{c as gt,d as _t,e as ft,g as xt,h as ht,j as Ct,k as vt,m as bt,n as yt,p as wt,q as ge}from"./chunk-3UNUIKCF.js";import{a as St,b as Et,c as Re}from"./chunk-DVJGIJEZ.js";import{a as _i}from"./chunk-LET5UGB3.js";import"./chunk-XIJYT45R.js";import{a as De}from"./chunk-AB3FMD4J.js";import{a as ui}from"./chunk-MAUTWKH5.js";import{a as Zt}from"./chunk-URZBJTPH.js";import"./chunk-GLDHM7BE.js";import"./chunk-PVDG46DZ.js";import"./chunk-BQAOSCDJ.js";import{b as gi}from"./chunk-M23MWY4A.js";import{d as bi,e as yi,f as jt,k as Pt}from"./chunk-HQCAXNXF.js";import{a as ti,b as ii}from"./chunk-EAY5JATJ.js";import{a as oi,b as ai}from"./chunk-IEFGRZDU.js";import{a as ri}from"./chunk-7YGFLBJ2.js";import{e as pi}from"./chunk-RTVUWSKV.js";import{a as ei,b as at}from"./chunk-LPGP55NA.js";import{a as nt,b as ot,c as rt,d as be}from"./chunk-OVLPSQNG.js";import{a as z,b as ye,c as te,d as we,f as Se,h as O}from"./chunk-7UZH7J7I.js";import{a as fi,b as Ci}from"./chunk-KDG3UQKT.js";import{a as xi,b as hi}from"./chunk-C6BPA2SC.js";import{a as mi}from"./chunk-WJ4DFVWN.js";import"./chunk-2CAQAZ7V.js";import{a as Fe,b as Ie}from"./chunk-MBUBF4CC.js";import{d as se,h as me,i as pe,j as ue,l as ci,m as ke}from"./chunk-ZEPG7XYP.js";import"./chunk-667ILHIJ.js";import"./chunk-ZLE5IO2O.js";import{d as de,e as li,f as di,g as ct,h as mt,k as ce}from"./chunk-WUPIU6OB.js";import{A as Te,B as si,C as le,c as lt,e as H,h as Ee,i as je,m as dt,q as Pe,s as Me}from"./chunk-3JRZMC5D.js";import{a as ni}from"./chunk-UUQHZO7R.js";import{a as G}from"./chunk-DVEYH5MF.js";import"./chunk-C3KG2QNL.js";import{a as Z,b as ee}from"./chunk-2WQD2DAV.js";import{a as Xt,s as it,t as X,u as B}from"./chunk-IZGM5G4Z.js";import"./chunk-OXNSH2WS.js";import{a as st}from"./chunk-QD7SSFII.js";import{a as A,b as V}from"./chunk-EPCK2AMG.js";import{d as Jt}from"./chunk-WF7V7INI.js";import{e as et,g as ae,l as tt}from"./chunk-HNHRL3LT.js";import"./chunk-S4SH23H7.js";import{C as Qt,D as Ze,i as ve,o as re,s as Kt,u as Xe,w as I}from"./chunk-5TL7AFVW.js";import{Bc as Qe,Cc as Ce,Fc as Je,Hb as p,Ic as k,Jb as u,Jc as N,Mb as L,Mc as Ve,Nb as U,Ob as h,Pb as r,Qb as o,Rb as E,Sb as c,Tb as m,Ub as j,Vb as $,Vc as T,Wb as W,Yb as P,Za as xe,Zb as Ke,ab as l,ac as b,ba as zt,bc as R,cc as d,fa as Yt,fb as he,ga as S,la as f,lb as Ht,ma as x,mc as Ne,na as M,oa as D,p as K,pc as Q,qc as n,rb as F,rc as C,sc as y,tc as Ae,va as w,xb as q}from"./chunk-VCYZZ2B3.js";import{e as v}from"./chunk-JKOY2XUY.js";var Ai=(i,e)=>e._id;function qi(i,e){if(i&1){let t=P();c(0,"div",16)(1,"div",18),M(),c(2,"svg",19),j(3,"path",20),m(),D(),c(4,"div",21)(5,"h3",22),n(6,"Error Loading Dashboard"),m(),c(7,"p",23),n(8),m()(),c(9,"button",24),R("click",function(){f(t);let s=d();return x(s.loadDashboardData())}),n(10," Try Again "),m()()()}if(i&2){let t=d();l(8),C(t.error())}}function Li(i,e){i&1&&(c(0,"div",17)(1,"div",25),j(2,"div",26),c(3,"p",27),n(4,"Loading dashboard data..."),m()()())}function Ui(i,e){if(i&1){let t=P();c(0,"div",67)(1,"div",90),M(),c(2,"svg",91),j(3,"path",35),m()(),D(),c(4,"h4",92),n(5,"No businesses yet"),m(),c(6,"p",93),n(7,"Get started by creating your first business profile and start connecting with customers"),m(),c(8,"button",94),R("click",function(){f(t);let s=d(3);return x(s.navigateToCreateBusiness())}),M(),c(9,"svg",95),j(10,"path",15),m(),n(11," Create Your First Business "),m()()}}function Hi(i,e){if(i&1&&j(0,"img",99),i&2){let t=d().$implicit;Ke("src",t.logo_url,xe)("alt",t.name)}}function $i(i,e){i&1&&(c(0,"div",100),M(),c(1,"svg",109),j(2,"path",35),m()())}function Wi(i,e){if(i&1){let t=P();c(0,"div",98),R("click",function(){let s=f(t).$implicit,g=d(4);return x(g.viewBusiness(s._id))}),p(1,Hi,1,2,"img",99)(2,$i,3,0,"div",100),c(3,"div",101)(4,"div",102)(5,"h4",103),n(6),m(),c(7,"span",104),n(8),k(9,"titlecase"),m()(),c(10,"div",105)(11,"span",18),M(),c(12,"svg",106),j(13,"path",107),m(),n(14),m(),D(),c(15,"span",18),M(),c(16,"svg",106),j(17,"path",44)(18,"path",108),m(),n(19),m()()(),c(20,"svg",80),j(21,"path",65),m()()}if(i&2){let t=e.$implicit,a=d(4);l(),u(t.logo_url?1:2),l(5),C(t.name),l(),Q(a.getStatusBadgeClass(t.status)),l(),y(" ",N(9,7,t.status)," "),l(6),y(" ",a.getCategoryName(t)," "),l(5),y(" ",t.view_count||0," views ")}}function Gi(i,e){if(i&1){let t=P();c(0,"div",97)(1,"button",110),R("click",function(){f(t);let s=d(4);return x(s.setActiveTab("businesses"))}),n(2),M(),c(3,"svg",111),j(4,"path",112),m()()()}if(i&2){let t=d(4);l(2),y(" View ",t.userBusinesses().length-3," more businesses ")}}function zi(i,e){if(i&1&&(c(0,"div",68),L(1,Wi,22,9,"div",96,Ai),p(3,Gi,5,1,"div",97),m()),i&2){let t=d(3);l(),U(t.userBusinesses().slice(0,3)),l(2),u(t.userBusinesses().length>3?3:-1)}}function Yi(i,e){if(i&1){let t=P();c(0,"div",28)(1,"div",30)(2,"div",31)(3,"div",18)(4,"div",32)(5,"div",33),M(),c(6,"svg",34),j(7,"path",35),m()()(),D(),c(8,"div",36)(9,"p",37),n(10,"Total Businesses"),m(),c(11,"div",38)(12,"p",39),n(13),k(14,"number"),m(),c(15,"p",40),n(16,"Active"),m()(),c(17,"p",41),n(18,"Business listings"),m()()()(),c(19,"div",31)(20,"div",18)(21,"div",32)(22,"div",42),M(),c(23,"svg",34),j(24,"path",43)(25,"path",44),m()()(),D(),c(26,"div",36)(27,"p",37),n(28,"Active Services"),m(),c(29,"div",38)(30,"p",39),n(31),k(32,"number"),m(),c(33,"p",45),n(34,"Available"),m()(),c(35,"p",41),n(36,"Service offerings"),m()()()(),c(37,"div",31)(38,"div",18)(39,"div",32)(40,"div",46),M(),c(41,"svg",34),j(42,"path",47),m()()(),D(),c(43,"div",36)(44,"p",37),n(45,"Projects"),m(),c(46,"div",38)(47,"p",39),n(48),k(49,"number"),m(),c(50,"p",48),n(51,"Total"),m()(),c(52,"p",41),n(53,"Portfolio items"),m()()()(),c(54,"div",31)(55,"div",18)(56,"div",32)(57,"div",49),M(),c(58,"svg",50),j(59,"path",51),m()()(),D(),c(60,"div",36)(61,"p",37),n(62,"Total Favorites"),m(),c(63,"div",38)(64,"p",39),n(65),k(66,"number"),m(),c(67,"p",52),n(68,"Received"),m()(),c(69,"p",41),n(70,"Customer likes"),m()()()()(),c(71,"div",53)(72,"div",31)(73,"div",18)(74,"div",32)(75,"div",54),M(),c(76,"svg",34),j(77,"path",55),m()()(),D(),c(78,"div",36)(79,"p",37),n(80,"Messages"),m(),c(81,"div",38)(82,"p",39),n(83,"0"),m(),c(84,"p",56),n(85,"Coming soon"),m()(),c(86,"p",41),n(87,"Customer inquiries"),m()()()()(),c(88,"div",57)(89,"div",58)(90,"div",59)(91,"div",60)(92,"div")(93,"h3",61),n(94,"Recent Businesses"),m(),c(95,"p",62),n(96,"Your latest business listings"),m()(),c(97,"button",63),R("click",function(){f(t);let s=d(2);return x(s.setActiveTab("businesses"))}),n(98," View All "),M(),c(99,"svg",64),j(100,"path",65),m()()()(),D(),c(101,"div",66),p(102,Ui,12,0,"div",67)(103,zi,4,1,"div",68),m()(),c(104,"div",58)(105,"div",69)(106,"div",60)(107,"h3",70),n(108,"Quick Actions"),m(),M(),c(109,"svg",71),j(110,"path",72),m()(),D(),c(111,"p",62),n(112,"Get started with common tasks"),m()(),c(113,"div",66)(114,"div",73)(115,"button",74),R("click",function(){f(t);let s=d(2);return x(s.navigateToCreateBusiness())}),c(116,"div",75)(117,"div",76),M(),c(118,"svg",34),j(119,"path",35),m()(),D(),c(120,"div",77)(121,"p",78),n(122,"Create New Business"),m(),c(123,"p",79),n(124,"Set up a new business profile and start listing your services"),m()(),M(),c(125,"svg",80),j(126,"path",65),m()()(),D(),c(127,"button",81),R("click",function(){f(t);let s=d(2);return x(s.createService())}),c(128,"div",75)(129,"div",82),M(),c(130,"svg",34),j(131,"path",15),m()(),D(),c(132,"div",77)(133,"p",83),n(134,"Add New Service"),m(),c(135,"p",79),n(136,"Create a service offering for one of your businesses"),m()(),M(),c(137,"svg",84),j(138,"path",65),m()()(),D(),c(139,"button",85),R("click",function(){f(t);let s=d(2);return x(s.setActiveTab("businesses"))}),c(140,"div",75)(141,"div",86),M(),c(142,"svg",34),j(143,"path",87),m()(),D(),c(144,"div",77)(145,"p",88),n(146,"Manage Businesses"),m(),c(147,"p",79),n(148,"View and manage all your business listings"),m()(),M(),c(149,"svg",89),j(150,"path",65),m()()()()()()()()}if(i&2){let t=d(2);l(13),C(N(14,5,t.userBusinesses().length)),l(18),C(N(32,7,t.getTotalServices())),l(17),C(N(49,9,t.getTotalProjects())),l(17),C(N(66,11,t.getTotalFavorites())),l(37),u(t.userBusinesses().length===0?102:103)}}function Ki(i,e){if(i&1){let t=P();c(0,"div",116)(1,"div",118),M(),c(2,"svg",119),j(3,"path",35),m()(),D(),c(4,"h3",120),n(5,"No businesses yet"),m(),c(6,"p",121),n(7,"Get started by creating your first business listing."),m(),c(8,"button",122),R("click",function(){f(t);let s=d(3);return x(s.navigateToCreateBusiness())}),M(),c(9,"svg",12),j(10,"path",15),m(),n(11," Create Your First Business "),m()()}}function Qi(i,e){if(i&1&&j(0,"img",126),i&2){let t=d().$implicit;Ke("src",t.logo_url,xe)("alt",t.name+" logo")}}function Ji(i,e){i&1&&(c(0,"div",127),M(),c(1,"svg",141),j(2,"path",35),m()())}function Xi(i,e){if(i&1){let t=P();c(0,"div",124),R("click",function(){let s=f(t).$implicit,g=d(4);return x(g.viewBusiness(s._id))}),c(1,"div",66)(2,"div",125),p(3,Qi,1,2,"img",126)(4,Ji,3,0,"div",127),c(5,"div",101)(6,"h4",128),n(7),m(),c(8,"span",129),n(9),k(10,"titlecase"),m()()(),c(11,"p",130),n(12),m(),c(13,"div",131)(14,"span"),n(15),m(),c(16,"span"),n(17),m()()(),c(18,"div",132)(19,"div",60)(20,"div",133)(21,"button",134),R("click",function(s){let g=f(t).$implicit,_=d(4);return s.stopPropagation(),x(_.viewBusiness(g._id))}),M(),c(22,"svg",135),j(23,"path",44)(24,"path",108),m()(),D(),c(25,"button",136),R("click",function(s){let g=f(t).$implicit,_=d(4);return s.stopPropagation(),x(_.editBusiness(g._id))}),M(),c(26,"svg",135),j(27,"path",137),m()()(),D(),c(28,"button",138),R("click",function(s){let g=f(t).$implicit,_=d(4);return s.stopPropagation(),x(_.deleteBusiness(g._id))}),M(),c(29,"svg",139),j(30,"path",140),m()()()()()}if(i&2){let t=e.$implicit,a=d(4);l(3),u(t.logo_url?3:4),l(4),C(t.name),l(),Q(a.getStatusColor(t.status)),l(),y(" ",N(10,8,t.status)," "),l(3),y(" ",t.short_description||t.description||"No description available"," "),l(3),C(a.getCategoryName(t)),l(2),y("",t.view_count||0," views")}}function Zi(i,e){if(i&1&&(c(0,"div",117),L(1,Xi,31,10,"div",123,Ai),m()),i&2){let t=d(3);l(),U(t.userBusinesses())}}function en(i,e){if(i&1){let t=P();c(0,"div",29)(1,"div",60)(2,"div")(3,"h2",113),n(4,"Your Businesses"),m(),c(5,"p",114),n(6,"Manage and monitor your business listings"),m()(),c(7,"button",115),R("click",function(){f(t);let s=d(2);return x(s.navigateToCreateBusiness())}),M(),c(8,"svg",12),j(9,"path",15),m(),n(10," New Business "),m()(),p(11,Ki,12,0,"div",116)(12,Zi,3,0,"div",117),m()}if(i&2){let t=d(2);l(11),u(t.hasBusinesses()?12:11)}}function tn(i,e){if(i&1){let t=P();c(0,"div",29)(1,"div",60)(2,"div")(3,"h2",113),n(4,"Your Services"),m(),c(5,"p",114),n(6,"Manage services across all your businesses"),m()(),c(7,"button",115),R("click",function(){f(t);let s=d(2);return x(s.createService())}),M(),c(8,"svg",12),j(9,"path",15),m(),n(10," New Service "),m()(),D(),c(11,"div",116)(12,"div",118),M(),c(13,"svg",119),j(14,"path",43)(15,"path",44),m()(),D(),c(16,"h3",120),n(17,"Services Management"),m(),c(18,"p",121),n(19,"This feature will be available soon. You can manage services from individual business profiles."),m(),c(20,"button",142),R("click",function(){f(t);let s=d(2);return x(s.setActiveTab("businesses"))}),n(21," View Businesses "),m()()()}}function nn(i,e){i&1&&(c(0,"div",29)(1,"div",60)(2,"div")(3,"h2",113),n(4,"Your Projects"),m(),c(5,"p",114),n(6,"Showcase your work and portfolio"),m()()(),c(7,"div",116)(8,"div",118),M(),c(9,"svg",119),j(10,"path",47),m()(),D(),c(11,"h3",120),n(12,"Projects Coming Soon"),m(),c(13,"p",143),n(14,"Portfolio and project management features will be available in a future update."),m()()())}function on(i,e){i&1&&(c(0,"div",29)(1,"div",60)(2,"div")(3,"h2",113),n(4,"Messages"),m(),c(5,"p",114),n(6,"Communicate with clients and prospects"),m()()(),c(7,"div",116)(8,"div",118),M(),c(9,"svg",119),j(10,"path",55),m()(),D(),c(11,"h3",120),n(12,"Messaging Coming Soon"),m(),c(13,"p",143),n(14,"Direct messaging and communication features will be available in a future update."),m()()())}function rn(i,e){if(i&1&&p(0,Yi,151,13,"div",28)(1,en,13,1,"div",29)(2,tn,22,0,"div",29)(3,nn,15,0,"div",29)(4,on,15,0,"div",29),i&2){let t,a=d();u((t=a.activeTab())==="overview"?0:t==="businesses"?1:t==="services"?2:t==="projects"?3:t==="messages"?4:-1)}}var Mt=class i{authService=S(G);router=S(ae);route=S(et);businessService=S(ni);projectService=S(De);favoritesService=S(ui);roleService=S(vi);userBusinesses=w([]);userServices=w([]);userProjects=w([]);businessesFavoritesCount=w({});loading=w(!1);error=w(null);activeTab=w("overview");userIdForAdmin="";isAssigningAdmin=w(!1);rachelUserId="687e220f5c54f009db530a0d";user=this.authService.user;hasBusinesses=T(()=>this.userBusinesses().length>0);totalServices=T(()=>this.userServices().length);totalProjects=T(()=>this.userProjects().length);ngOnInit(){if(!this.user()){this.router.navigate(["/auth"]);return}let e=this.router.url.split("/"),t=e[e.length-1];t==="dashboard"||t==="overview"||t===""?this.activeTab.set("overview"):this.activeTab.set(t),this.loadDashboardData()}loadDashboardData(){return v(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let e=yield this.businessService.getMyBusinessesAsync();this.userBusinesses.set(e);let t=[];for(let a of e)try{let s=yield this.businessService.getBusinessServicesAsync(a._id);t=[...t,...s]}catch(s){console.warn(`Failed to load services for business ${a._id}:`,s)}this.userServices.set(t);try{let a=yield this.projectService.getAllMyProjectsAsync();this.userProjects.set(a)}catch(a){console.warn("Failed to load projects:",a),this.userProjects.set([])}if(e.length>0)try{let a=e.map(g=>g._id),s=yield this.favoritesService.getMultipleBusinessesFavoritesCount(a);this.businessesFavoritesCount.set(s)}catch(a){console.warn("Failed to load businesses favorites count:",a),this.businessesFavoritesCount.set({})}}catch(e){console.error("Error loading dashboard data:",e),this.error.set(e.message||"Failed to load dashboard data")}finally{this.loading.set(!1)}})}setActiveTab(e){this.activeTab.set(e)}getTotalServices(){return this.totalServices()}getTotalProjects(){return this.totalProjects()}getTotalFavorites(){let e=this.businessesFavoritesCount();return Object.values(e).reduce((t,a)=>t+a,0)}navigateToCreateBusiness(){this.router.navigate(["/dashboard/businesses/create-business"])}createService(){if(this.userBusinesses().length===0){alert("Please create a business first before adding services.");return}this.router.navigate(["/dashboard/services/create"])}viewProjects(){this.router.navigate(["/dashboard/projects"])}viewBusiness(e){this.router.navigate(["/business/profile",e])}editBusiness(e){alert("Edit business functionality will be available soon!")}deleteBusiness(e){confirm("Are you sure you want to delete this business? This action cannot be undone.")&&alert("Delete business functionality will be available soon!")}viewProfile(){alert("Profile page will be available soon!")}viewMessages(){alert("Messages page will be available soon!")}getStatusColor(e){switch(e){case"approved":return"text-green-600";case"pending":return"text-yellow-600";case"rejected":return"text-red-600";case"suspended":return"text-gray-600";default:return"text-gray-600"}}getStatusBadgeClass(e){switch(e){case"approved":return"bg-green-50 text-green-700 border-green-200";case"pending":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"suspended":return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}}getStatusIcon(e){switch(e){case"approved":return"bg-green-400";case"pending":return"bg-yellow-400";case"rejected":return"bg-red-400";case"suspended":return"bg-gray-400";default:return"bg-gray-400"}}getCategoryName(e){return typeof e.category_id=="object"&&e.category_id?.name?e.category_id.name:"Unknown Category"}getSubcategoryName(e){return typeof e.subcategory_id=="object"&&e.subcategory_id?.name?e.subcategory_id.name:null}copyRachelId(){navigator.clipboard.writeText(this.rachelUserId).then(()=>{alert("Rachel's User ID copied to clipboard!")}).catch(e=>{console.error("Failed to copy:",e),alert("Failed to copy User ID")})}getCurrentDateTime(){return new Date().toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=F({type:i,selectors:[["app-overviews"]],decls:25,vars:5,consts:[[1,"min-h-screen","bg-gradient-to-br","from-slate-50","via-blue-50","to-indigo-50"],[1,"p-4","sm:p-6","lg:p-8"],[1,"mb-8"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between"],[1,"mb-4","sm:mb-0"],[1,"text-3xl","font-bold","text-gray-900","gradient-text"],[1,"text-gray-600","mt-2","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2","text-green-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","text-gray-500","mt-1"],[1,"flex","space-x-3"],[1,"action-button","inline-flex","items-center","px-4","py-2","border","border-transparent","rounded-lg","shadow-sm","text-sm","font-medium","text-white","bg-gradient-to-r","from-blue-600","to-indigo-600","hover:from-blue-700","hover:to-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"action-button","inline-flex","items-center","px-4","py-2","border","border-gray-300","rounded-lg","shadow-sm","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"bg-red-50","border","border-red-200","rounded-xl","p-6","mb-8"],[1,"flex","items-center","justify-center","h-64"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-600","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"flex-1"],[1,"text-sm","font-medium","text-red-800"],[1,"text-sm","text-red-700","mt-1"],[1,"ml-4","px-3","py-1","bg-red-600","text-white","rounded-md","text-sm","hover:bg-red-700","transition-colors",3,"click"],[1,"text-center"],[1,"inline-block","animate-spin","rounded-full","h-12","w-12","border-b-2","border-blue-600"],[1,"mt-4","text-sm","text-gray-600"],[1,"space-y-8"],[1,"space-y-6"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","sm:gap-6","stagger-animation"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-100","p-6","hover:shadow-md","transition-all","duration-300","transform","hover:-translate-y-1"],[1,"flex-shrink-0"],[1,"w-12","h-12","bg-gradient-to-r","from-blue-500","to-blue-600","rounded-xl","flex","items-center","justify-center","shadow-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"ml-4","flex-1"],[1,"text-sm","font-medium","text-gray-500"],[1,"flex","items-baseline"],[1,"text-2xl","font-bold","text-gray-900"],[1,"ml-2","text-sm","font-medium","text-blue-600"],[1,"text-xs","text-gray-500"],[1,"w-12","h-12","bg-gradient-to-r","from-green-500","to-green-600","rounded-xl","flex","items-center","justify-center","shadow-lg"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"ml-2","text-sm","font-medium","text-green-600"],[1,"w-12","h-12","bg-gradient-to-r","from-purple-500","to-purple-600","rounded-xl","flex","items-center","justify-center","shadow-lg"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V8a2 2 0 012-2V6"],[1,"ml-2","text-sm","font-medium","text-purple-600"],[1,"w-12","h-12","bg-gradient-to-r","from-red-500","to-red-600","rounded-xl","flex","items-center","justify-center","shadow-lg"],["fill","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-white"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"],[1,"ml-2","text-sm","font-medium","text-red-600"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","sm:gap-6"],[1,"w-12","h-12","bg-gradient-to-r","from-indigo-500","to-indigo-600","rounded-xl","flex","items-center","justify-center","shadow-lg"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"],[1,"ml-2","text-sm","font-medium","text-indigo-600"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-100","overflow-hidden"],[1,"px-6","py-4","border-b","border-gray-100","bg-gradient-to-r","from-gray-50","to-slate-50"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-600","mt-1"],[1,"inline-flex","items-center","px-3","py-2","text-sm","font-medium","text-blue-600","hover:text-blue-700","hover:bg-blue-50","rounded-lg","transition-all","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","ml-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"p-6"],[1,"text-center","py-12"],[1,"space-y-3"],[1,"px-6","py-4","border-b","border-gray-100","bg-gradient-to-r","from-blue-50","to-indigo-50"],[1,"text-lg","font-semibold","text-gray-900","bg-gradient-to-r","from-blue-600","to-indigo-600","bg-clip-text","text-transparent"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],[1,"grid","grid-cols-1","gap-4"],[1,"flex","items-center","p-4","bg-gradient-to-r","from-blue-50","to-indigo-50","border","border-blue-200","rounded-xl","hover:from-blue-100","hover:to-indigo-100","hover:border-blue-300","transition-all","duration-300","transform","hover:-translate-y-1","hover:shadow-md","group",3,"click"],[1,"flex","items-center","space-x-4","w-full"],[1,"p-3","bg-gradient-to-r","from-blue-500","to-blue-600","rounded-xl","shadow-lg","group-hover:shadow-xl","transition-all","duration-300"],[1,"flex-1","text-left"],[1,"text-base","font-semibold","text-gray-900","group-hover:text-blue-700","transition-colors"],[1,"text-sm","text-gray-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","group-hover:text-blue-500","transition-colors"],[1,"flex","items-center","p-4","bg-gradient-to-r","from-green-50","to-emerald-50","border","border-green-200","rounded-xl","hover:from-green-100","hover:to-emerald-100","hover:border-green-300","transition-all","duration-300","transform","hover:-translate-y-1","hover:shadow-md","group",3,"click"],[1,"p-3","bg-gradient-to-r","from-green-500","to-green-600","rounded-xl","shadow-lg","group-hover:shadow-xl","transition-all","duration-300"],[1,"text-base","font-semibold","text-gray-900","group-hover:text-green-700","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","group-hover:text-green-500","transition-colors"],[1,"flex","items-center","p-4","bg-gradient-to-r","from-purple-50","to-violet-50","border","border-purple-200","rounded-xl","hover:from-purple-100","hover:to-violet-100","hover:border-purple-300","transition-all","duration-300","transform","hover:-translate-y-1","hover:shadow-md","group",3,"click"],[1,"p-3","bg-gradient-to-r","from-purple-500","to-purple-600","rounded-xl","shadow-lg","group-hover:shadow-xl","transition-all","duration-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v11a2 2 0 002 2h2m0-13h10a2 2 0 012 2v9a2 2 0 01-2 2H9m8-2v2m-6-6h6m-6-2h6m-6-2h6m-6-2h6"],[1,"text-base","font-semibold","text-gray-900","group-hover:text-purple-700","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","group-hover:text-purple-500","transition-colors"],[1,"p-4","bg-gradient-to-br","from-blue-50","to-indigo-50","rounded-2xl","w-20","h-20","mx-auto","mb-6","flex","items-center","justify-center","border","border-blue-100"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-blue-500"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600","mb-6","max-w-sm","mx-auto"],[1,"inline-flex","items-center","px-6","py-3","bg-gradient-to-r","from-blue-600","to-indigo-600","text-white","rounded-xl","hover:from-blue-700","hover:to-indigo-700","transition-all","duration-200","transform","hover:scale-105","shadow-lg","hover:shadow-xl","font-medium",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],[1,"flex","items-center","space-x-4","p-4","rounded-xl","hover:bg-gradient-to-r","hover:from-blue-50","hover:to-indigo-50","cursor-pointer","transition-all","duration-300","transform","hover:-translate-y-1","border","border-transparent","hover:border-blue-200","hover:shadow-md","group"],[1,"pt-4","border-t","border-gray-100"],[1,"flex","items-center","space-x-4","p-4","rounded-xl","hover:bg-gradient-to-r","hover:from-blue-50","hover:to-indigo-50","cursor-pointer","transition-all","duration-300","transform","hover:-translate-y-1","border","border-transparent","hover:border-blue-200","hover:shadow-md","group",3,"click"],[1,"h-14","w-14","rounded-xl","object-cover","border-2","border-gray-100","group-hover:border-blue-200","transition-colors",3,"src","alt"],[1,"h-14","w-14","rounded-xl","bg-gradient-to-br","from-gray-100","to-gray-200","flex","items-center","justify-center","border-2","border-gray-100","group-hover:border-blue-200","group-hover:from-blue-50","group-hover:to-indigo-50","transition-all"],[1,"flex-1","min-w-0"],[1,"flex","items-center","space-x-2","mb-2"],[1,"text-base","font-semibold","text-gray-900","truncate","group-hover:text-blue-700","transition-colors"],[1,"inline-flex","items-center","px-2.5","py-1","rounded-full","text-xs","font-medium","border"],[1,"flex","items-center","space-x-4","text-sm","text-gray-500"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-7","h-7","text-gray-400","group-hover:text-blue-500","transition-colors"],[1,"w-full","flex","items-center","justify-center","px-4","py-3","text-sm","font-medium","text-gray-600","hover:text-blue-600","hover:bg-blue-50","rounded-lg","transition-all","duration-200","border","border-gray-200","hover:border-blue-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","ml-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"text-xl","font-semibold","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","px-4","py-2","bg-gray-900","text-white","rounded-lg","hover:bg-gray-800","transition-colors","font-medium","text-sm",3,"click"],[1,"bg-white","rounded-xl","border","border-gray-200","p-12","text-center","shadow-sm"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"p-4","bg-gray-50","rounded-full","w-20","h-20","mx-auto","mb-6","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-gray-300"],[1,"text-xl","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],[1,"inline-flex","items-center","px-6","py-3","bg-gray-900","text-white","rounded-lg","hover:bg-gray-800","transition-colors","font-medium",3,"click"],[1,"bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-lg","transition-all","cursor-pointer","overflow-hidden"],[1,"bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-lg","transition-all","cursor-pointer","overflow-hidden",3,"click"],[1,"flex","items-center","space-x-4","mb-4"],[1,"h-12","w-12","rounded-lg","object-cover",3,"src","alt"],[1,"h-12","w-12","rounded-lg","bg-gray-100","flex","items-center","justify-center"],[1,"text-lg","font-medium","text-gray-900","truncate"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium"],[1,"text-sm","text-gray-600","mb-4","line-clamp-2"],[1,"flex","items-center","justify-between","text-xs","text-gray-500"],[1,"px-6","py-3","border-t","border-gray-200","bg-gray-50"],[1,"flex","space-x-2"],["title","View Business",1,"p-2","hover:bg-gray-200","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-600"],["title","Edit Business",1,"p-2","hover:bg-gray-200","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["title","Delete Business",1,"p-2","hover:bg-red-50","hover:text-red-700","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-400"],[1,"inline-flex","items-center","px-4","py-2","border","border-gray-300","text-gray-700","rounded-lg","hover:bg-gray-50","transition-colors","font-medium",3,"click"],[1,"text-gray-500"]],template:function(t,a){if(t&1&&(c(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),n(6," Dashboard Overview "),m(),c(7,"p",6),M(),c(8,"svg",7),j(9,"path",8),m(),n(10),m(),D(),c(11,"p",9),n(12),m()(),c(13,"div",10)(14,"button",11),R("click",function(){return a.loadDashboardData()}),M(),c(15,"svg",12),j(16,"path",13),m(),n(17," Refresh "),m(),D(),c(18,"button",14),R("click",function(){return a.navigateToCreateBusiness()}),M(),c(19,"svg",12),j(20,"path",15),m(),n(21," New Business "),m()()()(),p(22,qi,11,1,"div",16),p(23,Li,5,0,"div",17)(24,rn,5,1),m()()),t&2){let s;l(10),y(" Welcome back, ",(((s=a.user())==null?null:s.first_name)+" "+(((s=a.user())==null?null:s.last_name)||"")).trim()||((s=a.user())==null?null:s.email)," "),l(2),y("Last updated: ",a.getCurrentDateTime()),l(2),Ke("disabled",a.loading()),l(8),u(a.error()?22:-1),l(),u(a.loading()?23:24)}},dependencies:[I,si,Kt,re],styles:["[_nghost-%COMP%]{display:block}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}.stats-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out}.stats-card[_ngcontent-%COMP%]:hover{box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a}.gradient-text[_ngcontent-%COMP%]{background:linear-gradient(-45deg,#3b82f6,#6366f1,#8b5cf6,#06b6d4);background-size:400% 400%;animation:_ngcontent-%COMP%_gradientShift 4s ease infinite;-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}@keyframes _ngcontent-%COMP%_gradientShift{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.loading-skeleton[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite}@keyframes _ngcontent-%COMP%_loading{0%{background-position:200% 0}to{background-position:-200% 0}}.action-button[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.action-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.02);box-shadow:0 10px 20px #0000001a}.action-button[_ngcontent-%COMP%]:active{transform:translateY(0) scale(.98)}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:3px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(to bottom,#cbd5e1,#94a3b8);border-radius:3px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(to bottom,#94a3b8,#64748b)}.glass-card[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);box-shadow:0 8px 32px #0000001a}.stagger-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out}.stagger-animation[_ngcontent-%COMP%]:nth-child(2){animation-delay:.1s}.stagger-animation[_ngcontent-%COMP%]:nth-child(3){animation-delay:.2s}.stagger-animation[_ngcontent-%COMP%]:nth-child(4){animation-delay:.3s}.stagger-animation[_ngcontent-%COMP%]:nth-child(5){animation-delay:.4s}"]})};function sn(i,e){if(i&1){let t=P();r(0,"button",4)(1,"mat-icon"),n(2,"more_vert"),o()(),r(3,"mat-menu",null,0)(5,"button",5),b("click",function(){let s=f(t).$implicit,g=d();return x(g.onView(s))}),r(6,"mat-icon"),n(7,"visibility"),o(),r(8,"span"),n(9,"View"),o()(),r(10,"button",6),b("click",function(){let s=f(t).$implicit,g=d();return x(g.onAccept(s))}),r(11,"mat-icon"),n(12,"check"),o(),r(13,"span"),n(14,"Accept"),o()(),r(15,"button",6),b("click",function(){let s=f(t).$implicit,g=d();return x(g.onReject(s))}),r(16,"mat-icon"),n(17,"close"),o(),r(18,"span"),n(19,"Reject"),o()()()}if(i&2){let t=e.$implicit,a=Ne(4);h("matBadge","")("matBadgeHidden",!(t.status==="requested"||t.status==="under_review"))("matMenuTriggerFor",a),l(10),h("disabled",t.status!=="requested"&&t.status!=="under_review"),l(5),h("disabled",t.status!=="requested"&&t.status!=="under_review")}}var kt=class i{projects=[];set displayedColumns(e){this.columns.set(this.getColumnDefinitions(e))}columns=w([]);view=new he;accept=new he;reject=new he;trackByFn(e,t){return t._id}onView(e){this.view.emit(e)}onAccept(e){this.accept.emit(e)}onReject(e){this.reject.emit(e)}getStatusChipColor(e){return{requested:"primary",under_review:"accent",accepted:"primary",started:"primary",payment_requested:"accent",payment_pending:"accent",payment_completed:"primary",in_progress:"primary",awaiting_client_approval:"accent",completed:"primary",settled:"primary",rejected:"warn",cancelled:"warn"}[e]||"primary"}getStatusColor(e){return{requested:"bg-blue-100 text-blue-800",under_review:"bg-yellow-100 text-yellow-800",accepted:"bg-green-100 text-green-800",started:"bg-indigo-100 text-indigo-800",payment_requested:"bg-orange-100 text-orange-800",payment_pending:"bg-orange-100 text-orange-800",payment_completed:"bg-emerald-100 text-emerald-800",in_progress:"bg-purple-100 text-purple-800",awaiting_client_approval:"bg-amber-100 text-amber-800",completed:"bg-green-100 text-green-800",settled:"bg-teal-100 text-teal-800",rejected:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"}[e]||"bg-gray-100 text-gray-800"}getStatusText(e){return{requested:"Requested",under_review:"Under Review",accepted:"Accepted",started:"Started",payment_requested:"Payment Requested",payment_pending:"Payment Pending",payment_completed:"Payment Completed",in_progress:"In Progress",awaiting_client_approval:"Awaiting Approval",completed:"Completed",settled:"Settled",rejected:"Rejected",cancelled:"Cancelled"}[e]||e}formatDate(e){try{return(typeof e=="string"?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Unknown"}}getBusinessName(e){return typeof e.business_id=="object"&&e.business_id.name?e.business_id.name:"Unknown Business"}getClientName(e){if(typeof e.client_id=="object"){let t=e.client_id;return`${t.first_name} ${t.last_name}`}return"Unknown Client"}getColumnDefinitions(e){let t={title:{header:"Project",field:"title",width:"250px",formatter:a=>`<div class="flex flex-col">
            <div>${a.title}</div>
            <div class="text-sm text-gray-600">${this.getBusinessName(a)}</div>
          </div>`},client:{header:"Client",field:"client_id",width:"180px",formatter:a=>`<span class="text-sm text-gray-700">${this.getClientName(a)}</span>`},budget:{header:"Budget",field:"offered_price",width:"120px",formatter:a=>`<span class="text-sm">$${a.offered_price}</span>`},status:{header:"Status",field:"status",width:"150px",formatter:a=>{let s=this.getStatusColor(a.status),g=this.getStatusText(a.status);return`<div class="${s} inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium">
            ${g}
          </div>`}},date:{header:"Created",field:"createdAt",width:"130px",formatter:a=>`<span class="text-sm text-gray-700">${new Date(a.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}</span>`},actions:{header:"Actions",field:"actions",width:"80px",pinned:"right",right:"0px",type:"button",buttons:[{type:"icon",icon:"more_vert",tooltip:"Options",children:[{icon:"visibility",text:"View",click:a=>this.onView(a)},{icon:"check",text:"Accept",click:a=>this.onAccept(a),disabled:a=>a.status!=="requested"&&a.status!=="under_review"},{icon:"close",text:"Reject",click:a=>this.onReject(a),disabled:a=>a.status!=="requested"&&a.status!=="under_review"}]}]}};return e.map(a=>t[a]||{header:a,field:a})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=F({type:i,selectors:[["app-project-list-card"]],inputs:{projects:"projects",displayedColumns:"displayedColumns"},outputs:{view:"view",accept:"accept",reject:"reject"},decls:3,vars:3,consts:[["menu","matMenu"],[1,"bg-white!"],[1,"w-full",3,"data","columns","trackBy"],["matColumnDef","actions"],["mat-icon-button","","matBadgeOverlap","false","matBadgeColor","accent",3,"matBadge","matBadgeHidden","matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click","disabled"]],template:function(t,a){t&1&&(r(0,"mat-card",1)(1,"mtx-grid",2),q(2,sn,20,5,"ng-template",3),o()()),t&2&&(l(),h("data",a.projects)("columns",a.columns())("trackBy",a.trackByFn))},dependencies:[I,O,z,B,it,V,A,be,ot,nt,rt,at,ei,Si,wi],styles:["[_nghost-%COMP%]{display:block}"]})};var ln=i=>({label:"Clear Filters",callback:i}),dn=i=>[i];function cn(i,e){if(i&1&&(r(0,"div",5)(1,"div",7)(2,"div",8)(3,"mat-icon",9),n(4,"error"),o(),r(5,"div")(6,"h3",10),n(7,"Error"),o(),r(8,"p",11),n(9),o()()()()()),i&2){let t=d();l(9),C(t.error())}}function mn(i,e){if(i&1&&(r(0,"div",6),E(1,"mat-spinner",12),o()),i&2){let t=d();l(),h("diameter",t.isMobile()?40:60)("strokeWidth",4)}}function pn(i,e){if(i&1&&(r(0,"div",29),E(1,"app-empty-state",31),o()),i&2){let t=d(2);l(),h("buttons",Ce(3,dn,Ce(1,ln,t.handleClearFilters)))}}function un(i,e){if(i&1){let t=P();r(0,"div",30)(1,"app-project-list-card",32),b("view",function(s){f(t);let g=d(2);return x(g.viewProject(s))})("accept",function(s){f(t);let g=d(2);return x(g.acceptProject(s))})("reject",function(s){f(t);let g=d(2);return x(g.rejectProject(s))}),o()()}if(i&2){let t=d(2);l(),h("projects",t.filteredProjects())("displayedColumns",t.displayedColumns())}}function gn(i,e){if(i&1){let t=P();r(0,"div",13)(1,"app-business-search-filter",14),b("searchChange",function(s){f(t);let g=d();return x(g.searchTerm.set(s))})("viewModeChange",function(s){f(t);let g=d();return x(g.setViewMode(s))})("clearSearch",function(){f(t);let s=d();return x(s.clearSearch())}),r(2,"div",15)(3,"mat-form-field",16)(4,"mat-label"),n(5,"Project Type"),o(),r(6,"mat-select",17),b("selectionChange",function(s){f(t);let g=d();return x(g.projectType.set(s.value))}),r(7,"mat-option",18),n(8,"My Requests"),o(),r(9,"mat-option",19),n(10,"Business Inquiries"),o()(),r(11,"mat-icon",20),n(12,"folder_outline"),o()()(),r(13,"div",15)(14,"mat-form-field",16)(15,"mat-label"),n(16,"Status"),o(),r(17,"mat-select",17),b("selectionChange",function(s){f(t);let g=d();return x(g.selectedStatus.set(s.value))}),r(18,"mat-option",21),n(19,"All Status"),o(),r(20,"mat-option",22),n(21,"Requested"),o(),r(22,"mat-option",23),n(23,"Under Review"),o(),r(24,"mat-option",24),n(25,"Accepted"),o(),r(26,"mat-option",25),n(27,"Started"),o(),r(28,"mat-option",26),n(29,"Completed"),o(),r(30,"mat-option",27),n(31,"Rejected"),o(),r(32,"mat-option",28),n(33,"Cancelled"),o()(),r(34,"mat-icon",20),n(35,"info_outline"),o()()()()(),p(36,pn,2,5,"div",29)(37,un,2,2,"div",30)}if(i&2){let t=d();l(),h("searchTerm",t.searchTerm())("viewMode",t.viewMode())("hideViewModeToggle",!0),l(5),h("value",t.projectType()),l(11),h("value",t.selectedStatus()),l(19),u(t.filteredProjects().length===0?36:37)}}var Dt=class i{authService=S(G);projectService=S(De);router=S(ae);breakpointObserver=S(Jt);loading=w(!1);error=w(null);myProjects=w([]);businessProjects=w([]);viewMode=w("list");projectType=w("all");selectedStatus=w("all");searchTerm=w("");isMobile=w(!1);displayedColumns=w(["title","client","budget","status","date","actions"]);user=this.authService.user;filteredProjects=T(()=>{let e=[];this.projectType()==="my_requests"?e=this.myProjects():this.projectType()==="business_inquiries"?e=this.businessProjects():e=[...this.myProjects(),...this.businessProjects()];let t=this.selectedStatus();t!=="all"&&(e=e.filter(s=>s.status===t));let a=this.searchTerm().toLowerCase().trim();return a&&(e=e.filter(s=>s.title.toLowerCase().includes(a)||s.description?.toLowerCase().includes(a))),e});ngOnInit(){if(!this.user()){this.router.navigate(["/auth"]);return}this.breakpointObserver.observe([Xt.Handset]).subscribe(e=>{this.isMobile.set(e.matches)}),this.loadProjects()}loadProjects(){return v(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let e=yield this.projectService.getMyProjectsAsync("client");this.myProjects.set(e);let t=yield this.projectService.getMyProjectsAsync("business_owner");this.businessProjects.set(t)}catch(e){console.error("Error loading projects:",e),this.error.set("Failed to load projects")}finally{this.loading.set(!1)}})}setViewMode(e){this.viewMode.set(e)}clearSearch(){this.searchTerm.set("")}getStatusColor(e){return{requested:"bg-blue-100 text-blue-800",under_review:"bg-yellow-100 text-yellow-800",accepted:"bg-green-100 text-green-800",started:"bg-indigo-100 text-indigo-800",payment_requested:"bg-orange-100 text-orange-800",payment_pending:"bg-orange-100 text-orange-800",payment_completed:"bg-emerald-100 text-emerald-800",in_progress:"bg-purple-100 text-purple-800",awaiting_client_approval:"bg-amber-100 text-amber-800",completed:"bg-green-100 text-green-800",settled:"bg-teal-100 text-teal-800",rejected:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"}[e]||"bg-gray-100 text-gray-800"}getStatusText(e){return{requested:"Requested",under_review:"Under Review",accepted:"Accepted",started:"Started",payment_requested:"Payment Requested",payment_pending:"Payment Pending",payment_completed:"Payment Completed",in_progress:"In Progress",awaiting_client_approval:"Awaiting Approval",completed:"Completed",settled:"Settled",rejected:"Rejected",cancelled:"Cancelled"}[e]||e}formatPrice(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}formatDate(e){try{return(typeof e=="string"?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Unknown"}}getBusinessName(e){return typeof e.business_id=="object"&&e.business_id.name?e.business_id.name:"Unknown Business"}getClientName(e){if(typeof e.client_id=="object"){let t=e.client_id;return`${t.first_name} ${t.last_name}`}return"Unknown Client"}viewProject(e){this.router.navigate(["/dashboard/projects",e._id])}acceptProject(e){return v(this,null,function*(){try{yield this.projectService.updateProjectAsync(e._id,{status:"accepted"}),this.loadProjects()}catch(t){console.error("Error accepting project:",t),this.error.set("Failed to accept project")}})}rejectProject(e){return v(this,null,function*(){let t=prompt("Please provide a reason for rejection:");if(t)try{yield this.projectService.updateProjectAsync(e._id,{status:"rejected",rejection_reason:t}),this.loadProjects()}catch(a){console.error("Error rejecting project:",a),this.error.set("Failed to reject project")}})}navigateToHome(){this.router.navigate(["/"])}handleClearFilters=()=>{this.clearSearch(),this.selectedStatus.set("all")};static \u0275fac=function(t){return new(t||i)};static \u0275cmp=F({type:i,selectors:[["app-projects"]],decls:8,vars:2,consts:[[1,"min-h-screen","bg-gray-50"],[1,"mb-8","lg:max-w-7xl","max-w-12xl"],[1,"lg:max-w-7xl","max-w-12xl"],[1,"px-6","pt-6"],["title","Projects","subtitle","Manage your project requests and business inquiries",3,"backClicked"],[1,"px-0","sm:px-6","mb-6"],[1,"flex","items-center","justify-center"],[1,"bg-red-50","border-l-4","border-red-400","p-4","rounded-r-lg"],[1,"flex"],[1,"text-red-400","mr-3"],[1,"text-sm","font-medium","text-red-800"],[1,"mt-1","text-sm","text-red-700"],[3,"diameter","strokeWidth"],[1,"px-0","sm:px-6","pt-4"],[3,"searchChange","viewModeChange","clearSearch","searchTerm","viewMode","hideViewModeToggle"],[1,"w-full","sm:w-48"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],[3,"selectionChange","value"],["value","my_requests"],["value","business_inquiries"],["matPrefix",""],["value","all"],["value","requested"],["value","under_review"],["value","accepted"],["value","started"],["value","completed"],["value","rejected"],["value","cancelled"],[1,"px-0","sm:px-6","pt-6"],[1,"lg:max-w-7xl","max-w-12xl","px-0","sm:px-6","pb-12","pt-6"],["icon","assignment","title","No projects found","description","Try adjusting your filters to find what you're looking for.",3,"buttons"],[3,"view","accept","reject","projects","displayedColumns"]],template:function(t,a){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-dashboard-subheader",4),b("backClicked",function(){return a.navigateToHome()}),o()()(),p(5,cn,10,1,"div",5),p(6,mn,2,2,"div",6)(7,gn,38,6),o()()),t&2&&(l(5),u(a.error()?5:-1),l(),u(a.loading()?6:7))},dependencies:[I,tt,ie,O,pi,B,V,A,ee,Z,me,ce,de,ct,ue,pe,se,ge,be,le,St,Et,kt,Re],styles:[".projects-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body-wrapper{padding-top:0}.project-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.project-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026;transform:translateY(-2px)}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-header[_ngcontent-%COMP%]{padding-bottom:8px}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;line-height:1.4}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin-top:4px}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-actions[_ngcontent-%COMP%]{padding-top:8px;display:flex;align-items:center;gap:8px}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-actions.action-buttons[_ngcontent-%COMP%]{flex-wrap:wrap}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-actions.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;min-width:80px}.project-card.pending-request[_ngcontent-%COMP%]{border-left:4px solid #f59e0b;background:linear-gradient(135deg,#fffbeb,#fef3c7)}.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.status-badge[_ngcontent-%COMP%]{font-weight:500;text-transform:capitalize}@media (max-width: 768px){.project-card[_ngcontent-%COMP%]   .mat-mdc-card-actions.action-buttons[_ngcontent-%COMP%]{flex-direction:column}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-actions.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.empty-state[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9);border:2px dashed #e2e8f0}"]})};var Vi=()=>["requested","under_review","accepted","started","payment_requested","payment_completed","in_progress"],_n=()=>["payment_completed","started","in_progress","awaiting_client_approval"],fn=(i,e)=>e.url,xn=(i,e)=>e.name,hn=(i,e)=>e._id;function Cn(i,e){if(i&1&&(r(0,"span",22),n(1),o()),i&2){let t=d(3);l(),y(" ",t.chatUnreadCount()," ")}}function vn(i,e){if(i&1){let t=P();r(0,"button",20),b("click",function(){f(t);let s=d(2);return x(s.navigateToChat())}),r(1,"mat-icon",21),n(2,"chat"),o(),n(3," Chat with Client "),p(4,Cn,2,1,"span",22),o()}if(i&2){let t=d(2);l(4),u(t.chatUnreadCount()>0?4:-1)}}function bn(i,e){if(i&1){let t=P();r(0,"button",23),b("click",function(){f(t);let s=d(2);return x(s.acceptProject())}),r(1,"mat-icon",21),n(2,"check_circle"),o(),n(3," Accept Project "),o(),r(4,"button",24),b("click",function(){f(t);let s=d(2);return x(s.rejectProject())}),r(5,"mat-icon",21),n(6,"cancel"),o(),n(7," Reject Project "),o()}}function yn(i,e){if(i&1){let t=P();r(0,"button",23),b("click",function(){f(t);let s=d(2);return x(s.acceptProject())}),r(1,"mat-icon",21),n(2,"check_circle"),o(),n(3," Accept Project "),o(),r(4,"button",24),b("click",function(){f(t);let s=d(2);return x(s.rejectProject())}),r(5,"mat-icon",21),n(6,"cancel"),o(),n(7," Reject Project "),o()}}function wn(i,e){if(i&1){let t=P();r(0,"button",25),b("click",function(){f(t);let s=d(2);return x(s.requestPayment())}),r(1,"mat-icon",21),n(2,"payment"),o(),n(3," Request Payment "),o()}}function Sn(i,e){if(i&1){let t=P();r(0,"button",26),b("click",function(){f(t);let s=d(2);return x(s.startProject())}),r(1,"mat-icon",21),n(2,"play_arrow"),o(),n(3),o()}if(i&2){let t=d(2);Q("flex items-center px-6 py-3 text-white text-base font-semibold rounded-lg transition-colors shadow-sm "+(t.canStartProject()?"bg-indigo-600 hover:bg-indigo-700":"bg-gray-400 cursor-not-allowed")),h("disabled",!t.canStartProject()),l(3),y(" ",t.canStartProject()?"Start Project":"Start Project (Awaiting Payment)"," ")}}function En(i,e){if(i&1){let t=P();r(0,"button",27),b("click",function(){f(t);let s=d(2);return x(s.startProject())}),r(1,"mat-icon",21),n(2,"play_arrow"),o(),n(3," Start Project "),o()}}function jn(i,e){if(i&1){let t=P();r(0,"button",28),b("click",function(){f(t);let s=d(2);return x(s.requestCompletion())}),r(1,"mat-icon",21),n(2,"check_circle"),o(),n(3," Request Completion "),o()}}function Pn(i,e){if(i&1){let t=P();r(0,"button",25),b("click",function(){f(t);let s=d(2);return x(s.requestAdditionalPayment())}),r(1,"mat-icon",21),n(2,"add_card"),o(),n(3," Request Additional Payment "),o()}}function Mn(i,e){if(i&1&&(p(0,vn,5,1,"button",15),p(1,bn,8,0)(2,yn,8,0)(3,wn,4,0,"button",16)(4,Sn,4,4,"button",17)(5,En,4,0,"button",18)(6,jn,4,0,"button",19),p(7,Pn,4,0,"button",16)),i&2){let t,a=d();u(Qe(3,Vi).includes(a.project().status)?0:-1),l(),u((t=a.project().status)==="requested"?1:t==="under_review"?2:t==="accepted"?3:t==="payment_requested"?4:t==="payment_completed"?5:t==="in_progress"?6:-1),l(6),u(Qe(4,_n).includes(a.project().status)?7:-1)}}function Tn(i,e){i&1&&n(0," Chat with Business ")}function kn(i,e){i&1&&n(0," Chat with Business Owner ")}function Dn(i,e){if(i&1&&(r(0,"span",22),n(1),o()),i&2){let t=d(2);l(),y(" ",t.chatUnreadCount()," ")}}function Fn(i,e){if(i&1){let t=P();r(0,"div",9)(1,"h3",29),n(2,"Client Actions"),o(),r(3,"div",30)(4,"button",20),b("click",function(){f(t);let s=d();return x(s.navigateToChat())}),r(5,"mat-icon",21),n(6,"chat"),o(),p(7,Tn,1,0)(8,kn,1,0),p(9,Dn,2,1,"span",22),o()()()}if(i&2){let t=d();l(7),u(t.project().status==="requested"||t.project().status==="under_review"?7:8),l(2),u(t.chatUnreadCount()>0?9:-1)}}function In(i,e){if(i&1&&(r(0,"span",22),n(1),o()),i&2){let t=d(2);l(),y(" ",t.chatUnreadCount()," ")}}function Rn(i,e){if(i&1){let t=P();r(0,"div",10)(1,"h3",29),n(2,"Project Completion Review"),o(),r(3,"p",31),n(4,"The business owner has marked this project as completed. Please review the work and approve or reject the completion."),o(),r(5,"div",30)(6,"button",23),b("click",function(){f(t);let s=d();return x(s.approveCompletion())}),r(7,"mat-icon",21),n(8,"check_circle"),o(),n(9," Approve Completion "),o(),r(10,"button",24),b("click",function(){f(t);let s=d();return x(s.rejectCompletion())}),r(11,"mat-icon",21),n(12,"cancel"),o(),n(13," Request Changes "),o(),r(14,"button",20),b("click",function(){f(t);let s=d();return x(s.navigateToChat())}),r(15,"mat-icon",21),n(16,"chat"),o(),n(17," Discuss with Business Owner "),p(18,In,2,1,"span",22),o()()()}if(i&2){let t=d();l(18),u(t.chatUnreadCount()>0?18:-1)}}function Nn(i,e){i&1&&(r(0,"p",31),n(1,"You have already reviewed this project. Click below to view your review."),o())}function An(i,e){i&1&&(r(0,"p",31),n(1,"Share your experience with this business to help other clients make informed decisions."),o())}function Vn(i,e){if(i&1){let t=P();r(0,"div",11)(1,"h3",29),n(2,"Project Review"),o(),p(3,Nn,2,0,"p",31)(4,An,2,0,"p",31),r(5,"div",30)(6,"button",32),b("click",function(){f(t);let s=d();return x(s.handleReviewAction())}),r(7,"mat-icon",21),n(8),o(),n(9),o()()()}if(i&2){let t=d();l(3),u(t.existingReview()?3:4),l(5),C(t.existingReview()?"visibility":"star"),l(),y(" ",t.reviewButtonText()," ")}}function Bn(i,e){if(i&1&&(r(0,"div",12)(1,"div",33)(2,"div",34)(3,"mat-icon",35),n(4,"error"),o()(),r(5,"div",36)(6,"h3",37),n(7,"Error"),o(),r(8,"p",38),n(9),o()()()()),i&2){let t=d();l(9),C(t.error())}}function On(i,e){i&1&&(r(0,"div",13),E(1,"mat-spinner",39),r(2,"p",40),n(3,"Loading project details..."),o()())}function qn(i,e){if(i&1&&n(0),i&2){let t=d(2);y(" Project with ",t.getBusinessName(t.project())," ")}}function Ln(i,e){if(i&1&&n(0),i&2){let t=d(2);y(" Project from ",t.getClientName(t.project())," ")}}function Un(i,e){if(i&1&&(r(0,"div")(1,"h3",73),n(2,"Description"),o(),r(3,"p",74),n(4),o()()),i&2){let t=d(2);l(4),C(t.project().description)}}function Hn(i,e){if(i&1&&(r(0,"div")(1,"h3",73),n(2,"Additional Notes"),o(),r(3,"p",74),n(4),o()()),i&2){let t=d(2);l(4),C(t.project().additional_notes)}}function $n(i,e){if(i&1&&(r(0,"div")(1,"h3",73),n(2,"Project Image"),o(),r(3,"div",75),E(4,"img",76),o()()),i&2){let t=d(2);l(4),h("src",t.project().image_url,xe)("alt",t.project().title)}}function Wn(i,e){if(i&1&&(r(0,"div",78)(1,"div",80)(2,"div",81)(3,"mat-icon",82),n(4),o()(),r(5,"div",83)(6,"p",84),n(7),o(),r(8,"p",85),n(9),o(),r(10,"p",86),n(11),o()()(),r(12,"a",87)(13,"mat-icon",88),n(14,"download"),o(),n(15," Download "),o()()),i&2){let t=e.$implicit,a=d(3);l(4),C(a.getFileIcon(t.type)),l(3),C(t.name),l(2),C(a.formatFileSize(t.size)),l(2),C(t.type.split("/")[1]||"file"),l(),h("href",t.url,xe)}}function Gn(i,e){if(i&1&&(r(0,"div")(1,"h3",29),n(2,"Project Documents"),o(),r(3,"div",77),L(4,Wn,16,5,"div",78,fn),o(),r(6,"p",79),n(7),o()()),i&2){let t=d(2);l(4),U(t.project().attachments),l(3),y("",t.project().attachments.length," document(s) attached to this project")}}function zn(i,e){if(i&1&&(r(0,"p",94),n(1),o()),i&2){let t=d().$implicit;l(),C(t.description)}}function Yn(i,e){if(i&1&&(r(0,"div",95)(1,"mat-icon",88),n(2,"attach_money"),o(),n(3),o()),i&2){let t=d().$implicit,a=d(3);l(3),y(" ",a.formatServicePrice(t.price,t.pricing_type)," ")}}function Kn(i,e){i&1&&(r(0,"div",96)(1,"mat-icon",88),n(2,"help_outline"),o(),n(3," Price not specified "),o())}function Qn(i,e){if(i&1&&(r(0,"div",90)(1,"div",44)(2,"div",45)(3,"div",91)(4,"mat-icon",92),n(5,"star"),o(),r(6,"h4",93),n(7),o()(),p(8,zn,2,1,"p",94),p(9,Yn,4,1,"div",95)(10,Kn,4,0,"div",96),o()()()),i&2){let t=e.$implicit;l(7),C(t.name),l(),u(t.description?8:-1),l(),u(t.price?9:10)}}function Jn(i,e){if(i&1&&(r(0,"div")(1,"h3",29),n(2,"Selected Services"),o(),r(3,"div",89),L(4,Qn,11,3,"div",90,xn),o(),r(6,"p",79),n(7),o()()),i&2){let t=d(2);l(4),U(t.getServiceDetails(t.project())),l(3),y("",t.getServiceDetails(t.project()).length," service(s) selected for this project")}}function Xn(i,e){i&1&&(r(0,"div")(1,"h3",73),n(2,"Selected Services"),o(),r(3,"div",97)(4,"div",98)(5,"mat-icon",99),n(6,"info"),o(),r(7,"p",100),n(8,"No specific services selected for this project"),o()()()())}function Zn(i,e){if(i&1&&(r(0,"div",49)(1,"h3",101)(2,"mat-icon",102),n(3,"error_outline"),o(),n(4," Rejection Reason "),o(),r(5,"p",103),n(6),o()()),i&2){let t=d(2);l(6),C(t.project().rejection_reason)}}function eo(i,e){i&1&&n(0," Business Information ")}function to(i,e){i&1&&n(0," Client Information ")}function io(i,e){if(i&1&&E(0,"img",104),i&2){let t=d();h("src",t.logo_url,xe)("alt",t.name)}}function no(i,e){i&1&&(r(0,"div",105)(1,"mat-icon",108),n(2,"business"),o()())}function oo(i,e){if(i&1&&(r(0,"div",107)(1,"mat-icon",109),n(2,"link"),o(),r(3,"span",110),n(4),o()()),i&2){let t=d();l(4),y("/business/",t.id)}}function ro(i,e){if(i&1){let t=P();r(0,"div",52),p(1,io,1,2,"img",104)(2,no,3,0,"div",105),r(3,"div",45)(4,"button",106),b("click",function(){let s=f(t),g=d(2);return x(g.navigateToBusinessProfile(s.id))}),n(5),o(),r(6,"p",5),n(7,"Click to view business profile"),o(),p(8,oo,5,1,"div",107),o()()}if(i&2){let t=e;l(),u(t.logo_url?1:2),l(4),y(" ",t.name," "),l(3),u(t.id?8:-1)}}function ao(i,e){if(i&1&&(r(0,"p",5),n(1),o()),i&2){let t=d();l(),C(t.email)}}function so(i,e){if(i&1&&(r(0,"div",52)(1,"div",111)(2,"mat-icon",108),n(3,"person"),o()(),r(4,"div",45)(5,"h3",112),n(6),o(),p(7,ao,2,1,"p",5),r(8,"p",113),n(9,"Project Client"),o()()()),i&2){let t=e;l(6),Ae(" ",t.first_name," ",t.last_name," "),l(),u(t.email?7:-1)}}function lo(i,e){if(i&1&&(r(0,"div",60)(1,"p",58),n(2,"Deadline"),o(),r(3,"p",55),n(4),o()()),i&2){let t=d(2);l(4),C(t.formatDate(t.project().deadline))}}function co(i,e){if(i&1&&(r(0,"div",60)(1,"p",58),n(2,"Accepted"),o(),r(3,"p",55),n(4),o()()),i&2){let t=d(2);l(4),C(t.formatDate(t.project().accepted_at))}}function mo(i,e){if(i&1&&(r(0,"div",60)(1,"p",58),n(2,"Completed"),o(),r(3,"p",55),n(4),o()()),i&2){let t=d(2);l(4),C(t.formatDate(t.project().completed_at))}}function po(i,e){if(i&1&&(r(0,"div",60)(1,"p",58),n(2,"Rejected"),o(),r(3,"p",55),n(4),o()()),i&2){let t=d(2);l(4),C(t.formatDate(t.project().rejected_at))}}function uo(i,e){if(i&1){let t=P();r(0,"div",42)(1,"div",54)(2,"h3",63)(3,"mat-icon",114),n(4,"payment"),o(),n(5," Payment Required "),o()(),r(6,"div",66)(7,"div",115)(8,"div",116)(9,"div",45)(10,"div",117)(11,"span",118),n(12," Payment Requested "),o()(),r(13,"h4",119),n(14),k(15,"currency"),o(),r(16,"p",120),n(17),o(),r(18,"p",121),n(19," The business owner has requested payment to start working on your project. "),o()()(),r(20,"div",122)(21,"button",123),b("click",function(){f(t);let s=d(2);return x(s.approveProjectPayment())}),r(22,"mat-icon",124),n(23,"payment"),o(),n(24," Make Payment "),o(),r(25,"button",125),b("click",function(){f(t);let s=d(2);return x(s.declineProjectPayment())}),r(26,"mat-icon",124),n(27,"close"),o(),n(28," Decline "),o()()()()()}if(i&2){let t,a,s=d(2);l(14),y(" ",Ve(15,2,(t=s.project())==null?null:t.offered_price,"USD","symbol","1.0-0")," "),l(3),y(" Payment for project: ",(a=s.project())==null?null:a.title," ")}}function go(i,e){if(i&1&&(r(0,"div",61)(1,"div",126)(2,"h3",127)(3,"mat-icon",128),n(4,"check_circle"),o(),n(5," Payment Completed Successfully "),o()(),r(6,"div",66)(7,"div",129)(8,"mat-icon",130),n(9,"paid"),o(),r(10,"div")(11,"p",131),n(12),k(13,"currency"),o(),r(14,"p",132),n(15," The business owner will now start working on your project. You'll receive notifications about the progress. "),o()()()()()),i&2){let t,a=d(2);l(12),y(" Your payment of ",Ve(13,1,(t=a.project())==null?null:t.offered_price,"USD","symbol","1.0-0")," has been processed successfully. ")}}function _o(i,e){if(i&1){let t=P();r(0,"button",133),b("click",function(){f(t);let s=d(2);return x(s.refreshPaymentRequests())}),r(1,"mat-icon",88),n(2,"refresh"),o(),n(3," Refresh "),o()}}function fo(i,e){i&1&&(r(0,"div",67),E(1,"mat-spinner",134),r(2,"span",135),n(3,"Loading payment history..."),o()())}function xo(i,e){if(i&1&&(r(0,"span",85),n(1),o()),i&2){let t=d(4);l(),y("Paid ",t.formatPaymentTime(t.project().initial_payment.paid_at))}}function ho(i,e){i&1&&(r(0,"span",85),n(1,"Requested"),o())}function Co(i,e){i&1&&(r(0,"mat-icon",144),n(1,"check_circle"),o())}function vo(i,e){i&1&&(r(0,"mat-icon",145),n(1,"error"),o())}function bo(i,e){i&1&&(r(0,"mat-icon",146),n(1,"sync"),o())}function yo(i,e){i&1&&(r(0,"mat-icon",147),n(1,"schedule"),o())}function wo(i,e){i&1&&(r(0,"div",148)(1,"mat-icon",149),n(2,"check_circle"),o(),r(3,"span",150),n(4,"Payment Completed"),o()())}function So(i,e){if(i&1&&(r(0,"div",136)(1,"h4",137)(2,"mat-icon",138),n(3,"payments"),o(),n(4," Initial Project Payment "),o(),r(5,"div",139)(6,"div",140)(7,"div",45)(8,"div",91)(9,"span"),n(10),k(11,"titlecase"),o(),p(12,xo,2,1,"span",85)(13,ho,2,0,"span",85),o(),r(14,"h4",141),n(15),k(16,"currency"),o(),r(17,"p",142),n(18),o()(),r(19,"div",143),p(20,Co,2,0,"mat-icon",144)(21,vo,2,0,"mat-icon",145)(22,bo,2,0,"mat-icon",146)(23,yo,2,0,"mat-icon",147),o()(),p(24,wo,5,0,"div",148),o()()),i&2){let t=d(3);l(9),Q("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+t.getPaymentStatusColor(t.project().initial_payment.status)),l(),y(" ",N(11,8,t.project().initial_payment.status)," "),l(2),u(t.project().initial_payment.paid_at?12:13),l(3),y(" ",Ve(16,10,t.project().initial_payment.amount,"USD","symbol","1.0-0")," "),l(3),C(t.project().initial_payment.description),l(2),u(t.project().initial_payment.status==="succeeded"?20:t.project().initial_payment.status==="failed"?21:t.project().initial_payment.status==="processing"?22:23),l(4),u(t.project().initial_payment.status==="succeeded"?24:-1)}}function Eo(i,e){if(i&1&&(r(0,"p",142),n(1),o()),i&2){let t=d().$implicit;l(),C(t.payment_description)}}function jo(i,e){if(i&1&&(r(0,"p",110),n(1),o()),i&2){let t=d().$implicit;l(),C(t.content)}}function Po(i,e){i&1&&(r(0,"mat-icon",144),n(1,"check_circle"),o())}function Mo(i,e){i&1&&(r(0,"mat-icon",145),n(1,"cancel"),o())}function To(i,e){i&1&&(r(0,"mat-icon",147),n(1,"schedule"),o())}function ko(i,e){if(i&1){let t=P();r(0,"div",153)(1,"button",155),b("click",function(){f(t);let s=d().$implicit,g=d(4);return x(g.approvePaymentRequest(s))}),r(2,"mat-icon",88),n(3,"check"),o(),n(4," Approve & Pay "),o(),r(5,"button",156),b("click",function(){f(t);let s=d().$implicit,g=d(4);return x(g.rejectPaymentRequest(s))}),r(6,"mat-icon",88),n(7,"close"),o(),n(8," Reject "),o()()}}function Do(i,e){i&1&&(r(0,"div",154)(1,"mat-icon",157),n(2,"check_circle"),o(),r(3,"span",158),n(4,"Payment Completed"),o()())}function Fo(i,e){if(i&1&&(r(0,"div",152)(1,"div",140)(2,"div",45)(3,"div",91)(4,"span"),n(5),k(6,"titlecase"),o(),r(7,"span",85),n(8),o()(),r(9,"h4",141),n(10),k(11,"currency"),o(),p(12,Eo,2,1,"p",142),p(13,jo,2,1,"p",110),o(),r(14,"div",143),p(15,Po,2,0,"mat-icon",144)(16,Mo,2,0,"mat-icon",145)(17,To,2,0,"mat-icon",147),o()(),p(18,ko,9,0,"div",153),p(19,Do,5,0,"div",154),o()),i&2){let t=e.$implicit,a=d(4);l(4),Q("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+a.getPaymentStatusColor(t.payment_status||"pending")),l(),y(" ",N(6,10,t.payment_status||"pending")," "),l(3),C(a.formatPaymentTime(t.createdAt)),l(2),y(" ",Ve(11,12,t.payment_amount,"USD","symbol","1.0-0")," "),l(2),u(t.payment_description?12:-1),l(),u(t.content?13:-1),l(2),u(t.payment_status==="approved"||t.payment_status==="paid"?15:t.payment_status==="rejected"?16:17),l(3),u(t.payment_status==="pending"&&a.isClient()?18:-1),l(),u(t.payment_status==="paid"||t.payment_status==="approved"?19:-1)}}function Io(i,e){if(i&1&&(r(0,"div")(1,"h4",137)(2,"mat-icon",151),n(3,"add_card"),o(),n(4),o(),r(5,"div",89),L(6,Fo,20,17,"div",152,hn),o()()),i&2){let t=d(3);l(4),y(" Additional Payment Requests (",t.paymentRequests().length,") "),l(2),U(t.paymentRequests())}}function Ro(i,e){if(i&1&&(r(0,"div",68),p(1,So,25,15,"div",136),p(2,Io,8,1,"div"),o()),i&2){let t,a=d(2);l(),u((t=a.project())!=null&&t.initial_payment?1:-1),l(),u(a.paymentRequests().length>0?2:-1)}}function No(i,e){i&1&&(r(0,"div",69)(1,"mat-icon",159),n(2,"payment"),o(),r(3,"p",100),n(4,"No payments have been made for this project"),o()())}function Ao(i,e){if(i&1){let t=P();r(0,"div",14)(1,"div",41)(2,"div",42)(3,"div",43)(4,"div",44)(5,"div",45)(6,"h2",46),n(7),o(),r(8,"p",5),p(9,qn,1,1)(10,Ln,1,1),o()(),r(11,"div",47)(12,"span"),n(13),o()()()(),r(14,"div",48),p(15,Un,5,1,"div"),p(16,Hn,5,1,"div"),p(17,$n,5,2,"div"),p(18,Gn,8,1,"div"),p(19,Jn,8,1,"div")(20,Xn,9,0,"div"),p(21,Zn,7,1,"div",49),o()(),r(22,"div",42)(23,"div",43)(24,"h2",50),p(25,eo,1,0)(26,to,1,0),o()(),r(27,"div",51),p(28,ro,9,3,"div",52),p(29,so,10,3,"div",52),o()()(),r(30,"div",53)(31,"div",42)(32,"div",54)(33,"h3",55),n(34,"Project Details"),o()(),r(35,"div",56)(36,"div",57)(37,"p",58),n(38,"Budget"),o(),r(39,"p",59),n(40),o()(),p(41,lo,5,1,"div",60),r(42,"div",60)(43,"p",58),n(44,"Created"),o(),r(45,"p",55),n(46),o()(),p(47,co,5,1,"div",60),p(48,mo,5,1,"div",60),p(49,po,5,1,"div",60),o()(),p(50,uo,29,7,"div",42),p(51,go,16,6,"div",61),r(52,"div",42)(53,"div",54)(54,"div",62)(55,"h3",63)(56,"mat-icon",64),n(57,"history"),o(),n(58," Payment History "),o(),p(59,_o,4,0,"button",65),o()(),r(60,"div",66),p(61,fo,4,0,"div",67)(62,Ro,3,2,"div",68),p(63,No,5,0,"div",69),o()(),r(64,"div",42)(65,"div",54)(66,"h3",55),n(67,"Actions"),o()(),r(68,"div",70)(69,"button",71),b("click",function(){f(t);let s=d();return x(s.goBack())}),r(70,"mat-icon",72),n(71,"arrow_back"),o(),n(72," Back to Projects "),o()()()()()}if(i&2){let t,a,s,g,_=d();l(7),C(_.project().title),l(2),u(_.isClient()?9:_.isBusinessOwner()?10:-1),l(3),Q("inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold "+_.getStatusColor(_.project().status)),l(),y(" ",_.getStatusText(_.project().status)," "),l(2),u(_.project().description?15:-1),l(),u(_.project().additional_notes?16:-1),l(),u(_.project().image_url?17:-1),l(),u(_.project().attachments&&_.project().attachments.length>0?18:-1),l(),u(_.getServiceDetails(_.project()).length>0?19:20),l(2),u(_.project().rejection_reason?21:-1),l(4),u(_.isClient()?25:_.isBusinessOwner()?26:-1),l(3),u((t=_.isClient()&&_.getBusinessInfo(_.project()))?28:-1,t),l(),u((a=_.isBusinessOwner()&&_.getClientInfo(_.project()))?29:-1,a),l(11),C(_.formatPrice(_.project().offered_price)),l(),u(_.project().deadline?41:-1),l(5),C(_.formatDate(_.project().createdAt)),l(),u(_.project().accepted_at?47:-1),l(),u(_.project().completed_at?48:-1),l(),u(_.project().rejected_at?49:-1),l(),u(_.shouldShowPaymentButtons()?50:-1),l(),u(((s=_.project())==null?null:s.status)==="payment_completed"&&_.isClient()?51:-1),l(8),u(_.project()&&_.project().chat_room_id?59:-1),l(2),u(_.loadingPaymentRequests()?61:62),l(2),u(!_.loadingPaymentRequests()&&_.paymentRequests().length===0&&!((g=_.project())!=null&&g.initial_payment)?63:-1)}}var It=class i{route=S(et);router=S(ae);projectService=S(De);authService=S(G);chatService=S(oi);reviewService=S(Ei);dashboardRefreshService=S(ji);socketService=S(ai);dialog=S(jt);loading=w(!1);error=w(null);project=w(null);existingChat=w(null);chatUnreadCount=w(0);loadingChat=w(!1);paymentRequests=w([]);loadingPaymentRequests=w(!1);canLeaveReview=w(!1);existingReview=w(null);user=this.authService.user;isClient=T(()=>{let e=this.project(),t=this.user();if(!e||!t)return!1;let a=typeof e.client_id=="string"?e.client_id:e.client_id?._id;return t._id===a});isBusinessOwner=T(()=>{let e=this.project(),t=this.user();if(!e||!t)return!1;let a=typeof e.business_owner_id=="string"?e.business_owner_id:e.business_owner_id?._id;return t._id===a});pendingPaymentRequests=T(()=>this.paymentRequests().filter(e=>e.message_type==="payment_request"&&e.payment_status==="pending"));approvedPaymentRequests=T(()=>this.paymentRequests().filter(e=>e.message_type==="payment_request"&&e.payment_status==="approved"));rejectedPaymentRequests=T(()=>this.paymentRequests().filter(e=>e.message_type==="payment_request"&&e.payment_status==="rejected"));shouldShowPaymentButtons=T(()=>{let e=this.project(),t=this.isClient();return!e||!t?!1:e.status==="payment_requested"});hasPendingPaymentRequests=T(()=>this.shouldShowPaymentButtons());hasPaymentHistory=T(()=>this.paymentRequests().length>0);hasCompletedPayments=T(()=>this.paymentRequests().some(e=>e.message_type==="payment_request"&&(e.payment_status==="approved"||e.payment_status==="paid")));canStartProject=T(()=>{let e=this.project();return!e||!this.isBusinessOwner()?!1:e.status==="payment_completed"||e.status==="payment_requested"&&this.hasCompletedPayments()});reviewButtonText=T(()=>{let e=this.existingReview(),t=this.canLeaveReview();return e?`View Review (${e.rating}\u2B50)`:t?"Leave Review":""});showReviewButton=T(()=>{let e=this.canLeaveReview(),t=this.existingReview();return!!(e||t)});ngOnInit(){if(!this.user()){this.router.navigate(["/auth"]);return}let e=this.route.snapshot.params.id;if(!e){this.error.set("Project ID is required"),this.router.navigate(["/dashboard/projects"]);return}this.loadProject(e),this.setupRealtimeUpdates()}setupRealtimeUpdates(){this.socketService.onEvent("project-status-updated").subscribe(e=>{console.log("\u{1F525} Project status update received:",e);let t=this.project();t&&e.projectId===t._id&&(console.log("\u{1F525} Reloading project due to status update"),this.loadProject(t._id))}),this.socketService.onEvent("completion-request-created").subscribe(e=>{console.log("\u{1F525} Completion request created received:",e);let t=this.project();t&&e.projectId===t._id&&(console.log("\u{1F525} Reloading project due to completion request created"),this.loadProject(t._id))}),this.socketService.onEvent("payment-completed").subscribe(e=>v(this,null,function*(){console.log("\u{1F525} Payment completed received:",e);let t=this.project();t&&e.chatId===t.chat_room_id&&(console.log("\u{1F525} Reloading project due to payment completion"),setTimeout(()=>v(this,null,function*(){yield this.loadProject(t._id)}),500))})),this.socketService.onNewNotification().subscribe(e=>{console.log("\u{1F525} New notification received:",e);let t=this.project();t&&e.project_id===t._id&&(console.log("\u{1F525} Reloading project due to project notification"),this.loadProject(t._id))})}loadProject(e){return v(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let t=yield this.projectService.getProjectAsync(e);this.project.set(t),["accepted","started","payment_requested","payment_completed","in_progress","awaiting_client_approval","completed"].includes(t.status)&&(yield this.checkForExistingChat(e),yield this.loadPaymentRequests()),yield this.checkReviewEligibility()}catch(t){console.error("Error loading project:",t),this.error.set("Failed to load project details")}finally{this.loading.set(!1)}})}checkForExistingChat(e){return v(this,null,function*(){this.loadingChat.set(!0);try{let t=yield this.chatService.getChatByProjectIdAsync(e);if(this.existingChat.set(t),t){let a=yield this.chatService.getChatUnreadCountAsync(t._id);this.chatUnreadCount.set(a)}}catch(t){console.error("Error checking for existing chat:",t)}finally{this.loadingChat.set(!1)}})}loadPaymentRequests(){return v(this,null,function*(){this.loadingPaymentRequests.set(!0);try{let e=this.project();if(!e||!e.chat_room_id){console.log("\u26A0\uFE0F No project or chat room found"),this.paymentRequests.set([]);return}console.log("\u{1F504} Loading payment requests from chat messages");let a=(yield this.chatService.getChatMessagesAsync(e.chat_room_id)).filter(s=>{if(s.message_type!=="payment_request")return!1;let g=s.payment_description?.toLowerCase()||"";return g!=="project payment"&&g!=="initial project payment"});console.log("\u{1F4B3} Found additional payment request messages:",a.map(s=>({id:s._id,amount:s.payment_amount,status:s.payment_status||"undefined",description:s.payment_description,createdAt:s.createdAt}))),console.log("\u2795 Additional payment requests count:",a.length),this.paymentRequests.set(a)}catch(e){console.error("Error loading payment requests:",e),this.paymentRequests.set([])}finally{this.loadingPaymentRequests.set(!1)}})}refreshPaymentRequests(){return v(this,null,function*(){let e=this.project();e&&(console.log("\u{1F504} Manual refresh of payment requests"),yield this.loadProject(e._id))})}goBack(){this.router.navigate(["/dashboard/projects"])}acceptProject(){return v(this,null,function*(){let e=this.project();if(e)try{yield this.projectService.acceptProjectAsync(e._id),yield this.loadProject(e._id)}catch(t){console.error("Error accepting project:",t),this.error.set("Failed to accept project")}})}requestPayment(){return v(this,null,function*(){let e=this.project();if(!e)return;let t=this.existingChat();if(!t)try{t=yield this.chatService.createOrGetChatAsync({project_id:e._id}),this.existingChat.set(t)}catch(g){console.error("Error creating chat:",g),this.error.set("Failed to create project chat");return}let a={defaultAmount:e.offered_price||0,isStartPayment:!0};this.dialog.open(Wt,{width:"500px",disableClose:!0,data:a}).afterClosed().subscribe(g=>v(this,null,function*(){if(g)try{yield this.chatService.requestAdditionalPaymentAsync(t._id,g),yield this.projectService.updateProjectAsync(e._id,{status:"payment_requested"}),yield this.loadProject(e._id),alert("Payment request sent successfully! The client will be notified to make payment.")}catch(_){console.error("Error requesting payment:",_),this.error.set("Failed to request payment")}}))})}startProject(){return v(this,null,function*(){let e=this.project();if(e)try{yield this.projectService.updateProjectAsync(e._id,{status:"in_progress"}),yield this.loadProject(e._id),this.dashboardRefreshService.triggerRefresh(),alert("Project started successfully! You can now begin working on the project.")}catch(t){console.error("Error starting project:",t),this.error.set("Failed to start project")}})}rejectProject(){return v(this,null,function*(){let e=this.project();if(!e)return;let t=prompt("Please provide a reason for rejection:");if(t!==null)try{yield this.projectService.rejectProjectAsync(e._id,t),yield this.loadProject(e._id)}catch(a){console.error("Error rejecting project:",a),this.error.set("Failed to reject project")}})}requestCompletion(){return v(this,null,function*(){let e=this.project();if(!e)return;let t=this.existingChat();if(!t)try{t=yield this.chatService.createOrGetChatAsync({project_id:e._id}),this.existingChat.set(t)}catch(s){console.error("Error creating chat:",s),this.error.set("Failed to create project chat");return}this.dialog.open(Pi,{width:"500px",disableClose:!0}).afterClosed().subscribe(s=>v(this,null,function*(){if(s)try{yield this.chatService.requestCompletionAsync(t._id,s),yield this.loadProject(e._id),this.dashboardRefreshService.triggerRefresh(),alert("Completion request sent successfully! The client will be notified to review and approve.")}catch(g){console.error("Error requesting completion:",g),this.error.set("Failed to request completion")}}))})}requestAdditionalPayment(){return v(this,null,function*(){let e=this.project();if(!e)return;let t=this.existingChat();if(!t)try{t=yield this.chatService.createOrGetChatAsync({project_id:e._id}),this.existingChat.set(t)}catch(s){console.error("Error creating chat:",s),this.error.set("Failed to create project chat");return}this.dialog.open(Wt,{width:"500px",disableClose:!0}).afterClosed().subscribe(s=>v(this,null,function*(){if(s)try{yield this.chatService.requestAdditionalPaymentAsync(t._id,s),yield this.loadProject(e._id),alert("Additional payment request sent successfully!")}catch(g){console.error("Error requesting additional payment:",g),this.error.set("Failed to request additional payment")}}))})}startChat(){return v(this,null,function*(){let e=this.project();if(e)try{let t=yield this.chatService.createOrGetChatAsync({project_id:e._id});this.router.navigate(["/dashboard/messages/chat",t._id])}catch(t){console.error("Error starting chat:",t),alert("Failed to start chat. Please try again.")}})}goToExistingChat(){return v(this,null,function*(){let e=this.existingChat();e&&this.router.navigate(["/dashboard/messages/chat",e._id])})}getStatusColor(e){return{requested:"bg-blue-100 text-blue-800 border-blue-200",under_review:"bg-yellow-100 text-yellow-800 border-yellow-200",accepted:"bg-green-100 text-green-800 border-green-200",started:"bg-indigo-100 text-indigo-800 border-indigo-200",payment_requested:"bg-orange-100 text-orange-800 border-orange-200",payment_pending:"bg-orange-100 text-orange-800 border-orange-200",payment_completed:"bg-emerald-100 text-emerald-800 border-emerald-200",in_progress:"bg-purple-100 text-purple-800 border-purple-200",awaiting_client_approval:"bg-amber-100 text-amber-800 border-amber-200",completed:"bg-green-100 text-green-800 border-green-200",rejected:"bg-red-100 text-red-800 border-red-200",cancelled:"bg-gray-100 text-gray-800 border-gray-200",settled:"bg-teal-100 text-teal-800 border-teal-200"}[e]||"bg-gray-100 text-gray-800 border-gray-200"}getStatusText(e){return{pending:"Pending",accepted:"Accepted",in_progress:"In Progress",awaiting_client_approval:"Awaiting Your Approval",completed:"Completed",rejected:"Rejected",cancelled:"Cancelled"}[e]||e}approveCompletion(){return v(this,null,function*(){let e=this.project();if(e)try{let t=this.existingChat();if(t){let s=(yield this.chatService.getChatMessagesAsync(t._id)).filter(g=>g.message_type==="completion_request"&&g.completion_status==="pending").sort((g,_)=>new Date(_.createdAt).getTime()-new Date(g.createdAt).getTime())[0];s&&(yield this.chatService.respondToCompletionRequestAsync(t._id,s._id,{status:"approved"}))}else yield this.projectService.updateProjectAsync(e._id,{status:"completed"});yield this.loadProject(e._id),yield this.checkReviewEligibility(),this.dashboardRefreshService.triggerRefresh()}catch(t){console.error("Error approving completion:",t),this.error.set("Failed to approve completion")}})}rejectCompletion(){return v(this,null,function*(){let e=this.project();if(!e)return;let t=prompt("Please provide a reason for rejecting the completion:");if(t)try{let a=this.existingChat();if(a){let g=(yield this.chatService.getChatMessagesAsync(a._id)).filter(_=>_.message_type==="completion_request"&&_.completion_status==="pending").sort((_,ne)=>new Date(ne.createdAt).getTime()-new Date(_.createdAt).getTime())[0];g&&(yield this.chatService.respondToCompletionRequestAsync(a._id,g._id,{status:"rejected",rejection_reason:t}))}else yield this.projectService.updateProjectAsync(e._id,{status:"in_progress"});yield this.loadProject(e._id),this.dashboardRefreshService.triggerRefresh()}catch(a){console.error("Error rejecting completion:",a),this.error.set("Failed to reject completion")}})}canApproveCompletion(){let e=this.project(),t=this.user();if(!e||!t)return!1;let a=typeof e.client_id=="string"?e.client_id:e.client_id?._id;return e.status==="awaiting_client_approval"&&a===t._id}approvePaymentRequest(e){return v(this,null,function*(){try{let t=this.existingChat(),a=this.project();if(!t||!a)return;let s=typeof a.business_id=="string"?"Business Owner":a.business_id?.name||"Business Owner";this.dialog.open($t,{width:"500px",disableClose:!0,data:{amount:e.payment_amount?.toString()||"0",description:e.payment_description||"Additional payment",businessName:s,chatId:t._id,messageId:e._id}}).afterClosed().subscribe(_=>v(this,null,function*(){if(_&&_.paymentIntentId)try{yield this.refreshPaymentStatus(),console.log("Payment approved successfully with method:",_.paymentMethod),console.log("Payment completed for amount:",_.amount)}catch(ne){console.error("Error approving payment request:",ne),this.error.set("Failed to approve payment request")}}))}catch(t){console.error("Error opening payment modal:",t),this.error.set("Failed to open payment modal")}})}rejectPaymentRequest(e){return v(this,null,function*(){let t=prompt("Please provide a reason for rejecting this payment request:");if(t)try{let a=this.existingChat();if(!a)return;yield this.chatService.respondToPaymentRequestAsync(a._id,e._id,{status:"rejected",rejection_reason:t});let s=this.project();s&&(yield this.loadProject(s._id))}catch(a){console.error("Error rejecting payment request:",a),this.error.set("Failed to reject payment request")}})}refreshPaymentStatus(){return v(this,null,function*(){let e=this.project();e&&(yield this.loadProject(e._id))})}approveProjectPayment(){return v(this,null,function*(){try{let e=this.project();if(!e)return;let t=typeof e.business_id=="string"?"Business Owner":e.business_id?.name||"Business Owner";this.dialog.open($t,{width:"500px",disableClose:!0,data:{amount:e.offered_price?.toString()||"0",description:`Payment for project: ${e.title}`,businessName:t,projectId:e._id,isProjectPayment:!0}}).afterClosed().subscribe(s=>v(this,null,function*(){if(s&&s.paymentIntentId)try{yield this.loadProject(e._id),console.log("Project payment completed successfully")}catch(g){console.error("Error reloading project after payment:",g),this.error.set("Payment completed but failed to reload project")}}))}catch(e){console.error("Error opening project payment modal:",e),this.error.set("Failed to open payment modal")}})}declineProjectPayment(){return v(this,null,function*(){let e=prompt("Please provide a reason for declining this payment:");if(e)try{if(!this.project())return;alert(`Thank you for your feedback. Reason: "${e}"

Please contact the business owner directly to discuss payment terms. The decline functionality will be available soon.`)}catch(t){console.error("Error declining project payment:",t),this.error.set("Failed to decline payment")}})}getPaymentStatusColor(e){return{pending:"bg-yellow-100 text-yellow-800 border-yellow-200",approved:"bg-green-100 text-green-800 border-green-200",payment_pending:"bg-blue-100 text-blue-800 border-blue-200",paid:"bg-green-100 text-green-800 border-green-200",rejected:"bg-red-100 text-red-800 border-red-200"}[e]||"bg-gray-100 text-gray-800 border-gray-200"}formatPaymentTime(e){let t=new Date(e),s=Math.floor((new Date().getTime()-t.getTime())/1e3);return s<60?"just now":s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:t.toLocaleDateString()}formatPrice(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}formatDate(e){if(!e)return"Not set";try{return(typeof e=="string"?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Unknown"}}getBusinessName(e){return typeof e.business_id=="object"&&e.business_id.name?e.business_id.name:"Unknown Business"}getClientName(e){if(typeof e.client_id=="object"){let t=e.client_id;return`${t.first_name} ${t.last_name}`}return"Unknown Client"}getServiceNames(e){return e.selected_services&&Array.isArray(e.selected_services)?e.selected_services.map(t=>{if(typeof t=="object"&&t!==null){if("name"in t&&t.name)return t.name;if("service_id"in t&&typeof t.service_id=="object"&&t.service_id!==null&&"name"in t.service_id)return t.service_id.name}return typeof t=="string"?"Service Details Available":"Unknown Service"}):[]}getServiceDetails(e){return e.selected_services&&Array.isArray(e.selected_services)?e.selected_services.map(t=>typeof t=="object"&&t!==null&&"_id"in t?{name:t.name||"Unnamed Service",price:t.price,pricing_type:t.pricing_type,description:t.short_description||t.description}:typeof t=="string"?{name:"Service Details Not Available",price:void 0,pricing_type:void 0,description:`Service ID: ${t} - Please contact support if this persists`}:{name:"Unknown Service Format",price:void 0,pricing_type:void 0,description:"Service data structure not recognized"}):[]}formatServicePrice(e,t){if(!e)return"Price not specified";let a=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);if(!t)return a;switch(t.toLowerCase()){case"fixed":return`${a} (Fixed)`;case"hourly":return`${a}/hour`;case"daily":return`${a}/day`;case"weekly":return`${a}/week`;case"monthly":return`${a}/month`;case"per_project":return`${a} (Per Project)`;default:return`${a} (${t})`}}navigateToBusinessProfile(e){e&&this.router.navigate(["/business/profile",e])}getBusinessInfo(e){return typeof e.business_id=="object"&&e.business_id?{name:e.business_id.name||"Unknown Business",logo_url:e.business_id.logo_url,id:e.business_id._id}:null}getClientInfo(e){return typeof e.client_id=="object"&&e.client_id?{first_name:e.client_id.first_name||"Unknown",last_name:e.client_id.last_name||"Client",email:e.client_id.email}:null}formatFileSize(e){if(e===0)return"0 Bytes";let t=1024,a=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,s)).toFixed(2))+" "+a[s]}getFileIcon(e){return e.startsWith("image/")?"image":e.includes("pdf")?"picture_as_pdf":e.includes("word")||e.includes("document")?"description":e.includes("sheet")||e.includes("excel")?"table_chart":e.includes("presentation")||e.includes("powerpoint")?"slideshow":e.includes("text")?"text_snippet":"attach_file"}navigateToChat(){return v(this,null,function*(){let e=this.project();if(e)try{let t=this.existingChat();t||(t=yield this.chatService.createOrGetChatAsync({project_id:e._id}),this.existingChat.set(t)),t&&this.router.navigate(["/dashboard/messages/chat",t._id])}catch(t){console.error("Error navigating to chat:",t),this.error.set("Failed to open chat. Please try again.")}})}checkReviewEligibility(){return v(this,null,function*(){let e=this.user(),t=this.project();if(!e||!t){this.canLeaveReview.set(!1),this.existingReview.set(null);return}let a=typeof t.client_id=="string"?t.client_id:t.client_id?._id,s=e._id===a,g=t.status==="completed";if(!s||!g){this.canLeaveReview.set(!1),this.existingReview.set(null);return}try{let _=typeof t.business_id=="string"?t.business_id:t.business_id._id,_e=(yield this.reviewService.getBusinessReviewsAsync(_)).find(fe=>fe.project_id._id===t._id&&fe.user_id._id===e._id);_e?(this.canLeaveReview.set(!1),this.existingReview.set(_e)):(this.canLeaveReview.set(!0),this.existingReview.set(null))}catch(_){console.error("Error checking review eligibility:",_),this.canLeaveReview.set(!1),this.existingReview.set(null)}})}handleReviewAction(){this.existingReview()?this.viewExistingReview():this.canLeaveReview()&&this.openReviewDialog()}openReviewDialog(){return v(this,null,function*(){let e=this.project();if(!e)return;let t=typeof e.business_id=="string"?e.business_id:e.business_id._id,a=typeof e.business_id=="object"&&e.business_id.name?e.business_id.name:"Business";this.dialog.open(Mi,{width:"600px",data:{businessId:t,projectId:e._id,businessName:a,projectTitle:e.title}}).afterClosed().subscribe(g=>v(this,null,function*(){g&&(console.log("Review submitted successfully"),yield this.checkReviewEligibility())}))})}viewExistingReview(){let e=this.existingReview();if(!e)return;let t=["Your Review for this Project","",`Overall Rating: ${e.rating}/5 \u2B50`,"","Detailed Ratings:",`\u2022 Service Quality: ${e.service_quality||"N/A"}/5`,`\u2022 Communication: ${e.communication||"N/A"}/5`,`\u2022 Timeliness: ${e.timeliness||"N/A"}/5`,`\u2022 Value for Money: ${e.value_for_money||"N/A"}/5`,"",`Comment: ${e.comment||"No comment provided"}`,"",`Submitted: ${new Date(e.createdAt).toLocaleDateString()}`].join(`
`);alert(t)}testReviewEligibility(){return v(this,null,function*(){console.log("=== Manual Review Eligibility Test ==="),yield this.checkReviewEligibility(),console.log("Current state after test:",{canLeaveReview:this.canLeaveReview(),existingReview:this.existingReview(),showReviewButton:this.showReviewButton()})})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=F({type:i,selectors:[["app-project-details"]],decls:20,vars:7,consts:[[1,"min-h-screen","bg-gray-50","py-8","px-4","sm:px-6","lg:px-8"],[1,"max-w-7xl","mx-auto"],[1,"flex","items-center","justify-between","mb-8"],[1,"flex","items-center","space-x-4"],["mat-icon-button","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","bg-white","shadow-sm","border","border-gray-200","hover:bg-gray-50","transition-colors",3,"click"],[1,"text-gray-600"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"flex","items-center","space-x-3"],[1,"p-6","bg-gray-50","border-b","border-gray-200"],[1,"p-6","bg-orange-50","border-b","border-orange-200"],[1,"p-6","bg-yellow-50","border-b","border-yellow-200"],[1,"mb-8","bg-red-50","border-l-4","border-red-400","p-6","rounded-r-lg","shadow-sm"],[1,"flex","flex-col","items-center","justify-center","py-20"],[1,"grid","grid-cols-1","xl:grid-cols-3","gap-8"],[1,"flex","items-center","px-6","py-3","bg-blue-600","hover:bg-blue-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm"],[1,"flex","items-center","px-6","py-3","bg-orange-600","hover:bg-orange-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm"],[3,"disabled","class"],[1,"flex","items-center","px-6","py-3","bg-indigo-600","hover:bg-indigo-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm"],[1,"flex","items-center","px-6","py-3","bg-purple-600","hover:bg-purple-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm"],[1,"flex","items-center","px-6","py-3","bg-blue-600","hover:bg-blue-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[1,"mr-2","w-5","h-5"],[1,"ml-2","bg-red-500","text-white","text-xs","rounded-full","px-2","py-1","min-w-[20px]","h-5","flex","items-center","justify-center"],[1,"flex","items-center","px-6","py-3","bg-green-600","hover:bg-green-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[1,"flex","items-center","px-6","py-3","bg-red-600","hover:bg-red-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[1,"flex","items-center","px-6","py-3","bg-orange-600","hover:bg-orange-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[3,"click","disabled"],[1,"flex","items-center","px-6","py-3","bg-indigo-600","hover:bg-indigo-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[1,"flex","items-center","px-6","py-3","bg-purple-600","hover:bg-purple-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"flex","flex-wrap","gap-3"],[1,"text-gray-700","mb-4"],[1,"flex","items-center","px-6","py-3","bg-yellow-600","hover:bg-yellow-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[1,"flex","items-start"],[1,"flex-shrink-0"],[1,"text-red-400","w-6","h-6"],[1,"ml-3"],[1,"text-lg","font-medium","text-red-800"],[1,"mt-2","text-red-700"],["diameter","48"],[1,"mt-4","text-lg","text-gray-600"],[1,"xl:col-span-2","space-y-8"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-200","overflow-hidden"],[1,"px-8","py-6","border-b","border-gray-200"],[1,"flex","items-start","justify-between"],[1,"flex-1"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"flex-shrink-0","ml-4"],[1,"px-8","py-6","space-y-6"],[1,"p-6","bg-red-50","border","border-red-200","rounded-xl"],[1,"text-xl","font-semibold","text-gray-900"],[1,"px-8","py-6"],[1,"flex","items-center","space-x-6"],[1,"space-y-8"],[1,"px-6","py-5","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900"],[1,"px-6","py-6","space-y-6"],[1,"text-center"],[1,"text-sm","font-medium","text-gray-500","uppercase","tracking-wide","mb-2"],[1,"text-3xl","font-bold","text-green-600"],[1,"pt-6","border-t","border-gray-200"],[1,"bg-white","rounded-xl","shadow-sm","border","border-green-200","overflow-hidden"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-gray-900","flex","items-center"],[1,"mr-2","text-blue-600"],[1,"px-3","py-1","text-xs","bg-blue-100","text-blue-700","rounded-lg","hover:bg-blue-200","transition-colors"],[1,"px-6","py-6"],[1,"flex","items-center","justify-center","py-4"],[1,"space-y-6"],[1,"text-center","py-8"],[1,"px-6","py-6","space-y-4"],["mat-stroked-button","",1,"w-full","h-12","text-base","font-semibold","rounded-lg","border-2","border-gray-300","text-gray-700","hover:bg-gray-50",3,"click"],[1,"mr-2"],[1,"text-lg","font-semibold","text-gray-900","mb-3"],[1,"text-gray-700","leading-relaxed","text-base"],[1,"rounded-lg","overflow-hidden","border","border-gray-200","max-w-md"],[1,"w-full","h-auto","object-cover",3,"src","alt"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"flex","items-center","justify-between","p-4","bg-gray-50","rounded-xl","border","border-gray-200","hover:bg-gray-100","hover:border-gray-300","transition-all","duration-200"],[1,"text-xs","text-gray-500","mt-3"],[1,"flex","items-center","space-x-3","flex-1","min-w-0"],[1,"p-3","bg-white","rounded-lg","shadow-sm","border","border-gray-200"],[1,"text-blue-600","w-6","h-6"],[1,"flex-1","min-w-0"],[1,"text-sm","font-semibold","text-gray-900","truncate"],[1,"text-xs","text-gray-500"],[1,"text-xs","text-gray-400","capitalize"],["target","_blank","rel","noopener noreferrer",1,"flex","items-center","px-4","py-2","text-sm","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors","shadow-sm","ml-3","flex-shrink-0",3,"href"],[1,"w-4","h-4","mr-1"],[1,"space-y-4"],[1,"bg-blue-50","border","border-blue-200","rounded-xl","p-5","hover:bg-blue-100","transition-colors"],[1,"flex","items-center","space-x-2","mb-2"],[1,"w-5","h-5","text-blue-600"],[1,"text-lg","font-semibold","text-blue-900"],[1,"text-sm","text-blue-700","mb-3","leading-relaxed"],[1,"inline-flex","items-center","px-3","py-1.5","bg-blue-200","text-blue-800","rounded-lg","text-sm","font-semibold"],[1,"inline-flex","items-center","px-3","py-1.5","bg-gray-200","text-gray-600","rounded-lg","text-sm"],[1,"p-4","bg-gray-50","rounded-xl","border","border-gray-200"],[1,"flex","items-center","space-x-2"],[1,"w-5","h-5","text-gray-400"],[1,"text-sm","text-gray-600"],[1,"text-lg","font-semibold","text-red-800","mb-2","flex","items-center"],[1,"w-5","h-5","mr-2","text-red-600"],[1,"text-red-700","leading-relaxed"],[1,"w-20","h-20","rounded-xl","object-cover","border","border-gray-200","shadow-sm",3,"src","alt"],[1,"w-20","h-20","rounded-xl","bg-gradient-to-br","from-blue-500","to-blue-600","flex","items-center","justify-center","border","border-gray-200","shadow-sm"],[1,"text-2xl","font-bold","text-blue-600","hover:text-blue-800","transition-colors","mb-1","text-left","cursor-pointer","underline-offset-4","hover:underline",3,"click"],[1,"mt-2","flex","items-center","space-x-2"],[1,"text-white","w-10","h-10"],[1,"w-4","h-4","text-gray-400"],[1,"text-sm","text-gray-500"],[1,"w-20","h-20","rounded-full","bg-gradient-to-br","from-indigo-400","to-indigo-600","flex","items-center","justify-center","shadow-sm"],[1,"text-2xl","font-bold","text-gray-900","mb-1"],[1,"text-sm","text-gray-500","mt-1"],[1,"mr-2","text-orange-600"],[1,"border","border-orange-200","rounded-lg","p-6","bg-orange-50"],[1,"flex","items-start","justify-between","mb-4"],[1,"flex","items-center","space-x-2","mb-3"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-sm","font-medium","bg-orange-100","text-orange-800","border","border-orange-200"],[1,"font-semibold","text-xl","text-orange-900","mb-2"],[1,"text-sm","text-orange-700","mb-4"],[1,"text-sm","text-gray-600","mb-4"],[1,"flex","gap-3","mt-4"],[1,"flex-1","px-6","py-3","bg-green-600","hover:bg-green-700","text-white","text-sm","font-medium","rounded-lg","transition-colors","flex","items-center","justify-center",3,"click"],[1,"w-4","h-4","mr-2"],[1,"flex-1","px-6","py-3","bg-red-600","hover:bg-red-700","text-white","text-sm","font-medium","rounded-lg","transition-colors","flex","items-center","justify-center",3,"click"],[1,"px-6","py-5","border-b","border-green-200","bg-green-50"],[1,"text-lg","font-semibold","text-green-900","flex","items-center"],[1,"mr-2","text-green-600"],[1,"flex","items-center","p-4","bg-green-50","rounded-lg","border","border-green-200"],[1,"text-green-600","mr-3"],[1,"text-green-800","font-medium","mb-1"],[1,"text-green-700","text-sm"],[1,"px-3","py-1","text-xs","bg-blue-100","text-blue-700","rounded-lg","hover:bg-blue-200","transition-colors",3,"click"],["diameter","24"],[1,"ml-2","text-sm","text-gray-600"],[1,"border-b","border-gray-200","pb-6"],[1,"text-sm","font-semibold","text-gray-700","mb-3","flex","items-center"],[1,"w-4","h-4","mr-1","text-purple-600"],[1,"border","border-purple-200","rounded-lg","p-4","bg-purple-50"],[1,"flex","items-start","justify-between","mb-3"],[1,"font-semibold","text-lg","text-gray-900"],[1,"text-sm","text-gray-600","mb-2"],[1,"text-right"],[1,"text-green-600"],[1,"text-red-600"],[1,"text-blue-600"],[1,"text-yellow-600"],[1,"flex","items-center","justify-center","mt-3","p-2","bg-green-50","rounded-lg","border","border-green-200"],[1,"text-green-600","mr-2","w-4","h-4"],[1,"text-green-800","font-medium","text-sm"],[1,"w-4","h-4","mr-1","text-blue-600"],[1,"border","border-gray-200","rounded-lg","p-4"],[1,"flex","gap-2","mt-4"],[1,"flex","items-center","justify-center","mt-4","p-3","bg-green-50","rounded-lg","border","border-green-200"],[1,"flex-1","px-4","py-2","bg-green-600","hover:bg-green-700","text-white","text-sm","font-medium","rounded-lg","transition-colors",3,"click"],[1,"flex-1","px-4","py-2","bg-red-600","hover:bg-red-700","text-white","text-sm","font-medium","rounded-lg","transition-colors",3,"click"],[1,"text-green-600","mr-2"],[1,"text-green-800","font-medium"],[1,"text-gray-400","mb-2",2,"font-size","48px","width","48px","height","48px"]],template:function(t,a){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),b("click",function(){return a.goBack()}),r(5,"mat-icon",5),n(6,"arrow_back"),o()(),r(7,"div")(8,"h1",6),n(9,"Project Details"),o(),r(10,"p",7),n(11,"View complete project information"),o()()(),r(12,"div",8),p(13,Mn,8,5),o(),p(14,Fn,10,2,"div",9),p(15,Rn,19,1,"div",10),p(16,Vn,10,3,"div",11),o(),p(17,Bn,10,1,"div",12),p(18,On,4,0,"div",13)(19,Ao,73,25,"div",14),o()()),t&2&&(l(13),u(a.project()&&a.isBusinessOwner()?13:-1),l(),u(a.project()&&a.isClient()&&Qe(6,Vi).includes(a.project().status)?14:-1),l(),u(a.project()&&a.canApproveCompletion()?15:-1),l(),u(a.project()&&a.isClient()&&a.showReviewButton()?16:-1),l(),u(a.error()?17:-1),l(),u(a.loading()?18:a.project()?19:-1))},dependencies:[I,B,X,it,V,A,ee,Z,O,re,Xe],styles:[".mat-mdc-raised-button.mat-primary{border-radius:.5rem!important}  .mat-mdc-outlined-button{border-radius:.5rem!important}  .mat-icon{width:auto!important;height:auto!important;font-size:inherit!important}  .mat-mdc-progress-spinner circle{stroke:#3b82f6}"]})};var Rt=class i{notificationService=S(ri);ngOnInit(){console.log("Test Notifications Component loaded")}createTestProjectNotification(){let e={_id:"test-project-"+Date.now(),recipient_id:"current-user",title:"Test Project Created",message:"A new project has been created for your business.",type:"project_created",priority:"high",is_read:!1,is_seen:!1,project_id:{_id:"test-project-id",title:"Test Project",description:"This is a test project",status:"pending"},business_id:{_id:"test-business-id",name:"Test Business",logo_url:""},createdAt:new Date,updatedAt:new Date};this.notificationService.handleNewNotification(e),console.log("Test project notification created")}createTestMessageNotification(){let e={_id:"test-message-"+Date.now(),recipient_id:"current-user",title:"New Message",message:"You have received a new message.",type:"message_received",priority:"medium",is_read:!1,is_seen:!1,metadata:{chatId:"test-chat-id"},createdAt:new Date,updatedAt:new Date};this.notificationService.handleNewNotification(e),console.log("Test message notification created")}createTestSystemNotification(){let e={_id:"test-system-"+Date.now(),recipient_id:"current-user",title:"System Update",message:"The system has been updated with new features.",type:"system_announcement",priority:"low",is_read:!1,is_seen:!1,createdAt:new Date,updatedAt:new Date};this.notificationService.handleNewNotification(e),console.log("Test system notification created")}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=F({type:i,selectors:[["app-test-notifications"]],decls:10,vars:0,consts:[[1,"p-6"],[1,"text-xl","font-bold","mb-4"],[1,"space-y-2"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","mr-2",3,"click"],[1,"px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","mr-2",3,"click"],[1,"px-4","py-2","bg-purple-600","text-white","rounded-lg","hover:bg-purple-700",3,"click"]],template:function(t,a){t&1&&(c(0,"div",0)(1,"h2",1),n(2,"Test Notifications"),m(),c(3,"div",2)(4,"button",3),R("click",function(){return a.createTestProjectNotification()}),n(5," Create Test Project Notification "),m(),c(6,"button",4),R("click",function(){return a.createTestMessageNotification()}),n(7," Create Test Message Notification "),m(),c(8,"button",5),R("click",function(){return a.createTestSystemNotification()}),n(9," Create Test System Notification "),m()()())},dependencies:[I],encapsulation:2})};var Bi=(i,e)=>e.code,Bo=(i,e)=>e.name;function Oo(i,e){i&1&&(r(0,"mat-error"),n(1,"First name is required"),o())}function qo(i,e){i&1&&(r(0,"mat-error"),n(1,"Last name is required"),o())}function Lo(i,e){i&1&&(r(0,"mat-error"),n(1,"Email is required"),o())}function Uo(i,e){i&1&&(r(0,"mat-error"),n(1,"Please enter a valid email"),o())}function Ho(i,e){i&1&&(r(0,"mat-error"),n(1,"Phone number is required"),o())}function $o(i,e){if(i&1&&(r(0,"mat-error"),n(1),o()),i&2){let t=d();l(),C(t.phone==null||t.phone.errors==null||t.phone.errors.usaPhone==null?null:t.phone.errors.usaPhone.message)}}function Wo(i,e){if(i&1&&(r(0,"mat-option",20),n(1),o()),i&2){let t=e.$implicit;h("value",t.code),l(),C(t.name)}}function Go(i,e){i&1&&(r(0,"mat-error"),n(1,"State is required"),o())}function zo(i,e){i&1&&(r(0,"mat-option",22),n(1,"Please select a state first"),o())}function Yo(i,e){if(i&1&&(r(0,"mat-option",20),n(1),o()),i&2){let t=e.$implicit;h("value",t.name),l(),C(t.name)}}function Ko(i,e){i&1&&(r(0,"mat-error"),n(1,"City is required"),o())}function Qo(i,e){if(i&1&&(r(0,"mat-option",20),n(1),o()),i&2){let t=e.$implicit;h("value",t.code),l(),C(t.name)}}function Jo(i,e){i&1&&(r(0,"mat-error"),n(1,"Heritage is required"),o())}function Xo(i,e){i&1&&(r(0,"mat-icon",28),n(1,"refresh"),o())}function Zo(i,e){i&1&&(r(0,"mat-error"),n(1,"Current password is required"),o())}function er(i,e){i&1&&(r(0,"mat-error"),n(1,"New password is required"),o())}function tr(i,e){i&1&&(r(0,"mat-error"),n(1,"Password must be at least 6 characters"),o())}function ir(i,e){i&1&&(r(0,"mat-error"),n(1,"Please confirm your password"),o())}function nr(i,e){i&1&&(r(0,"mat-error"),n(1,"Passwords do not match"),o())}function or(i,e){i&1&&(r(0,"mat-icon",28),n(1,"refresh"),o())}var Nt=class i{authService=S(G);fb=S(Te);snackBar=S(Fe);citiesService=S(fi);user=this.authService.user;isLoading=w(!1);countries=mi;usStates=Ci;availableCities=w([]);profileForm;passwordForm;constructor(){let e=this.user();this.profileForm=this.fb.group({first_name:[e?.first_name||"",[H.required]],last_name:[e?.last_name||"",[H.required]],email:[e?.email||"",[H.required,H.email]],phone:[e?.phone||"",[H.required,xi.usaPhone()]],bio:[e?.bio||""],city:[e?.city||"",[H.required]],state:[e?.state||"",[H.required]],country:[{value:e?.country||"USA",disabled:!0}],country_of_origin:[e?.country_of_origin||"",[H.required]]}),e?.state&&(this.onStateSelected(e.state,!0),e?.city&&setTimeout(()=>{this.citiesService.getCitiesByState(e.state).some(s=>s.name===e.city)?this.profileForm.patchValue({city:e.city}):(console.warn(`City "${e.city}" not found in state "${e.state}"`),this.profileForm.patchValue({city:""}))},0)),this.passwordForm=this.fb.group({currentPassword:["",[H.required]],newPassword:["",[H.required,H.minLength(6)]],confirmPassword:["",[H.required]]},{validators:this.passwordMatchValidator})}onStateSelected(e,t=!1){if(e){let a=this.citiesService.getCitiesByState(e);this.availableCities.set(a),t||this.profileForm.patchValue({city:""})}else this.availableCities.set([])}displayCity(e){return e?e.name:""}passwordMatchValidator(e){let t=e.get("newPassword"),a=e.get("confirmPassword");return t&&a&&t.value!==a.value?a.setErrors({mismatch:!0}):a?.setErrors(null),null}updateProfile(){return v(this,null,function*(){if(this.profileForm.invalid){this.snackBar.open("Please fill in all required fields correctly","Close",{duration:3e3,panelClass:["error-snackbar"]});return}this.isLoading.set(!0);try{let e=this.profileForm.value,t=yield this.authService.updateProfile(e);if(t.error)throw t.error;this.snackBar.open("Profile updated successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]})}catch(e){this.snackBar.open(e?.message||"Failed to update profile. Please try again.","Close",{duration:3e3,panelClass:["error-snackbar"]})}finally{this.isLoading.set(!1)}})}updatePassword(){return v(this,null,function*(){if(this.passwordForm.invalid){this.snackBar.open("Please fill in all fields correctly","Close",{duration:3e3,panelClass:["error-snackbar"]});return}this.isLoading.set(!0);try{let{currentPassword:e,newPassword:t}=this.passwordForm.value;this.passwordForm.reset(),this.snackBar.open("Password updated successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]})}catch{this.snackBar.open("Failed to update password. Please try again.","Close",{duration:3e3,panelClass:["error-snackbar"]})}finally{this.isLoading.set(!1)}})}getUserInitials(){let e=this.user();if(!e)return"";if(e.first_name||e.last_name){let t=e.first_name?.charAt(0).toUpperCase()||"",a=e.last_name?.charAt(0).toUpperCase()||"";return t+a}return e.email.charAt(0).toUpperCase()}get phone(){return this.profileForm.get("phone")}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=F({type:i,selectors:[["app-profile"]],decls:135,vars:25,consts:[[1,"max-w-4xl","mx-auto","p-6"],[1,"mb-8"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"profile-tabs"],["label","Profile Information"],[1,"tab-content"],[1,"profile-card"],[1,"flex","items-center","space-x-4","mb-6"],[1,"w-16","h-16","bg-blue-600","text-white","rounded-full","flex","items-center","justify-center","text-xl","font-bold"],[1,"text-xl","font-semibold"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline",1,"w-full"],["matInput","","formControlName","first_name","placeholder","Enter your first name"],["matSuffix",""],["matInput","","formControlName","last_name","placeholder","Enter your last name"],["matInput","","formControlName","email","type","email","placeholder","Enter your email"],["matInput","","formControlName","phone","placeholder","(555) 123-4567","type","tel","appPhoneFormat",""],["formControlName","state",3,"selectionChange"],[3,"value"],["formControlName","city",3,"disabled"],["disabled",""],["matInput","","formControlName","country","readonly",""],["formControlName","country_of_origin"],["matInput","","formControlName","bio","rows","4","placeholder","Tell us about yourself"],[1,"flex","justify-end","pt-4"],["mat-raised-button","","color","primary","type","submit",1,"px-8",3,"disabled"],[1,"animate-spin","mr-2"],["label","Change Password"],[1,"password-card"],["matInput","","formControlName","currentPassword","type","password","placeholder","Enter current password"],["matInput","","formControlName","newPassword","type","password","placeholder","Enter new password"],["matInput","","formControlName","confirmPassword","type","password","placeholder","Confirm new password"]],template:function(t,a){if(t&1&&(r(0,"div",0)(1,"div",1)(2,"h1",2),n(3,"Profile Settings"),o(),r(4,"p",3),n(5,"Manage your account information and settings"),o()(),r(6,"mat-tab-group",4)(7,"mat-tab",5)(8,"div",6)(9,"mat-card",7)(10,"mat-card-header")(11,"div",8)(12,"div",9),n(13),o(),r(14,"div")(15,"h2",10),n(16),o(),r(17,"p",3),n(18),o()()()(),r(19,"mat-card-content")(20,"form",11),b("ngSubmit",function(){return a.updateProfile()}),r(21,"div",12)(22,"mat-form-field",13)(23,"mat-label"),n(24,"First Name *"),o(),E(25,"input",14),r(26,"mat-icon",15),n(27,"person"),o(),p(28,Oo,2,0,"mat-error"),o(),r(29,"mat-form-field",13)(30,"mat-label"),n(31,"Last Name *"),o(),E(32,"input",16),r(33,"mat-icon",15),n(34,"person"),o(),p(35,qo,2,0,"mat-error"),o(),r(36,"mat-form-field",13)(37,"mat-label"),n(38,"Email"),o(),E(39,"input",17),r(40,"mat-icon",15),n(41,"email"),o(),p(42,Lo,2,0,"mat-error"),p(43,Uo,2,0,"mat-error"),o(),r(44,"mat-form-field",13)(45,"mat-label"),n(46,"Phone *"),o(),E(47,"input",18),r(48,"mat-icon",15),n(49,"phone"),o(),p(50,Ho,2,0,"mat-error"),p(51,$o,2,1,"mat-error"),o(),r(52,"mat-form-field",13)(53,"mat-label"),n(54,"State *"),o(),r(55,"mat-select",19),b("selectionChange",function(g){return a.onStateSelected(g.value)}),L(56,Wo,2,2,"mat-option",20,Bi),o(),r(58,"mat-icon",15),n(59,"map"),o(),p(60,Go,2,0,"mat-error"),o(),r(61,"mat-form-field",13)(62,"mat-label"),n(63,"City *"),o(),r(64,"mat-select",21),p(65,zo,2,0,"mat-option",22),L(66,Yo,2,2,"mat-option",20,Bo),o(),r(68,"mat-icon",15),n(69,"location_city"),o(),p(70,Ko,2,0,"mat-error"),o(),r(71,"mat-form-field",13)(72,"mat-label"),n(73,"Country"),o(),E(74,"input",23),r(75,"mat-icon",15),n(76,"flag"),o(),r(77,"mat-hint"),n(78,"Country is set to USA by default"),o()(),r(79,"mat-form-field",13)(80,"mat-label"),n(81,"Heritage"),o(),r(82,"mat-select",24),L(83,Qo,2,2,"mat-option",20,Bi),o(),r(85,"mat-icon",15),n(86,"home"),o(),p(87,Jo,2,0,"mat-error"),o()(),r(88,"mat-form-field",13)(89,"mat-label"),n(90,"Bio"),o(),E(91,"textarea",25),r(92,"mat-icon",15),n(93,"description"),o()(),r(94,"div",26)(95,"button",27),p(96,Xo,2,0,"mat-icon",28),n(97," Update Profile "),o()()()()()()(),r(98,"mat-tab",29)(99,"div",6)(100,"mat-card",30)(101,"mat-card-header")(102,"mat-card-title"),n(103,"Change Password"),o(),r(104,"mat-card-subtitle"),n(105,"Update your account password"),o()(),r(106,"mat-card-content")(107,"form",11),b("ngSubmit",function(){return a.updatePassword()}),r(108,"mat-form-field",13)(109,"mat-label"),n(110,"Current Password"),o(),E(111,"input",31),r(112,"mat-icon",15),n(113,"lock"),o(),p(114,Zo,2,0,"mat-error"),o(),r(115,"mat-form-field",13)(116,"mat-label"),n(117,"New Password"),o(),E(118,"input",32),r(119,"mat-icon",15),n(120,"lock_outline"),o(),p(121,er,2,0,"mat-error"),p(122,tr,2,0,"mat-error"),o(),r(123,"mat-form-field",13)(124,"mat-label"),n(125,"Confirm New Password"),o(),E(126,"input",33),r(127,"mat-icon",15),n(128,"lock_outline"),o(),p(129,ir,2,0,"mat-error"),p(130,nr,2,0,"mat-error"),o(),r(131,"div",26)(132,"button",27),p(133,or,2,0,"mat-icon",28),n(134," Update Password "),o()()()()()()()()()),t&2){let s,g,_,ne,_e,fe,Le,Ue,He,$e,We,Ge,ze,Ye;l(13),y(" ",a.getUserInitials()," "),l(3),C((((s=a.user())==null?null:s.first_name)+" "+(((s=a.user())==null?null:s.last_name)||"")).trim()||((s=a.user())==null?null:s.email)),l(2),C((g=a.user())==null?null:g.email),l(2),h("formGroup",a.profileForm),l(8),u((_=a.profileForm.get("first_name"))!=null&&_.hasError("required")&&((_=a.profileForm.get("first_name"))!=null&&_.touched)?28:-1),l(7),u((ne=a.profileForm.get("last_name"))!=null&&ne.hasError("required")&&((ne=a.profileForm.get("last_name"))!=null&&ne.touched)?35:-1),l(7),u((_e=a.profileForm.get("email"))!=null&&_e.hasError("required")&&((_e=a.profileForm.get("email"))!=null&&_e.touched)?42:-1),l(),u((fe=a.profileForm.get("email"))!=null&&fe.hasError("email")&&((fe=a.profileForm.get("email"))!=null&&fe.touched)?43:-1),l(7),u(a.phone!=null&&a.phone.hasError("required")&&(a.phone!=null&&a.phone.touched)?50:-1),l(),u(a.phone!=null&&a.phone.hasError("usaPhone")&&(a.phone!=null&&a.phone.touched)?51:-1),l(5),U(a.usStates),l(4),u((Le=a.profileForm.get("state"))!=null&&Le.hasError("required")&&((Le=a.profileForm.get("state"))!=null&&Le.touched)?60:-1),l(4),h("disabled",a.availableCities().length===0),l(),u(a.availableCities().length===0?65:-1),l(),U(a.availableCities()),l(4),u((Ue=a.profileForm.get("city"))!=null&&Ue.hasError("required")&&((Ue=a.profileForm.get("city"))!=null&&Ue.touched)?70:-1),l(13),U(a.countries),l(4),u((He=a.profileForm.get("country_of_origin"))!=null&&He.hasError("required")&&((He=a.profileForm.get("country_of_origin"))!=null&&He.touched)?87:-1),l(8),h("disabled",a.isLoading()||a.profileForm.invalid),l(),u(a.isLoading()?96:-1),l(11),h("formGroup",a.passwordForm),l(7),u(($e=a.passwordForm.get("currentPassword"))!=null&&$e.hasError("required")&&(($e=a.passwordForm.get("currentPassword"))!=null&&$e.touched)?114:-1),l(7),u((We=a.passwordForm.get("newPassword"))!=null&&We.hasError("required")&&((We=a.passwordForm.get("newPassword"))!=null&&We.touched)?121:-1),l(),u((Ge=a.passwordForm.get("newPassword"))!=null&&Ge.hasError("minlength")&&((Ge=a.passwordForm.get("newPassword"))!=null&&Ge.touched)?122:-1),l(7),u((ze=a.passwordForm.get("confirmPassword"))!=null&&ze.hasError("required")&&((ze=a.passwordForm.get("confirmPassword"))!=null&&ze.touched)?129:-1),l(),u((Ye=a.passwordForm.get("confirmPassword"))!=null&&Ye.hasError("mismatch")&&((Ye=a.passwordForm.get("confirmPassword"))!=null&&Ye.touched)?130:-1),l(2),h("disabled",a.isLoading()||a.passwordForm.invalid),l(),u(a.isLoading()?133:-1)}},dependencies:[I,le,dt,lt,Ee,je,Pe,Me,O,z,te,Se,we,ye,me,ce,de,di,li,mt,ke,ci,B,X,V,A,Ie,ie,pt,ut,ue,pe,se,hi],styles:[".profile-tabs[_ngcontent-%COMP%]{margin-top:2rem}.profile-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:2rem 0}.profile-tabs[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%], .profile-tabs[_ngcontent-%COMP%]   .password-card[_ngcontent-%COMP%]{box-shadow:0 4px 6px -1px #0000001a;border-radius:12px;border:1px solid #e5e7eb}.profile-tabs[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.profile-tabs[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-bottom:1rem}.profile-tabs[_ngcontent-%COMP%]   .animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}  .mat-mdc-tab-group .mat-mdc-tab-header{border-bottom:1px solid #e5e7eb}  .mat-mdc-tab-group .mat-mdc-tab{font-weight:500}  .mat-mdc-card .mat-mdc-card-header .mat-mdc-card-title{font-size:1.5rem;font-weight:600;color:#111827}  .mat-mdc-card .mat-mdc-card-header .mat-mdc-card-subtitle{color:#6b7280}  .mat-mdc-form-field .mat-mdc-form-field-flex{border-radius:8px}  .mat-mdc-raised-button.mat-primary{background-color:#2563eb}  .mat-mdc-raised-button.mat-primary:hover:not([disabled]){background-color:#1d4ed8}  .error-snackbar{background-color:#dc2626!important;color:#fff!important}  .success-snackbar{background-color:#059669!important;color:#fff!important}"]})};function rr(i,e){i&1&&(r(0,"mat-icon",39),n(1,"refresh"),o())}var At=class i{authService=S(G);fb=S(Te);snackBar=S(Fe);user=this.authService.user;isLoading=w(!1);settingsForm;constructor(){let e=this.user();this.settingsForm=this.fb.group({emailNotifications:[!0],pushNotifications:[!0],marketingEmails:[!1],projectUpdates:[!0],messageNotifications:[!0],language:["en"],timezone:["UTC"],theme:["light"]})}saveSettings(){return v(this,null,function*(){this.isLoading.set(!0);try{let e=this.settingsForm.value;this.snackBar.open("Settings saved successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]})}catch{this.snackBar.open("Failed to save settings. Please try again.","Close",{duration:3e3,panelClass:["error-snackbar"]})}finally{this.isLoading.set(!1)}})}resetSettings(){return v(this,null,function*(){this.settingsForm.patchValue({emailNotifications:!0,pushNotifications:!0,marketingEmails:!1,projectUpdates:!0,messageNotifications:!0,language:"en",timezone:"UTC",theme:"light"}),this.snackBar.open("Settings reset to default values","Close",{duration:3e3})})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=F({type:i,selectors:[["app-settings"]],decls:114,vars:4,consts:[[1,"max-w-4xl","mx-auto","p-6"],[1,"mb-8"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"settings-card"],[1,"mr-2"],[1,"space-y-4"],[1,"flex","items-center","justify-between"],[1,"font-medium","text-gray-900"],[1,"text-sm","text-gray-600"],["formControlName","emailNotifications","color","primary"],["formControlName","pushNotifications","color","primary"],["formControlName","marketingEmails","color","primary"],["formControlName","projectUpdates","color","primary"],["formControlName","messageNotifications","color","primary"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline"],["formControlName","language"],["value","en"],["value","es"],["value","fr"],["value","de"],["matSuffix",""],["formControlName","timezone"],["value","UTC"],["value","America/New_York"],["value","America/Chicago"],["value","America/Denver"],["value","America/Los_Angeles"],["value","Europe/London"],["value","Europe/Paris"],["formControlName","theme"],["value","light"],["value","dark"],["value","auto"],[1,"flex","justify-between","pt-6"],["mat-stroked-button","","type","button",1,"px-6",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",1,"px-8",3,"disabled"],[1,"animate-spin","mr-2"]],template:function(t,a){t&1&&(r(0,"div",0)(1,"div",1)(2,"h1",2),n(3,"Settings"),o(),r(4,"p",3),n(5,"Manage your account preferences and notification settings"),o()(),r(6,"form",4),b("ngSubmit",function(){return a.saveSettings()}),r(7,"mat-card",5)(8,"mat-card-header")(9,"mat-card-title")(10,"mat-icon",6),n(11,"notifications"),o(),n(12," Notifications "),o(),r(13,"mat-card-subtitle"),n(14,"Choose how you want to be notified about activity"),o()(),r(15,"mat-card-content")(16,"div",7)(17,"div",8)(18,"div")(19,"h3",9),n(20,"Email Notifications"),o(),r(21,"p",10),n(22,"Receive notifications via email"),o()(),E(23,"mat-slide-toggle",11),o(),r(24,"div",8)(25,"div")(26,"h3",9),n(27,"Push Notifications"),o(),r(28,"p",10),n(29,"Receive push notifications in your browser"),o()(),E(30,"mat-slide-toggle",12),o(),r(31,"div",8)(32,"div")(33,"h3",9),n(34,"Marketing Emails"),o(),r(35,"p",10),n(36,"Receive promotional and marketing emails"),o()(),E(37,"mat-slide-toggle",13),o(),r(38,"div",8)(39,"div")(40,"h3",9),n(41,"Project Updates"),o(),r(42,"p",10),n(43,"Get notified about project status changes"),o()(),E(44,"mat-slide-toggle",14),o(),r(45,"div",8)(46,"div")(47,"h3",9),n(48,"Message Notifications"),o(),r(49,"p",10),n(50,"Get notified when you receive new messages"),o()(),E(51,"mat-slide-toggle",15),o()()()(),r(52,"mat-card",5)(53,"mat-card-header")(54,"mat-card-title")(55,"mat-icon",6),n(56,"tune"),o(),n(57," Preferences "),o(),r(58,"mat-card-subtitle"),n(59,"Customize your experience"),o()(),r(60,"mat-card-content")(61,"div",16)(62,"mat-form-field",17)(63,"mat-label"),n(64,"Language"),o(),r(65,"mat-select",18)(66,"mat-option",19),n(67,"English"),o(),r(68,"mat-option",20),n(69,"Spanish"),o(),r(70,"mat-option",21),n(71,"French"),o(),r(72,"mat-option",22),n(73,"German"),o()(),r(74,"mat-icon",23),n(75,"language"),o()(),r(76,"mat-form-field",17)(77,"mat-label"),n(78,"Timezone"),o(),r(79,"mat-select",24)(80,"mat-option",25),n(81,"UTC"),o(),r(82,"mat-option",26),n(83,"Eastern Time"),o(),r(84,"mat-option",27),n(85,"Central Time"),o(),r(86,"mat-option",28),n(87,"Mountain Time"),o(),r(88,"mat-option",29),n(89,"Pacific Time"),o(),r(90,"mat-option",30),n(91,"London"),o(),r(92,"mat-option",31),n(93,"Paris"),o()(),r(94,"mat-icon",23),n(95,"schedule"),o()(),r(96,"mat-form-field",17)(97,"mat-label"),n(98,"Theme"),o(),r(99,"mat-select",32)(100,"mat-option",33),n(101,"Light"),o(),r(102,"mat-option",34),n(103,"Dark"),o(),r(104,"mat-option",35),n(105,"Auto"),o()(),r(106,"mat-icon",23),n(107,"palette"),o()()()()(),r(108,"div",36)(109,"button",37),b("click",function(){return a.resetSettings()}),n(110," Reset to Default "),o(),r(111,"button",38),p(112,rr,2,0,"mat-icon",39),n(113," Save Settings "),o()()()()),t&2&&(l(6),h("formGroup",a.settingsForm),l(103),h("disabled",a.isLoading()),l(2),h("disabled",a.isLoading()||a.settingsForm.invalid),l(),u(a.isLoading()?112:-1))},dependencies:[I,le,dt,Ee,je,Pe,Me,O,z,te,Se,we,ye,me,ce,de,mt,ke,B,X,V,A,ki,Ti,ue,pe,se,Ie],styles:[".settings-card[_ngcontent-%COMP%]{box-shadow:0 4px 6px -1px #0000001a;border-radius:12px;border:1px solid #e5e7eb;margin-bottom:1.5rem}.settings-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:1rem}.settings-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.25rem;font-weight:600;color:#111827}.settings-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{color:#6b7280;margin-top:.5rem}.settings-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding-top:0}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}  .mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected .mdc-switch__track{background-color:#2563eb}  .mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected .mdc-switch__handle .mdc-switch__ripple{background-color:#2563eb}  .mat-mdc-form-field .mat-mdc-form-field-flex{border-radius:8px}  .mat-mdc-raised-button.mat-primary{background-color:#2563eb}  .mat-mdc-raised-button.mat-primary:hover:not([disabled]){background-color:#1d4ed8}  .mat-mdc-outlined-button{border-color:#d1d5db;color:#374151}  .mat-mdc-outlined-button:hover:not([disabled]){background-color:#f9fafb;border-color:#9ca3af}  .error-snackbar{background-color:#dc2626!important;color:#fff!important}  .success-snackbar{background-color:#059669!important;color:#fff!important}"]})};var Vt=class i{constructor(e){this.http=e}apiUrl=`${st.api.baseUrl}/withdrawals`;createWithdrawal(e){return this.http.post(this.apiUrl,e)}getWithdrawals(e=1,t=10,a){let s=new Qt().set("page",e.toString()).set("limit",t.toString());return a&&(s=s.set("status",a)),this.http.get(this.apiUrl,{params:s})}getWithdrawal(e){return this.http.get(`${this.apiUrl}/${e}`)}cancelWithdrawal(e){return this.http.post(`${this.apiUrl}/${e}/cancel`,{})}getWithdrawalStats(){return this.http.get(`${this.apiUrl}/stats/summary`)}processWithdrawal(e){return this.http.post(`${this.apiUrl}/${e}/process`,{})}getStatusColor(e){switch(e){case"pending":return"text-yellow-600 bg-yellow-100";case"processing":return"text-blue-600 bg-blue-100";case"completed":return"text-green-600 bg-green-100";case"failed":return"text-red-600 bg-red-100";case"cancelled":return"text-gray-600 bg-gray-100";default:return"text-gray-600 bg-gray-100"}}getStatusIcon(e){switch(e){case"pending":return"clock";case"processing":return"sync";case"completed":return"check-circle";case"failed":return"x-circle";case"cancelled":return"minus-circle";default:return"help-circle"}}formatCurrency(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}calculateFee(e){return Math.round(e*.03*100)/100}calculateNetAmount(e){return e-this.calculateFee(e)}static \u0275fac=function(t){return new(t||i)(Yt(Ze))};static \u0275prov=zt({token:i,factory:i.\u0275fac,providedIn:"root"})};function ar(i,e){if(i&1&&(r(0,"mat-icon",8),n(1),o()),i&2){let t=d();Q(t.getIconClass()),l(),y(" ",t.data.icon," ")}}var Bt=class i{constructor(e,t){this.dialogRef=e;this.data=t}onConfirm(){this.dialogRef.close(!0)}onCancel(){this.dialogRef.close(!1)}getIconClass(){let e="w-8 h-8";switch(this.data.type){case"danger":return`${e} text-red-600`;case"warning":return`${e} text-yellow-600`;case"info":default:return`${e} text-blue-600`}}getConfirmButtonClass(){switch(this.data.type){case"danger":return"bg-red-600 hover:bg-red-700 text-white";case"warning":return"bg-yellow-600 hover:bg-yellow-700 text-white";case"info":default:return"bg-blue-600 hover:bg-blue-700 text-white"}}static \u0275fac=function(t){return new(t||i)(Ht(bi),Ht(yi))};static \u0275cmp=F({type:i,selectors:[["app-confirmation-dialog"]],decls:12,vars:7,consts:[[1,"p-6"],[1,"flex","items-center","mb-4"],[1,"mr-3","text-3xl",3,"class"],[1,"text-xl","font-semibold","text-gray-900"],[1,"text-gray-600","mb-6","leading-relaxed"],[1,"flex","justify-end","gap-3"],["mat-stroked-button","",1,"px-4","py-2",3,"click"],["mat-raised-button","",1,"px-4","py-2",3,"click"],[1,"mr-3","text-3xl"]],template:function(t,a){t&1&&(r(0,"div",0)(1,"div",1),p(2,ar,2,3,"mat-icon",2),r(3,"h2",3),n(4),o()(),r(5,"p",4),n(6),o(),r(7,"div",5)(8,"button",6),b("click",function(){return a.onCancel()}),n(9),o(),r(10,"button",7),b("click",function(){return a.onConfirm()}),n(11),o()()()),t&2&&(l(2),u(a.data.icon?2:-1),l(2),C(a.data.title),l(2),C(a.data.message),l(3),y(" ",a.data.cancelText||"Cancel"," "),l(),Q(a.getConfirmButtonClass()),l(),y(" ",a.data.confirmText||"Confirm"," "))},dependencies:[I,Pt,B,X,V,A],encapsulation:2})};var sr=(i,e,t,a)=>({"bg-green-50 border-green-200":i,"bg-yellow-50 border-yellow-200":e,"bg-red-50 border-red-200":t,"bg-gray-50 border-gray-200":a}),lr=(i,e,t,a)=>({"text-green-600":i,"text-yellow-600":e,"text-red-600":t,"text-gray-600":a}),dr=(i,e,t,a)=>({"text-green-700":i,"text-yellow-700":e,"text-red-700":t,"text-gray-700":a});function cr(i,e){i&1&&n(0," check_circle ")}function mr(i,e){i&1&&n(0," schedule ")}function pr(i,e){i&1&&n(0," error ")}function ur(i,e){i&1&&n(0," payment ")}function gr(i,e){i&1&&n(0," Stripe Connected ")}function _r(i,e){i&1&&n(0," Stripe Setup Pending ")}function fr(i,e){i&1&&n(0," Stripe Connection Failed ")}function xr(i,e){i&1&&n(0," Stripe Not Connected ")}var Ot=class i{summary=null;stripeConnectionStatus="not-connected";static \u0275fac=function(t){return new(t||i)};static \u0275cmp=F({type:i,selectors:[["app-earnings-summary-cards"]],inputs:{summary:"summary",stripeConnectionStatus:"stripeConnectionStatus"},decls:58,vars:32,consts:[[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"overflow-hidden","hover:shadow-lg","transition-shadow","bg-white!"],[1,"p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-sm","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"text-green-600","text-2xl"],[1,"space-y-2"],[1,"text-sm","text-gray-600"],[1,"text-3xl","font-bold","text-gray-900"],[1,"mt-4","p-3","rounded-lg","border",3,"ngClass"],[1,"flex","items-center","space-x-2"],[1,"text-lg",3,"ngClass"],[1,"text-sm","font-medium",3,"ngClass"],[1,"text-blue-600","text-2xl"],[1,"space-y-4"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-purple-600","text-2xl"],[1,"text-sm","text-gray-600","mt-2"]],template:function(t,a){if(t&1&&(r(0,"div",0)(1,"mat-card",1)(2,"mat-card-content",2)(3,"div",3)(4,"h3",4),n(5,"Available Funds"),o(),r(6,"mat-icon",5),n(7,"account_balance_wallet"),o()(),r(8,"div",6)(9,"p",7),n(10,"Balance available for withdrawal"),o(),r(11,"p",8),n(12),k(13,"currency"),o()(),r(14,"div",9)(15,"div",10)(16,"mat-icon",11),p(17,cr,1,0)(18,mr,1,0)(19,pr,1,0)(20,ur,1,0),o(),r(21,"span",12),p(22,gr,1,0)(23,_r,1,0)(24,fr,1,0)(25,xr,1,0),o()()()()(),r(26,"mat-card",1)(27,"mat-card-content",2)(28,"div",3)(29,"h3",4),n(30,"Future Payments"),o(),r(31,"mat-icon",13),n(32,"schedule"),o()(),r(33,"div",14)(34,"div")(35,"p",7),n(36,"Payments being cleared"),o(),r(37,"p",15),n(38),k(39,"currency"),o()(),r(40,"div")(41,"p",7),n(42,"Active project earnings"),o(),r(43,"p",15),n(44),k(45,"currency"),o()()()()(),r(46,"mat-card",1)(47,"mat-card-content",2)(48,"div",3)(49,"h3",4),n(50,"Earnings to Date"),o(),r(51,"mat-icon",16),n(52,"trending_up"),o()(),r(53,"p",8),n(54),k(55,"currency"),o(),r(56,"p",17),n(57,"Your total earnings since joining."),o()()()()),t&2){let s,g;l(12),C(N(13,9,a.summary==null?null:a.summary.available)),l(2),h("ngClass",Je(17,sr,a.stripeConnectionStatus==="connected",a.stripeConnectionStatus==="pending",a.stripeConnectionStatus==="failed",a.stripeConnectionStatus==="not-connected")),l(2),h("ngClass",Je(22,lr,a.stripeConnectionStatus==="connected",a.stripeConnectionStatus==="pending",a.stripeConnectionStatus==="failed",a.stripeConnectionStatus==="not-connected")),l(),u((s=a.stripeConnectionStatus)==="connected"?17:s==="pending"?18:s==="failed"?19:20),l(4),h("ngClass",Je(27,dr,a.stripeConnectionStatus==="connected",a.stripeConnectionStatus==="pending",a.stripeConnectionStatus==="failed",a.stripeConnectionStatus==="not-connected")),l(),u((g=a.stripeConnectionStatus)==="connected"?22:g==="pending"?23:g==="failed"?24:25),l(16),C(N(39,11,a.summary==null?null:a.summary.payments_clearing)),l(6),C(N(45,13,a.summary==null?null:a.summary.active_orders)),l(10),C(N(55,15,a.summary==null?null:a.summary.total_earnings))}},dependencies:[I,ve,O,z,te,V,A,Xe],encapsulation:2})};var Cr=i=>({label:"Clear Filters",callback:i}),vr=i=>[i],br=(i,e)=>e._id;function yr(i,e){i&1&&(r(0,"div",1),E(1,"mat-spinner",4),r(2,"p",5),n(3,"Loading transactions..."),o()())}function wr(i,e){if(i&1&&E(0,"app-empty-state",2),i&2){let t=d();h("buttons",Ce(3,vr,Ce(1,Cr,t.onClearFilters.bind(t))))}}function Sr(i,e){i&1&&E(0,"app-empty-state",3)}function Er(i,e){i&1&&(r(0,"th",21),n(1,"Date"),o())}function jr(i,e){if(i&1&&(r(0,"td",22),n(1),o()),i&2){let t=e.$implicit,a=d(3);l(),y(" ",a.formatDate(t.createdAt)," ")}}function Pr(i,e){i&1&&(r(0,"th",21),n(1,"Activity"),o())}function Mr(i,e){if(i&1&&(r(0,"td",22)(1,"span",23),n(2),o()()),i&2){let t=e.$implicit,a=d(3);l(),h("ngClass",a.getTransactionTypeColor(t.transaction_type)),l(),y(" ",a.getTransactionTypeLabel(t.transaction_type)," ")}}function Tr(i,e){i&1&&(r(0,"th",21),n(1,"Description"),o())}function kr(i,e){if(i&1&&(r(0,"td",24),n(1),o()),i&2){let t=e.$implicit,a=d(3);l(),y(" ",t.description||a.getTransactionTypeLabel(t.transaction_type)," ")}}function Dr(i,e){i&1&&(r(0,"th",25),n(1,"Amount"),o())}function Fr(i,e){if(i&1&&(r(0,"td",26)(1,"span",27),n(2),o()()),i&2){let t=e.$implicit,a=d(3);l(),h("ngClass",t.amount>=0?"text-green-600":"text-red-600"),l(),Ae(" ",t.transaction_type==="withdrawal"||t.transaction_type==="refund"||t.transaction_type==="platform_fee"?"-":"+","",a.formatCurrency(a.Math.abs(t.amount))," ")}}function Ir(i,e){i&1&&(r(0,"th",21),n(1,"Status"),o())}function Rr(i,e){if(i&1&&(r(0,"td",22)(1,"span",27),n(2),k(3,"titlecase"),o()()),i&2){let t=e.$implicit;l(),h("ngClass","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(t.status==="completed"?"bg-green-100 text-green-800":t.status==="pending"?"bg-yellow-100 text-yellow-800":t.status==="failed"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800")),l(),y(" ",N(3,2,t.status)," ")}}function Nr(i,e){i&1&&E(0,"tr",28)}function Ar(i,e){i&1&&E(0,"tr",29)}function Vr(i,e){if(i&1&&(r(0,"div",6)(1,"table",8),$(2,9),q(3,Er,2,0,"th",10)(4,jr,2,1,"td",11),W(),$(5,12),q(6,Pr,2,0,"th",10)(7,Mr,3,2,"td",11),W(),$(8,13),q(9,Tr,2,0,"th",10)(10,kr,2,1,"td",14),W(),$(11,15),q(12,Dr,2,0,"th",16)(13,Fr,3,3,"td",17),W(),$(14,18),q(15,Ir,2,0,"th",10)(16,Rr,4,4,"td",11),W(),q(17,Nr,1,0,"tr",19)(18,Ar,1,0,"tr",20),o()()),i&2){let t=d(2);l(),h("dataSource",t.filteredTransactions),l(16),h("matHeaderRowDef",t.displayedColumns),l(),h("matRowDefColumns",t.displayedColumns)}}function Br(i,e){if(i&1&&(r(0,"mat-card",31)(1,"mat-card-content",32)(2,"div",33)(3,"h4",34),n(4),o(),r(5,"mat-icon",27),n(6),o()(),r(7,"p",35),n(8),o(),r(9,"div",36)(10,"span",37),n(11),o()(),r(12,"div",38)(13,"span",39),n(14),o(),r(15,"span",27),n(16),k(17,"titlecase"),o()()()()),i&2){let t=e.$implicit,a=d(3);l(4),C(a.getTransactionTypeLabel(t.transaction_type)),l(),h("ngClass",a.getTransactionTypeColor(t.transaction_type)),l(),y(" ",a.getTransactionIcon(t.transaction_type)," "),l(2),C(t.description||"-"),l(2),h("ngClass",t.amount>=0?"text-green-600":"text-red-600"),l(),Ae(" ",t.transaction_type==="withdrawal"||t.transaction_type==="refund"||t.transaction_type==="platform_fee"?"-":"+","",a.formatCurrency(a.Math.abs(t.amount))," "),l(3),C(a.formatDate(t.createdAt)),l(),h("ngClass","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(t.status==="completed"?"bg-green-100 text-green-800":t.status==="pending"?"bg-yellow-100 text-yellow-800":t.status==="failed"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800")),l(),y(" ",N(17,10,t.status)," ")}}function Or(i,e){if(i&1&&(r(0,"div",7)(1,"div",30),L(2,Br,18,12,"mat-card",31,br),o()()),i&2){let t=d(2);l(2),U(t.filteredTransactions)}}function qr(i,e){if(i&1&&p(0,Vr,19,3,"div",6)(1,Or,4,0,"div",7),i&2){let t=d();u(t.viewMode==="list"?0:1)}}var qt=class i{transactions=[];filteredTransactions=[];loadingTransactions=!1;viewMode="list";hasActiveFilters=!1;clearFilters=new he;displayedColumns=["date","type","description","amount","status"];formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}formatCurrency(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}getTransactionTypeLabel(e){return{project_started:"Project Started",project_completed:"Project Completed",additional_payment:"Additional Payment",payment_cleared:"Payment Cleared",withdrawal:"Withdrawal",refund:"Refund",platform_fee:"Platform Fee"}[e]||e}getTransactionTypeColor(e){return{project_started:"text-blue-600",project_completed:"text-green-600",additional_payment:"text-green-600",payment_cleared:"text-purple-600",withdrawal:"text-red-600",platform_fee:"text-orange-600",refund:"text-purple-600"}[e]||"text-gray-600"}getTransactionIcon(e){return{project_started:"play_circle",project_completed:"check_circle",additional_payment:"add_circle",payment_cleared:"verified",withdrawal:"send",refund:"money_off",platform_fee:"toll"}[e]||"help"}onClearFilters(){this.clearFilters.emit()}Math=Math;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=F({type:i,selectors:[["app-earnings-transaction-history"]],inputs:{transactions:"transactions",filteredTransactions:"filteredTransactions",loadingTransactions:"loadingTransactions",viewMode:"viewMode",hasActiveFilters:"hasActiveFilters"},outputs:{clearFilters:"clearFilters"},decls:5,vars:1,consts:[[1,"overflow-hidden"],[1,"p-6","text-center"],["icon","filter_list_off","title","No Transactions Match Your Filters","description","Try adjusting your date range or activity type filters.",3,"buttons"],["icon","receipt_long","title","No Transactions Yet","description","Your transaction history will appear here once you start earning."],["diameter","30"],[1,"mt-2","text-gray-600"],[1,"overflow-x-auto"],[1,"p-6"],["mat-table","",1,"w-full",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","description"],["mat-cell","","class","text-gray-600",4,"matCellDef"],["matColumnDef","amount"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right font-semibold",4,"matCellDef"],["matColumnDef","status"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","hover:bg-gray-50",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"font-medium",3,"ngClass"],["mat-cell","",1,"text-gray-600"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right","font-semibold"],[3,"ngClass"],["mat-header-row",""],["mat-row","",1,"hover:bg-gray-50"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],[1,"overflow-hidden","hover:shadow-lg","transition-shadow"],[1,"p-4"],[1,"flex","items-start","justify-between","mb-2"],[1,"font-semibold","text-gray-900"],[1,"text-sm","text-gray-600","mb-3"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-2xl","font-bold",3,"ngClass"],[1,"flex","items-center","justify-between"],[1,"text-xs","text-gray-500"]],template:function(t,a){t&1&&(r(0,"mat-card",0),p(1,yr,4,0,"div",1)(2,wr,1,5,"app-empty-state",2)(3,Sr,1,0,"app-empty-state",3)(4,qr,2,1),o()),t&2&&(l(),u(a.loadingTransactions?1:a.filteredTransactions.length===0&&a.hasActiveFilters?2:a.transactions.length===0?3:4))},dependencies:[I,ve,ie,ge,gt,ft,vt,xt,_t,bt,ht,Ct,yt,wt,O,z,te,V,A,B,ee,Z,Re,re],encapsulation:2})};function Lr(i,e){i&1&&(r(0,"div",0),E(1,"mat-spinner",3),r(2,"p",4),n(3,"Loading withdrawals..."),o()())}function Ur(i,e){i&1&&E(0,"app-empty-state",1)}function Hr(i,e){i&1&&(r(0,"th",18),n(1,"Date"),o())}function $r(i,e){if(i&1&&(r(0,"td",19),n(1),o()),i&2){let t=e.$implicit,a=d(2);l(),y(" ",a.formatDate(t.createdAt)," ")}}function Wr(i,e){i&1&&(r(0,"th",18),n(1,"Method"),o())}function Gr(i,e){if(i&1&&(r(0,"td",19)(1,"div",20)(2,"mat-icon",21),n(3,"payment"),o(),r(4,"span",22),n(5),k(6,"titlecase"),o()()()),i&2){let t=e.$implicit;l(5),C(N(6,1,t.method))}}function zr(i,e){i&1&&(r(0,"th",18),n(1,"Description"),o())}function Yr(i,e){if(i&1&&(r(0,"td",23),n(1),k(2,"titlecase"),o()),i&2){let t=e.$implicit;l(),y(" Withdrawal to ",N(2,1,t.method)," ")}}function Kr(i,e){i&1&&(r(0,"th",24),n(1,"Amount"),o())}function Qr(i,e){if(i&1&&(r(0,"td",25),n(1),o()),i&2){let t=e.$implicit,a=d(2);l(),y(" -",a.formatCurrency(t.amount)," ")}}function Jr(i,e){i&1&&(r(0,"th",18),n(1,"Status"),o())}function Xr(i,e){if(i&1&&(r(0,"td",19)(1,"span",26),n(2),k(3,"titlecase"),o()()),i&2){let t=e.$implicit;l(),h("ngClass","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(t.status==="completed"?"bg-green-100 text-green-800":t.status==="pending"?"bg-yellow-100 text-yellow-800":t.status==="failed"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800")),l(),y(" ",N(3,2,t.status)," ")}}function Zr(i,e){i&1&&E(0,"tr",27)}function ea(i,e){i&1&&E(0,"tr",28)}function ta(i,e){if(i&1&&(r(0,"div",2)(1,"table",5),$(2,6),q(3,Hr,2,0,"th",7)(4,$r,2,1,"td",8),W(),$(5,9),q(6,Wr,2,0,"th",7)(7,Gr,7,3,"td",8),W(),$(8,10),q(9,zr,2,0,"th",7)(10,Yr,3,3,"td",11),W(),$(11,12),q(12,Kr,2,0,"th",13)(13,Qr,2,1,"td",14),W(),$(14,15),q(15,Jr,2,0,"th",7)(16,Xr,4,4,"td",8),W(),q(17,Zr,1,0,"tr",16)(18,ea,1,0,"tr",17),o()()),i&2){let t=d();l(),h("dataSource",t.withdrawals),l(16),h("matHeaderRowDef",t.displayedColumns),l(),h("matRowDefColumns",t.displayedColumns)}}var Lt=class i{withdrawals=[];loading=!1;displayedColumns=["date","method","description","amount","status"];formatDate(e){return(typeof e=="string"?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}formatCurrency(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=F({type:i,selectors:[["app-earnings-withdrawals-history"]],inputs:{withdrawals:"withdrawals",loading:"loading"},decls:3,vars:1,consts:[[1,"p-6","text-center"],["icon","account_balance_wallet","title","No Withdrawals Yet","description","Your withdrawal history will appear here once you make your first withdrawal."],[1,"overflow-x-auto"],["diameter","30"],[1,"mt-2","text-gray-600"],["mat-table","",1,"w-full",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","method"],["matColumnDef","description"],["mat-cell","","class","text-gray-600",4,"matCellDef"],["matColumnDef","amount"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right font-semibold text-red-600",4,"matCellDef"],["matColumnDef","status"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","hover:bg-gray-50",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"flex","items-center","gap-2"],[1,"text-blue-600"],[1,"font-medium"],["mat-cell","",1,"text-gray-600"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right","font-semibold","text-red-600"],[3,"ngClass"],["mat-header-row",""],["mat-row","",1,"hover:bg-gray-50"]],template:function(t,a){t&1&&p(0,Lr,4,0,"div",0)(1,Ur,1,0,"app-empty-state",1)(2,ta,19,3,"div",2),t&2&&u(a.loading?0:a.withdrawals.length===0?1:2)},dependencies:[I,ve,ie,ge,gt,ft,vt,xt,_t,bt,ht,Ct,yt,wt,O,V,A,B,ee,Z,Re,re],encapsulation:2})};function ia(i,e){if(i&1){let t=P();r(0,"button",12),b("click",function(){f(t);let s=d();return x(s.handleStripeAction("dashboard"))}),r(1,"mat-icon"),n(2,"dashboard"),o(),r(3,"span"),n(4,"View Stripe Dashboard"),o()(),r(5,"button",12),b("click",function(){f(t);let s=d();return x(s.handleStripeAction("disconnect"))}),r(6,"mat-icon"),n(7,"link_off"),o(),r(8,"span"),n(9,"Disconnect Account"),o()()}if(i&2){let t=d();h("disabled",t.stripeLoading()),l(5),h("disabled",t.stripeLoading())}}function na(i,e){if(i&1){let t=P();r(0,"button",12),b("click",function(){f(t);let s=d();return x(s.handleStripeAction("connect"))}),r(1,"mat-icon"),n(2,"link"),o(),r(3,"span"),n(4,"Connect Stripe Account"),o()()}if(i&2){let t=d();h("disabled",t.stripeLoading())}}function oa(i,e){if(i&1){let t=P();E(0,"mat-divider"),r(1,"button",12),b("click",function(){f(t);let s=d();return x(s.withdrawToStripe())}),r(2,"mat-icon"),n(3,"account_balance_wallet"),o(),r(4,"span"),n(5,"Withdraw Funds"),o()()}if(i&2){let t=d();l(),h("disabled",t.stripeLoading())}}function ra(i,e){i&1&&(r(0,"div",9),E(1,"mat-spinner",13),o())}function aa(i,e){if(i&1){let t=P();r(0,"div",10)(1,"mat-card",14)(2,"mat-card-content",15)(3,"div",16)(4,"mat-icon",17),n(5,"error"),o(),r(6,"div",18)(7,"h3",19),n(8,"Error Loading Data"),o(),r(9,"p",20),n(10),o(),r(11,"button",21),b("click",function(){f(t);let s=d();return x(s.retryLoad())}),r(12,"mat-icon",22),n(13,"refresh"),o(),n(14," Try Again "),o()()()()()()}if(i&2){let t=d();l(10),C(t.error())}}function sa(i,e){if(i&1){let t=P();r(0,"button",47),b("click",function(){f(t);let s=d(2);return x(s.clearFilters())}),r(1,"mat-icon"),n(2,"clear"),o(),n(3," Clear Filters "),o()}}function la(i,e){if(i&1){let t=P();r(0,"div",11)(1,"div"),E(2,"app-earnings-summary-cards",23),o(),r(3,"div")(4,"app-business-search-filter",24),b("searchChange",function(s){f(t);let g=d();return x(g.filterForm.patchValue({search:s}))})("viewModeChange",function(s){f(t);let g=d();return x(g.setViewMode(s))})("clearSearch",function(){f(t);let s=d();return x(s.filterForm.patchValue({search:""}))}),r(5,"div",25)(6,"mat-form-field",26)(7,"mat-label"),n(8,"Date Range"),o(),r(9,"mat-date-range-input",27),E(10,"input",28)(11,"input",29),o(),r(12,"mat-icon",30),n(13,"date_range"),o(),E(14,"mat-date-range-picker",null,1),o()(),r(16,"div",25)(17,"mat-form-field",26)(18,"mat-label"),n(19,"Activity Type"),o(),r(20,"mat-select",31),b("selectionChange",function(s){f(t);let g=d();return x(g.onActivityFilterChange(s))}),r(21,"mat-option",32),n(22,"All Activities"),o(),r(23,"mat-option",33),n(24,"Project Started"),o(),r(25,"mat-option",34),n(26,"Project Completed"),o(),r(27,"mat-option",35),n(28,"Additional Payment"),o(),r(29,"mat-option",36),n(30,"Payment Cleared"),o(),r(31,"mat-option",37),n(32,"Withdrawal"),o(),r(33,"mat-option",38),n(34,"Refund"),o(),r(35,"mat-option",39),n(36,"Platform Fee"),o()(),r(37,"mat-icon",30),n(38,"filter_list"),o()()(),p(39,sa,4,0,"button",40),o()(),r(40,"mat-card",41)(41,"mat-card-header",42)(42,"mat-card-title"),n(43,"Transaction History"),o(),r(44,"mat-card-subtitle"),n(45,"View your earnings and withdrawal history"),o()(),r(46,"mat-tab-group")(47,"mat-tab",43)(48,"app-earnings-transaction-history",44),b("clearFilters",function(){f(t);let s=d();return x(s.handleClearFilters())}),o()(),r(49,"mat-tab",45),E(50,"app-earnings-withdrawals-history",46),o()()()()}if(i&2){let t,a=Ne(15),s=d();l(2),h("summary",s.earningsSummary())("stripeConnectionStatus",s.stripeConnectionStatus()),l(2),h("searchTerm",((t=s.filterForm.get("search"))==null?null:t.value)||"")("viewMode",s.viewMode())("hideViewModeToggle",!1),l(5),h("rangePicker",a)("formGroup",s.filterForm),l(30),u(s.hasActiveFilters()?39:-1),l(9),h("transactions",s.transactions())("filteredTransactions",s.filteredTransactions())("loadingTransactions",s.loadingTransactions())("viewMode",s.viewMode())("hasActiveFilters",s.hasActiveFilters()),l(2),h("withdrawals",s.withdrawals())("loading",s.stripeLoading())}}var Ut=class i{Math=Math;http=S(Ze);stripeConnectService=S(_i);withdrawalService=S(Vt);dialog=S(jt);snackBar=S(Fe);fb=S(Te);apiUrl=`${st.api.baseUrl}/wallets`;loading=w(!1);loadingTransactions=w(!1);earningsSummary=w(null);transactions=w([]);filteredTransactions=w([]);error=w(null);viewMode=w("list");stripeAccountStatus=w({has_account:!1,payouts_enabled:!1,requirements_due:!1});withdrawals=w([]);stripeLoading=w(!1);filterForm=this.fb.group({startDate:[null],endDate:[null],activityFilter:[""]});hasEarnings=T(()=>{let e=this.earningsSummary();return e&&e.total_earnings>0});canWithdraw=T(()=>{let e=this.earningsSummary();return e&&e.available>0});showEmptyState=T(()=>{let e=this.earningsSummary(),t=this.transactions();return!this.loading()&&e&&t.length===0});hasActiveFilters=T(()=>{let e=this.filterForm.value;return!!(e.startDate||e.endDate||e.activityFilter&&e.activityFilter!=="")});hasStripeAccount=T(()=>{let e=this.stripeAccountStatus();return e.has_account&&e.payouts_enabled&&!e.requirements_due});canWithdrawToStripe=T(()=>this.canWithdraw()&&this.hasStripeAccount());stripeConnectionStatus=T(()=>{let e=this.stripeAccountStatus();return e.has_account?e.requirements_due?"pending":e.payouts_enabled?"connected":"failed":"not-connected"});displayedColumns=["date","type","description","amount","status"];ngOnInit(){return v(this,null,function*(){yield this.loadEarningsSummary(),yield this.loadTransactions(),yield this.loadStripeAccountStatus(),yield this.loadWithdrawals(),this.filterForm.valueChanges.subscribe(()=>{this.applyFilters()})})}loadEarningsSummary(){return v(this,null,function*(){console.log("\u{1F504} Loading earnings summary..."),this.loading.set(!0),this.error.set(null);try{console.log("\u{1F4E1} Making API call to:",`${this.apiUrl}/summary`);let e=yield K(this.http.get(`${this.apiUrl}/summary`));if(console.log("\u2705 API Response:",e),e)this.earningsSummary.set(e),console.log("\u{1F4B0} Earnings summary set:",e);else{console.log("\u{1F3D7}\uFE0F No earnings data, setting default...");let t={active_orders:0,payments_clearing:0,available:0,total_earnings:0};this.earningsSummary.set(t)}}catch(e){if(console.error("\u274C Error loading earnings summary:",e),console.error("Error details:",{status:e.status,statusText:e.statusText,message:e.message,url:e.url}),e.status===401)this.error.set("Authentication failed. Please log in again.");else if(e.status===404){console.log("\u{1F3D7}\uFE0F Wallets not found, setting default summary...");let t={active_orders:0,payments_clearing:0,available:0,total_earnings:0};this.earningsSummary.set(t)}else this.error.set("Failed to load earnings data")}finally{this.loading.set(!1),console.log("\u{1F3C1} Loading complete. Summary:",this.earningsSummary())}})}loadTransactions(){return v(this,null,function*(){this.loadingTransactions.set(!0);try{let t=(yield K(this.http.get(`${this.apiUrl}/transactions`)))||[];this.transactions.set(t);let a=[...new Set(t.map(s=>s.transaction_type))];console.log("Available transaction types in data:",a),this.applyFilters()}catch(e){console.error("Error loading transactions:",e),this.transactions.set([]),this.filteredTransactions.set([])}finally{this.loadingTransactions.set(!1)}})}formatCurrency(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}getTransactionTypeLabel(e){return{project_started:"Project Started",project_completed:"Project Completed",additional_payment:"Additional Payment",payment_cleared:"Payment Cleared",withdrawal:"Withdrawal",refund:"Refund",platform_fee:"Platform Fee"}[e]||e}getStatusColor(e){return{completed:"text-green-600",pending:"text-yellow-600",failed:"text-red-600",cancelled:"text-gray-600"}[e]||"text-gray-600"}getTransactionTypeColor(e){return{project_started:"text-blue-600",project_completed:"text-green-600",additional_payment:"text-green-600",payment_cleared:"text-purple-600",withdrawal:"text-red-600",platform_fee:"text-orange-600",refund:"text-purple-600"}[e]||"text-gray-600"}retryLoad(){return v(this,null,function*(){yield this.loadEarningsSummary(),yield this.loadTransactions()})}loadStripeAccountStatus(){return v(this,null,function*(){try{this.stripeLoading.set(!0);let e=yield K(this.stripeConnectService.getAccountStatus());this.stripeAccountStatus.set(e)}catch(e){console.error("Error loading Stripe account status:",e)}finally{this.stripeLoading.set(!1)}})}refreshStripeAccountStatus(){return v(this,null,function*(){try{this.stripeLoading.set(!0);let e=yield K(this.stripeConnectService.refreshAccountStatus());this.stripeAccountStatus.set(e),this.snackBar.open("Stripe account status refreshed","Close",{duration:3e3})}catch(e){console.error("Error refreshing Stripe account status:",e),this.snackBar.open("Failed to refresh Stripe status","Close",{duration:3e3})}finally{this.stripeLoading.set(!1)}})}loadWithdrawals(){return v(this,null,function*(){try{let e=yield K(this.withdrawalService.getWithdrawals());this.withdrawals.set(e.withdrawals)}catch(e){console.error("Error loading withdrawals:",e)}})}connectStripe(){return v(this,null,function*(){try{this.stripeLoading.set(!0);let e=yield K(this.stripeConnectService.createOrGetAccount());e.onboarding_url?window.location.href=e.onboarding_url:(yield this.loadStripeAccountStatus(),this.snackBar.open("Stripe account already connected","Close",{duration:3e3}))}catch(e){console.error("Error connecting Stripe:",e),this.snackBar.open("Failed to connect Stripe account","Close",{duration:3e3})}finally{this.stripeLoading.set(!1)}})}withdrawToStripe(){return v(this,null,function*(){let e=this.earningsSummary();if(!e||e.available<=0){this.snackBar.open("No funds available for withdrawal","Close",{duration:3e3});return}if(!this.hasStripeAccount()){this.snackBar.open("Please complete your Stripe account setup first","Close",{duration:3e3});return}try{let t={amount:e.available,method:"stripe"},a=yield K(this.withdrawalService.createWithdrawal(t));this.snackBar.open(`Withdrawal of $${e.available.toFixed(2)} initiated successfully`,"Close",{duration:5e3}),yield this.loadEarningsSummary(),yield this.loadWithdrawals()}catch(t){console.error("Error initiating withdrawal:",t),t.error?.message?.includes("payouts not enabled")||t.error?.message?.includes("Stripe payouts not enabled")?(this.snackBar.open("Stripe payouts not enabled. Refreshing account status...","Close",{duration:5e3}),yield this.refreshStripeAccountStatus()):this.snackBar.open("Failed to initiate withdrawal","Close",{duration:3e3})}})}disconnectStripe(){return v(this,null,function*(){if(!this.hasStripeAccount()){this.snackBar.open("No Stripe account connected","Close",{duration:3e3});return}let e={title:"Disconnect Stripe Account",message:"Are you sure you want to disconnect your Stripe account? You will not be able to withdraw funds until you reconnect. Any pending withdrawals will continue to process normally.",confirmText:"Disconnect",cancelText:"Keep Connected",type:"warning",icon:"warning"},t=this.dialog.open(Bt,{width:"450px",data:e,disableClose:!0});if(yield K(t.afterClosed()))try{this.stripeLoading.set(!0);let s=yield K(this.stripeConnectService.disconnectAccount());s.success?(this.snackBar.open("Stripe account disconnected successfully","Close",{duration:3e3}),yield this.loadStripeAccountStatus()):this.snackBar.open(s.message||"Failed to disconnect Stripe account","Close",{duration:3e3})}catch(s){console.error("Error disconnecting Stripe:",s),this.snackBar.open("Failed to disconnect Stripe account","Close",{duration:3e3})}finally{this.stripeLoading.set(!1)}})}openStripeDashboard(){return v(this,null,function*(){if(!this.hasStripeAccount()){this.snackBar.open("No Stripe account connected","Close",{duration:3e3});return}try{this.stripeLoading.set(!0);let e=yield K(this.stripeConnectService.createLoginLink());e.url&&window.open(e.url,"_blank")}catch(e){console.error("Error opening Stripe dashboard:",e),this.snackBar.open("Failed to open Stripe dashboard","Close",{duration:3e3})}finally{this.stripeLoading.set(!1)}})}onDateFilterChange(){console.log("Date filter changed:",this.filterForm.value),this.applyFilters()}onActivityFilterChange(e){console.log("Activity filter changed:",this.filterForm.value,e),this.applyFilters()}clearFilters(){this.filterForm.reset({startDate:null,endDate:null,activityFilter:""}),this.applyFilters()}applyFilters(){let e=this.filterForm.value,t=[...this.transactions()];if(console.log("Applying filters with form value:",e),console.log("Original transactions count:",t.length),e.startDate||e.endDate){let a=t.length;t=t.filter(s=>{let g=new Date(s.createdAt);return!(e.startDate&&g<new Date(e.startDate)||e.endDate&&g>new Date(e.endDate))}),console.log("After date filter:",t.length,"removed:",a-t.length)}if(e.activityFilter&&e.activityFilter!==""){let a=t.length;t=t.filter(s=>{let g=s.transaction_type===e.activityFilter;return console.log("Transaction type:",s.transaction_type,"Filter:",e.activityFilter,"Matches:",g),g}),console.log("After activity filter:",t.length,"removed:",a-t.length)}console.log("Final filtered transactions count:",t.length),this.filteredTransactions.set(t)}setViewMode(e){this.viewMode.set(e)}emailActivityReport(){return v(this,null,function*(){try{this.loading.set(!0),this.snackBar.open("Activity report sent to your email","Close",{duration:3e3})}catch(e){console.error("Error sending email report:",e),this.snackBar.open("Failed to send email report","Close",{duration:3e3})}finally{this.loading.set(!1)}})}handleStripeAction(e){return v(this,null,function*(){switch(e){case"dashboard":yield this.openStripeDashboard();break;case"disconnect":yield this.disconnectStripe();break;case"connect":yield this.connectStripe();break}})}handleClearFilters=()=>{this.clearFilters()};handleStartEarning=()=>{window.location.href="/dashboard/businesses/create"};static \u0275fac=function(t){return new(t||i)};static \u0275cmp=F({type:i,selectors:[["app-earnings"]],decls:17,vars:7,consts:[["stripeMenu","matMenu"],["picker",""],[1,"min-h-screen","bg-gray-50"],[1,"lg:max-w-7xl","max-w-12xl"],[1,"px-6","pt-6"],["title","Earnings & Payments","subtitle","Manage your earnings, track payments, and request withdrawals"],["mat-raised-button","","matButton","filled",1,"flex","items-center","gap-2",3,"matMenuTriggerFor","color","disabled"],[1,"ml-1"],["mat-menu-item","",3,"disabled"],[1,"px-6","flex","items-center","justify-center","py-12"],[1,"px-6"],[1,"px-6","space-y-6","pb-12"],["mat-menu-item","",3,"click","disabled"],["diameter","40"],[1,"bg-red-50","border-l-4","border-red-400"],[1,"p-6"],[1,"flex","items-start","gap-4"],[1,"text-red-600","text-4xl","mt-1"],[1,"flex-1"],[1,"text-lg","font-semibold","text-red-900","mb-2"],[1,"text-red-700","mb-4"],["mat-raised-button","","color","warn",3,"click"],[1,"mr-2"],[3,"summary","stripeConnectionStatus"],[3,"searchChange","viewModeChange","clearSearch","searchTerm","viewMode","hideViewModeToggle"],[1,"w-full","sm:w-56"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],[3,"rangePicker","formGroup"],["matStartDate","","formControlName","startDate","placeholder","Start date"],["matEndDate","","formControlName","endDate","placeholder","End date"],["matPrefix",""],["formControlName","activityFilter",3,"selectionChange"],["value",""],["value","project_started"],["value","project_completed"],["value","additional_payment"],["value","payment_cleared"],["value","withdrawal"],["value","refund"],["value","platform_fee"],["mat-stroked-button",""],[1,"overflow-hidden","bg-white!"],[1,"p-6!","border-b","border-gray-200"],["label","Earnings"],[3,"clearFilters","transactions","filteredTransactions","loadingTransactions","viewMode","hasActiveFilters"],["label","Withdrawals"],[3,"withdrawals","loading"],["mat-stroked-button","",3,"click"]],template:function(t,a){if(t&1&&(r(0,"div",2)(1,"div",3)(2,"div",4)(3,"app-dashboard-subheader",5)(4,"button",6)(5,"span"),n(6),o(),r(7,"mat-icon",7),n(8,"arrow_drop_down"),o()(),r(9,"mat-menu",null,0),p(11,ia,10,2)(12,na,5,1,"button",8),p(13,oa,6,1),o()()(),p(14,ra,2,0,"div",9)(15,aa,15,1,"div",10)(16,la,51,15,"div",11),o()()),t&2){let s=Ne(10);l(4),h("matMenuTriggerFor",s)("color",a.hasStripeAccount()?"primary":"accent")("disabled",a.stripeLoading()),l(2),C(a.stripeLoading()?"Loading...":"Stripe Account"),l(5),u(a.hasStripeAccount()?11:12),l(2),u(a.canWithdrawToStripe()?13:-1),l(),u(a.loading()?14:a.error()?15:a.earningsSummary()?16:-1)}},dependencies:[I,tt,le,lt,Ee,je,Pe,Me,O,z,te,Se,we,ye,B,X,V,A,ee,Z,ie,pt,ut,ge,Pt,Ie,me,ce,de,ct,ke,ue,pe,se,Ni,Di,Fi,Ii,Ri,Zt,gi,be,ot,nt,rt,at,ii,ti,St,Et,Ot,qt,Lt],styles:[".earnings-container[_ngcontent-%COMP%]{min-height:calc(100vh - 64px)}.mat-mdc-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;transition:box-shadow .2s ease-in-out}.mat-mdc-card[_ngcontent-%COMP%]:hover{box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}.transaction-tabs[_ngcontent-%COMP%]   .mat-mdc-tab-group[_ngcontent-%COMP%]{--mat-tab-divider-color: #e5e7eb}.transaction-tabs[_ngcontent-%COMP%]   .mat-mdc-tab[_ngcontent-%COMP%]{min-width:120px}.mat-mdc-table[_ngcontent-%COMP%]{background:transparent}.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{background:#f9fafb;border-bottom:1px solid #e5e7eb;font-weight:600;color:#374151;padding:16px}.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid #f3f4f6;padding:16px}.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]:hover{background-color:#f9fafb}button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;font-weight:500;transition:all .2s ease-in-out}button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:4px 8px;border-radius:9999px;font-size:12px;font-weight:500}.status-badge.completed[_ngcontent-%COMP%]{background-color:#dcfce7;color:#166534}.status-badge.pending[_ngcontent-%COMP%]{background-color:#fef3c7;color:#92400e}.status-badge.failed[_ngcontent-%COMP%]{background-color:#fee2e2;color:#991b1b}.status-badge.cancelled[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#6b7280}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.animate-pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s cubic-bezier(.4,0,.6,1) infinite}@media (max-width: 768px){.earnings-container[_ngcontent-%COMP%]{padding:16px}.grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.mat-mdc-table[_ngcontent-%COMP%]{font-size:14px}.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%], .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:8px}}"]})};var qe=(i,e)=>{let t=S(G),a=S(ae);return(t.user()?.user_mode||"client")!=="business_owner"?(a.navigate(["/dashboard/projects"]),!1):!0};var Dc=[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"overview",component:Mt,canActivate:[qe]},{path:"businesses",loadChildren:()=>import("./chunk-6DT7VXDO.js").then(i=>i.BUSINESSES_ROUTES),canActivate:[qe]},{path:"services",loadChildren:()=>import("./chunk-YZGVFH3F.js").then(i=>i.SERVICES_ROUTES),canActivate:[qe]},{path:"notifications",loadChildren:()=>import("./chunk-P6XE4KHS.js").then(i=>i.NOTIFICATION_ROUTES)},{path:"messages",loadChildren:()=>import("./chunk-NVXEIKX3.js").then(i=>i.MESSAGES_ROUTES)},{path:"favorites",loadComponent:()=>import("./chunk-4FFSEPX2.js").then(i=>i.FavoritesComponent)},{path:"projects",component:Dt},{path:"projects/:id",component:It},{path:"earnings",component:Ut,canActivate:[qe]},{path:"profile",component:Nt},{path:"settings",component:At},{path:"test-notifications",component:Rt},{path:"**",redirectTo:""}];export{Dc as DASHBOARD_ROUTES};
