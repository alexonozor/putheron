import{a as jt,b as qt,c as Ut}from"./chunk-4UHM6MY7.js";import{a as Fe,b as Ot}from"./chunk-PZHKCHJL.js";import{a as wt,b as Et,c as Bt,d as Tt,f as Ft,g as Mt,i as It}from"./chunk-N22VLU7D.js";import{a as ot,b as st}from"./chunk-ROYNIK6S.js";import{a as tt,b as it,c as Ce,d as nt}from"./chunk-PUTTUKWR.js";import{a as W,c as he,e as at,h as H}from"./chunk-FY37IJMK.js";import{a as Nt,b as At}from"./chunk-KOJLXHDK.js";import{a as Pt,b as Vt,c as Lt}from"./chunk-OMUNWLS7.js";import{a as kt,b as Dt}from"./chunk-IW3LDG4W.js";import"./chunk-SNNT4QTV.js";import{d as fe,h as Ee,i as Be,j as Te,l as yt,m as St}from"./chunk-KLUGINDR.js";import"./chunk-7SWJOEN5.js";import"./chunk-J6NDGHDX.js";import{d as ye,e as bt,f as vt,g as Se,h as ht,k as we}from"./chunk-CLNTNSKJ.js";import{A as Ct,B as xt,C as gt,c as rt,e as w,h as lt,i as dt,m as mt,q as ct,r as ut,s as pt,y as _t,z as ft}from"./chunk-U7A7OHU6.js";import{a as ge}from"./chunk-MNGBVTM3.js";import{a as xe}from"./chunk-4MGQA2I3.js";import"./chunk-EPCACDVR.js";import{a as be,b as ve}from"./chunk-U3KPP4N4.js";import{a as ee,s as et,t as G,u as U}from"./chunk-VSWUYYDO.js";import"./chunk-LDSTDJZ6.js";import"./chunk-QD7SSFII.js";import{a as j,b as q}from"./chunk-QFHPWKDD.js";import{d as _e}from"./chunk-O2FJLJYH.js";import{e as ce,f as Ze,g as ue,l as pe}from"./chunk-72SEU4B5.js";import"./chunk-JFMUERLE.js";import{t as O}from"./chunk-FI3M32ZM.js";import{$a as r,$b as m,Fb as u,Gb as p,Ib as z,Jb as T,Kb as F,Lb as _,Mb as i,Nb as t,Ob as C,Rc as Xe,Vb as M,Ya as E,Zb as f,dc as le,eb as N,ec as de,fa as I,fc as me,jc as k,ka as x,kc as A,la as g,lc as X,ma as K,mc as $,na as re,nc as o,oc as b,pc as y,qb as D,qc as Z,ua as h,yc as Ne}from"./chunk-M7BUBJMW.js";import{a as ae,e as L}from"./chunk-JKOY2XUY.js";var Qt=["addressInput"],zt=()=>["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],$t=(n,s)=>s._id,Gt=(n,s)=>s.preview;function Jt(n,s){if(n&1&&(i(0,"div",6),C(1,"mat-spinner",9),t()),n&2){let e=m();r(),_("diameter",e.isMobile()?40:60)("strokeWidth",4)}}function Kt(n,s){if(n&1){let e=M();i(0,"div",7)(1,"div",10)(2,"div",11)(3,"mat-icon",12),o(4,"error_outline"),t()(),i(5,"h3",13),o(6),t(),i(7,"div",14)(8,"button",15),f("click",function(){x(e);let l=m();return g(l.goBack())}),o(9," Go Back "),t(),i(10,"button",16),f("click",function(){x(e);let l=m();return g(l.loadData())}),o(11," Try Again "),t()()()()}if(n&2){let e=m();r(6),b(e.error())}}function Xt(n,s){n&1&&(i(0,"mat-error"),o(1,"Business name is required"),t())}function Zt(n,s){n&1&&(i(0,"mat-error"),o(1,"Business name must be at least 2 characters"),t())}function ei(n,s){n&1&&(i(0,"mat-error"),o(1,"Business description is required"),t())}function ti(n,s){n&1&&(i(0,"mat-error"),o(1,"Description must be at least 10 characters"),t())}function ii(n,s){n&1&&(i(0,"mat-error"),o(1,"Please select a business type"),t())}function ni(n,s){if(n&1&&(i(0,"mat-option",34),o(1),t()),n&2){let e=s.$implicit;_("value",e._id),r(),y(" ",e.name," ")}}function oi(n,s){n&1&&(i(0,"mat-error"),o(1,"Please select a category"),t())}function si(n,s){if(n&1&&(i(0,"mat-option",34),o(1),t()),n&2){let e=s.$implicit;_("value",e._id),r(),y(" ",e.name," ")}}function ai(n,s){if(n&1&&(i(0,"mat-form-field",24)(1,"mat-label"),o(2,"Subcategory (Optional)"),t(),i(3,"mat-select",126)(4,"mat-option",127),o(5,"None"),t(),T(6,si,2,2,"mat-option",34,$t),t()()),n&2){let e=m(2);r(6),F(e.subcategories())}}function ri(n,s){n&1&&(i(0,"div",36)(1,"mat-icon",128),o(2,"info"),t(),o(3," Please fill in all required fields to continue "),t())}function li(n,s){n&1&&(i(0,"mat-icon",50),o(1,"lock"),t())}function di(n,s){n&1&&(i(0,"mat-error"),o(1,"City is required"),t())}function mi(n,s){n&1&&(i(0,"mat-icon",50),o(1,"lock"),t())}function ci(n,s){n&1&&(i(0,"mat-icon",50),o(1,"lock"),t())}function ui(n,s){n&1&&(i(0,"div",58)(1,"mat-icon",129),o(2,"check_circle"),t(),i(3,"span")(4,"strong"),o(5,"Location saved!"),t(),o(6," Coordinates automatically detected from address."),t()())}function pi(n,s){n&1&&(i(0,"div",59)(1,"mat-icon",130),o(2,"info"),t(),i(3,"span"),o(4,"Use the address search above for automatic location detection and coordinates."),t()())}function _i(n,s){n&1&&(i(0,"mat-error"),o(1,"Please enter a valid email address"),t())}function fi(n,s){n&1&&(i(0,"mat-error"),o(1,"Business phone is required"),t())}function Ci(n,s){if(n&1&&(i(0,"mat-error"),o(1),t()),n&2){let e=m(2);r(),b(e.contact_phone==null||e.contact_phone.errors==null||e.contact_phone.errors.usaPhone==null?null:e.contact_phone.errors.usaPhone.message)}}function xi(n,s){if(n&1){let e=M();i(0,"div",67),C(1,"img",131),i(2,"button",132),f("click",function(){x(e);let l=m(2);return g(l.removeLogoPreview())}),i(3,"mat-icon",133),o(4,"close"),t()()()}if(n&2){let e=m(2);r(),_("src",e.logoPreview(),E)}}function gi(n,s){n&1&&(i(0,"div",68)(1,"mat-icon",134),o(2,"image"),t()())}function bi(n,s){if(n&1){let e=M();i(0,"div",67),C(1,"img",135),i(2,"button",136),f("click",function(){x(e);let l=m(2);return g(l.removeBannerPreview())}),i(3,"mat-icon",133),o(4,"close"),t()()()}if(n&2){let e=m(2);r(),_("src",e.bannerPreview(),E)}}function vi(n,s){n&1&&(i(0,"div",74)(1,"div",137)(2,"mat-icon",138),o(3,"image"),t(),i(4,"p",139),o(5,"Banner Image"),t()()())}function hi(n,s){if(n&1&&C(0,"img",140),n&2){let e=m().$implicit;_("src",e.preview,E)("alt",e.file.name)}}function yi(n,s){if(n&1&&C(0,"img",141),n&2){let e=m().$implicit;_("src",e.preview,E)}}function Si(n,s){if(n&1&&(i(0,"div",142)(1,"mat-icon",143),o(2,"description"),t(),i(3,"div",69)(4,"p",144),o(5),t(),i(6,"p",145),o(7),t()()()),n&2){let e=m().$implicit;r(5),b((e.file==null?null:e.file.name)||"SOS Certification Document"),r(2),b((e.file==null?null:e.file.type)||"Document")}}function wi(n,s){if(n&1){let e=M();i(0,"div",67),u(1,hi,1,2,"img",140)(2,yi,1,1,"img",141)(3,Si,8,2,"div",142),i(4,"button",136),f("click",function(){let l=x(e).$implicit,d=m(3);return g(d.removeSosCertificationFile(l))}),i(5,"mat-icon",133),o(6,"close"),t()()()}if(n&2){let e=s.$implicit;r(),p(e.file&&e.file.type&&e.file.type.startsWith("image/")?1:!e.file&&(e.preview.includes(".jpg")||e.preview.includes(".jpeg")||e.preview.includes(".png")||e.preview.includes("/image/"))?2:3)}}function Ei(n,s){if(n&1&&(i(0,"div",27),T(1,wi,7,1,"div",67,Gt),t()),n&2){let e=m(2);r(),F(e.sosCertificationPreviews())}}function Bi(n,s){if(n&1&&C(0,"img",146),n&2){let e=m(3);_("src",e.sosCertificationPreview(),E)}}function Ti(n,s){if(n&1&&(i(0,"div",142)(1,"mat-icon",143),o(2,"description"),t(),i(3,"div",69)(4,"p",144),o(5),t(),i(6,"p",145),o(7),t()()()),n&2){let e=m(3);r(5),b(e.sosCertificationPreview()),r(2),b(e.sosCertificationFile==null?null:e.sosCertificationFile.type)}}function Fi(n,s){if(n&1){let e=M();i(0,"div",67),u(1,Bi,1,1,"img",146)(2,Ti,8,2,"div",142),i(3,"button",136),f("click",function(){x(e);let l=m(2);return g(l.removeSosCertificationPreview())}),i(4,"mat-icon",133),o(5,"close"),t()()()}if(n&2){let e=m(2);r(),p(e.sosCertificationFile&&e.sosCertificationFile.type.startsWith("image/")?1:2)}}function Mi(n,s){n&1&&(i(0,"div",76)(1,"div",137)(2,"mat-icon",147),o(3,"upload_file"),t(),i(4,"p",148),o(5,"SOS Certification Documents"),t()()())}function Ii(n,s){n&1&&(i(0,"div",81)(1,"mat-icon",129),o(2,"info"),t(),i(3,"span"),o(4,"Please complete required location fields to continue"),t()())}function ki(n,s){n&1&&(i(0,"mat-error"),o(1,"Please select a business stage"),t())}function Di(n,s){if(n&1&&(i(0,"div",91)(1,"div",149)(2,"div",150),o(3),t(),i(4,"mat-checkbox",151),o(5,"Closed"),t()(),i(6,"div",152)(7,"mat-form-field",24)(8,"mat-label"),o(9,"Open Time"),t(),C(10,"input",153),t(),i(11,"mat-form-field",24)(12,"mat-label"),o(13,"Close Time"),t(),C(14,"input",154),t()()()),n&2){let e,a,l,d=s.$implicit,v=m(2);_("formGroupName",d),r(3),b(d),r(3),X("opacity-50",(e=v.businessComplianceForm.get("business_hours"))==null||(e=e.get(d))==null||(e=e.get("closed"))==null?null:e.value),r(4),_("disabled",(a=v.businessComplianceForm.get("business_hours"))==null||(a=a.get(d))==null||(a=a.get("closed"))==null?null:a.value),r(4),_("disabled",(l=v.businessComplianceForm.get("business_hours"))==null||(l=l.get(d))==null||(l=l.get("closed"))==null?null:l.value)}}function Pi(n,s){if(n&1&&(i(0,"mat-option",34),o(1),t()),n&2){let e=s.$implicit;_("value",e),r(),b(e)}}function Vi(n,s){n&1&&(i(0,"mat-error"),o(1,"Please select the registered state"),t())}function Li(n,s){if(n&1&&(i(0,"mat-form-field",24)(1,"mat-label"),o(2,"Registered State"),t(),i(3,"mat-select",155),T(4,Pi,2,2,"mat-option",34,z),t(),u(6,Vi,2,0,"mat-error"),t()),n&2){let e,a=m(2);r(4),F(a.usStates),r(2),p((e=a.businessComplianceForm.get("registered_state"))!=null&&e.hasError("required")&&((e=a.businessComplianceForm.get("registered_state"))!=null&&e.touched)?6:-1)}}function Ni(n,s){n&1&&(i(0,"mat-error"),o(1,"Please enter a valid Tax ID in format: SSN (888-88-8888) or EIN (88-8888888)"),t())}function Ai(n,s){n&1&&(i(0,"div",100)(1,"mat-icon",156),o(2,"error"),t(),o(3," You must confirm this attestation to continue "),t())}function Oi(n,s){n&1&&(i(0,"div",101)(1,"mat-icon",128),o(2,"info"),t(),o(3," Please complete all required fields "),t())}function ji(n,s){if(n&1&&(i(0,"div"),o(1),t()),n&2){let e,a=m(2);r(),b((e=a.businessDetailsForm.get("address"))==null?null:e.value)}}function qi(n,s){if(n&1&&(i(0,"span"),o(1),t()),n&2){let e,a=m(2);r(),y(", ",(e=a.businessDetailsForm.get("state"))==null?null:e.value)}}function Ui(n,s){if(n&1&&(i(0,"div"),o(1),t()),n&2){let e,a=m(2);r(),b(((e=a.businessDetailsForm.get("country"))==null?null:e.value)||"USA")}}function Ri(n,s){if(n&1&&(i(0,"div",108)(1,"span",109),o(2,"Email:"),t(),i(3,"span",157),o(4),t()()),n&2){let e,a=m(2);r(4),b((e=a.businessDetailsForm.get("contact_email"))==null?null:e.value)}}function zi(n,s){if(n&1&&(i(0,"div",108)(1,"span",109),o(2,"Phone:"),t(),i(3,"span",110),o(4),t()()),n&2){let e,a=m(2);r(4),b((e=a.businessDetailsForm.get("contact_phone"))==null?null:e.value)}}function $i(n,s){if(n&1&&(i(0,"div",108)(1,"span",109),o(2,"Website:"),t(),i(3,"span",157),o(4),t()()),n&2){let e,a=m(2);r(4),b((e=a.businessDetailsForm.get("website"))==null?null:e.value)}}function Gi(n,s){if(n&1&&(i(0,"div",116),C(1,"img",158),i(2,"div")(3,"p",159),o(4,"Logo uploaded"),t(),i(5,"p",145),o(6,"Ready for display"),t()()()),n&2){let e=m(2);r(),_("src",e.logoPreview(),E)}}function Wi(n,s){n&1&&(i(0,"div",117)(1,"div",160)(2,"mat-icon",134),o(3,"image"),t()(),i(4,"div")(5,"p",133),o(6,"No logo uploaded"),t(),i(7,"p",161),o(8,"Optional - can be added later"),t()()())}function Hi(n,s){if(n&1&&(i(0,"div",118),C(1,"img",162),i(2,"div",163)(3,"mat-icon",124),o(4,"check_circle"),t(),i(5,"p",159),o(6,"Banner image uploaded"),t()()()),n&2){let e=m(2);r(),_("src",e.bannerPreview(),E)}}function Yi(n,s){n&1&&(i(0,"div",119)(1,"div",164)(2,"mat-icon",165),o(3,"image"),t()(),i(4,"div")(5,"p",133),o(6,"No banner image uploaded"),t(),i(7,"p",161),o(8,"Optional - can be added later"),t()()())}function Qi(n,s){if(n&1&&(C(0,"img",169),i(1,"div",170)(2,"mat-icon",171),o(3,"image"),t(),i(4,"p",172),o(5),t()()),n&2){let e=m().$implicit;_("src",e.preview,E)("alt",e.file.name),r(5),b(e.file.name)}}function Ji(n,s){if(n&1&&(C(0,"img",173),i(1,"div",170)(2,"mat-icon",171),o(3,"image"),t(),i(4,"p",174),o(5,"Certification Image"),t()()),n&2){let e=m().$implicit;_("src",e.preview,E)}}function Ki(n,s){if(n&1&&(i(0,"div",168)(1,"mat-icon",175),o(2,"description"),t(),i(3,"div",176)(4,"p",177),o(5),t(),i(6,"p",145),o(7),t()()()),n&2){let e=m().$implicit;r(5),b((e.file==null?null:e.file.name)||"SOS Certification Document"),r(2),b((e.file==null?null:e.file.type)||"Document")}}function Xi(n,s){if(n&1&&(i(0,"div",167),u(1,Qi,6,3)(2,Ji,6,1)(3,Ki,8,2,"div",168),t()),n&2){let e=s.$implicit;r(),p(e.file&&e.file.type&&e.file.type.startsWith("image/")?1:!e.file&&(e.preview.includes(".jpg")||e.preview.includes(".jpeg")||e.preview.includes(".png")||e.preview.includes("/image/"))?2:3)}}function Zi(n,s){if(n&1&&(i(0,"div",90)(1,"div",166),T(2,Xi,4,1,"div",167,Gt),t(),i(4,"div",163)(5,"mat-icon",124),o(6,"check_circle"),t(),i(7,"p",159),o(8),t()()()),n&2){let e=m(2);r(2),F(e.sosCertificationPreviews()),r(6),Z(" ",e.sosCertificationPreviews().length," certification ",e.sosCertificationPreviews().length===1?"document":"documents"," uploaded ")}}function en(n,s){if(n&1&&C(0,"img",178),n&2){let e=m(3);_("src",e.sosCertificationPreview(),E)}}function tn(n,s){if(n&1&&(i(0,"div",179)(1,"div",180)(2,"mat-icon",175),o(3,"description"),t(),i(4,"div",69)(5,"p",144),o(6),t(),i(7,"p",145),o(8),t()()()()),n&2){let e=m(3);r(6),b(e.sosCertificationPreview()),r(2),b((e.sosCertificationFile==null?null:e.sosCertificationFile.type)||"Document")}}function nn(n,s){if(n&1&&(i(0,"div",118),u(1,en,1,1,"img",178)(2,tn,9,2,"div",179),i(3,"div",163)(4,"mat-icon",124),o(5,"check_circle"),t(),i(6,"p",159),o(7,"SOS certification document uploaded"),t()()()),n&2){let e=m(2);r(),p(e.sosCertificationFile&&e.sosCertificationFile.type.startsWith("image/")?1:2)}}function on(n,s){n&1&&(i(0,"div",119)(1,"div",181)(2,"mat-icon",134),o(3,"description"),t()(),i(4,"div")(5,"p",133),o(6,"No certification documents uploaded"),t(),i(7,"p",161),o(8,"Optional - can be added later"),t()()())}function sn(n,s){if(n&1&&(i(0,"div",185)(1,"span",187),o(2),t(),o(3),t()),n&2){let e,a=m().$implicit,l=m(4);r(2),y("",a,":"),r(),Z(" ",(e=l.businessComplianceForm.get("business_hours"))==null||(e=e.get(a))==null||(e=e.get("open"))==null?null:e.value," - ",(e=l.businessComplianceForm.get("business_hours"))==null||(e=e.get(a))==null||(e=e.get("close"))==null?null:e.value," ")}}function an(n,s){if(n&1&&(i(0,"div",186)(1,"span",187),o(2),t(),i(3,"span",139),o(4,"Closed"),t()()),n&2){let e=m().$implicit;r(2),y("",e,":")}}function rn(n,s){if(n&1&&u(0,sn,4,3,"div",185)(1,an,5,1,"div",186),n&2){let e,a=s.$implicit,l=m(4);p(!((e=l.businessComplianceForm.get("business_hours"))==null||(e=e.get(a))==null||(e=e.get("closed"))==null)&&e.value?1:0)}}function ln(n,s){n&1&&(i(0,"div")(1,"span",115),o(2,"Business Hours:"),t(),i(3,"div",184),T(4,rn,2,1,null,null,z),t()()),n&2&&(r(4),F(Ne(0,zt)))}function dn(n,s){if(n&1&&(i(0,"div",108)(1,"span",109),o(2,"Business Registered:"),t(),i(3,"span",110),o(4),t()()),n&2){let e,a=m(3);r(4),b((e=a.businessComplianceForm.get("business_registered"))!=null&&e.value?"Yes":"No")}}function mn(n,s){if(n&1&&(i(0,"div",108)(1,"span",109),o(2,"Registered State:"),t(),i(3,"span",110),o(4),t()()),n&2){let e,a=m(3);r(4),b((e=a.businessComplianceForm.get("registered_state"))==null?null:e.value)}}function cn(n,s){if(n&1&&(i(0,"div",108)(1,"span",109),o(2,"Tax ID/EIN/SSN:"),t(),i(3,"span",188),o(4),t()()),n&2){let e,a=m(3);r(4),b((e=a.businessComplianceForm.get("tax_id"))==null?null:e.value)}}function un(n,s){if(n&1&&(i(0,"div",108)(1,"span",109),o(2,"Certified WBE/MBE:"),t(),i(3,"span",110),o(4),t()()),n&2){let e,a=m(3);r(4),b((e=a.businessComplianceForm.get("is_certified_wbe_mbe"))!=null&&e.value?"Yes":"No")}}function pn(n,s){n&1&&(i(0,"div",183)(1,"div",47)(2,"mat-icon",189),o(3,"check_circle"),t(),i(4,"span",190),o(5,"This business is confirmed to be 51-100% owned and operated by a woman."),t()()())}function _n(n,s){if(n&1&&(i(0,"div",121)(1,"h4",107),o(2,"Business Compliance & Operations"),t(),i(3,"div",90)(4,"div",108)(5,"span",109),o(6,"Business Stage:"),t(),i(7,"span",182),o(8),t()(),u(9,ln,6,1,"div"),u(10,dn,5,1,"div",108),u(11,mn,5,1,"div",108),u(12,cn,5,1,"div",108),u(13,un,5,1,"div",108),u(14,pn,6,0,"div",183),t()()),n&2){let e,a,l,d,v,B,S=m(2);r(8),b(S.formatBusinessStage((e=S.businessComplianceForm.get("business_stage"))==null?null:e.value)),r(),p(S.businessComplianceForm.get("business_hours")?9:-1),r(),p(((a=S.businessComplianceForm.get("business_registered"))==null?null:a.value)!==null?10:-1),r(),p((l=S.businessComplianceForm.get("registered_state"))!=null&&l.value?11:-1),r(),p((d=S.businessComplianceForm.get("tax_id"))!=null&&d.value?12:-1),r(),p(((v=S.businessComplianceForm.get("is_certified_wbe_mbe"))==null?null:v.value)!==null?13:-1),r(),p((B=S.businessComplianceForm.get("woman_owned_attestation"))!=null&&B.value?14:-1)}}function fn(n,s){n&1&&(i(0,"div",125)(1,"mat-icon",129),o(2,"error"),t(),i(3,"span"),o(4,"Please complete all required fields before submitting"),t()())}function Cn(n,s){if(n&1&&o(0),n&2){let e=m(2);y(" ",e.isEditMode()?"Updating...":"Creating..."," ")}}function xn(n,s){if(n&1&&o(0),n&2){let e=m(2);y(" ",e.isEditMode()?"Update Business":"Create Business"," ")}}function gn(n,s){if(n&1){let e=M();i(0,"div",8)(1,"app-dashboard-subheader",17),f("backClicked",function(){x(e);let l=m();return g(l.goBack())}),t(),i(2,"mat-card",18)(3,"mat-stepper",19,0)(5,"mat-step",20)(6,"form",21)(7,"div")(8,"h3",22),o(9," Tell us about your business "),t(),i(10,"p",23),o(11," Provide basic information about your business to get started. "),t()(),i(12,"mat-form-field",24)(13,"mat-label"),o(14,"Business Name"),t(),C(15,"input",25),u(16,Xt,2,0,"mat-error"),u(17,Zt,2,0,"mat-error"),t(),i(18,"mat-form-field",24)(19,"mat-label"),o(20,"Business Description"),t(),C(21,"textarea",26),u(22,ei,2,0,"mat-error"),u(23,ti,2,0,"mat-error"),t(),i(24,"div",27)(25,"mat-form-field",28)(26,"mat-label"),o(27,"Business Type"),t(),i(28,"mat-select",29)(29,"mat-option",30),o(30,"Service Business"),t(),i(31,"mat-option",31),o(32,"Product Business"),t(),i(33,"mat-option",32),o(34,"Both Service & Product"),t()(),u(35,ii,2,0,"mat-error"),t(),i(36,"mat-form-field",28)(37,"mat-label"),o(38,"Category"),t(),i(39,"mat-select",33),f("selectionChange",function(l){x(e);let d=m();return g(d.onCategoryChange(l.value))}),T(40,ni,2,2,"mat-option",34,$t),t(),u(42,oi,2,0,"mat-error"),t()(),u(43,ai,8,0,"mat-form-field",24),i(44,"div",35),u(45,ri,4,0,"div",36),i(46,"button",37),f("click",function(){x(e);let l=k(4),d=m();return g(d.nextStep(l))}),o(47," Next "),i(48,"mat-icon",38),o(49,"arrow_forward"),t()()()()(),i(50,"mat-step",39)(51,"form",40)(52,"div")(53,"h3",22),o(54," Contact Information & Location "),t(),i(55,"p",23),o(56," Help customers find and contact your business. "),t()(),i(57,"div")(58,"h4",41),o(59,"Business Location"),t(),i(60,"div",42)(61,"mat-form-field",24)(62,"mat-label"),o(63,"Search Address"),t(),C(64,"input",43,1),i(66,"mat-icon",44),o(67,"location_on"),t(),i(68,"mat-icon",45),o(69,"search"),t(),i(70,"mat-hint"),o(71,"Start typing to search for your business address (USA only)"),t()(),i(72,"div",46)(73,"div",47)(74,"mat-icon",48),o(75,"info"),t(),i(76,"div")(77,"strong"),o(78,"Auto-complete tip:"),t(),o(79,' Type your complete business address above. City, state, and postal code will be automatically filled and locked. Use "Edit" to manually modify or "Clear" to start over. '),t()()(),i(80,"div",27)(81,"mat-form-field",28)(82,"mat-label"),o(83,"City"),t(),C(84,"input",49),u(85,li,2,0,"mat-icon",50),u(86,di,2,0,"mat-error"),t(),i(87,"mat-form-field",28)(88,"mat-label"),o(89,"State"),t(),C(90,"input",51),u(91,mi,2,0,"mat-icon",50),t()(),i(92,"mat-form-field",24)(93,"mat-label"),o(94,"Postal Code"),t(),C(95,"input",52),u(96,ci,2,0,"mat-icon",50),t(),i(97,"div",53)(98,"button",54),f("click",function(){x(e);let l=m();return g(l.enableManualLocationEdit())}),i(99,"mat-icon",55),o(100,"edit"),t(),o(101," Edit "),t(),i(102,"button",56),f("click",function(){x(e);let l=m();return g(l.clearLocationData())}),i(103,"mat-icon",55),o(104,"clear"),t(),o(105," Clear "),t()(),i(106,"div",57),u(107,ui,7,0,"div",58)(108,pi,5,0,"div",59),t()()(),i(109,"div")(110,"h4",41),o(111,"Contact Information"),t(),i(112,"div",42)(113,"div",27)(114,"mat-form-field",28)(115,"mat-label"),o(116,"Business Email"),t(),C(117,"input",60),u(118,_i,2,0,"mat-error"),t(),i(119,"mat-form-field",28)(120,"mat-label"),o(121,"Business Phone"),t(),C(122,"input",61),u(123,fi,2,0,"mat-error"),u(124,Ci,2,1,"mat-error"),t()(),i(125,"mat-form-field",24)(126,"mat-label"),o(127,"Website URL (Optional)"),t(),C(128,"input",62),t()()(),i(129,"div")(130,"h4",41),o(131,"Business Images"),t(),i(132,"div",63)(133,"div")(134,"label",64),o(135," Business Logo "),i(136,"span",65),o(137,"*"),t()(),i(138,"div",66),u(139,xi,5,1,"div",67)(140,gi,3,0,"div",68),i(141,"div",69)(142,"input",70,2),f("change",function(l){x(e);let d=m();return g(d.onLogoSelected(l))}),t(),i(144,"button",71),f("click",function(){x(e);let l=k(143);return g(l.click())}),i(145,"mat-icon",72),o(146,"upload"),t(),o(147," Choose Logo "),t(),i(148,"p",73),o(149,"PNG, JPG up to 5MB"),t()()()(),i(150,"div")(151,"label",64),o(152," Banner Image "),i(153,"span",65),o(154,"*"),t()(),i(155,"div",42),u(156,bi,5,1,"div",67)(157,vi,6,0,"div",74),i(158,"div")(159,"input",70,3),f("change",function(l){x(e);let d=m();return g(d.onBannerSelected(l))}),t(),i(161,"button",71),f("click",function(){x(e);let l=k(160);return g(l.click())}),i(162,"mat-icon",72),o(163,"upload"),t(),o(164," Choose Banner "),t(),i(165,"p",73),o(166,"PNG, JPG up to 5MB. Recommended: 1200x400px"),t()()()(),i(167,"div")(168,"label",64),o(169," SOS Certification Documentation (Optional) "),t(),i(170,"p",75),o(171," Upload your Secretary of State certification or other business registration documents (multiple files allowed) "),t(),i(172,"div",42),u(173,Ei,3,0,"div",27),u(174,Fi,6,1,"div",67),u(175,Mi,6,0,"div",76),i(176,"div")(177,"input",77,4),f("change",function(l){x(e);let d=m();return g(d.onSosCertificationSelected(l))}),t(),i(179,"button",71),f("click",function(){x(e);let l=k(178);return g(l.click())}),i(180,"mat-icon",72),o(181,"upload_file"),t(),o(182),t(),i(183,"p",73),o(184,"PDF, DOC, DOCX, JPG, PNG up to 10MB each (multiple files allowed)"),t()()()()()(),i(185,"div",78)(186,"button",79),f("click",function(){x(e);let l=k(4),d=m();return g(d.previousStep(l))}),i(187,"mat-icon",72),o(188,"arrow_back"),t(),o(189," Previous "),t(),i(190,"div",80),u(191,Ii,5,0,"div",81),i(192,"button",82),f("click",function(){x(e);let l=k(4),d=m();return g(d.nextStep(l))}),o(193," Next "),i(194,"mat-icon",38),o(195,"arrow_forward"),t()()()()()(),i(196,"mat-step",83)(197,"form",21)(198,"div")(199,"h3",22),o(200," Business Compliance & Operations "),t(),i(201,"p",23),o(202," Provide additional business details and certifications. "),t()(),i(203,"mat-form-field",24)(204,"mat-label"),o(205,"Business Stage"),t(),i(206,"mat-select",84)(207,"mat-option",85),o(208,"Side gig"),t(),i(209,"mat-option",86),o(210,"Startup"),t(),i(211,"mat-option",87),o(212,"Growing business"),t(),i(213,"mat-option",88),o(214,"Established business"),t()(),u(215,ki,2,0,"mat-error"),t(),i(216,"div",89)(217,"h4",41),o(218,"Business Hours of Operation"),t(),i(219,"div",90),T(220,Di,15,6,"div",91,z),t()(),i(222,"div",42)(223,"div")(224,"h4",41),o(225,"Business Registration"),t(),i(226,"div",90)(227,"label",92),o(228,"Is your business registered?"),t(),i(229,"mat-radio-group",93)(230,"mat-radio-button",34),o(231,"Yes"),t(),i(232,"mat-radio-button",34),o(233,"No"),t()()()(),u(234,Li,7,1,"mat-form-field",24),t(),i(235,"div",94)(236,"mat-form-field",24)(237,"mat-label"),o(238,"Tax ID/EIN/SSN"),t(),C(239,"input",95),i(240,"mat-hint"),o(241,"SSN format: 888-88-8888 (9 digits) or EIN format: 88-8888888 (9 digits)"),t(),u(242,Ni,2,0,"mat-error"),t()(),i(243,"div")(244,"h4",41),o(245,"Business Certifications"),t(),i(246,"div",90)(247,"label",92),o(248," Certified Women Business Enterprise or Minority Business Enterprise? "),t(),i(249,"mat-radio-group",96)(250,"mat-radio-button",34),o(251,"Yes"),t(),i(252,"mat-radio-button",34),o(253,"No"),t()()()(),i(254,"div",97)(255,"mat-checkbox",98)(256,"span",99),o(257," I confirm this business is 51-100% owned and operated by a woman. "),t()(),u(258,Ai,4,0,"div",100),t(),i(259,"div",78)(260,"button",79),f("click",function(){x(e);let l=k(4),d=m();return g(d.previousStep(l))}),i(261,"mat-icon",72),o(262,"arrow_back"),t(),o(263," Previous "),t(),i(264,"div",80),u(265,Oi,4,0,"div",101),i(266,"button",82),f("click",function(){x(e);let l=k(4),d=m();return g(d.nextStep(l))}),o(267," Next "),i(268,"mat-icon",38),o(269,"arrow_forward"),t()()()()()(),i(270,"mat-step",102)(271,"div",103)(272,"div")(273,"h3",22),o(274," Review Your Business Information "),t(),i(275,"p",104),o(276," Please review your business details before submitting. "),t()(),i(277,"div",105)(278,"div",106)(279,"h4",107),o(280,"Business Information"),t(),i(281,"div",90)(282,"div",108)(283,"span",109),o(284,"Name:"),t(),i(285,"span",110),o(286),t()(),i(287,"div",108)(288,"span",109),o(289,"Type:"),t(),i(290,"span",110),o(291),t()(),i(292,"div",111)(293,"span",109),o(294,"Description:"),t(),i(295,"div",110),o(296),t()()()(),i(297,"div",106)(298,"h4",107),o(299,"Location & Contact"),t(),i(300,"div",90)(301,"div",111)(302,"span",109),o(303,"Address:"),t(),i(304,"div",112),u(305,ji,2,1,"div"),i(306,"div"),o(307),u(308,qi,2,1,"span"),o(309),t(),u(310,Ui,2,1,"div"),t()(),u(311,Ri,5,1,"div",108),u(312,zi,5,1,"div",108),u(313,$i,5,1,"div",108),t()(),i(314,"div",106)(315,"h4",113),o(316,"Uploaded Images & Documents"),t(),i(317,"div",114)(318,"span",115),o(319,"Business Logo:"),t(),u(320,Gi,7,1,"div",116)(321,Wi,9,0,"div",117),t(),i(322,"div",114)(323,"span",115),o(324,"Banner Image:"),t(),u(325,Hi,7,1,"div",118)(326,Yi,9,0,"div",119),t(),i(327,"div",120)(328,"span",115),o(329,"SOS Certification Documentation:"),t(),u(330,Zi,9,2,"div",90)(331,nn,8,1,"div",118)(332,on,9,0,"div",119),t()(),u(333,_n,15,7,"div",121),i(334,"div")(335,"h4",107),o(336,"Next Steps"),t(),i(337,"div",122)(338,"div",123)(339,"mat-icon",124),o(340,"check_circle"),t(),i(341,"span"),o(342,"Your business profile will be created"),t()(),i(343,"div",123)(344,"mat-icon",124),o(345,"check_circle"),t(),i(346,"span"),o(347,"You can add services and showcase your work"),t()(),i(348,"div",123)(349,"mat-icon",124),o(350,"check_circle"),t(),i(351,"span"),o(352,"Customers can find and contact you"),t()()()()(),i(353,"div",78)(354,"button",79),f("click",function(){x(e);let l=k(4),d=m();return g(d.previousStep(l))}),i(355,"mat-icon",72),o(356,"arrow_back"),t(),o(357," Previous "),t(),i(358,"div",80),u(359,fn,5,0,"div",125),i(360,"button",82),f("click",function(){x(e);let l=m();return g(l.submitBusiness())}),i(361,"mat-icon"),o(362,"business"),t(),u(363,Cn,1,1)(364,xn,1,1),t()()()()()()()()}if(n&2){let e,a,l,d,v,B,S,Y,R,Q,J,P,V,Le,ie,ne,je,oe,se,qe,Ue,Re,ze,$e,Ge,We,He,Ye,Qe,Je,Ke,c=m();r(),_("title",c.isEditMode()?"Edit Your Business":"Create Your Business")("subtitle",c.isEditMode()?"Update your business profile and information":"Set up your business profile and start connecting with customers"),r(2),_("linear",!0)("orientation",c.isMobile()?"vertical":"horizontal"),r(2),_("stepControl",c.businessInfoForm),r(),_("formGroup",c.businessInfoForm),r(10),p((e=c.businessInfoForm.get("name"))!=null&&e.hasError("required")&&((e=c.businessInfoForm.get("name"))!=null&&e.touched)?16:-1),r(),p((a=c.businessInfoForm.get("name"))!=null&&a.hasError("minlength")&&((a=c.businessInfoForm.get("name"))!=null&&a.touched)?17:-1),r(5),p((l=c.businessInfoForm.get("description"))!=null&&l.hasError("required")&&((l=c.businessInfoForm.get("description"))!=null&&l.touched)?22:-1),r(),p((d=c.businessInfoForm.get("description"))!=null&&d.hasError("minlength")&&((d=c.businessInfoForm.get("description"))!=null&&d.touched)?23:-1),r(12),p((v=c.businessInfoForm.get("business_type"))!=null&&v.hasError("required")&&((v=c.businessInfoForm.get("business_type"))!=null&&v.touched)?35:-1),r(5),F(c.categories()),r(2),p((B=c.businessInfoForm.get("category_id"))!=null&&B.hasError("required")&&((B=c.businessInfoForm.get("category_id"))!=null&&B.touched)?42:-1),r(),p(c.subcategories().length>0?43:-1),r(2),p(c.isBusinessInfoValid()?-1:45),r(),_("disabled",!c.isBusinessInfoValid()),r(4),_("stepControl",c.businessDetailsForm),r(),_("formGroup",c.businessDetailsForm),r(30),X("opacity-75",(S=c.businessDetailsForm.get("city"))==null?null:S.disabled),r(4),p((Y=c.businessDetailsForm.get("city"))!=null&&Y.disabled?85:-1),r(),p((R=c.businessDetailsForm.get("city"))!=null&&R.hasError("required")&&((R=c.businessDetailsForm.get("city"))!=null&&R.touched)?86:-1),r(),X("opacity-75",(Q=c.businessDetailsForm.get("state"))==null?null:Q.disabled),r(4),p((J=c.businessDetailsForm.get("state"))!=null&&J.disabled?91:-1),r(),X("opacity-75",(P=c.businessDetailsForm.get("postal_code"))==null?null:P.disabled),r(4),p((V=c.businessDetailsForm.get("postal_code"))!=null&&V.disabled?96:-1),r(11),p(!((Le=c.businessDetailsForm.get("location"))==null||Le.value==null)&&Le.value.coordinates?107:108),r(11),p((ie=c.businessDetailsForm.get("contact_email"))!=null&&ie.hasError("email")&&((ie=c.businessDetailsForm.get("contact_email"))!=null&&ie.touched)?118:-1),r(5),p(c.contact_phone!=null&&c.contact_phone.hasError("required")&&(c.contact_phone!=null&&c.contact_phone.touched)?123:-1),r(),p(c.contact_phone!=null&&c.contact_phone.hasError("usaPhone")&&(c.contact_phone!=null&&c.contact_phone.touched)?124:-1),r(15),p(c.logoPreview()?139:140),r(17),p(c.bannerPreview()?156:157),r(17),p(c.sosCertificationPreviews().length>0?173:-1),r(),p(c.sosCertificationPreview()&&c.sosCertificationPreviews().length===0?174:-1),r(),p(c.sosCertificationPreviews().length===0&&!c.sosCertificationPreview()?175:-1),r(7),y(" ",c.sosCertificationPreviews().length>0?"Add More Certifications":"Choose Certifications"," "),r(9),p(c.isBusinessDetailsValid()?-1:191),r(),_("disabled",!c.isBusinessDetailsValid()),r(4),_("stepControl",c.businessComplianceForm),r(),_("formGroup",c.businessComplianceForm),r(18),p((ne=c.businessComplianceForm.get("business_stage"))!=null&&ne.hasError("required")&&((ne=c.businessComplianceForm.get("business_stage"))!=null&&ne.touched)?215:-1),r(5),F(Ne(69,zt)),r(10),_("value",!0),r(2),_("value",!1),r(2),p((je=c.businessComplianceForm.get("business_registered"))!=null&&je.value?234:-1),r(8),p((oe=c.businessComplianceForm.get("tax_id"))!=null&&oe.hasError("pattern")&&((oe=c.businessComplianceForm.get("tax_id"))!=null&&oe.touched)?242:-1),r(8),_("value",!0),r(2),_("value",!1),r(6),p((se=c.businessComplianceForm.get("woman_owned_attestation"))!=null&&se.hasError("required")&&((se=c.businessComplianceForm.get("woman_owned_attestation"))!=null&&se.touched)?258:-1),r(7),p(c.isBusinessComplianceValid()?-1:265),r(),_("disabled",!c.isBusinessComplianceValid()),r(20),b((qe=c.businessInfoForm.get("name"))==null?null:qe.value),r(5),b((Ue=c.businessInfoForm.get("business_type"))==null?null:Ue.value),r(5),b((Re=c.businessInfoForm.get("description"))==null?null:Re.value),r(9),p((ze=c.businessDetailsForm.get("address"))!=null&&ze.value?305:-1),r(2),y(" ",($e=c.businessDetailsForm.get("city"))==null?null:$e.value),r(),p((Ge=c.businessDetailsForm.get("state"))!=null&&Ge.value?308:-1),r(),y(" ",(We=c.businessDetailsForm.get("postal_code"))==null?null:We.value," "),r(),p((He=c.businessDetailsForm.get("country"))!=null&&He.value?310:-1),r(),p((Ye=c.businessDetailsForm.get("contact_email"))!=null&&Ye.value?311:-1),r(),p((Qe=c.businessDetailsForm.get("contact_phone"))!=null&&Qe.value?312:-1),r(),p((Je=c.businessDetailsForm.get("website"))!=null&&Je.value?313:-1),r(7),p(c.logoPreview()?320:321),r(5),p(c.bannerPreview()?325:326),r(5),p(c.sosCertificationPreviews().length>0?330:c.sosCertificationPreview()?331:332),r(3),p((Ke=c.businessComplianceForm.get("business_stage"))!=null&&Ke.value?333:-1),r(26),p(!c.isAllFormsValid()&&!c.submitting()?359:-1),r(),_("disabled",c.submitting()||!c.isAllFormsValid()),r(3),p(c.submitting()?363:364)}}var te=class n{addressInput;router=I(ue);route=I(ce);fb=I(Ct);authService=I(xe);businessService=I(ge);breakpointObserver=I(_e);autocomplete;categories=h([]);subcategories=h([]);loading=h(!1);submitting=h(!1);error=h(null);logoPreview=h(null);bannerPreview=h(null);sosCertificationPreview=h(null);sosCertificationPreviews=h([]);isEditMode=h(!1);businessId=h(null);currentBusiness=h(null);isMobile=h(!1);logoFile=null;bannerFile=null;sosCertificationFile=null;sosCertificationFiles=[];businessInfoForm;businessDetailsForm;businessComplianceForm;usStates=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"];constructor(){this.breakpointObserver.observe([ee.Handset]).subscribe(s=>{this.isMobile.set(s.matches)}),this.businessInfoForm=this.fb.group({name:["",[w.required,w.minLength(2)]],description:["",[w.required,w.minLength(10)]],short_description:[""],business_type:["service",w.required],category_id:["",w.required],subcategory_id:[""]}),this.businessDetailsForm=this.fb.group({address:[""],city:["",w.required],state:["",w.required],postal_code:["",w.required],location:this.fb.group({type:["Point"],coordinates:[null]}),contact_email:["",[w.required,w.email]],contact_phone:["",[w.required,Nt.usaPhone()]],website:[""]}),this.businessComplianceForm=this.fb.group({business_stage:["",w.required],business_hours:this.fb.group({monday:this.fb.group({open:["09:00"],close:["17:00"],closed:[!1]}),tuesday:this.fb.group({open:["09:00"],close:["17:00"],closed:[!1]}),wednesday:this.fb.group({open:["09:00"],close:["17:00"],closed:[!1]}),thursday:this.fb.group({open:["09:00"],close:["17:00"],closed:[!1]}),friday:this.fb.group({open:["09:00"],close:["17:00"],closed:[!1]}),saturday:this.fb.group({open:["09:00"],close:["17:00"],closed:[!0]}),sunday:this.fb.group({open:["09:00"],close:["17:00"],closed:[!0]})}),business_registered:[!1],registered_state:[""],tax_id:["",[w.pattern(/^(\d{3}-\d{2}-\d{4}|\d{2}-\d{7})$/)]],is_certified_wbe_mbe:[!1],woman_owned_attestation:[!1,w.requiredTrue]}),this.businessComplianceForm.get("business_registered")?.valueChanges.subscribe(s=>{let e=this.businessComplianceForm.get("registered_state");s?e?.setValidators([w.required]):e?.clearValidators(),e?.updateValueAndValidity()})}ngOnInit(){if(!this.authService.isAuthenticated()){this.router.navigate(["/auth"],{queryParams:{message:"Please log in to create a business"}});return}let s=this.route.snapshot.paramMap.get("id");s&&(this.isEditMode.set(!0),this.businessId.set(s)),this.loadCategories(),this.isEditMode()&&this.loadBusinessForEdit()}ngAfterViewInit(){setTimeout(()=>{this.initializeAutocomplete()},100)}initializeAutocomplete(){typeof google<"u"&&google.maps&&google.maps.places&&this.addressInput?(this.autocomplete=new google.maps.places.Autocomplete(this.addressInput.nativeElement,{componentRestrictions:{country:"us"},fields:["address_components","geometry","formatted_address"],types:["establishment","geocode"]}),this.autocomplete.addListener("place_changed",()=>{let s=this.autocomplete.getPlace();s&&s.address_components&&this.processPlaceData(s)})):setTimeout(()=>this.initializeAutocomplete(),200)}processPlaceData(s){let e="",a="",l="",d="",v="";for(let P of s.address_components){let V=P.types;V.includes("street_number")?e=P.long_name:V.includes("route")?a=P.long_name:V.includes("locality")?l=P.long_name:V.includes("administrative_area_level_1")?d=P.short_name:V.includes("postal_code")&&(v=P.long_name)}let B=`${e} ${a}`.trim(),S=s.geometry?.location?.lat(),Y=s.geometry?.location?.lng();this.businessDetailsForm.patchValue({address:B||s.formatted_address,city:l,state:d,postal_code:v,location:{type:"Point",coordinates:S&&Y?[Y,S]:null}});let R=this.businessDetailsForm.get("city"),Q=this.businessDetailsForm.get("state"),J=this.businessDetailsForm.get("postal_code");R&&R.disable(),Q&&Q.disable(),J&&J.disable()}onLocationSelected(s){console.log("onLocationSelected called:",s)}clearLocationData(){this.businessDetailsForm.patchValue({address:"",city:"",state:"",postal_code:"",location:{type:"Point",coordinates:null}});let s=this.businessDetailsForm.get("city"),e=this.businessDetailsForm.get("state"),a=this.businessDetailsForm.get("postal_code");s&&s.enable(),e&&e.enable(),a&&a.enable()}enableManualLocationEdit(){let s=this.businessDetailsForm.get("city"),e=this.businessDetailsForm.get("state"),a=this.businessDetailsForm.get("postal_code");s&&s.enable(),e&&e.enable(),a&&a.enable(),console.log("Manual editing enabled for location fields")}loadCategories(){return L(this,null,function*(){try{this.loading.set(!0),this.error.set(null);let s=yield this.businessService.getCategoriesAsync();this.categories.set(s)}catch(s){console.error("Error loading categories:",s),this.error.set("Failed to load categories. Please try again.")}finally{this.loading.set(!1)}})}loadBusinessForEdit(){return L(this,null,function*(){let s=this.businessId();if(s)try{this.loading.set(!0),this.error.set(null);let e=yield this.businessService.getBusinessAsync(s);if(!e){this.error.set("Business not found."),this.router.navigate(["/dashboard/businesses/list"]);return}this.currentBusiness.set(e),this.businessInfoForm.patchValue({name:e.name,description:e.description,short_description:e.short_description||"",business_type:e.business_type,category_id:typeof e.category_id=="string"?e.category_id:e.category_id._id,subcategory_id:e.subcategory_id?typeof e.subcategory_id=="string"?e.subcategory_id:e.subcategory_id._id:""}),this.businessDetailsForm.patchValue({address:e.address||"",city:e.city||"",state:e.state||"",postal_code:e.postal_code||"",location:e.location||{type:"Point",coordinates:null},contact_email:e.contact_email||"",contact_phone:e.contact_phone||"",website:e.website||""}),this.businessComplianceForm.patchValue({business_stage:e.business_stage||"",business_registered:e.business_registered||!1,registered_state:e.registered_state||"",tax_id:e.tax_id||"",is_certified_wbe_mbe:e.is_certified_wbe_mbe||!1,woman_owned_attestation:e.woman_owned_attestation||!1}),e.business_hours&&["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].forEach(d=>{let v=e.business_hours?.[d];if(v){let B=this.businessComplianceForm.get(`business_hours.${d}`);B&&B.patchValue({open:v.open||"",close:v.close||"",closed:v.closed||!1})}});let a=typeof e.category_id=="string"?e.category_id:e.category_id._id;if(a&&(yield this.onCategoryChange(a)),e.logo_url&&this.logoPreview.set(e.logo_url),e.banner_url&&this.bannerPreview.set(e.banner_url),e.sos_certification_urls&&e.sos_certification_urls.length>0){let l=e.sos_certification_urls.map(d=>({file:null,preview:d}));this.sosCertificationPreviews.set(l)}else e.sos_certification_url&&this.sosCertificationPreview.set(e.sos_certification_url)}catch(e){console.error("Error loading business for edit:",e),this.error.set("Failed to load business data. Please try again.")}finally{this.loading.set(!1)}})}onCategoryChange(s){return L(this,null,function*(){if(!s){this.subcategories.set([]),this.businessInfoForm.patchValue({subcategory_id:""});return}try{let e=yield this.businessService.getSubcategoriesAsync(s);this.subcategories.set(e)}catch(e){console.error("Error loading subcategories:",e),this.error.set("Failed to load subcategories. Please try again.")}})}submitBusiness(){return L(this,null,function*(){if(this.businessInfoForm.invalid||this.businessDetailsForm.invalid||this.businessComplianceForm.invalid){this.businessInfoForm.markAllAsTouched(),this.businessDetailsForm.markAllAsTouched(),this.businessComplianceForm.markAllAsTouched(),this.error.set("Please fill in all required fields.");return}if(!this.logoPreview()){this.error.set("Business logo is required. Please upload a logo image.");return}if(!this.bannerPreview()){this.error.set("Banner image is required. Please upload a banner image.");return}if(!this.authService.user()){this.router.navigate(["/auth"]);return}try{this.submitting.set(!0),this.error.set(null);let e=ae(ae(ae({},this.businessInfoForm.value),this.businessDetailsForm.getRawValue()),this.businessComplianceForm.value);console.log("businessInfoForm.value:",this.businessInfoForm.value),console.log("businessDetailsForm.value:",this.businessDetailsForm.value),console.log("businessDetailsForm.getRawValue():",this.businessDetailsForm.getRawValue()),console.log("businessComplianceForm.value:",this.businessComplianceForm.value),console.log("Combined businessData:",e),e.subcategory_id||delete e.subcategory_id;let a;if(this.isEditMode()){let d=this.businessId();if(!d)throw new Error("Business ID is required for update");console.log("Updating business with data:",e),a=yield this.businessService.updateBusinessAsync(d,e)}else console.log("Creating business with data:",e),a=yield this.businessService.createBusinessAsync(e);if(this.logoFile)try{yield this.businessService.uploadLogoAsync(a._id,this.logoFile)}catch(d){console.warn("Failed to upload logo:",d)}if(this.bannerFile)try{yield this.businessService.uploadBannerAsync(a._id,this.bannerFile)}catch(d){console.warn("Failed to upload banner:",d)}if(this.sosCertificationFiles.length>0)try{yield this.businessService.uploadMultipleSosCertificationsAsync(a._id,this.sosCertificationFiles)}catch(d){console.warn("Failed to upload multiple SOS certifications:",d)}else if(this.sosCertificationFile)try{yield this.businessService.uploadSosCertificationAsync(a._id,this.sosCertificationFile)}catch(d){console.warn("Failed to upload SOS certification:",d)}let l=this.isEditMode()?"Business updated successfully!":"Business created successfully! It is now pending approval.";this.router.navigate(["/dashboard/businesses/list"],{queryParams:{message:l}})}catch(e){console.error(`Error ${this.isEditMode()?"updating":"creating"} business:`,e);let a=this.isEditMode()?"Failed to update business. Please try again.":"Failed to create business. Please try again.";this.error.set(e?.message||a)}finally{this.submitting.set(!1)}})}nextStep(s){if(s.selectedIndex===0&&this.businessInfoForm.invalid){this.businessInfoForm.markAllAsTouched();return}if(s.selectedIndex===1&&this.businessDetailsForm.invalid){this.businessDetailsForm.markAllAsTouched();return}if(s.selectedIndex===2&&this.businessComplianceForm.invalid){this.businessComplianceForm.markAllAsTouched();return}s.next()}previousStep(s){s.previous()}goBack(){this.router.navigate(["/dashboard/businesses/list"])}loadData(){this.loadCategories()}isBusinessInfoValid(){return this.businessInfoForm.valid}isBusinessDetailsValid(){return this.businessDetailsForm.valid&&!!this.logoPreview()&&!!this.bannerPreview()}isBusinessComplianceValid(){return this.businessComplianceForm.valid}isAllFormsValid(){return this.businessInfoForm.valid&&this.businessDetailsForm.valid&&this.businessComplianceForm.valid}onLogoSelected(s){let e=s.target;if(e.files&&e.files.length>0){let a=e.files[0];if(!a.type.startsWith("image/")){this.error.set("Please select a valid image file");return}if(a.size>5*1024*1024){this.error.set("Logo file size must be less than 5MB");return}this.logoFile=a;let l=new FileReader;l.onload=d=>{this.logoPreview.set(d.target?.result)},l.readAsDataURL(a),this.error.set(null)}}onBannerSelected(s){let e=s.target;if(e.files&&e.files.length>0){let a=e.files[0];if(!a.type.startsWith("image/")){this.error.set("Please select a valid image file");return}if(a.size>5*1024*1024){this.error.set("Banner file size must be less than 5MB");return}this.bannerFile=a;let l=new FileReader;l.onload=d=>{this.bannerPreview.set(d.target?.result)},l.readAsDataURL(a),this.error.set(null)}}removeLogoPreview(){this.logoFile=null,this.logoPreview.set(null)}removeBannerPreview(){this.bannerFile=null,this.bannerPreview.set(null)}onSosCertificationSelected(s){let e=s.target;if(e.files&&e.files.length>0){for(let a=0;a<e.files.length;a++){let l=e.files[a];if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/jpeg","image/jpg","image/png"].includes(l.type)){this.error.set(`File "${l.name}" is not a valid document type (PDF, DOC, DOCX, JPG, PNG)`);continue}if(l.size>10*1024*1024){this.error.set(`File "${l.name}" size must be less than 10MB`);continue}if(this.sosCertificationFiles.push(l),l.type.startsWith("image/")){let v=new FileReader;v.onload=B=>{let S=this.sosCertificationPreviews();S.push({file:l,preview:B.target?.result}),this.sosCertificationPreviews.set([...S])},v.readAsDataURL(l)}else{let v=this.sosCertificationPreviews();v.push({file:l,preview:l.name}),this.sosCertificationPreviews.set([...v])}}this.error.set(null)}e.value=""}removeSosCertificationFile(s){if(s.file){let a=this.sosCertificationFiles.findIndex(l=>l===s.file);a>-1&&this.sosCertificationFiles.splice(a,1)}let e=this.sosCertificationPreviews().filter(a=>a!==s);this.sosCertificationPreviews.set(e)}removeSosCertificationPreview(){this.sosCertificationFile=null,this.sosCertificationPreview.set(null)}getFieldError(s,e){let a=s.get(e);return!a||!a.touched||!a.errors?null:a.errors.required?`${e.charAt(0).toUpperCase()+e.slice(1)} is required`:a.errors.minlength?`${e.charAt(0).toUpperCase()+e.slice(1)} must be at least ${a.errors.minlength.requiredLength} characters`:a.errors.email?"Please enter a valid email address":a.errors.usaPhone?a.errors.usaPhone.message:"This field is invalid"}formatBusinessStage(s){return s?s.replace(/_/g," "):""}get contact_phone(){return this.businessDetailsForm.get("contact_phone")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=D({type:n,selectors:[["app-create-business"]],viewQuery:function(e,a){if(e&1&&le(Qt,5),e&2){let l;de(l=me())&&(a.addressInput=l.first)}},decls:4,vars:1,consts:[["stepper",""],["addressInput",""],["logoInput",""],["bannerInput",""],["sosCertificationInput",""],[1,"min-h-screen","bg-gray-50"],[1,"flex","justify-center","items-center","min-h-screen"],[1,"max-w-2xl","px-4","sm:px-6","lg:px-8","py-12"],[1,"lg:max-w-6xl","max-w-12xl","px-0","lg:px-8","py-8"],[3,"diameter","strokeWidth"],[1,"text-center","py-12","bg-white","rounded-lg","shadow-sm","border","border-gray-200"],[1,"text-red-400","mb-4"],[1,"text-6xl"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"space-x-4"],[1,"bg-gray-600","text-white","px-4","py-2","rounded-lg","hover:bg-gray-700","transition-colors",3,"click"],[1,"bg-blue-600","text-white","px-4","py-2","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[3,"backClicked","title","subtitle"],[1,"w-full"],[1,"business-stepper",3,"linear","orientation"],["label","Business Information",3,"stepControl"],[1,"lg:p-6","space-y-6",3,"formGroup"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"text-gray-600","mb-6"],["appearance","outline",1,"w-full"],["matInput","","formControlName","name","placeholder","Enter your business name","required",""],["matInput","","formControlName","description","rows","4","placeholder","Describe what your business does, your services, and what makes you unique...","required",""],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline"],["formControlName","business_type","required",""],["value","service"],["value","product"],["value","both"],["formControlName","category_id","required","",3,"selectionChange"],[3,"value"],[1,"flex","flex-col","md:flex-row","justify-end","gap-4","items-start","md:items-center"],[1,"text-sm","text-amber-600","flex","items-center","order-2","md:order-1"],["type","button","matButton","filled","mat-raised-button","","color","primary",1,"flex","items-center","order-1","md:order-2","w-full","md:w-auto",3,"click","disabled"],[1,"ml-2"],["label","Contact & Location",3,"stepControl"],["autocomplete","off",1,"lg:p-6","space-y-6",3,"formGroup"],[1,"text-md","font-medium","text-gray-900","mb-3"],[1,"space-y-4"],["matInput","","formControlName","address","autocomplete","off","placeholder","Start typing your business address..."],["matSuffix",""],["matPrefix",""],[1,"mt-4","bg-blue-50","border","border-blue-200","rounded-lg","p-3","text-sm","text-blue-800"],[1,"flex","items-start","gap-2"],[1,"text-blue-600","text-base","flex-shrink-0"],["matInput","","formControlName","city","placeholder","Enter city","required",""],["matSuffix","",1,"text-gray-400"],["matInput","","formControlName","state","placeholder","State"],["matInput","","formControlName","postal_code","placeholder","Postal code"],[1,"flex","flex-col","sm:flex-row","gap-2","w-full"],["type","button","mat-stroked-button","","color","primary",1,"flex","items-center","justify-center","w-full","sm:w-auto",3,"click"],[1,"mr-1"],["type","button","mat-stroked-button","","color","warn",1,"flex","items-center","justify-center","w-full","sm:w-auto",3,"click"],[1,"mt-3","p-2","rounded-md","text-xs"],[1,"flex","items-center","gap-2","text-green-700","bg-green-50","p-2","rounded-md","border","border-green-200"],[1,"flex","items-start","gap-2","text-amber-700","bg-amber-50","p-2","rounded-md","border","border-amber-200"],["matInput","","type","email","formControlName","contact_email","placeholder","business@example.com"],["matInput","","type","tel","appPhoneFormat","","formControlName","contact_phone","placeholder","+1 (555) 123-4567"],["matInput","","type","url","formControlName","website","placeholder","https://your-website.com"],[1,"space-y-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"text-red-600"],[1,"flex","items-center","space-x-4"],[1,"relative"],[1,"w-20","h-20","border-2","border-dashed","border-gray-300","rounded-lg","flex","items-center","justify-center"],[1,"flex-1"],["type","file","accept","image/*",1,"hidden",3,"change"],["type","button",1,"flex","items-center","justify-center","px-4","py-2","border","border-gray-300","text-gray-700","bg-white","rounded-md","hover:bg-gray-50","transition-colors",3,"click"],[1,"mr-2"],[1,"text-xs","text-gray-500","mt-1"],[1,"w-full","h-32","border-2","border-dashed","border-gray-300","rounded-lg","flex","items-center","justify-center"],[1,"text-xs","text-gray-500","mb-3"],[1,"w-full","h-24","border-2","border-dashed","border-gray-300","rounded-lg","flex","items-center","justify-center"],["type","file","accept",".pdf,.doc,.docx,.jpg,.jpeg,.png","multiple","",1,"hidden",3,"change"],[1,"flex","flex-col","md:flex-row","gap-4","justify-between","items-stretch","md:items-center"],["type","button","mat-stroked-button","","color","accent",1,"flex","items-center","justify-center","w-full","md:w-auto","order-2","md:order-1",3,"click"],[1,"flex","flex-col","md:flex-row","gap-4","items-stretch","md:items-center","order-1","md:order-2","w-full","md:w-auto"],[1,"text-sm","text-amber-600","flex","items-center","gap-1"],["type","button","matButton","filled","color","primary",1,"flex","items-center","justify-center","w-full","md:w-auto",3,"click","disabled"],["label","Compliance & Operations",3,"stepControl"],["formControlName","business_stage","required",""],["value","side_gig"],["value","startup"],["value","growing_business"],["value","established_business"],["formGroupName","business_hours"],[1,"space-y-3"],[1,"p-3","bg-gray-50","rounded-lg","space-y-3",3,"formGroupName"],[1,"text-sm","font-medium","text-gray-700","block"],["formControlName","business_registered",1,"flex","flex-col","sm:flex-row","gap-4"],[1,"mt-4"],["matInput","","formControlName","tax_id","placeholder","SSN: 888-88-8888 or EIN: 88-8888888","maxlength","12"],["formControlName","is_certified_wbe_mbe",1,"flex","flex-col","sm:flex-row","gap-4"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-4"],["formControlName","woman_owned_attestation","required","",1,"text-sm"],[1,"font-medium","text-gray-900"],[1,"text-red-600","text-xs","mt-2","ml-8"],[1,"text-sm","text-amber-600","flex","items-center"],["label","Review & Submit"],[1,"lg:p-6","space-y-6"],[1,"text-gray-600","mb-6","text-sm"],[1,"bg-gray-50","rounded-lg","p-4","lg:p-6","space-y-4"],[1,"border-b","border-gray-200","pb-4"],[1,"font-medium","text-gray-900","mb-3","text-base"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-2"],[1,"text-sm","font-medium","text-gray-600"],[1,"text-sm","text-gray-900"],[1,"grid","grid-cols-1","gap-2"],[1,"text-sm","text-gray-900","space-y-1"],[1,"font-medium","text-gray-900","mb-4","text-base"],[1,"mb-6"],[1,"text-sm","font-medium","text-gray-600","block","mb-2"],[1,"flex","flex-col","sm:flex-row","sm:items-center","gap-3"],[1,"flex","flex-col","sm:flex-row","sm:items-center","gap-3","text-gray-500"],[1,"space-y-2"],[1,"flex","flex-col","gap-2","text-gray-500"],[1,"mb-4"],[1,"border-t","border-gray-200","pt-4"],[1,"text-xs","sm:text-sm","text-gray-600","space-y-2"],[1,"flex","items-start","sm:items-center","gap-2"],[1,"text-green-600","text-base","flex-shrink-0"],[1,"text-xs","sm:text-sm","text-red-600","flex","items-center","gap-1"],["formControlName","subcategory_id"],["value",""],[1,"text-sm","mr-1"],[1,"text-sm","flex-shrink-0"],[1,"text-sm","flex-shrink-0","mt-0.5"],["alt","Logo preview",1,"w-20","h-20","object-cover","rounded-lg","border",3,"src"],["type","button",1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-6","h-6","flex","items-center","justify-center","hover:bg-red-600",3,"click"],[1,"text-sm"],[1,"text-gray-400"],["alt","Banner preview",1,"w-full","h-32","object-cover","rounded-lg","border",3,"src"],["type","button",1,"absolute","top-2","right-2","bg-red-500","text-white","rounded-full","w-8","h-8","flex","items-center","justify-center","hover:bg-red-600",3,"click"],[1,"text-center"],[1,"text-gray-400","text-4xl","mb-2"],[1,"text-gray-500"],[1,"w-full","h-32","object-cover","rounded-lg","border",3,"src","alt"],["alt","SOS Certification",1,"w-full","h-32","object-cover","rounded-lg","border",3,"src"],[1,"w-full","p-4","border-2","border-gray-300","rounded-lg","bg-gray-50","flex","items-center"],[1,"text-blue-600","text-3xl","mr-3"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-xs","text-gray-500"],["alt","SOS Certification preview",1,"w-full","h-32","object-cover","rounded-lg","border",3,"src"],[1,"text-gray-400","text-3xl","mb-2"],[1,"text-gray-500","text-sm"],[1,"flex","items-center","justify-between"],[1,"font-medium","text-gray-700","capitalize","text-sm"],["formControlName","closed"],[1,"grid","grid-cols-2","gap-3"],["matInput","","type","time","formControlName","open",3,"disabled"],["matInput","","type","time","formControlName","close",3,"disabled"],["formControlName","registered_state","required",""],[1,"text-sm","align-middle"],[1,"text-sm","text-gray-900","break-all"],["alt","Business Logo",1,"w-16","h-16","object-cover","rounded-lg","border","border-gray-200",3,"src"],[1,"text-sm","text-gray-900","font-medium"],[1,"w-16","h-16","bg-gray-100","rounded-lg","border","border-gray-200","flex","items-center","justify-center","flex-shrink-0"],[1,"text-xs"],["alt","Banner Image",1,"w-full","h-24","object-cover","rounded-lg","border","border-gray-200",3,"src"],[1,"flex","items-center","gap-2"],[1,"w-full","h-24","bg-gray-100","rounded-lg","border","border-gray-200","flex","items-center","justify-center"],[1,"text-gray-400","text-2xl"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3"],[1,"border","border-gray-200","rounded-lg","p-2"],[1,"flex","items-center","gap-2","p-2","bg-blue-50","rounded","border"],[1,"w-full","h-20","object-cover","rounded","border","mb-2",3,"src","alt"],[1,"flex","items-center","gap-1"],[1,"text-blue-600","text-sm","flex-shrink-0"],[1,"text-xs","text-gray-900","font-medium","truncate"],["alt","SOS Certification",1,"w-full","h-20","object-cover","rounded","border","mb-2",3,"src"],[1,"text-xs","text-gray-900","font-medium"],[1,"text-blue-600","text-2xl","flex-shrink-0"],[1,"flex-1","min-w-0"],[1,"text-xs","font-medium","text-gray-900","truncate"],["alt","SOS Certification",1,"w-full","h-24","object-cover","rounded-lg","border","border-gray-200",3,"src"],[1,"border","border-gray-200","rounded-lg","p-3","bg-blue-50"],[1,"flex","items-center","gap-3"],[1,"w-full","h-16","bg-gray-100","rounded-lg","border","border-gray-200","flex","items-center","justify-center"],[1,"text-sm","text-gray-900","capitalize"],[1,"bg-green-50","border","border-green-200","rounded-lg","p-3","mt-2"],[1,"ml-0","sm:ml-2","space-y-1","text-xs","sm:text-sm"],[1,"text-gray-700"],[1,"text-gray-600"],[1,"font-medium","capitalize"],[1,"text-sm","text-gray-900","font-mono"],[1,"text-green-600","text-base","flex-shrink-0","mt-0.5"],[1,"text-xs","sm:text-sm","text-green-900"]],template:function(e,a){e&1&&(i(0,"div",5),u(1,Jt,2,2,"div",6)(2,Kt,12,1,"div",7)(3,gn,365,70,"div",8),t()),e&2&&(r(),p(a.loading()?1:a.error()?2:3))},dependencies:[O,gt,mt,rt,lt,dt,_t,ft,ct,pt,ut,Ee,we,ye,vt,bt,Se,ht,St,yt,Te,Be,fe,U,G,q,j,H,W,Ut,jt,qt,Dt,kt,Lt,Pt,Vt,ve,be,At,Fe],styles:["@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.success-message[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;padding:24px;border-radius:12px;text-align:center}.success-message[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px}.error-state[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]     .mat-form-field-outline-thick{color:#ef4444!important}.error-state[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]     .mat-form-field-label{color:#ef4444!important}.error-state[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]     .mat-error{color:#ef4444;font-size:12px;margin-top:4px}"]})};function bn(n,s){if(n&1&&C(0,"img",2),n&2){let e=m();_("src",e.business.banner_url,E)("alt",e.business.name+" banner")}}function vn(n,s){n&1&&(i(0,"div",3)(1,"mat-icon",23),o(2,"business"),t()()),n&2&&(r(),A("font-size",48,"px")("width",48,"px")("height",48,"px"))}function hn(n,s){n&1&&(i(0,"div",6)(1,"span",24)(2,"mat-icon",20),o(3,"star"),t(),o(4," Featured "),t()()),n&2&&(r(2),A("font-size",14,"px")("width",14,"px")("height",14,"px"))}function yn(n,s){if(n&1&&C(0,"img",2),n&2){let e=m();_("src",e.business.logo_url,E)("alt",e.business.name+" logo")}}function Sn(n,s){n&1&&(i(0,"div",10)(1,"mat-icon",25),o(2,"business"),t()()),n&2&&(r(),A("font-size",36,"px")("width",36,"px")("height",36,"px"))}function wn(n,s){if(n&1&&(i(0,"p",13)(1,"mat-icon",20),o(2,"location_on"),t(),o(3),t()),n&2){let e=m();r(),A("font-size",14,"px")("width",14,"px")("height",14,"px"),r(2),Z(" ",e.business.city,", ",e.business.state," ")}}function En(n,s){if(n&1&&(i(0,"span",27),o(1),t()),n&2){let e=s.$implicit;r(),y(" ",e," ")}}function Bn(n,s){if(n&1&&(i(0,"span",27),o(1),t()),n&2){let e=m(2);r(),y(" +",e.business.tags.length-2," ")}}function Tn(n,s){if(n&1&&(i(0,"div",17)(1,"div",26),T(2,En,2,1,"span",27,z),u(4,Bn,2,1,"span",27),t()()),n&2){let e=m();r(2),F(e.business.tags.slice(0,2)),r(2),p(e.business.tags.length>2?4:-1)}}var ke=class n{business;statusColorClass="";statusText="";categoryName="";businessTypeColor="";businessTypeText="";view=new N;edit=new N;delete=new N;onView(){this.view.emit(this.business._id)}onEdit(){this.edit.emit(this.business._id)}onDelete(){this.delete.emit(this.business._id)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=D({type:n,selectors:[["app-business-card"]],inputs:{business:"business",statusColorClass:"statusColorClass",statusText:"statusText",categoryName:"categoryName",businessTypeColor:"businessTypeColor",businessTypeText:"businessTypeText"},outputs:{view:"view",edit:"edit",delete:"delete"},decls:37,vars:14,consts:[[1,"h-full","bg-white!","hover:shadow-lg","transition-all","duration-200"],[1,"relative","h-32","bg-gradient-to-br","from-gray-100","to-gray-200","overflow-hidden"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"w-full","h-full","bg-gradient-to-br","from-blue-50","to-indigo-100","flex","items-center","justify-center"],[1,"absolute","top-3","right-3"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","backdrop-blur-sm"],[1,"absolute","top-3","left-3"],[1,"pt-8","pb-4","px-6","text-center"],[1,"flex","justify-center","-mt-24","mb-6","relative","z-10"],[1,"w-20","h-20","rounded-full","bg-white","shadow-lg","ring-4","ring-white","overflow-hidden"],[1,"w-full","h-full","bg-gray-100","flex","items-center","justify-center"],[1,"text-lg","font-semibold","text-gray-900","truncate","mb-2"],[1,"text-sm","text-gray-600","mb-1"],[1,"text-xs","text-gray-500","flex","items-center","justify-center","mb-4"],[1,"text-sm","text-gray-600","mb-4","line-clamp-2"],[1,"flex","items-center","justify-center","mb-4"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium"],[1,"mb-4"],[1,"flex","justify-center","gap-2"],["mat-button","","color","accent","title","View Business",3,"click"],[1,"mr-1"],["mat-button","","color","accent","title","Edit Business",3,"click"],["mat-button","","color","warn","title","Delete Business",3,"click"],[1,"text-gray-300"],[1,"bg-yellow-100","text-yellow-800","inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","backdrop-blur-sm"],[1,"text-gray-400"],[1,"flex","flex-wrap","gap-1","justify-center"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","bg-gray-100","text-gray-800"]],template:function(e,a){e&1&&(i(0,"mat-card",0)(1,"div",1),u(2,bn,1,2,"img",2)(3,vn,3,6,"div",3),i(4,"div",4)(5,"span",5),o(6),t()(),u(7,hn,5,6,"div",6),t(),i(8,"mat-card-content",7)(9,"div",8)(10,"div",9),u(11,yn,1,2,"img",2)(12,Sn,3,6,"div",10),t()(),i(13,"h3",11),o(14),t(),i(15,"p",12),o(16),t(),u(17,wn,4,8,"p",13),i(18,"p",14),o(19),t(),i(20,"div",15)(21,"span",16),o(22),t()(),u(23,Tn,5,1,"div",17),t(),i(24,"mat-card-actions",18)(25,"button",19),f("click",function(){return a.onView()}),i(26,"mat-icon",20),o(27,"visibility"),t(),o(28," View "),t(),i(29,"button",21),f("click",function(){return a.onEdit()}),i(30,"mat-icon",20),o(31,"edit"),t(),o(32," Edit "),t(),i(33,"button",22),f("click",function(){return a.onDelete()}),i(34,"mat-icon",20),o(35,"delete"),t(),o(36," Delete "),t()()()),e&2&&(r(2),p(a.business.banner_url?2:3),r(3),$(a.statusColorClass),r(),y(" ",a.statusText," "),r(),p(a.business.is_featured?7:-1),r(4),p(a.business.logo_url?11:12),r(3),b(a.business.name),r(2),b(a.categoryName),r(),p(a.business.city&&a.business.state?17:-1),r(2),y(" ",a.business.short_description||a.business.description||"No description available"," "),r(2),$(a.businessTypeColor),r(),y(" ",a.businessTypeText," "),r(),p(a.business.tags&&a.business.tags.length>0?23:-1))},dependencies:[O,H,W,at,he,U,G,q,j],styles:["[_nghost-%COMP%]     mat-card-actions mat-form-field{margin-top:0!important;margin-bottom:0!important}"]})};function Fn(n,s){if(n&1&&C(0,"img",3),n&2){let e=m();_("src",e.business.logo_url,E)("alt",e.business.name)}}function Mn(n,s){n&1&&(i(0,"div",4)(1,"mat-icon",16),o(2,"business"),t()()),n&2&&(r(),A("font-size",32,"px")("width",32,"px")("height",32,"px"))}function In(n,s){n&1&&(i(0,"span",7)(1,"mat-icon",17),o(2,"star"),t(),o(3," Featured "),t()),n&2&&(r(),A("font-size",12,"px")("width",12,"px")("height",12,"px"))}function kn(n,s){n&1&&C(0,"mat-divider")}var De=class n{business;statusColorClass="";statusText="";categoryName="";businessTypeColor="";businessTypeText="";formattedDate="";isLast=!1;view=new N;edit=new N;delete=new N;menuTrigger;onView(){this.view.emit(this.business._id)}onEdit(){this.edit.emit(this.business._id),this.menuTrigger?.closeMenu()}onDelete(){this.delete.emit(this.business._id),this.menuTrigger?.closeMenu()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=D({type:n,selectors:[["app-business-list-card"]],viewQuery:function(e,a){if(e&1&&le(Ce,5),e&2){let l;de(l=me())&&(a.menuTrigger=l.first)}},inputs:{business:"business",statusColorClass:"statusColorClass",statusText:"statusText",categoryName:"categoryName",businessTypeColor:"businessTypeColor",businessTypeText:"businessTypeText",formattedDate:"formattedDate",isLast:"isLast"},outputs:{view:"view",edit:"edit",delete:"delete"},decls:39,vars:13,consts:[["actionsMenu","matMenu"],[1,"mat-list-single-line"],[1,"pb-4"],["matListItemAvatar","",1,"mat-list-avatar",3,"src","alt"],["matListItemAvatar","",1,"mat-list-avatar","bg-gray-100","flex","items-center","justify-center"],["matListItemTitle","",1,"flex","items-center","gap-2"],[1,"text-lg","font-semibold"],[1,"bg-yellow-100","text-yellow-800","inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium"],["matListItemLine","",1,"text-sm","text-gray-600"],["matListItemLine","",1,"text-sm","text-gray-700","line-clamp-2","!mb-0"],["matListItemLine","",1,"flex","items-center","gap-4","my-4"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium"],["mat-icon-button","","title","More actions","matListItemMeta","",3,"matMenuTriggerFor"],["mat-menu-item","",1,"flex","items-center",3,"click"],[1,"mr-3"],["mat-menu-item","",1,"flex","items-center","text-red-600",3,"click"],[1,"text-gray-400"],[1,"mr-1"]],template:function(e,a){if(e&1){let l=M();i(0,"mat-list",1)(1,"mat-list-item",2),u(2,Fn,1,2,"img",3)(3,Mn,3,6,"div",4),i(4,"div",5)(5,"span",6),o(6),t(),u(7,In,4,6,"span",7),t(),i(8,"div",8),o(9),t(),i(10,"div",9),o(11),t(),i(12,"div",10)(13,"span",11),o(14),t(),i(15,"span",11),o(16),t()(),i(17,"button",12)(18,"mat-icon"),o(19,"more_vert"),t()(),i(20,"mat-menu",null,0)(22,"button",13),f("click",function(){return x(l),g(a.onView())}),i(23,"mat-icon",14),o(24,"visibility"),t(),i(25,"span"),o(26,"View"),t()(),i(27,"button",13),f("click",function(){return x(l),g(a.onEdit())}),i(28,"mat-icon",14),o(29,"edit"),t(),i(30,"span"),o(31,"Edit"),t()(),C(32,"mat-divider"),i(33,"button",15),f("click",function(){return x(l),g(a.onDelete())}),i(34,"mat-icon",14),o(35,"delete"),t(),i(36,"span"),o(37,"Delete"),t()()()(),u(38,kn,1,0,"mat-divider"),t()}if(e&2){let l=k(21);r(2),p(a.business.logo_url?2:3),r(4),b(a.business.name),r(),p(a.business.is_featured?7:-1),r(2),y(" ",a.categoryName," "),r(2),y(" ",a.business.short_description||a.business.description||"No description available"," "),r(2),$(a.statusColorClass),r(),y(" ",a.statusText," "),r(),$(a.businessTypeColor),r(),y(" ",a.businessTypeText," "),r(),_("matMenuTriggerFor",l),r(21),p(a.isLast?-1:38)}},dependencies:[O,It,Ft,Mt,Tt,ot,Et,wt,Bt,U,et,q,j,nt,it,tt,Ce,st],styles:["[_nghost-%COMP%]     mat-menu mat-icon{margin-right:8px}"]})};var Dn=(n,s)=>s.id,Wt=(n,s)=>s._id;function Pn(n,s){if(n&1&&(i(0,"mat-option",13),o(1),t()),n&2){let e=s.$implicit;_("value",e.id),r(),b(e.name)}}function Vn(n,s){if(n&1&&(i(0,"div",19)(1,"div",21),K(),i(2,"svg",22),C(3,"path",23),t(),re(),i(4,"div")(5,"h3",24),o(6,"Error"),t(),i(7,"p",25),o(8),t()()()()),n&2){let e=m();r(8),b(e.error())}}function Ln(n,s){if(n&1&&(i(0,"div",20),C(1,"mat-spinner",26),t()),n&2){let e=m();r(),_("diameter",e.isMobile()?40:60)("strokeWidth",4)}}function Nn(n,s){if(n&1){let e=M();i(0,"div",28),K(),i(1,"svg",29),C(2,"path",30),t()(),re(),i(3,"h3",31),o(4,"No businesses found"),t(),i(5,"p",32),o(6,"Try adjusting your search term or filter to find what you're looking for."),t(),i(7,"button",33),f("click",function(){x(e);let l=m(3);return l.clearSearch(),g(l.selectedCategory.set("all"))}),o(8," Clear Filters "),t()}}function An(n,s){if(n&1){let e=M();i(0,"div",28),K(),i(1,"svg",29),C(2,"path",34),t()(),re(),i(3,"h3",31),o(4,"No businesses yet"),t(),i(5,"p",32),o(6,"Get started by creating your first business listing."),t(),i(7,"button",35),f("click",function(){x(e);let l=m(3);return g(l.navigateToCreateBusiness())}),K(),i(8,"svg",36),C(9,"path",37),t(),o(10," Create Your First Business "),t()}}function On(n,s){if(n&1&&(i(0,"div",27),u(1,Nn,9,0)(2,An,11,0),t()),n&2){let e=m(2);r(),p(e.searchTerm()||e.selectedCategory()!=="all"?1:2)}}function jn(n,s){if(n&1){let e=M();i(0,"app-business-card",42),f("view",function(l){x(e);let d=m(4);return g(d.viewBusiness(l))})("edit",function(l){x(e);let d=m(4);return g(d.editBusiness(l))})("delete",function(l){x(e);let d=m(4);return g(d.deleteBusiness(l))}),t()}if(n&2){let e=s.$implicit,a=m(4);_("business",e)("statusColorClass",a.getStatusColor(e))("statusText",a.getStatusText(e))("categoryName",a.getCategoryName(e))("businessTypeColor",a.getBusinessTypeColor(e.business_type))("businessTypeText",a.getBusinessTypeText(e.business_type))}}function qn(n,s){if(n&1&&(i(0,"div",38)(1,"div",40),T(2,jn,1,6,"app-business-card",41,Wt),t()()),n&2){let e=m(3);r(2),F(e.filteredBusinesses())}}function Un(n,s){if(n&1){let e=M();i(0,"app-business-list-card",47),f("view",function(l){x(e);let d=m(4);return g(d.viewBusiness(l))})("edit",function(l){x(e);let d=m(4);return g(d.editBusiness(l))})("delete",function(l){x(e);let d=m(4);return g(d.deleteBusiness(l))}),t()}if(n&2){let e=s.$implicit,a=s.$index,l=s.$count,d=m(4);_("business",e)("statusColorClass",d.getStatusColor(e))("statusText",d.getStatusText(e))("categoryName",d.getCategoryName(e))("businessTypeColor",d.getBusinessTypeColor(e.business_type))("businessTypeText",d.getBusinessTypeText(e.business_type))("formattedDate",d.formatDate(e.createdAt))("isLast",a===l-1)}}function Rn(n,s){if(n&1&&(i(0,"div",39)(1,"mat-card",43)(2,"mat-card-content",44)(3,"div",45),T(4,Un,1,8,"app-business-list-card",46,Wt),t()()()()),n&2){let e=m(3);r(4),F(e.filteredBusinesses())}}function zn(n,s){if(n&1&&(u(0,qn,4,0,"div",38),u(1,Rn,6,0,"div",39)),n&2){let e=m(2);p(e.viewMode()==="grid"?0:-1),r(),p(e.viewMode()==="list"?1:-1)}}function $n(n,s){if(n&1&&u(0,On,3,1,"div",27)(1,zn,2,2),n&2){let e=m();p(e.filteredBusinesses().length===0?0:1)}}var Pe=class n{authService=I(xe);router=I(ue);businessService=I(ge);route=I(ce);breakpointObserver=I(_e);userBusinesses=h([]);loading=h(!1);error=h(null);searchTerm=h("");viewMode=h("list");selectedCategory=h("all");selectedStatus=h("all");isMobile=h(!1);user=this.authService.user;filteredBusinesses=Xe(()=>{let s=this.userBusinesses(),e=this.searchTerm().toLowerCase().trim(),a=this.selectedCategory(),l=this.selectedStatus();return a!=="all"&&(s=s.filter(d=>typeof d.category_id=="string"?d.category_id===a:d.category_id?._id===a||d.category_id?.name?.toLowerCase()===a.toLowerCase())),l!=="all"&&(s=s.filter(d=>d.status===l)),e&&(s=s.filter(d=>d.name.toLowerCase().includes(e)||d.description?.toLowerCase().includes(e)||d.short_description?.toLowerCase().includes(e)||d.city?.toLowerCase().includes(e)||d.state?.toLowerCase().includes(e)||d.tags?.some(v=>v.toLowerCase().includes(e)))),s});ngOnInit(){if(!this.user()){this.router.navigate(["/auth"]);return}this.breakpointObserver.observe([ee.Tablet]).subscribe(s=>{this.viewMode.set(s.matches?"list":"grid")}),this.breakpointObserver.observe([ee.Handset]).subscribe(s=>{this.isMobile.set(s.matches)}),this.loadData()}loadData(){return L(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let s=yield this.businessService.getMyBusinessesAsync();this.userBusinesses.set(s)}catch(s){console.error("Error loading businesses:",s),this.error.set("Failed to load businesses. Please try again.")}finally{this.loading.set(!1)}})}clearSearch(){this.searchTerm.set("")}setViewMode(s){this.viewMode.set(s)}navigateToCreateBusiness(){this.router.navigate(["../create-business"],{relativeTo:this.route})}editBusiness(s){console.log("Editing business with ID:",s),this.router.navigate(["../edit",s],{relativeTo:this.route})}viewBusiness(s){this.router.navigate(["/business/profile",s])}getStatusColor(s){switch(s.status){case"approved":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"rejected":return"bg-red-100 text-red-800";case"suspended":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}getStatusText(s){switch(s.status){case"approved":return"Approved";case"pending":return"Pending";case"rejected":return"Rejected";case"suspended":return"Suspended";default:return"Unknown"}}getCategoryName(s){return typeof s.category_id=="string"?s.category_id:s.category_id?.name||"No Category"}formatDate(s){try{return(typeof s=="string"?new Date(s):s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Unknown"}}getBusinessTypeColor(s){return{service:"bg-blue-100 text-blue-800",product:"bg-purple-100 text-purple-800",both:"bg-indigo-100 text-indigo-800"}[s]||"bg-gray-100 text-gray-800"}getBusinessTypeText(s){return{service:"Service",product:"Product",both:"Service & Product"}[s]||s}deleteBusiness(s){return L(this,null,function*(){if(confirm("Are you sure you want to delete this business? This action cannot be undone."))try{yield this.businessService.deleteBusiness(s),this.loadData()}catch(e){console.error("Error deleting business:",e),this.error.set("Failed to delete business. Please try again.")}})}getUniqueCategories(){let s=new Set,e=[];return this.userBusinesses().forEach(a=>{if(typeof a.category_id=="string")s.has(a.category_id)||(s.add(a.category_id),e.push({id:a.category_id,name:a.category_id}));else if(a.category_id&&typeof a.category_id=="object"){let l=a.category_id;l._id&&l.name&&!s.has(l._id)&&(s.add(l._id),e.push({id:l._id,name:l.name}))}}),e}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=D({type:n,selectors:[["app-list-businesses"]],decls:42,vars:6,consts:[[1,"min-h-screen","bg-gray-50"],[1,"mb-8"],[1,"lg:max-w-7xl","max-w-12xl"],[1,"px-6","pt-6"],["title","My Businesses","subtitle","Manage all your business listings",3,"backClicked"],["matButton","filled","color","primary",1,"flex","items-center",3,"click"],[1,"mr-2"],[1,"px-0","sm:px-6","pt-4"],[3,"searchChange","viewModeChange","clearSearch","searchTerm","viewMode"],[1,"w-full","sm:w-48"],["appearance","outline",1,"w-full"],[3,"selectionChange","value"],["value","all"],[3,"value"],["matPrefix",""],["value","approved"],["value","pending"],["value","rejected"],["value","suspended"],[1,"mb-6","bg-red-50","border-l-4","border-red-400","p-4","rounded-r-lg"],[1,"flex","items-center","justify-center","min-h-screen"],[1,"flex"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-red-400","mr-3"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"text-sm","font-medium","text-red-800"],[1,"mt-1","text-sm","text-red-700"],[3,"diameter","strokeWidth"],[1,"bg-white","rounded-xl","border","border-gray-200","p-12","text-center"],[1,"p-4","bg-gray-50","rounded-full","w-20","h-20","mx-auto","mb-6","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-gray-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"text-xl","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],[1,"inline-flex","items-center","px-4","py-2","border","border-gray-300","text-gray-700","rounded-lg","hover:bg-gray-50","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"inline-flex","items-center","px-6","py-3","bg-gray-900","text-white","rounded-lg","hover:bg-gray-800","transition-colors","font-medium",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"lg:max-w-7xl","max-w-12xl","px-6","pb-12"],[1,"lg:max-w-7xl","max-w-12xl","lg:px-6","px-0"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[3,"business","statusColorClass","statusText","categoryName","businessTypeColor","businessTypeText"],[3,"view","edit","delete","business","statusColorClass","statusText","categoryName","businessTypeColor","businessTypeText"],[1,"bg-white!"],[1,"p-0"],[1,"space-y-0"],[3,"business","statusColorClass","statusText","categoryName","businessTypeColor","businessTypeText","formattedDate","isLast"],[3,"view","edit","delete","business","statusColorClass","statusText","categoryName","businessTypeColor","businessTypeText","formattedDate","isLast"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-dashboard-subheader",4),f("backClicked",function(){return a.navigateToCreateBusiness()}),i(5,"button",5),f("click",function(){return a.navigateToCreateBusiness()}),i(6,"mat-icon",6),o(7,"add"),t(),o(8," New Business "),t()()(),i(9,"div",7)(10,"app-business-search-filter",8),f("searchChange",function(d){return a.searchTerm.set(d)})("viewModeChange",function(d){return a.setViewMode(d)})("clearSearch",function(){return a.clearSearch()}),i(11,"div",9)(12,"mat-form-field",10)(13,"mat-label"),o(14,"Category"),t(),i(15,"mat-select",11),f("selectionChange",function(d){return a.selectedCategory.set(d.value)}),i(16,"mat-option",12),o(17,"All Categories"),t(),T(18,Pn,2,2,"mat-option",13,Dn),t(),i(20,"mat-icon",14),o(21,"category"),t()()(),i(22,"div",9)(23,"mat-form-field",10)(24,"mat-label"),o(25,"Status"),t(),i(26,"mat-select",11),f("selectionChange",function(d){return a.selectedStatus.set(d.value)}),i(27,"mat-option",12),o(28,"All Status"),t(),i(29,"mat-option",15),o(30,"Approved"),t(),i(31,"mat-option",16),o(32,"Pending"),t(),i(33,"mat-option",17),o(34,"Rejected"),t(),i(35,"mat-option",18),o(36,"Suspended"),t()(),i(37,"mat-icon",14),o(38,"info"),t()()()()()(),u(39,Vn,9,1,"div",19),u(40,Ln,2,2,"div",20)(41,$n,2,1),t()()),e&2&&(r(10),_("searchTerm",a.searchTerm())("viewMode",a.viewMode()),r(5),_("value",a.selectedCategory()),r(3),F(a.getUniqueCategories()),r(8),_("value",a.selectedStatus()),r(13),p(a.error()?39:-1),r(),p(a.loading()?40:41))},dependencies:[O,pe,xt,U,G,q,j,Ee,we,ye,Se,Te,Be,fe,H,W,he,ve,be,Fe,Ot,ke,De],encapsulation:2})};var Ve=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=D({type:n,selectors:[["app-businesses"]],decls:1,vars:0,template:function(e,a){e&1&&C(0,"router-outlet")},dependencies:[pe,Ze],encapsulation:2})};var Fs=[{path:"",component:Ve,children:[{path:"list",component:Pe},{path:"create-business",component:te},{path:"edit/:id",component:te},{path:"",redirectTo:"list",pathMatch:"full"}]}];export{Fs as BUSINESSES_ROUTES};
