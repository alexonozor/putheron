import{a as Yt}from"./chunk-2NIXGP7Y.js";import{a as Jt,b as Xt}from"./chunk-MGV55PXV.js";import{a as Wt}from"./chunk-24EJG7KQ.js";import{a as Zt,b as ei,c as ti,d as ii,e as ni,f as oi,g as ai,h as ri,i as li,j as si,k as di}from"./chunk-D3YZBTPH.js";import{c as ci,d as mi,e as pi,f as _i,g as ui,h as gi}from"./chunk-UMQVT7ZH.js";import{a as je,b as Pe,c as Te}from"./chunk-YGGJSLQ5.js";import{a as Ht,b as gt,c as xt,d as Kt,e as Qt}from"./chunk-ILHTKWB2.js";import{a as zt}from"./chunk-WLNORBSV.js";import{a as Lt}from"./chunk-6Y73APSQ.js";import{a as jt}from"./chunk-UKC6Q2CU.js";import"./chunk-U7APRVMS.js";import"./chunk-4W6YSKPS.js";import{a as be}from"./chunk-WNE6W2TF.js";import{a as Nt}from"./chunk-FTTTP5IO.js";import"./chunk-PVDG46DZ.js";import{a as Rt,b as Bt}from"./chunk-O2JLEMZM.js";import{c as Vt}from"./chunk-GH7FJEBN.js";import{a as At,b as Ot,c as it,h as nt}from"./chunk-EOSAMZE4.js";import{a as qt,b as Gt}from"./chunk-EN3D2EIX.js";import{a as $t,b as Ut}from"./chunk-DB3WM5P2.js";import{a as Ft}from"./chunk-WJ4DFVWN.js";import"./chunk-DGKIS4CL.js";import{a as we,b as Se}from"./chunk-UW2ATRRX.js";import{d as re,h as fe,i as Ce,j as ve,l as It,m as he}from"./chunk-66HTC5NI.js";import{d as ue,e as Dt,f as tt,h as ge,k as xe}from"./chunk-67MRJSI2.js";import"./chunk-WIJXL5PX.js";import{a as ye,b as Ee}from"./chunk-F52GGYS4.js";import{a as Mt}from"./chunk-Y5F65BBX.js";import{a as Tt}from"./chunk-ZABTFPLN.js";import{a as le,b as Ke,c as Qe,d as Je,f as Xe,g as K}from"./chunk-LXLXFLON.js";import"./chunk-2TVU5X7D.js";import{A as kt,B as _e,c as Ze,e as L,h as se,i as de,l as et,p as ce,r as me,z as pe}from"./chunk-6HVQSJLB.js";import{a as Pt}from"./chunk-3DWAHAUX.js";import{b as ze,c as U,d as G}from"./chunk-CAUPKMHV.js";import{a as W}from"./chunk-HHKFLDM6.js";import"./chunk-SRA5OYUU.js";import{s as q,t as $}from"./chunk-EZYZDCTR.js";import"./chunk-FTO62232.js";import"./chunk-LIZM4CZI.js";import{a as Ye}from"./chunk-QD7SSFII.js";import{a as We,c as X,d as St,g as He}from"./chunk-CHN72C3K.js";import"./chunk-GTSDDWM5.js";import{A as Ge,i as yt,n as ae,q as Et,r as Ue,t as A,z as wt}from"./chunk-Z5YYMG7R.js";import{Bc as $e,Cc as bt,Eb as c,Ec as D,Fb as m,Fc as R,Ib as F,Ic as Me,Jb as V,Kb as E,Lb as a,Mb as o,Nb as j,Ob as p,Pb as u,Pc as T,Qb as P,Rb as z,Sb as Y,Ub as y,Vb as qe,Ya as ie,Yb as v,Zb as N,_a as l,_b as d,aa as ft,ea as Ct,fa as w,ic as vt,jb as _t,ka as f,kc as ut,la as C,lc as k,ma as M,mc as n,na as I,nc as g,o as H,oc as x,pb as B,pc as ht,ua as S,vb as O,xc as ne}from"./chunk-ME5BD2TS.js";import{e as b}from"./chunk-JKOY2XUY.js";var fi=(i,t)=>t._id;function ji(i,t){if(i&1){let e=y();p(0,"div",16)(1,"div",18),M(),p(2,"svg",19),P(3,"path",20),u(),I(),p(4,"div",21)(5,"h3",22),n(6,"Error Loading Dashboard"),u(),p(7,"p",23),n(8),u()(),p(9,"button",24),N("click",function(){f(e);let s=d();return C(s.loadDashboardData())}),n(10," Try Again "),u()()()}if(i&2){let e=d();l(8),g(e.error())}}function Pi(i,t){i&1&&(p(0,"div",17)(1,"div",25),P(2,"div",26),p(3,"p",27),n(4,"Loading dashboard data..."),u()()())}function Ti(i,t){if(i&1){let e=y();p(0,"div",67)(1,"div",90),M(),p(2,"svg",91),P(3,"path",35),u()(),I(),p(4,"h4",92),n(5,"No businesses yet"),u(),p(6,"p",93),n(7,"Get started by creating your first business profile and start connecting with customers"),u(),p(8,"button",94),N("click",function(){f(e);let s=d(3);return C(s.navigateToCreateBusiness())}),M(),p(9,"svg",95),P(10,"path",15),u(),n(11," Create Your First Business "),u()()}}function Mi(i,t){if(i&1&&P(0,"img",99),i&2){let e=d().$implicit;qe("src",e.logo_url,ie)("alt",e.name)}}function ki(i,t){i&1&&(p(0,"div",100),M(),p(1,"svg",109),P(2,"path",35),u()())}function Di(i,t){if(i&1){let e=y();p(0,"div",98),N("click",function(){let s=f(e).$implicit,_=d(4);return C(_.viewBusiness(s._id))}),c(1,Mi,1,2,"img",99)(2,ki,3,0,"div",100),p(3,"div",101)(4,"div",102)(5,"h4",103),n(6),u(),p(7,"span",104),n(8),D(9,"titlecase"),u()(),p(10,"div",105)(11,"span",18),M(),p(12,"svg",106),P(13,"path",107),u(),n(14),u(),I(),p(15,"span",18),M(),p(16,"svg",106),P(17,"path",44)(18,"path",108),u(),n(19),u()()(),p(20,"svg",80),P(21,"path",65),u()()}if(i&2){let e=t.$implicit,r=d(4);l(),m(e.logo_url?1:2),l(5),g(e.name),l(),k(r.getStatusBadgeClass(e.status)),l(),x(" ",R(9,7,e.status)," "),l(6),x(" ",r.getCategoryName(e)," "),l(5),x(" ",e.view_count||0," views ")}}function Ii(i,t){if(i&1){let e=y();p(0,"div",97)(1,"button",110),N("click",function(){f(e);let s=d(4);return C(s.setActiveTab("businesses"))}),n(2),M(),p(3,"svg",111),P(4,"path",112),u()()()}if(i&2){let e=d(4);l(2),x(" View ",e.userBusinesses().length-3," more businesses ")}}function Fi(i,t){if(i&1&&(p(0,"div",68),F(1,Di,22,9,"div",96,fi),c(3,Ii,5,1,"div",97),u()),i&2){let e=d(3);l(),V(e.userBusinesses().slice(0,3)),l(2),m(e.userBusinesses().length>3?3:-1)}}function Vi(i,t){if(i&1){let e=y();p(0,"div",28)(1,"div",30)(2,"div",31)(3,"div",18)(4,"div",32)(5,"div",33),M(),p(6,"svg",34),P(7,"path",35),u()()(),I(),p(8,"div",36)(9,"p",37),n(10,"Total Businesses"),u(),p(11,"div",38)(12,"p",39),n(13),D(14,"number"),u(),p(15,"p",40),n(16,"Active"),u()(),p(17,"p",41),n(18,"Business listings"),u()()()(),p(19,"div",31)(20,"div",18)(21,"div",32)(22,"div",42),M(),p(23,"svg",34),P(24,"path",43)(25,"path",44),u()()(),I(),p(26,"div",36)(27,"p",37),n(28,"Active Services"),u(),p(29,"div",38)(30,"p",39),n(31),D(32,"number"),u(),p(33,"p",45),n(34,"Available"),u()(),p(35,"p",41),n(36,"Service offerings"),u()()()(),p(37,"div",31)(38,"div",18)(39,"div",32)(40,"div",46),M(),p(41,"svg",34),P(42,"path",47),u()()(),I(),p(43,"div",36)(44,"p",37),n(45,"Projects"),u(),p(46,"div",38)(47,"p",39),n(48),D(49,"number"),u(),p(50,"p",48),n(51,"Total"),u()(),p(52,"p",41),n(53,"Portfolio items"),u()()()(),p(54,"div",31)(55,"div",18)(56,"div",32)(57,"div",49),M(),p(58,"svg",50),P(59,"path",51),u()()(),I(),p(60,"div",36)(61,"p",37),n(62,"Total Favorites"),u(),p(63,"div",38)(64,"p",39),n(65),D(66,"number"),u(),p(67,"p",52),n(68,"Received"),u()(),p(69,"p",41),n(70,"Customer likes"),u()()()()(),p(71,"div",53)(72,"div",31)(73,"div",18)(74,"div",32)(75,"div",54),M(),p(76,"svg",34),P(77,"path",55),u()()(),I(),p(78,"div",36)(79,"p",37),n(80,"Messages"),u(),p(81,"div",38)(82,"p",39),n(83,"0"),u(),p(84,"p",56),n(85,"Coming soon"),u()(),p(86,"p",41),n(87,"Customer inquiries"),u()()()()(),p(88,"div",57)(89,"div",58)(90,"div",59)(91,"div",60)(92,"div")(93,"h3",61),n(94,"Recent Businesses"),u(),p(95,"p",62),n(96,"Your latest business listings"),u()(),p(97,"button",63),N("click",function(){f(e);let s=d(2);return C(s.setActiveTab("businesses"))}),n(98," View All "),M(),p(99,"svg",64),P(100,"path",65),u()()()(),I(),p(101,"div",66),c(102,Ti,12,0,"div",67)(103,Fi,4,1,"div",68),u()(),p(104,"div",58)(105,"div",69)(106,"div",60)(107,"h3",70),n(108,"Quick Actions"),u(),M(),p(109,"svg",71),P(110,"path",72),u()(),I(),p(111,"p",62),n(112,"Get started with common tasks"),u()(),p(113,"div",66)(114,"div",73)(115,"button",74),N("click",function(){f(e);let s=d(2);return C(s.navigateToCreateBusiness())}),p(116,"div",75)(117,"div",76),M(),p(118,"svg",34),P(119,"path",35),u()(),I(),p(120,"div",77)(121,"p",78),n(122,"Create New Business"),u(),p(123,"p",79),n(124,"Set up a new business profile and start listing your services"),u()(),M(),p(125,"svg",80),P(126,"path",65),u()()(),I(),p(127,"button",81),N("click",function(){f(e);let s=d(2);return C(s.createService())}),p(128,"div",75)(129,"div",82),M(),p(130,"svg",34),P(131,"path",15),u()(),I(),p(132,"div",77)(133,"p",83),n(134,"Add New Service"),u(),p(135,"p",79),n(136,"Create a service offering for one of your businesses"),u()(),M(),p(137,"svg",84),P(138,"path",65),u()()(),I(),p(139,"button",85),N("click",function(){f(e);let s=d(2);return C(s.setActiveTab("businesses"))}),p(140,"div",75)(141,"div",86),M(),p(142,"svg",34),P(143,"path",87),u()(),I(),p(144,"div",77)(145,"p",88),n(146,"Manage Businesses"),u(),p(147,"p",79),n(148,"View and manage all your business listings"),u()(),M(),p(149,"svg",89),P(150,"path",65),u()()()()()()()()}if(i&2){let e=d(2);l(13),g(R(14,5,e.userBusinesses().length)),l(18),g(R(32,7,e.getTotalServices())),l(17),g(R(49,9,e.getTotalProjects())),l(17),g(R(66,11,e.getTotalFavorites())),l(37),m(e.userBusinesses().length===0?102:103)}}function Ni(i,t){if(i&1){let e=y();p(0,"div",116)(1,"div",118),M(),p(2,"svg",119),P(3,"path",35),u()(),I(),p(4,"h3",120),n(5,"No businesses yet"),u(),p(6,"p",121),n(7,"Get started by creating your first business listing."),u(),p(8,"button",122),N("click",function(){f(e);let s=d(3);return C(s.navigateToCreateBusiness())}),M(),p(9,"svg",12),P(10,"path",15),u(),n(11," Create Your First Business "),u()()}}function Ri(i,t){if(i&1&&P(0,"img",126),i&2){let e=d().$implicit;qe("src",e.logo_url,ie)("alt",e.name+" logo")}}function Bi(i,t){i&1&&(p(0,"div",127),M(),p(1,"svg",141),P(2,"path",35),u()())}function Ai(i,t){if(i&1){let e=y();p(0,"div",124),N("click",function(){let s=f(e).$implicit,_=d(4);return C(_.viewBusiness(s._id))}),p(1,"div",66)(2,"div",125),c(3,Ri,1,2,"img",126)(4,Bi,3,0,"div",127),p(5,"div",101)(6,"h4",128),n(7),u(),p(8,"span",129),n(9),D(10,"titlecase"),u()()(),p(11,"p",130),n(12),u(),p(13,"div",131)(14,"span"),n(15),u(),p(16,"span"),n(17),u()()(),p(18,"div",132)(19,"div",60)(20,"div",133)(21,"button",134),N("click",function(s){let _=f(e).$implicit,h=d(4);return s.stopPropagation(),C(h.viewBusiness(_._id))}),M(),p(22,"svg",135),P(23,"path",44)(24,"path",108),u()(),I(),p(25,"button",136),N("click",function(s){let _=f(e).$implicit,h=d(4);return s.stopPropagation(),C(h.editBusiness(_._id))}),M(),p(26,"svg",135),P(27,"path",137),u()()(),I(),p(28,"button",138),N("click",function(s){let _=f(e).$implicit,h=d(4);return s.stopPropagation(),C(h.deleteBusiness(_._id))}),M(),p(29,"svg",139),P(30,"path",140),u()()()()()}if(i&2){let e=t.$implicit,r=d(4);l(3),m(e.logo_url?3:4),l(4),g(e.name),l(),k(r.getStatusColor(e.status)),l(),x(" ",R(10,8,e.status)," "),l(3),x(" ",e.short_description||e.description||"No description available"," "),l(3),g(r.getCategoryName(e)),l(2),x("",e.view_count||0," views")}}function Oi(i,t){if(i&1&&(p(0,"div",117),F(1,Ai,31,10,"div",123,fi),u()),i&2){let e=d(3);l(),V(e.userBusinesses())}}function Li(i,t){if(i&1){let e=y();p(0,"div",29)(1,"div",60)(2,"div")(3,"h2",113),n(4,"Your Businesses"),u(),p(5,"p",114),n(6,"Manage and monitor your business listings"),u()(),p(7,"button",115),N("click",function(){f(e);let s=d(2);return C(s.navigateToCreateBusiness())}),M(),p(8,"svg",12),P(9,"path",15),u(),n(10," New Business "),u()(),c(11,Ni,12,0,"div",116)(12,Oi,3,0,"div",117),u()}if(i&2){let e=d(2);l(11),m(e.hasBusinesses()?12:11)}}function qi(i,t){if(i&1){let e=y();p(0,"div",29)(1,"div",60)(2,"div")(3,"h2",113),n(4,"Your Services"),u(),p(5,"p",114),n(6,"Manage services across all your businesses"),u()(),p(7,"button",115),N("click",function(){f(e);let s=d(2);return C(s.createService())}),M(),p(8,"svg",12),P(9,"path",15),u(),n(10," New Service "),u()(),I(),p(11,"div",116)(12,"div",118),M(),p(13,"svg",119),P(14,"path",43)(15,"path",44),u()(),I(),p(16,"h3",120),n(17,"Services Management"),u(),p(18,"p",121),n(19,"This feature will be available soon. You can manage services from individual business profiles."),u(),p(20,"button",142),N("click",function(){f(e);let s=d(2);return C(s.setActiveTab("businesses"))}),n(21," View Businesses "),u()()()}}function $i(i,t){i&1&&(p(0,"div",29)(1,"div",60)(2,"div")(3,"h2",113),n(4,"Your Projects"),u(),p(5,"p",114),n(6,"Showcase your work and portfolio"),u()()(),p(7,"div",116)(8,"div",118),M(),p(9,"svg",119),P(10,"path",47),u()(),I(),p(11,"h3",120),n(12,"Projects Coming Soon"),u(),p(13,"p",143),n(14,"Portfolio and project management features will be available in a future update."),u()()())}function Ui(i,t){i&1&&(p(0,"div",29)(1,"div",60)(2,"div")(3,"h2",113),n(4,"Messages"),u(),p(5,"p",114),n(6,"Communicate with clients and prospects"),u()()(),p(7,"div",116)(8,"div",118),M(),p(9,"svg",119),P(10,"path",55),u()(),I(),p(11,"h3",120),n(12,"Messaging Coming Soon"),u(),p(13,"p",143),n(14,"Direct messaging and communication features will be available in a future update."),u()()())}function Gi(i,t){if(i&1&&c(0,Vi,151,13,"div",28)(1,Li,13,1,"div",29)(2,qi,22,0,"div",29)(3,$i,15,0,"div",29)(4,Ui,15,0,"div",29),i&2){let e,r=d();m((e=r.activeTab())==="overview"?0:e==="businesses"?1:e==="services"?2:e==="projects"?3:e==="messages"?4:-1)}}var ot=class i{authService=w(W);router=w(X);route=w(We);businessService=w(Pt);projectService=w(be);favoritesService=w(Nt);roleService=w(Wt);userBusinesses=S([]);userServices=S([]);userProjects=S([]);businessesFavoritesCount=S({});loading=S(!1);error=S(null);activeTab=S("overview");userIdForAdmin="";isAssigningAdmin=S(!1);rachelUserId="687e220f5c54f009db530a0d";user=this.authService.user;hasBusinesses=T(()=>this.userBusinesses().length>0);totalServices=T(()=>this.userServices().length);totalProjects=T(()=>this.userProjects().length);ngOnInit(){if(!this.user()){this.router.navigate(["/auth"]);return}let t=this.router.url.split("/"),e=t[t.length-1];e==="dashboard"||e==="overview"||e===""?this.activeTab.set("overview"):this.activeTab.set(e),this.loadDashboardData()}loadDashboardData(){return b(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let t=yield this.businessService.getMyBusinessesAsync();this.userBusinesses.set(t);let e=[];for(let r of t)try{let s=yield this.businessService.getBusinessServicesAsync(r._id);e=[...e,...s]}catch(s){console.warn(`Failed to load services for business ${r._id}:`,s)}this.userServices.set(e);try{let r=yield this.projectService.getAllMyProjectsAsync();this.userProjects.set(r)}catch(r){console.warn("Failed to load projects:",r),this.userProjects.set([])}if(t.length>0)try{let r=t.map(_=>_._id),s=yield this.favoritesService.getMultipleBusinessesFavoritesCount(r);this.businessesFavoritesCount.set(s)}catch(r){console.warn("Failed to load businesses favorites count:",r),this.businessesFavoritesCount.set({})}}catch(t){console.error("Error loading dashboard data:",t),this.error.set(t.message||"Failed to load dashboard data")}finally{this.loading.set(!1)}})}setActiveTab(t){this.activeTab.set(t)}getTotalServices(){return this.totalServices()}getTotalProjects(){return this.totalProjects()}getTotalFavorites(){let t=this.businessesFavoritesCount();return Object.values(t).reduce((e,r)=>e+r,0)}navigateToCreateBusiness(){this.router.navigate(["/dashboard/businesses/create-business"])}createService(){if(this.userBusinesses().length===0){alert("Please create a business first before adding services.");return}this.router.navigate(["/dashboard/services/create"])}viewProjects(){this.router.navigate(["/dashboard/projects"])}viewBusiness(t){this.router.navigate(["/business/profile",t])}editBusiness(t){alert("Edit business functionality will be available soon!")}deleteBusiness(t){confirm("Are you sure you want to delete this business? This action cannot be undone.")&&alert("Delete business functionality will be available soon!")}viewProfile(){alert("Profile page will be available soon!")}viewMessages(){alert("Messages page will be available soon!")}getStatusColor(t){switch(t){case"approved":return"text-green-600";case"pending":return"text-yellow-600";case"rejected":return"text-red-600";case"suspended":return"text-gray-600";default:return"text-gray-600"}}getStatusBadgeClass(t){switch(t){case"approved":return"bg-green-50 text-green-700 border-green-200";case"pending":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"suspended":return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}}getStatusIcon(t){switch(t){case"approved":return"bg-green-400";case"pending":return"bg-yellow-400";case"rejected":return"bg-red-400";case"suspended":return"bg-gray-400";default:return"bg-gray-400"}}getCategoryName(t){return typeof t.category_id=="object"&&t.category_id?.name?t.category_id.name:"Unknown Category"}getSubcategoryName(t){return typeof t.subcategory_id=="object"&&t.subcategory_id?.name?t.subcategory_id.name:null}copyRachelId(){navigator.clipboard.writeText(this.rachelUserId).then(()=>{alert("Rachel's User ID copied to clipboard!")}).catch(t=>{console.error("Failed to copy:",t),alert("Failed to copy User ID")})}getCurrentDateTime(){return new Date().toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=B({type:i,selectors:[["app-overviews"]],decls:25,vars:5,consts:[[1,"min-h-screen","bg-gradient-to-br","from-slate-50","via-blue-50","to-indigo-50"],[1,"p-4","sm:p-6","lg:p-8"],[1,"mb-8"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between"],[1,"mb-4","sm:mb-0"],[1,"text-3xl","font-bold","text-gray-900","gradient-text"],[1,"text-gray-600","mt-2","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2","text-green-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","text-gray-500","mt-1"],[1,"flex","space-x-3"],[1,"action-button","inline-flex","items-center","px-4","py-2","border","border-transparent","rounded-lg","shadow-sm","text-sm","font-medium","text-white","bg-gradient-to-r","from-blue-600","to-indigo-600","hover:from-blue-700","hover:to-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"action-button","inline-flex","items-center","px-4","py-2","border","border-gray-300","rounded-lg","shadow-sm","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"bg-red-50","border","border-red-200","rounded-xl","p-6","mb-8"],[1,"flex","items-center","justify-center","h-64"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-600","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"flex-1"],[1,"text-sm","font-medium","text-red-800"],[1,"text-sm","text-red-700","mt-1"],[1,"ml-4","px-3","py-1","bg-red-600","text-white","rounded-md","text-sm","hover:bg-red-700","transition-colors",3,"click"],[1,"text-center"],[1,"inline-block","animate-spin","rounded-full","h-12","w-12","border-b-2","border-blue-600"],[1,"mt-4","text-sm","text-gray-600"],[1,"space-y-8"],[1,"space-y-6"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","sm:gap-6","stagger-animation"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-100","p-6","hover:shadow-md","transition-all","duration-300","transform","hover:-translate-y-1"],[1,"flex-shrink-0"],[1,"w-12","h-12","bg-gradient-to-r","from-blue-500","to-blue-600","rounded-xl","flex","items-center","justify-center","shadow-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"ml-4","flex-1"],[1,"text-sm","font-medium","text-gray-500"],[1,"flex","items-baseline"],[1,"text-2xl","font-bold","text-gray-900"],[1,"ml-2","text-sm","font-medium","text-blue-600"],[1,"text-xs","text-gray-500"],[1,"w-12","h-12","bg-gradient-to-r","from-green-500","to-green-600","rounded-xl","flex","items-center","justify-center","shadow-lg"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"ml-2","text-sm","font-medium","text-green-600"],[1,"w-12","h-12","bg-gradient-to-r","from-purple-500","to-purple-600","rounded-xl","flex","items-center","justify-center","shadow-lg"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V8a2 2 0 012-2V6"],[1,"ml-2","text-sm","font-medium","text-purple-600"],[1,"w-12","h-12","bg-gradient-to-r","from-red-500","to-red-600","rounded-xl","flex","items-center","justify-center","shadow-lg"],["fill","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-white"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"],[1,"ml-2","text-sm","font-medium","text-red-600"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","sm:gap-6"],[1,"w-12","h-12","bg-gradient-to-r","from-indigo-500","to-indigo-600","rounded-xl","flex","items-center","justify-center","shadow-lg"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"],[1,"ml-2","text-sm","font-medium","text-indigo-600"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-100","overflow-hidden"],[1,"px-6","py-4","border-b","border-gray-100","bg-gradient-to-r","from-gray-50","to-slate-50"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-600","mt-1"],[1,"inline-flex","items-center","px-3","py-2","text-sm","font-medium","text-blue-600","hover:text-blue-700","hover:bg-blue-50","rounded-lg","transition-all","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","ml-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"p-6"],[1,"text-center","py-12"],[1,"space-y-3"],[1,"px-6","py-4","border-b","border-gray-100","bg-gradient-to-r","from-blue-50","to-indigo-50"],[1,"text-lg","font-semibold","text-gray-900","bg-gradient-to-r","from-blue-600","to-indigo-600","bg-clip-text","text-transparent"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],[1,"grid","grid-cols-1","gap-4"],[1,"flex","items-center","p-4","bg-gradient-to-r","from-blue-50","to-indigo-50","border","border-blue-200","rounded-xl","hover:from-blue-100","hover:to-indigo-100","hover:border-blue-300","transition-all","duration-300","transform","hover:-translate-y-1","hover:shadow-md","group",3,"click"],[1,"flex","items-center","space-x-4","w-full"],[1,"p-3","bg-gradient-to-r","from-blue-500","to-blue-600","rounded-xl","shadow-lg","group-hover:shadow-xl","transition-all","duration-300"],[1,"flex-1","text-left"],[1,"text-base","font-semibold","text-gray-900","group-hover:text-blue-700","transition-colors"],[1,"text-sm","text-gray-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","group-hover:text-blue-500","transition-colors"],[1,"flex","items-center","p-4","bg-gradient-to-r","from-green-50","to-emerald-50","border","border-green-200","rounded-xl","hover:from-green-100","hover:to-emerald-100","hover:border-green-300","transition-all","duration-300","transform","hover:-translate-y-1","hover:shadow-md","group",3,"click"],[1,"p-3","bg-gradient-to-r","from-green-500","to-green-600","rounded-xl","shadow-lg","group-hover:shadow-xl","transition-all","duration-300"],[1,"text-base","font-semibold","text-gray-900","group-hover:text-green-700","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","group-hover:text-green-500","transition-colors"],[1,"flex","items-center","p-4","bg-gradient-to-r","from-purple-50","to-violet-50","border","border-purple-200","rounded-xl","hover:from-purple-100","hover:to-violet-100","hover:border-purple-300","transition-all","duration-300","transform","hover:-translate-y-1","hover:shadow-md","group",3,"click"],[1,"p-3","bg-gradient-to-r","from-purple-500","to-purple-600","rounded-xl","shadow-lg","group-hover:shadow-xl","transition-all","duration-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v11a2 2 0 002 2h2m0-13h10a2 2 0 012 2v9a2 2 0 01-2 2H9m8-2v2m-6-6h6m-6-2h6m-6-2h6m-6-2h6"],[1,"text-base","font-semibold","text-gray-900","group-hover:text-purple-700","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","group-hover:text-purple-500","transition-colors"],[1,"p-4","bg-gradient-to-br","from-blue-50","to-indigo-50","rounded-2xl","w-20","h-20","mx-auto","mb-6","flex","items-center","justify-center","border","border-blue-100"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-blue-500"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600","mb-6","max-w-sm","mx-auto"],[1,"inline-flex","items-center","px-6","py-3","bg-gradient-to-r","from-blue-600","to-indigo-600","text-white","rounded-xl","hover:from-blue-700","hover:to-indigo-700","transition-all","duration-200","transform","hover:scale-105","shadow-lg","hover:shadow-xl","font-medium",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],[1,"flex","items-center","space-x-4","p-4","rounded-xl","hover:bg-gradient-to-r","hover:from-blue-50","hover:to-indigo-50","cursor-pointer","transition-all","duration-300","transform","hover:-translate-y-1","border","border-transparent","hover:border-blue-200","hover:shadow-md","group"],[1,"pt-4","border-t","border-gray-100"],[1,"flex","items-center","space-x-4","p-4","rounded-xl","hover:bg-gradient-to-r","hover:from-blue-50","hover:to-indigo-50","cursor-pointer","transition-all","duration-300","transform","hover:-translate-y-1","border","border-transparent","hover:border-blue-200","hover:shadow-md","group",3,"click"],[1,"h-14","w-14","rounded-xl","object-cover","border-2","border-gray-100","group-hover:border-blue-200","transition-colors",3,"src","alt"],[1,"h-14","w-14","rounded-xl","bg-gradient-to-br","from-gray-100","to-gray-200","flex","items-center","justify-center","border-2","border-gray-100","group-hover:border-blue-200","group-hover:from-blue-50","group-hover:to-indigo-50","transition-all"],[1,"flex-1","min-w-0"],[1,"flex","items-center","space-x-2","mb-2"],[1,"text-base","font-semibold","text-gray-900","truncate","group-hover:text-blue-700","transition-colors"],[1,"inline-flex","items-center","px-2.5","py-1","rounded-full","text-xs","font-medium","border"],[1,"flex","items-center","space-x-4","text-sm","text-gray-500"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-7","h-7","text-gray-400","group-hover:text-blue-500","transition-colors"],[1,"w-full","flex","items-center","justify-center","px-4","py-3","text-sm","font-medium","text-gray-600","hover:text-blue-600","hover:bg-blue-50","rounded-lg","transition-all","duration-200","border","border-gray-200","hover:border-blue-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","ml-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"text-xl","font-semibold","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","px-4","py-2","bg-gray-900","text-white","rounded-lg","hover:bg-gray-800","transition-colors","font-medium","text-sm",3,"click"],[1,"bg-white","rounded-xl","border","border-gray-200","p-12","text-center","shadow-sm"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"p-4","bg-gray-50","rounded-full","w-20","h-20","mx-auto","mb-6","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-gray-300"],[1,"text-xl","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],[1,"inline-flex","items-center","px-6","py-3","bg-gray-900","text-white","rounded-lg","hover:bg-gray-800","transition-colors","font-medium",3,"click"],[1,"bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-lg","transition-all","cursor-pointer","overflow-hidden"],[1,"bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-lg","transition-all","cursor-pointer","overflow-hidden",3,"click"],[1,"flex","items-center","space-x-4","mb-4"],[1,"h-12","w-12","rounded-lg","object-cover",3,"src","alt"],[1,"h-12","w-12","rounded-lg","bg-gray-100","flex","items-center","justify-center"],[1,"text-lg","font-medium","text-gray-900","truncate"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium"],[1,"text-sm","text-gray-600","mb-4","line-clamp-2"],[1,"flex","items-center","justify-between","text-xs","text-gray-500"],[1,"px-6","py-3","border-t","border-gray-200","bg-gray-50"],[1,"flex","space-x-2"],["title","View Business",1,"p-2","hover:bg-gray-200","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-600"],["title","Edit Business",1,"p-2","hover:bg-gray-200","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["title","Delete Business",1,"p-2","hover:bg-red-50","hover:text-red-700","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-400"],[1,"inline-flex","items-center","px-4","py-2","border","border-gray-300","text-gray-700","rounded-lg","hover:bg-gray-50","transition-colors","font-medium",3,"click"],[1,"text-gray-500"]],template:function(e,r){if(e&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),n(6," Dashboard Overview "),u(),p(7,"p",6),M(),p(8,"svg",7),P(9,"path",8),u(),n(10),u(),I(),p(11,"p",9),n(12),u()(),p(13,"div",10)(14,"button",11),N("click",function(){return r.loadDashboardData()}),M(),p(15,"svg",12),P(16,"path",13),u(),n(17," Refresh "),u(),I(),p(18,"button",14),N("click",function(){return r.navigateToCreateBusiness()}),M(),p(19,"svg",12),P(20,"path",15),u(),n(21," New Business "),u()()()(),c(22,ji,11,1,"div",16),c(23,Pi,5,0,"div",17)(24,Gi,5,1),u()()),e&2){let s;l(10),x(" Welcome back, ",(((s=r.user())==null?null:s.first_name)+" "+(((s=r.user())==null?null:s.last_name)||"")).trim()||((s=r.user())==null?null:s.email)," "),l(2),x("Last updated: ",r.getCurrentDateTime()),l(2),qe("disabled",r.loading()),l(8),m(r.error()?22:-1),l(),m(r.loading()?23:24)}},dependencies:[A,kt,Et,ae],styles:["[_nghost-%COMP%]{display:block}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}.stats-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out}.stats-card[_ngcontent-%COMP%]:hover{box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a}.gradient-text[_ngcontent-%COMP%]{background:linear-gradient(-45deg,#3b82f6,#6366f1,#8b5cf6,#06b6d4);background-size:400% 400%;animation:_ngcontent-%COMP%_gradientShift 4s ease infinite;-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}@keyframes _ngcontent-%COMP%_gradientShift{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.loading-skeleton[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite}@keyframes _ngcontent-%COMP%_loading{0%{background-position:200% 0}to{background-position:-200% 0}}.action-button[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.action-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.02);box-shadow:0 10px 20px #0000001a}.action-button[_ngcontent-%COMP%]:active{transform:translateY(0) scale(.98)}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:3px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(to bottom,#cbd5e1,#94a3b8);border-radius:3px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(to bottom,#94a3b8,#64748b)}.glass-card[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);box-shadow:0 8px 32px #0000001a}.stagger-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out}.stagger-animation[_ngcontent-%COMP%]:nth-child(2){animation-delay:.1s}.stagger-animation[_ngcontent-%COMP%]:nth-child(3){animation-delay:.2s}.stagger-animation[_ngcontent-%COMP%]:nth-child(4){animation-delay:.3s}.stagger-animation[_ngcontent-%COMP%]:nth-child(5){animation-delay:.4s}"]})};var Q=(i,t)=>t._id;function Wi(i,t){if(i&1&&(a(0,"div",5)(1,"div",8)(2,"mat-icon",9),n(3,"error"),o(),a(4,"div")(5,"h3",10),n(6,"Error"),o(),a(7,"p",11),n(8),o()()()()),i&2){let e=d();l(8),g(e.error())}}function Hi(i,t){i&1&&(a(0,"div",6),j(1,"mat-spinner",12),a(2,"span",13),n(3,"Loading projects..."),o()())}function zi(i,t){if(i&1){let e=y();a(0,"div",17)(1,"div",19)(2,"mat-icon",20),n(3,"assignment"),o()(),a(4,"h3",21),n(5,"No project requests yet"),o(),a(6,"p",22),n(7,"Start by browsing businesses and creating your first project request."),o(),a(8,"button",23),v("click",function(){f(e);let s=d(2);return C(s.navigateToHome())}),n(9," Browse Businesses "),o()()}}function Yi(i,t){if(i&1&&(a(0,"p",34),n(1),o()),i&2){let e=d().$implicit;l(),g(e.description)}}function Ki(i,t){if(i&1){let e=y();a(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3",30),n(4),o(),a(5,"span",31)(6,"mat-icon",32),n(7,"schedule"),o(),n(8),o()(),a(9,"p",33),n(10),o(),c(11,Yi,2,1,"p",34),a(12,"div",35)(13,"div",36)(14,"span",37)(15,"mat-icon",38),n(16,"attach_money"),o(),n(17," Budget "),o(),a(18,"span",39),n(19),o()(),a(20,"div",36)(21,"span",37)(22,"mat-icon",38),n(23,"event"),o(),n(24," Submitted "),o(),a(25,"span",40),n(26),o()()()(),a(27,"div",41)(28,"button",42),v("click",function(){let s=f(e).$implicit,_=d(4);return C(_.viewProject(s))}),a(29,"mat-icon"),n(30,"visibility"),o(),n(31," View Details "),o()()()}if(i&2){let e=t.$implicit,r=d(4);l(4),g(e.title),l(),k(r.getStatusColor(e.status)),l(3),x(" ",r.getStatusText(e.status)," "),l(2),g(r.getBusinessName(e)),l(),m(e.description?11:-1),l(8),g(r.formatPrice(e.offered_price)),l(7),g(r.formatDate(e.createdAt))}}function Qi(i,t){if(i&1&&(a(0,"div",2)(1,"h3",24)(2,"mat-icon",25),n(3,"schedule"),o(),n(4),o(),a(5,"div",26),F(6,Ki,32,8,"div",27,Q),o()()),i&2){let e=d(3);l(4),x(" Pending Approval (",e.pendingMyProjects().length,") "),l(2),V(e.pendingMyProjects())}}function Ji(i,t){if(i&1&&(a(0,"p",34),n(1),o()),i&2){let e=d().$implicit;l(),g(e.description)}}function Xi(i,t){if(i&1&&(a(0,"div",36)(1,"span",37)(2,"mat-icon",38),n(3,"check_circle"),o(),n(4," Accepted "),o(),a(5,"span",40),n(6),o()()),i&2){let e=d().$implicit,r=d(4);l(6),g(r.formatDate(e.accepted_at))}}function Zi(i,t){if(i&1){let e=y();a(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3",30),n(4),o(),a(5,"span",31)(6,"mat-icon",32),n(7),o(),n(8),o()(),a(9,"p",33),n(10),o(),c(11,Ji,2,1,"p",34),a(12,"div",35)(13,"div",36)(14,"span",37)(15,"mat-icon",38),n(16,"attach_money"),o(),n(17," Budget "),o(),a(18,"span",39),n(19),o()(),c(20,Xi,7,1,"div",36),o()(),a(21,"div",41)(22,"button",42),v("click",function(){let s=f(e).$implicit,_=d(4);return C(_.viewProject(s))}),a(23,"mat-icon"),n(24,"visibility"),o(),n(25," View Details "),o()()()}if(i&2){let e=t.$implicit,r=d(4);l(4),g(e.title),l(),k(r.getStatusColor(e.status)),l(2),x(" ",e.status==="accepted"?"check_circle":"work"," "),l(),x(" ",r.getStatusText(e.status)," "),l(2),g(r.getBusinessName(e)),l(),m(e.description?11:-1),l(8),g(r.formatPrice(e.offered_price)),l(),m(e.accepted_at?20:-1)}}function en(i,t){if(i&1&&(a(0,"div",2)(1,"h3",24)(2,"mat-icon",43),n(3,"work"),o(),n(4),o(),a(5,"div",26),F(6,Zi,26,9,"div",27,Q),o()()),i&2){let e=d(3);l(4),x(" Active Projects (",e.activeMyProjects().length,") "),l(2),V(e.activeMyProjects())}}function tn(i,t){if(i&1&&(a(0,"p",34),n(1),o()),i&2){let e=d().$implicit;l(),g(e.description)}}function nn(i,t){if(i&1&&(a(0,"div",36)(1,"span",37)(2,"mat-icon",38),n(3,"event_available"),o(),n(4," Completed "),o(),a(5,"span",40),n(6),o()()),i&2){let e=d().$implicit,r=d(4);l(6),g(r.formatDate(e.completed_at))}}function on(i,t){if(i&1){let e=y();a(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3",30),n(4),o(),a(5,"span",31)(6,"mat-icon",32),n(7,"check_circle"),o(),n(8),o()(),a(9,"p",33),n(10),o(),c(11,tn,2,1,"p",34),a(12,"div",35)(13,"div",36)(14,"span",37)(15,"mat-icon",38),n(16,"attach_money"),o(),n(17," Final Amount "),o(),a(18,"span",39),n(19),o()(),c(20,nn,7,1,"div",36),o()(),a(21,"div",41)(22,"button",42),v("click",function(){let s=f(e).$implicit,_=d(4);return C(_.viewProject(s))}),a(23,"mat-icon"),n(24,"visibility"),o(),n(25," View Details "),o()()()}if(i&2){let e=t.$implicit,r=d(4);l(4),g(e.title),l(),k(r.getStatusColor(e.status)),l(3),x(" ",r.getStatusText(e.status)," "),l(2),g(r.getBusinessName(e)),l(),m(e.description?11:-1),l(8),g(r.formatPrice(e.offered_price)),l(),m(e.completed_at?20:-1)}}function an(i,t){if(i&1&&(a(0,"div",2)(1,"h3",24)(2,"mat-icon",44),n(3,"check_circle"),o(),n(4),o(),a(5,"div",26),F(6,on,26,8,"div",27,Q),o()()),i&2){let e=d(3);l(4),x(" Completed Projects (",e.completedMyProjects().length,") "),l(2),V(e.completedMyProjects())}}function rn(i,t){if(i&1&&(a(0,"p",34),n(1),o()),i&2){let e=d().$implicit;l(),g(e.description)}}function ln(i,t){if(i&1&&(a(0,"div",46)(1,"p",47),n(2,"Rejection Reason:"),o(),a(3,"p",48),n(4),o()()),i&2){let e=d().$implicit;l(4),g(e.rejection_reason)}}function sn(i,t){if(i&1&&(a(0,"div",36)(1,"span",37)(2,"mat-icon",38),n(3,"event"),o(),n(4," Rejected "),o(),a(5,"span",40),n(6),o()()),i&2){let e=d().$implicit,r=d(4);l(6),g(r.formatDate(e.rejected_at))}}function dn(i,t){if(i&1){let e=y();a(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3",30),n(4),o(),a(5,"span",31)(6,"mat-icon",32),n(7,"cancel"),o(),n(8),o()(),a(9,"p",33),n(10),o(),c(11,rn,2,1,"p",34),c(12,ln,5,1,"div",46),a(13,"div",35)(14,"div",36)(15,"span",37)(16,"mat-icon",38),n(17,"attach_money"),o(),n(18," Proposed Budget "),o(),a(19,"span",39),n(20),o()(),c(21,sn,7,1,"div",36),o()(),a(22,"div",41)(23,"button",42),v("click",function(){let s=f(e).$implicit,_=d(4);return C(_.viewProject(s))}),a(24,"mat-icon"),n(25,"visibility"),o(),n(26," View Details "),o()()()}if(i&2){let e=t.$implicit,r=d(4);l(4),g(e.title),l(),k(r.getStatusColor(e.status)),l(3),x(" ",r.getStatusText(e.status)," "),l(2),g(r.getBusinessName(e)),l(),m(e.description?11:-1),l(),m(e.rejection_reason?12:-1),l(8),g(r.formatPrice(e.offered_price)),l(),m(e.rejected_at?21:-1)}}function cn(i,t){if(i&1&&(a(0,"div",2)(1,"h3",24)(2,"mat-icon",45),n(3,"cancel"),o(),n(4),o(),a(5,"div",26),F(6,dn,27,9,"div",27,Q),o()()),i&2){let e=d(3);l(4),x(" Rejected Projects (",e.rejectedMyProjects().length,") "),l(2),V(e.rejectedMyProjects())}}function mn(i,t){if(i&1&&(a(0,"p",34),n(1),o()),i&2){let e=d().$implicit;l(),g(e.description)}}function pn(i,t){if(i&1&&(a(0,"div",50)(1,"p",51),n(2,"Cancellation Reason:"),o(),a(3,"p",52),n(4),o()()),i&2){let e=d().$implicit;l(4),g(e.cancellation_reason)}}function _n(i,t){if(i&1&&(a(0,"div",36)(1,"span",37)(2,"mat-icon",38),n(3,"event"),o(),n(4," Cancelled "),o(),a(5,"span",40),n(6),o()()),i&2){let e=d().$implicit,r=d(4);l(6),g(r.formatDate(e.cancelled_at))}}function un(i,t){if(i&1){let e=y();a(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3",30),n(4),o(),a(5,"span",31)(6,"mat-icon",32),n(7,"block"),o(),n(8),o()(),a(9,"p",33),n(10),o(),c(11,mn,2,1,"p",34),c(12,pn,5,1,"div",50),a(13,"div",35)(14,"div",36)(15,"span",37)(16,"mat-icon",38),n(17,"attach_money"),o(),n(18," Budget "),o(),a(19,"span",39),n(20),o()(),c(21,_n,7,1,"div",36),o()(),a(22,"div",41)(23,"button",42),v("click",function(){let s=f(e).$implicit,_=d(4);return C(_.viewProject(s))}),a(24,"mat-icon"),n(25,"visibility"),o(),n(26," View Details "),o()()()}if(i&2){let e=t.$implicit,r=d(4);l(4),g(e.title),l(),k(r.getStatusColor(e.status)),l(3),x(" ",r.getStatusText(e.status)," "),l(2),g(r.getBusinessName(e)),l(),m(e.description?11:-1),l(),m(e.cancellation_reason?12:-1),l(8),g(r.formatPrice(e.offered_price)),l(),m(e.cancelled_at?21:-1)}}function gn(i,t){if(i&1&&(a(0,"div",2)(1,"h3",24)(2,"mat-icon",49),n(3,"block"),o(),n(4),o(),a(5,"div",26),F(6,un,27,9,"div",27,Q),o()()),i&2){let e=d(3);l(4),x(" Cancelled Projects (",e.cancelledMyProjects().length,") "),l(2),V(e.cancelledMyProjects())}}function xn(i,t){if(i&1&&(c(0,Qi,8,1,"div",2),c(1,en,8,1,"div",2),c(2,an,8,1,"div",2),c(3,cn,8,1,"div",2),c(4,gn,8,1,"div",2)),i&2){let e=d(2);m(e.pendingMyProjects().length>0?0:-1),l(),m(e.activeMyProjects().length>0?1:-1),l(),m(e.completedMyProjects().length>0?2:-1),l(),m(e.rejectedMyProjects().length>0?3:-1),l(),m(e.cancelledMyProjects().length>0?4:-1)}}function fn(i,t){i&1&&(a(0,"div",17)(1,"div",19)(2,"mat-icon",20),n(3,"business_center"),o()(),a(4,"h3",21),n(5,"No project inquiries yet"),o(),a(6,"p",22),n(7,"When clients are interested in your services, their project requests will appear here."),o()())}function Cn(i,t){if(i&1&&(a(0,"p",34),n(1),o()),i&2){let e=d().$implicit;l(),g(e.description)}}function vn(i,t){if(i&1){let e=y();a(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3",30),n(4),o(),a(5,"span",31)(6,"mat-icon",32),n(7,"schedule"),o(),n(8),o()(),a(9,"p",33),n(10),o(),c(11,Cn,2,1,"p",34),a(12,"div",35)(13,"div",36)(14,"span",37)(15,"mat-icon",38),n(16,"attach_money"),o(),n(17," Client Budget "),o(),a(18,"span",39),n(19),o()(),a(20,"div",36)(21,"span",37)(22,"mat-icon",38),n(23,"event"),o(),n(24," Received "),o(),a(25,"span",40),n(26),o()()()(),a(27,"div",41)(28,"div",53)(29,"button",54),v("click",function(){let s=f(e).$implicit,_=d(4);return C(_.viewProject(s))}),a(30,"mat-icon"),n(31,"visibility"),o(),n(32," View "),o(),a(33,"button",55),v("click",function(){let s=f(e).$implicit,_=d(4);return C(_.acceptProject(s))}),a(34,"mat-icon"),n(35,"check"),o(),n(36," Accept "),o(),a(37,"button",56),v("click",function(){let s=f(e).$implicit,_=d(4);return C(_.rejectProject(s))}),a(38,"mat-icon"),n(39,"close"),o(),n(40," Reject "),o()()()()}if(i&2){let e=t.$implicit,r=d(4);l(4),g(e.title),l(),k(r.getStatusColor(e.status)),l(3),x(" ",r.getStatusText(e.status)," "),l(2),g(r.getClientName(e)),l(),m(e.description?11:-1),l(8),g(r.formatPrice(e.offered_price)),l(7),g(r.formatDate(e.createdAt))}}function hn(i,t){if(i&1&&(a(0,"div",2)(1,"h3",24)(2,"mat-icon",25),n(3,"schedule"),o(),n(4),o(),a(5,"div",26),F(6,vn,41,8,"div",27,Q),o()()),i&2){let e=d(3);l(4),x(" Pending Requests (",e.pendingBusinessProjects().length,") "),l(2),V(e.pendingBusinessProjects())}}function bn(i,t){if(i&1&&(a(0,"p",34),n(1),o()),i&2){let e=d().$implicit;l(),g(e.description)}}function yn(i,t){if(i&1&&(a(0,"div",36)(1,"span",37)(2,"mat-icon",38),n(3,"event"),o(),n(4," Deadline "),o(),a(5,"span",40),n(6),o()()),i&2){let e=d().$implicit,r=d(4);l(6),g(r.formatDate(e.deadline))}}function En(i,t){if(i&1){let e=y();a(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3",30),n(4),o(),a(5,"span",31)(6,"mat-icon",32),n(7),o(),n(8),o()(),a(9,"p",33),n(10),o(),c(11,bn,2,1,"p",34),a(12,"div",35)(13,"div",36)(14,"span",37)(15,"mat-icon",38),n(16,"attach_money"),o(),n(17," Budget "),o(),a(18,"span",39),n(19),o()(),c(20,yn,7,1,"div",36),o()(),a(21,"div",41)(22,"button",42),v("click",function(){let s=f(e).$implicit,_=d(4);return C(_.viewProject(s))}),a(23,"mat-icon"),n(24,"visibility"),o(),n(25," View Details "),o()()()}if(i&2){let e=t.$implicit,r=d(4);l(4),g(e.title),l(),k(r.getStatusColor(e.status)),l(2),x(" ",e.status==="accepted"?"check_circle":"work"," "),l(),x(" ",r.getStatusText(e.status)," "),l(2),g(r.getClientName(e)),l(),m(e.description?11:-1),l(8),g(r.formatPrice(e.offered_price)),l(),m(e.deadline?20:-1)}}function wn(i,t){if(i&1&&(a(0,"div",2)(1,"h3",24)(2,"mat-icon",43),n(3,"work"),o(),n(4),o(),a(5,"div",26),F(6,En,26,9,"div",27,Q),o()()),i&2){let e=d(3);l(4),x(" Active Projects (",e.activeBusinessProjects().length,") "),l(2),V(e.activeBusinessProjects())}}function Sn(i,t){if(i&1&&(a(0,"p",34),n(1),o()),i&2){let e=d().$implicit;l(),g(e.description)}}function jn(i,t){if(i&1&&(a(0,"div",36)(1,"span",37)(2,"mat-icon",38),n(3,"event_available"),o(),n(4," Completed "),o(),a(5,"span",40),n(6),o()()),i&2){let e=d().$implicit,r=d(4);l(6),g(r.formatDate(e.completed_at))}}function Pn(i,t){if(i&1){let e=y();a(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3",30),n(4),o(),a(5,"span",31)(6,"mat-icon",32),n(7,"check_circle"),o(),n(8),o()(),a(9,"p",33),n(10),o(),c(11,Sn,2,1,"p",34),a(12,"div",35)(13,"div",36)(14,"span",37)(15,"mat-icon",38),n(16,"attach_money"),o(),n(17," Final Amount "),o(),a(18,"span",39),n(19),o()(),c(20,jn,7,1,"div",36),o()(),a(21,"div",41)(22,"button",42),v("click",function(){let s=f(e).$implicit,_=d(4);return C(_.viewProject(s))}),a(23,"mat-icon"),n(24,"visibility"),o(),n(25," View Details "),o()()()}if(i&2){let e=t.$implicit,r=d(4);l(4),g(e.title),l(),k(r.getStatusColor(e.status)),l(3),x(" ",r.getStatusText(e.status)," "),l(2),g(r.getClientName(e)),l(),m(e.description?11:-1),l(8),g(r.formatPrice(e.offered_price)),l(),m(e.completed_at?20:-1)}}function Tn(i,t){if(i&1&&(a(0,"div",2)(1,"h3",24)(2,"mat-icon",44),n(3,"check_circle"),o(),n(4),o(),a(5,"div",26),F(6,Pn,26,8,"div",27,Q),o()()),i&2){let e=d(3);l(4),x(" Completed Projects (",e.completedBusinessProjects().length,") "),l(2),V(e.completedBusinessProjects())}}function Mn(i,t){if(i&1&&(a(0,"p",34),n(1),o()),i&2){let e=d().$implicit;l(),g(e.description)}}function kn(i,t){if(i&1&&(a(0,"div",46)(1,"p",47),n(2,"Rejection Reason:"),o(),a(3,"p",48),n(4),o()()),i&2){let e=d().$implicit;l(4),g(e.rejection_reason)}}function Dn(i,t){if(i&1&&(a(0,"div",36)(1,"span",37)(2,"mat-icon",38),n(3,"event"),o(),n(4," Rejected "),o(),a(5,"span",40),n(6),o()()),i&2){let e=d().$implicit,r=d(4);l(6),g(r.formatDate(e.rejected_at))}}function In(i,t){if(i&1){let e=y();a(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3",30),n(4),o(),a(5,"span",31)(6,"mat-icon",32),n(7,"cancel"),o(),n(8),o()(),a(9,"p",33),n(10),o(),c(11,Mn,2,1,"p",34),c(12,kn,5,1,"div",46),a(13,"div",35)(14,"div",36)(15,"span",37)(16,"mat-icon",38),n(17,"attach_money"),o(),n(18," Client Budget "),o(),a(19,"span",39),n(20),o()(),c(21,Dn,7,1,"div",36),o()(),a(22,"div",41)(23,"button",42),v("click",function(){let s=f(e).$implicit,_=d(4);return C(_.viewProject(s))}),a(24,"mat-icon"),n(25,"visibility"),o(),n(26," View Details "),o()()()}if(i&2){let e=t.$implicit,r=d(4);l(4),g(e.title),l(),k(r.getStatusColor(e.status)),l(3),x(" ",r.getStatusText(e.status)," "),l(2),g(r.getClientName(e)),l(),m(e.description?11:-1),l(),m(e.rejection_reason?12:-1),l(8),g(r.formatPrice(e.offered_price)),l(),m(e.rejected_at?21:-1)}}function Fn(i,t){if(i&1&&(a(0,"div",2)(1,"h3",24)(2,"mat-icon",45),n(3,"cancel"),o(),n(4),o(),a(5,"div",26),F(6,In,27,9,"div",27,Q),o()()),i&2){let e=d(3);l(4),x(" Rejected Projects (",e.rejectedBusinessProjects().length,") "),l(2),V(e.rejectedBusinessProjects())}}function Vn(i,t){if(i&1&&(a(0,"p",34),n(1),o()),i&2){let e=d().$implicit;l(),g(e.description)}}function Nn(i,t){if(i&1&&(a(0,"div",50)(1,"p",51),n(2,"Cancellation Reason:"),o(),a(3,"p",52),n(4),o()()),i&2){let e=d().$implicit;l(4),g(e.cancellation_reason)}}function Rn(i,t){if(i&1&&(a(0,"div",36)(1,"span",37)(2,"mat-icon",38),n(3,"event"),o(),n(4," Cancelled "),o(),a(5,"span",40),n(6),o()()),i&2){let e=d().$implicit,r=d(4);l(6),g(r.formatDate(e.cancelled_at))}}function Bn(i,t){if(i&1){let e=y();a(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3",30),n(4),o(),a(5,"span",31)(6,"mat-icon",32),n(7,"block"),o(),n(8),o()(),a(9,"p",33),n(10),o(),c(11,Vn,2,1,"p",34),c(12,Nn,5,1,"div",50),a(13,"div",35)(14,"div",36)(15,"span",37)(16,"mat-icon",38),n(17,"attach_money"),o(),n(18," Budget "),o(),a(19,"span",39),n(20),o()(),c(21,Rn,7,1,"div",36),o()(),a(22,"div",41)(23,"button",42),v("click",function(){let s=f(e).$implicit,_=d(4);return C(_.viewProject(s))}),a(24,"mat-icon"),n(25,"visibility"),o(),n(26," View Details "),o()()()}if(i&2){let e=t.$implicit,r=d(4);l(4),g(e.title),l(),k(r.getStatusColor(e.status)),l(3),x(" ",r.getStatusText(e.status)," "),l(2),g(r.getClientName(e)),l(),m(e.description?11:-1),l(),m(e.cancellation_reason?12:-1),l(8),g(r.formatPrice(e.offered_price)),l(),m(e.cancelled_at?21:-1)}}function An(i,t){if(i&1&&(a(0,"div",2)(1,"h3",24)(2,"mat-icon",49),n(3,"block"),o(),n(4),o(),a(5,"div",26),F(6,Bn,27,9,"div",27,Q),o()()),i&2){let e=d(3);l(4),x(" Cancelled Projects (",e.cancelledBusinessProjects().length,") "),l(2),V(e.cancelledBusinessProjects())}}function On(i,t){if(i&1&&(c(0,hn,8,1,"div",2),c(1,wn,8,1,"div",2),c(2,Tn,8,1,"div",2),c(3,Fn,8,1,"div",2),c(4,An,8,1,"div",2)),i&2){let e=d(2);m(e.pendingBusinessProjects().length>0?0:-1),l(),m(e.activeBusinessProjects().length>0?1:-1),l(),m(e.completedBusinessProjects().length>0?2:-1),l(),m(e.rejectedBusinessProjects().length>0?3:-1),l(),m(e.cancelledBusinessProjects().length>0?4:-1)}}function Ln(i,t){if(i&1){let e=y();a(0,"mat-tab-group",14),v("selectedTabChange",function(s){f(e);let _=d();return C(_.onTabChange(s.index))}),a(1,"mat-tab",15)(2,"div",16),c(3,zi,10,0,"div",17)(4,xn,5,5),o()(),a(5,"mat-tab",18)(6,"div",16),c(7,fn,8,0,"div",17)(8,On,5,5),o()()()}if(i&2){let e=d();l(3),m(e.myProjects().length===0?3:4),l(4),m(e.businessProjects().length===0?7:8)}}var at=class i{authService=w(W);projectService=w(be);router=w(X);loading=S(!1);error=S(null);myProjects=S([]);businessProjects=S([]);activeTab=S(0);user=this.authService.user;pendingMyProjects=T(()=>this.myProjects().filter(t=>["requested","under_review"].includes(t.status)));activeMyProjects=T(()=>this.myProjects().filter(t=>["accepted","started","payment_requested","payment_pending","payment_completed","in_progress"].includes(t.status)));completedMyProjects=T(()=>this.myProjects().filter(t=>["completed","settled"].includes(t.status)));rejectedMyProjects=T(()=>this.myProjects().filter(t=>t.status==="rejected"));cancelledMyProjects=T(()=>this.myProjects().filter(t=>t.status==="cancelled"));pendingBusinessProjects=T(()=>this.businessProjects().filter(t=>["requested","under_review"].includes(t.status)));activeBusinessProjects=T(()=>this.businessProjects().filter(t=>["accepted","started","payment_requested","payment_pending","payment_completed","in_progress"].includes(t.status)));completedBusinessProjects=T(()=>this.businessProjects().filter(t=>["completed","settled"].includes(t.status)));rejectedBusinessProjects=T(()=>this.businessProjects().filter(t=>t.status==="rejected"));cancelledBusinessProjects=T(()=>this.businessProjects().filter(t=>t.status==="cancelled"));ngOnInit(){if(!this.user()){this.router.navigate(["/auth"]);return}this.loadProjects()}loadProjects(){return b(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let t=yield this.projectService.getMyProjectsAsync("client");this.myProjects.set(t);let e=yield this.projectService.getMyProjectsAsync("business_owner");this.businessProjects.set(e)}catch(t){console.error("Error loading projects:",t),this.error.set("Failed to load projects")}finally{this.loading.set(!1)}})}onTabChange(t){this.activeTab.set(t)}getStatusColor(t){return{requested:"bg-blue-100 text-blue-800",under_review:"bg-yellow-100 text-yellow-800",accepted:"bg-green-100 text-green-800",started:"bg-indigo-100 text-indigo-800",payment_requested:"bg-orange-100 text-orange-800",payment_pending:"bg-orange-100 text-orange-800",payment_completed:"bg-emerald-100 text-emerald-800",in_progress:"bg-purple-100 text-purple-800",awaiting_client_approval:"bg-amber-100 text-amber-800",completed:"bg-green-100 text-green-800",settled:"bg-teal-100 text-teal-800",rejected:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"}[t]||"bg-gray-100 text-gray-800"}getStatusText(t){return{requested:"Requested",under_review:"Under Review",accepted:"Accepted",started:"Started",payment_requested:"Payment Requested",payment_pending:"Payment Pending",payment_completed:"Payment Completed",in_progress:"In Progress",awaiting_client_approval:"Awaiting Approval",completed:"Completed",settled:"Settled",rejected:"Rejected",cancelled:"Cancelled"}[t]||t}formatPrice(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}formatDate(t){try{return(typeof t=="string"?new Date(t):t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Unknown"}}getBusinessName(t){return typeof t.business_id=="object"&&t.business_id.name?t.business_id.name:"Unknown Business"}getClientName(t){if(typeof t.client_id=="object"){let e=t.client_id;return`${e.first_name} ${e.last_name}`}return"Unknown Client"}viewProject(t){this.router.navigate(["/dashboard/projects",t._id])}acceptProject(t){return b(this,null,function*(){try{yield this.projectService.updateProjectAsync(t._id,{status:"accepted"}),this.loadProjects()}catch(e){console.error("Error accepting project:",e),this.error.set("Failed to accept project")}})}rejectProject(t){return b(this,null,function*(){let e=prompt("Please provide a reason for rejection:");if(e)try{yield this.projectService.updateProjectAsync(t._id,{status:"rejected",rejection_reason:e}),this.loadProjects()}catch(r){console.error("Error rejecting project:",r),this.error.set("Failed to reject project")}})}navigateToHome(){this.router.navigate(["/"])}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=B({type:i,selectors:[["app-projects"]],decls:10,vars:2,consts:[[1,"min-h-screen","bg-gray-50","p-6"],[1,"max-w-7xl","mx-auto"],[1,"mb-8"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600"],[1,"mb-6","bg-red-50","border-l-4","border-red-400","p-4","rounded-r-lg"],[1,"flex","items-center","justify-center","py-12"],[1,"projects-tabs"],[1,"flex"],[1,"text-red-400","mr-3"],[1,"text-sm","font-medium","text-red-800"],[1,"mt-1","text-sm","text-red-700"],["diameter","40"],[1,"ml-3","text-gray-600"],[1,"projects-tabs",3,"selectedTabChange"],["label","My Project Requests"],[1,"py-6"],[1,"bg-white","rounded-xl","border","border-gray-200","p-12","text-center"],["label","Business Inquiries"],[1,"p-4","bg-gray-50","rounded-full","w-20","h-20","mx-auto","mb-6","flex","items-center","justify-center"],[1,"text-gray-400","text-4xl"],[1,"text-xl","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],["mat-raised-button","","color","primary",3,"click"],[1,"text-lg","font-semibold","text-gray-900","mb-4","flex","items-center"],[1,"mr-2","text-yellow-600"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-200","overflow-hidden","hover:shadow-md","transition-shadow","duration-200"],[1,"p-6","pb-4"],[1,"flex","items-start","justify-between","mb-3"],[1,"text-lg","font-semibold","text-gray-900","line-clamp-2"],[1,"inline-flex","items-center","px-2.5","py-1","rounded-full","text-xs","font-medium"],[1,"w-3","h-3","mr-1","text-xs"],[1,"text-sm","text-gray-600","mb-4"],[1,"text-sm","text-gray-700","mb-4","line-clamp-3"],[1,"space-y-3"],[1,"flex","items-center","justify-between"],[1,"text-sm","text-gray-500","flex","items-center"],[1,"w-4","h-4","mr-1"],[1,"text-sm","font-semibold","text-gray-900"],[1,"text-sm","text-gray-700"],[1,"px-6","py-4","bg-gray-50","border-t","border-gray-100"],["mat-stroked-button","",1,"w-full",3,"click"],[1,"mr-2","text-blue-600"],[1,"mr-2","text-green-600"],[1,"mr-2","text-red-600"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"text-sm","text-red-800","font-medium","mb-1"],[1,"text-sm","text-red-700"],[1,"mr-2","text-orange-600"],[1,"mb-4","p-3","bg-orange-50","border","border-orange-200","rounded-lg"],[1,"text-sm","text-orange-800","font-medium","mb-1"],[1,"text-sm","text-orange-700"],[1,"flex","space-x-2"],["mat-stroked-button","",1,"flex-1",3,"click"],["mat-raised-button","","color","primary",1,"flex-1",3,"click"],["mat-button","","color","warn",1,"flex-1",3,"click"]],template:function(e,r){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),n(4,"Projects"),o(),a(5,"p",4),n(6,"Manage your project requests and business inquiries"),o()(),c(7,Wi,9,1,"div",5),c(8,Hi,4,0,"div",6)(9,Ln,9,2,"mat-tab-group",7),o()()),e&2&&(l(7),m(r.error()?7:-1),l(),m(r.loading()?8:9))},dependencies:[A,He,Te,je,Pe,K,Vt,G,U,$,q,Ee,ye],styles:[".projects-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body-wrapper{padding-top:0}.project-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.project-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026;transform:translateY(-2px)}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-header[_ngcontent-%COMP%]{padding-bottom:8px}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;line-height:1.4}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin-top:4px}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-actions[_ngcontent-%COMP%]{padding-top:8px;display:flex;align-items:center;gap:8px}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-actions.action-buttons[_ngcontent-%COMP%]{flex-wrap:wrap}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-actions.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;min-width:80px}.project-card.pending-request[_ngcontent-%COMP%]{border-left:4px solid #f59e0b;background:linear-gradient(135deg,#fffbeb,#fef3c7)}.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.status-badge[_ngcontent-%COMP%]{font-weight:500;text-transform:capitalize}@media (max-width: 768px){.project-card[_ngcontent-%COMP%]   .mat-mdc-card-actions.action-buttons[_ngcontent-%COMP%]{flex-direction:column}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-actions.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.empty-state[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9);border:2px dashed #e2e8f0}"]})};var hi=()=>["requested","under_review","accepted","started","payment_requested","payment_completed","in_progress"],qn=()=>["payment_completed","started","in_progress","awaiting_client_approval"],$n=(i,t)=>t.url,Un=(i,t)=>t.name,Gn=(i,t)=>t._id;function Wn(i,t){if(i&1&&(a(0,"span",22),n(1),o()),i&2){let e=d(3);l(),x(" ",e.chatUnreadCount()," ")}}function Hn(i,t){if(i&1){let e=y();a(0,"button",20),v("click",function(){f(e);let s=d(2);return C(s.navigateToChat())}),a(1,"mat-icon",21),n(2,"chat"),o(),n(3," Chat with Client "),c(4,Wn,2,1,"span",22),o()}if(i&2){let e=d(2);l(4),m(e.chatUnreadCount()>0?4:-1)}}function zn(i,t){if(i&1){let e=y();a(0,"button",23),v("click",function(){f(e);let s=d(2);return C(s.acceptProject())}),a(1,"mat-icon",21),n(2,"check_circle"),o(),n(3," Accept Project "),o(),a(4,"button",24),v("click",function(){f(e);let s=d(2);return C(s.rejectProject())}),a(5,"mat-icon",21),n(6,"cancel"),o(),n(7," Reject Project "),o()}}function Yn(i,t){if(i&1){let e=y();a(0,"button",23),v("click",function(){f(e);let s=d(2);return C(s.acceptProject())}),a(1,"mat-icon",21),n(2,"check_circle"),o(),n(3," Accept Project "),o(),a(4,"button",24),v("click",function(){f(e);let s=d(2);return C(s.rejectProject())}),a(5,"mat-icon",21),n(6,"cancel"),o(),n(7," Reject Project "),o()}}function Kn(i,t){if(i&1){let e=y();a(0,"button",25),v("click",function(){f(e);let s=d(2);return C(s.requestPayment())}),a(1,"mat-icon",21),n(2,"payment"),o(),n(3," Request Payment "),o()}}function Qn(i,t){if(i&1){let e=y();a(0,"button",26),v("click",function(){f(e);let s=d(2);return C(s.startProject())}),a(1,"mat-icon",21),n(2,"play_arrow"),o(),n(3),o()}if(i&2){let e=d(2);k("flex items-center px-6 py-3 text-white text-base font-semibold rounded-lg transition-colors shadow-sm "+(e.canStartProject()?"bg-indigo-600 hover:bg-indigo-700":"bg-gray-400 cursor-not-allowed")),E("disabled",!e.canStartProject()),l(3),x(" ",e.canStartProject()?"Start Project":"Start Project (Awaiting Payment)"," ")}}function Jn(i,t){if(i&1){let e=y();a(0,"button",27),v("click",function(){f(e);let s=d(2);return C(s.startProject())}),a(1,"mat-icon",21),n(2,"play_arrow"),o(),n(3," Start Project "),o()}}function Xn(i,t){if(i&1){let e=y();a(0,"button",28),v("click",function(){f(e);let s=d(2);return C(s.requestCompletion())}),a(1,"mat-icon",21),n(2,"check_circle"),o(),n(3," Request Completion "),o()}}function Zn(i,t){if(i&1){let e=y();a(0,"button",25),v("click",function(){f(e);let s=d(2);return C(s.requestAdditionalPayment())}),a(1,"mat-icon",21),n(2,"add_card"),o(),n(3," Request Additional Payment "),o()}}function eo(i,t){if(i&1&&(c(0,Hn,5,1,"button",15),c(1,zn,8,0)(2,Yn,8,0)(3,Kn,4,0,"button",16)(4,Qn,4,4,"button",17)(5,Jn,4,0,"button",18)(6,Xn,4,0,"button",19),c(7,Zn,4,0,"button",16)),i&2){let e,r=d();m(ne(3,hi).includes(r.project().status)?0:-1),l(),m((e=r.project().status)==="requested"?1:e==="under_review"?2:e==="accepted"?3:e==="payment_requested"?4:e==="payment_completed"?5:e==="in_progress"?6:-1),l(6),m(ne(4,qn).includes(r.project().status)?7:-1)}}function to(i,t){i&1&&n(0," Chat with Business ")}function io(i,t){i&1&&n(0," Chat with Business Owner ")}function no(i,t){if(i&1&&(a(0,"span",22),n(1),o()),i&2){let e=d(2);l(),x(" ",e.chatUnreadCount()," ")}}function oo(i,t){if(i&1){let e=y();a(0,"div",9)(1,"h3",29),n(2,"Client Actions"),o(),a(3,"div",30)(4,"button",20),v("click",function(){f(e);let s=d();return C(s.navigateToChat())}),a(5,"mat-icon",21),n(6,"chat"),o(),c(7,to,1,0)(8,io,1,0),c(9,no,2,1,"span",22),o()()()}if(i&2){let e=d();l(7),m(e.project().status==="requested"||e.project().status==="under_review"?7:8),l(2),m(e.chatUnreadCount()>0?9:-1)}}function ao(i,t){if(i&1&&(a(0,"span",22),n(1),o()),i&2){let e=d(2);l(),x(" ",e.chatUnreadCount()," ")}}function ro(i,t){if(i&1){let e=y();a(0,"div",10)(1,"h3",29),n(2,"Project Completion Review"),o(),a(3,"p",31),n(4,"The business owner has marked this project as completed. Please review the work and approve or reject the completion."),o(),a(5,"div",30)(6,"button",23),v("click",function(){f(e);let s=d();return C(s.approveCompletion())}),a(7,"mat-icon",21),n(8,"check_circle"),o(),n(9," Approve Completion "),o(),a(10,"button",24),v("click",function(){f(e);let s=d();return C(s.rejectCompletion())}),a(11,"mat-icon",21),n(12,"cancel"),o(),n(13," Request Changes "),o(),a(14,"button",20),v("click",function(){f(e);let s=d();return C(s.navigateToChat())}),a(15,"mat-icon",21),n(16,"chat"),o(),n(17," Discuss with Business Owner "),c(18,ao,2,1,"span",22),o()()()}if(i&2){let e=d();l(18),m(e.chatUnreadCount()>0?18:-1)}}function lo(i,t){i&1&&(a(0,"p",31),n(1,"You have already reviewed this project. Click below to view your review."),o())}function so(i,t){i&1&&(a(0,"p",31),n(1,"Share your experience with this business to help other clients make informed decisions."),o())}function co(i,t){if(i&1){let e=y();a(0,"div",11)(1,"h3",29),n(2,"Project Review"),o(),c(3,lo,2,0,"p",31)(4,so,2,0,"p",31),a(5,"div",30)(6,"button",32),v("click",function(){f(e);let s=d();return C(s.handleReviewAction())}),a(7,"mat-icon",21),n(8),o(),n(9),o()()()}if(i&2){let e=d();l(3),m(e.existingReview()?3:4),l(5),g(e.existingReview()?"visibility":"star"),l(),x(" ",e.reviewButtonText()," ")}}function mo(i,t){if(i&1&&(a(0,"div",12)(1,"div",33)(2,"div",34)(3,"mat-icon",35),n(4,"error"),o()(),a(5,"div",36)(6,"h3",37),n(7,"Error"),o(),a(8,"p",38),n(9),o()()()()),i&2){let e=d();l(9),g(e.error())}}function po(i,t){i&1&&(a(0,"div",13),j(1,"mat-spinner",39),a(2,"p",40),n(3,"Loading project details..."),o()())}function _o(i,t){if(i&1&&n(0),i&2){let e=d(2);x(" Project with ",e.getBusinessName(e.project())," ")}}function uo(i,t){if(i&1&&n(0),i&2){let e=d(2);x(" Project from ",e.getClientName(e.project())," ")}}function go(i,t){if(i&1&&(a(0,"div")(1,"h3",73),n(2,"Description"),o(),a(3,"p",74),n(4),o()()),i&2){let e=d(2);l(4),g(e.project().description)}}function xo(i,t){if(i&1&&(a(0,"div")(1,"h3",73),n(2,"Additional Notes"),o(),a(3,"p",74),n(4),o()()),i&2){let e=d(2);l(4),g(e.project().additional_notes)}}function fo(i,t){if(i&1&&(a(0,"div")(1,"h3",73),n(2,"Project Image"),o(),a(3,"div",75),j(4,"img",76),o()()),i&2){let e=d(2);l(4),E("src",e.project().image_url,ie)("alt",e.project().title)}}function Co(i,t){if(i&1&&(a(0,"div",78)(1,"div",80)(2,"div",81)(3,"mat-icon",82),n(4),o()(),a(5,"div",83)(6,"p",84),n(7),o(),a(8,"p",85),n(9),o(),a(10,"p",86),n(11),o()()(),a(12,"a",87)(13,"mat-icon",88),n(14,"download"),o(),n(15," Download "),o()()),i&2){let e=t.$implicit,r=d(3);l(4),g(r.getFileIcon(e.type)),l(3),g(e.name),l(2),g(r.formatFileSize(e.size)),l(2),g(e.type.split("/")[1]||"file"),l(),E("href",e.url,ie)}}function vo(i,t){if(i&1&&(a(0,"div")(1,"h3",29),n(2,"Project Documents"),o(),a(3,"div",77),F(4,Co,16,5,"div",78,$n),o(),a(6,"p",79),n(7),o()()),i&2){let e=d(2);l(4),V(e.project().attachments),l(3),x("",e.project().attachments.length," document(s) attached to this project")}}function ho(i,t){if(i&1&&(a(0,"p",94),n(1),o()),i&2){let e=d().$implicit;l(),g(e.description)}}function bo(i,t){if(i&1&&(a(0,"div",95)(1,"mat-icon",88),n(2,"attach_money"),o(),n(3),o()),i&2){let e=d().$implicit,r=d(3);l(3),x(" ",r.formatServicePrice(e.price,e.pricing_type)," ")}}function yo(i,t){i&1&&(a(0,"div",96)(1,"mat-icon",88),n(2,"help_outline"),o(),n(3," Price not specified "),o())}function Eo(i,t){if(i&1&&(a(0,"div",90)(1,"div",44)(2,"div",45)(3,"div",91)(4,"mat-icon",92),n(5,"star"),o(),a(6,"h4",93),n(7),o()(),c(8,ho,2,1,"p",94),c(9,bo,4,1,"div",95)(10,yo,4,0,"div",96),o()()()),i&2){let e=t.$implicit;l(7),g(e.name),l(),m(e.description?8:-1),l(),m(e.price?9:10)}}function wo(i,t){if(i&1&&(a(0,"div")(1,"h3",29),n(2,"Selected Services"),o(),a(3,"div",89),F(4,Eo,11,3,"div",90,Un),o(),a(6,"p",79),n(7),o()()),i&2){let e=d(2);l(4),V(e.getServiceDetails(e.project())),l(3),x("",e.getServiceDetails(e.project()).length," service(s) selected for this project")}}function So(i,t){i&1&&(a(0,"div")(1,"h3",73),n(2,"Selected Services"),o(),a(3,"div",97)(4,"div",98)(5,"mat-icon",99),n(6,"info"),o(),a(7,"p",100),n(8,"No specific services selected for this project"),o()()()())}function jo(i,t){if(i&1&&(a(0,"div",49)(1,"h3",101)(2,"mat-icon",102),n(3,"error_outline"),o(),n(4," Rejection Reason "),o(),a(5,"p",103),n(6),o()()),i&2){let e=d(2);l(6),g(e.project().rejection_reason)}}function Po(i,t){i&1&&n(0," Business Information ")}function To(i,t){i&1&&n(0," Client Information ")}function Mo(i,t){if(i&1&&j(0,"img",104),i&2){let e=d();E("src",e.logo_url,ie)("alt",e.name)}}function ko(i,t){i&1&&(a(0,"div",105)(1,"mat-icon",108),n(2,"business"),o()())}function Do(i,t){if(i&1&&(a(0,"div",107)(1,"mat-icon",109),n(2,"link"),o(),a(3,"span",110),n(4),o()()),i&2){let e=d();l(4),x("/business/",e.id)}}function Io(i,t){if(i&1){let e=y();a(0,"div",52),c(1,Mo,1,2,"img",104)(2,ko,3,0,"div",105),a(3,"div",45)(4,"button",106),v("click",function(){let s=f(e),_=d(2);return C(_.navigateToBusinessProfile(s.id))}),n(5),o(),a(6,"p",5),n(7,"Click to view business profile"),o(),c(8,Do,5,1,"div",107),o()()}if(i&2){let e=t;l(),m(e.logo_url?1:2),l(4),x(" ",e.name," "),l(3),m(e.id?8:-1)}}function Fo(i,t){if(i&1&&(a(0,"p",5),n(1),o()),i&2){let e=d();l(),g(e.email)}}function Vo(i,t){if(i&1&&(a(0,"div",52)(1,"div",111)(2,"mat-icon",108),n(3,"person"),o()(),a(4,"div",45)(5,"h3",112),n(6),o(),c(7,Fo,2,1,"p",5),a(8,"p",113),n(9,"Project Client"),o()()()),i&2){let e=t;l(6),ht(" ",e.first_name," ",e.last_name," "),l(),m(e.email?7:-1)}}function No(i,t){if(i&1&&(a(0,"div",60)(1,"p",58),n(2,"Deadline"),o(),a(3,"p",55),n(4),o()()),i&2){let e=d(2);l(4),g(e.formatDate(e.project().deadline))}}function Ro(i,t){if(i&1&&(a(0,"div",60)(1,"p",58),n(2,"Accepted"),o(),a(3,"p",55),n(4),o()()),i&2){let e=d(2);l(4),g(e.formatDate(e.project().accepted_at))}}function Bo(i,t){if(i&1&&(a(0,"div",60)(1,"p",58),n(2,"Completed"),o(),a(3,"p",55),n(4),o()()),i&2){let e=d(2);l(4),g(e.formatDate(e.project().completed_at))}}function Ao(i,t){if(i&1&&(a(0,"div",60)(1,"p",58),n(2,"Rejected"),o(),a(3,"p",55),n(4),o()()),i&2){let e=d(2);l(4),g(e.formatDate(e.project().rejected_at))}}function Oo(i,t){if(i&1){let e=y();a(0,"div",42)(1,"div",54)(2,"h3",63)(3,"mat-icon",114),n(4,"payment"),o(),n(5," Payment Required "),o()(),a(6,"div",66)(7,"div",115)(8,"div",116)(9,"div",45)(10,"div",117)(11,"span",118),n(12," Payment Requested "),o()(),a(13,"h4",119),n(14),D(15,"currency"),o(),a(16,"p",120),n(17),o(),a(18,"p",121),n(19," The business owner has requested payment to start working on your project. "),o()()(),a(20,"div",122)(21,"button",123),v("click",function(){f(e);let s=d(2);return C(s.approveProjectPayment())}),a(22,"mat-icon",124),n(23,"payment"),o(),n(24," Make Payment "),o(),a(25,"button",125),v("click",function(){f(e);let s=d(2);return C(s.declineProjectPayment())}),a(26,"mat-icon",124),n(27,"close"),o(),n(28," Decline "),o()()()()()}if(i&2){let e,r,s=d(2);l(14),x(" ",Me(15,2,(e=s.project())==null?null:e.offered_price,"USD","symbol","1.0-0")," "),l(3),x(" Payment for project: ",(r=s.project())==null?null:r.title," ")}}function Lo(i,t){if(i&1&&(a(0,"div",61)(1,"div",126)(2,"h3",127)(3,"mat-icon",128),n(4,"check_circle"),o(),n(5," Payment Completed Successfully "),o()(),a(6,"div",66)(7,"div",129)(8,"mat-icon",130),n(9,"paid"),o(),a(10,"div")(11,"p",131),n(12),D(13,"currency"),o(),a(14,"p",132),n(15," The business owner will now start working on your project. You'll receive notifications about the progress. "),o()()()()()),i&2){let e,r=d(2);l(12),x(" Your payment of ",Me(13,1,(e=r.project())==null?null:e.offered_price,"USD","symbol","1.0-0")," has been processed successfully. ")}}function qo(i,t){if(i&1){let e=y();a(0,"button",133),v("click",function(){f(e);let s=d(2);return C(s.refreshPaymentRequests())}),a(1,"mat-icon",88),n(2,"refresh"),o(),n(3," Refresh "),o()}}function $o(i,t){i&1&&(a(0,"div",67),j(1,"mat-spinner",134),a(2,"span",135),n(3,"Loading payment history..."),o()())}function Uo(i,t){if(i&1&&(a(0,"span",85),n(1),o()),i&2){let e=d(4);l(),x("Paid ",e.formatPaymentTime(e.project().initial_payment.paid_at))}}function Go(i,t){i&1&&(a(0,"span",85),n(1,"Requested"),o())}function Wo(i,t){i&1&&(a(0,"mat-icon",144),n(1,"check_circle"),o())}function Ho(i,t){i&1&&(a(0,"mat-icon",145),n(1,"error"),o())}function zo(i,t){i&1&&(a(0,"mat-icon",146),n(1,"sync"),o())}function Yo(i,t){i&1&&(a(0,"mat-icon",147),n(1,"schedule"),o())}function Ko(i,t){i&1&&(a(0,"div",148)(1,"mat-icon",149),n(2,"check_circle"),o(),a(3,"span",150),n(4,"Payment Completed"),o()())}function Qo(i,t){if(i&1&&(a(0,"div",136)(1,"h4",137)(2,"mat-icon",138),n(3,"payments"),o(),n(4," Initial Project Payment "),o(),a(5,"div",139)(6,"div",140)(7,"div",45)(8,"div",91)(9,"span"),n(10),D(11,"titlecase"),o(),c(12,Uo,2,1,"span",85)(13,Go,2,0,"span",85),o(),a(14,"h4",141),n(15),D(16,"currency"),o(),a(17,"p",142),n(18),o()(),a(19,"div",143),c(20,Wo,2,0,"mat-icon",144)(21,Ho,2,0,"mat-icon",145)(22,zo,2,0,"mat-icon",146)(23,Yo,2,0,"mat-icon",147),o()(),c(24,Ko,5,0,"div",148),o()()),i&2){let e=d(3);l(9),k("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+e.getPaymentStatusColor(e.project().initial_payment.status)),l(),x(" ",R(11,8,e.project().initial_payment.status)," "),l(2),m(e.project().initial_payment.paid_at?12:13),l(3),x(" ",Me(16,10,e.project().initial_payment.amount,"USD","symbol","1.0-0")," "),l(3),g(e.project().initial_payment.description),l(2),m(e.project().initial_payment.status==="succeeded"?20:e.project().initial_payment.status==="failed"?21:e.project().initial_payment.status==="processing"?22:23),l(4),m(e.project().initial_payment.status==="succeeded"?24:-1)}}function Jo(i,t){if(i&1&&(a(0,"p",142),n(1),o()),i&2){let e=d().$implicit;l(),g(e.payment_description)}}function Xo(i,t){if(i&1&&(a(0,"p",110),n(1),o()),i&2){let e=d().$implicit;l(),g(e.content)}}function Zo(i,t){i&1&&(a(0,"mat-icon",144),n(1,"check_circle"),o())}function ea(i,t){i&1&&(a(0,"mat-icon",145),n(1,"cancel"),o())}function ta(i,t){i&1&&(a(0,"mat-icon",147),n(1,"schedule"),o())}function ia(i,t){if(i&1){let e=y();a(0,"div",153)(1,"button",155),v("click",function(){f(e);let s=d().$implicit,_=d(4);return C(_.approvePaymentRequest(s))}),a(2,"mat-icon",88),n(3,"check"),o(),n(4," Approve & Pay "),o(),a(5,"button",156),v("click",function(){f(e);let s=d().$implicit,_=d(4);return C(_.rejectPaymentRequest(s))}),a(6,"mat-icon",88),n(7,"close"),o(),n(8," Reject "),o()()}}function na(i,t){i&1&&(a(0,"div",154)(1,"mat-icon",157),n(2,"check_circle"),o(),a(3,"span",158),n(4,"Payment Completed"),o()())}function oa(i,t){if(i&1&&(a(0,"div",152)(1,"div",140)(2,"div",45)(3,"div",91)(4,"span"),n(5),D(6,"titlecase"),o(),a(7,"span",85),n(8),o()(),a(9,"h4",141),n(10),D(11,"currency"),o(),c(12,Jo,2,1,"p",142),c(13,Xo,2,1,"p",110),o(),a(14,"div",143),c(15,Zo,2,0,"mat-icon",144)(16,ea,2,0,"mat-icon",145)(17,ta,2,0,"mat-icon",147),o()(),c(18,ia,9,0,"div",153),c(19,na,5,0,"div",154),o()),i&2){let e=t.$implicit,r=d(4);l(4),k("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+r.getPaymentStatusColor(e.payment_status||"pending")),l(),x(" ",R(6,10,e.payment_status||"pending")," "),l(3),g(r.formatPaymentTime(e.createdAt)),l(2),x(" ",Me(11,12,e.payment_amount,"USD","symbol","1.0-0")," "),l(2),m(e.payment_description?12:-1),l(),m(e.content?13:-1),l(2),m(e.payment_status==="approved"||e.payment_status==="paid"?15:e.payment_status==="rejected"?16:17),l(3),m(e.payment_status==="pending"&&r.isClient()?18:-1),l(),m(e.payment_status==="paid"||e.payment_status==="approved"?19:-1)}}function aa(i,t){if(i&1&&(a(0,"div")(1,"h4",137)(2,"mat-icon",151),n(3,"add_card"),o(),n(4),o(),a(5,"div",89),F(6,oa,20,17,"div",152,Gn),o()()),i&2){let e=d(3);l(4),x(" Additional Payment Requests (",e.paymentRequests().length,") "),l(2),V(e.paymentRequests())}}function ra(i,t){if(i&1&&(a(0,"div",68),c(1,Qo,25,15,"div",136),c(2,aa,8,1,"div"),o()),i&2){let e,r=d(2);l(),m((e=r.project())!=null&&e.initial_payment?1:-1),l(),m(r.paymentRequests().length>0?2:-1)}}function la(i,t){i&1&&(a(0,"div",69)(1,"mat-icon",159),n(2,"payment"),o(),a(3,"p",100),n(4,"No payments have been made for this project"),o()())}function sa(i,t){if(i&1){let e=y();a(0,"div",14)(1,"div",41)(2,"div",42)(3,"div",43)(4,"div",44)(5,"div",45)(6,"h2",46),n(7),o(),a(8,"p",5),c(9,_o,1,1)(10,uo,1,1),o()(),a(11,"div",47)(12,"span"),n(13),o()()()(),a(14,"div",48),c(15,go,5,1,"div"),c(16,xo,5,1,"div"),c(17,fo,5,2,"div"),c(18,vo,8,1,"div"),c(19,wo,8,1,"div")(20,So,9,0,"div"),c(21,jo,7,1,"div",49),o()(),a(22,"div",42)(23,"div",43)(24,"h2",50),c(25,Po,1,0)(26,To,1,0),o()(),a(27,"div",51),c(28,Io,9,3,"div",52),c(29,Vo,10,3,"div",52),o()()(),a(30,"div",53)(31,"div",42)(32,"div",54)(33,"h3",55),n(34,"Project Details"),o()(),a(35,"div",56)(36,"div",57)(37,"p",58),n(38,"Budget"),o(),a(39,"p",59),n(40),o()(),c(41,No,5,1,"div",60),a(42,"div",60)(43,"p",58),n(44,"Created"),o(),a(45,"p",55),n(46),o()(),c(47,Ro,5,1,"div",60),c(48,Bo,5,1,"div",60),c(49,Ao,5,1,"div",60),o()(),c(50,Oo,29,7,"div",42),c(51,Lo,16,6,"div",61),a(52,"div",42)(53,"div",54)(54,"div",62)(55,"h3",63)(56,"mat-icon",64),n(57,"history"),o(),n(58," Payment History "),o(),c(59,qo,4,0,"button",65),o()(),a(60,"div",66),c(61,$o,4,0,"div",67)(62,ra,3,2,"div",68),c(63,la,5,0,"div",69),o()(),a(64,"div",42)(65,"div",54)(66,"h3",55),n(67,"Actions"),o()(),a(68,"div",70)(69,"button",71),v("click",function(){f(e);let s=d();return C(s.goBack())}),a(70,"mat-icon",72),n(71,"arrow_back"),o(),n(72," Back to Projects "),o()()()()()}if(i&2){let e,r,s,_,h=d();l(7),g(h.project().title),l(2),m(h.isClient()?9:h.isBusinessOwner()?10:-1),l(3),k("inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold "+h.getStatusColor(h.project().status)),l(),x(" ",h.getStatusText(h.project().status)," "),l(2),m(h.project().description?15:-1),l(),m(h.project().additional_notes?16:-1),l(),m(h.project().image_url?17:-1),l(),m(h.project().attachments&&h.project().attachments.length>0?18:-1),l(),m(h.getServiceDetails(h.project()).length>0?19:20),l(2),m(h.project().rejection_reason?21:-1),l(4),m(h.isClient()?25:h.isBusinessOwner()?26:-1),l(3),m((e=h.isClient()&&h.getBusinessInfo(h.project()))?28:-1,e),l(),m((r=h.isBusinessOwner()&&h.getClientInfo(h.project()))?29:-1,r),l(11),g(h.formatPrice(h.project().offered_price)),l(),m(h.project().deadline?41:-1),l(5),g(h.formatDate(h.project().createdAt)),l(),m(h.project().accepted_at?47:-1),l(),m(h.project().completed_at?48:-1),l(),m(h.project().rejected_at?49:-1),l(),m(h.shouldShowPaymentButtons()?50:-1),l(),m(((s=h.project())==null?null:s.status)==="payment_completed"&&h.isClient()?51:-1),l(8),m(h.project()&&h.project().chat_room_id?59:-1),l(2),m(h.loadingPaymentRequests()?61:62),l(2),m(!h.loadingPaymentRequests()&&h.paymentRequests().length===0&&!((_=h.project())!=null&&_.initial_payment)?63:-1)}}var rt=class i{route=w(We);router=w(X);projectService=w(be);authService=w(W);chatService=w(Ht);reviewService=w(zt);dashboardRefreshService=w(Yt);socketService=w(Mt);dialog=w(it);loading=S(!1);error=S(null);project=S(null);existingChat=S(null);chatUnreadCount=S(0);loadingChat=S(!1);paymentRequests=S([]);loadingPaymentRequests=S(!1);canLeaveReview=S(!1);existingReview=S(null);user=this.authService.user;isClient=T(()=>{let t=this.project(),e=this.user();if(!t||!e)return!1;let r=typeof t.client_id=="string"?t.client_id:t.client_id?._id;return e._id===r});isBusinessOwner=T(()=>{let t=this.project(),e=this.user();if(!t||!e)return!1;let r=typeof t.business_owner_id=="string"?t.business_owner_id:t.business_owner_id?._id;return e._id===r});pendingPaymentRequests=T(()=>this.paymentRequests().filter(t=>t.message_type==="payment_request"&&t.payment_status==="pending"));approvedPaymentRequests=T(()=>this.paymentRequests().filter(t=>t.message_type==="payment_request"&&t.payment_status==="approved"));rejectedPaymentRequests=T(()=>this.paymentRequests().filter(t=>t.message_type==="payment_request"&&t.payment_status==="rejected"));shouldShowPaymentButtons=T(()=>{let t=this.project(),e=this.isClient();return!t||!e?!1:t.status==="payment_requested"});hasPendingPaymentRequests=T(()=>this.shouldShowPaymentButtons());hasPaymentHistory=T(()=>this.paymentRequests().length>0);hasCompletedPayments=T(()=>this.paymentRequests().some(t=>t.message_type==="payment_request"&&(t.payment_status==="approved"||t.payment_status==="paid")));canStartProject=T(()=>{let t=this.project();return!t||!this.isBusinessOwner()?!1:t.status==="payment_completed"||t.status==="payment_requested"&&this.hasCompletedPayments()});reviewButtonText=T(()=>{let t=this.existingReview(),e=this.canLeaveReview();return t?`View Review (${t.rating}\u2B50)`:e?"Leave Review":""});showReviewButton=T(()=>{let t=this.canLeaveReview(),e=this.existingReview();return!!(t||e)});ngOnInit(){if(!this.user()){this.router.navigate(["/auth"]);return}let t=this.route.snapshot.params.id;if(!t){this.error.set("Project ID is required"),this.router.navigate(["/dashboard/projects"]);return}this.loadProject(t),this.setupRealtimeUpdates()}setupRealtimeUpdates(){this.socketService.onEvent("project-status-updated").subscribe(t=>{console.log("\u{1F525} Project status update received:",t);let e=this.project();e&&t.projectId===e._id&&(console.log("\u{1F525} Reloading project due to status update"),this.loadProject(e._id))}),this.socketService.onEvent("completion-request-created").subscribe(t=>{console.log("\u{1F525} Completion request created received:",t);let e=this.project();e&&t.projectId===e._id&&(console.log("\u{1F525} Reloading project due to completion request created"),this.loadProject(e._id))}),this.socketService.onEvent("payment-completed").subscribe(t=>b(this,null,function*(){console.log("\u{1F525} Payment completed received:",t);let e=this.project();e&&t.chatId===e.chat_room_id&&(console.log("\u{1F525} Reloading project due to payment completion"),setTimeout(()=>b(this,null,function*(){yield this.loadProject(e._id)}),500))})),this.socketService.onNewNotification().subscribe(t=>{console.log("\u{1F525} New notification received:",t);let e=this.project();e&&t.project_id===e._id&&(console.log("\u{1F525} Reloading project due to project notification"),this.loadProject(e._id))})}loadProject(t){return b(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let e=yield this.projectService.getProjectAsync(t);this.project.set(e),["accepted","started","payment_requested","payment_completed","in_progress","awaiting_client_approval","completed"].includes(e.status)&&(yield this.checkForExistingChat(t),yield this.loadPaymentRequests()),yield this.checkReviewEligibility()}catch(e){console.error("Error loading project:",e),this.error.set("Failed to load project details")}finally{this.loading.set(!1)}})}checkForExistingChat(t){return b(this,null,function*(){this.loadingChat.set(!0);try{let e=yield this.chatService.getChatByProjectIdAsync(t);if(this.existingChat.set(e),e){let r=yield this.chatService.getChatUnreadCountAsync(e._id);this.chatUnreadCount.set(r)}}catch(e){console.error("Error checking for existing chat:",e)}finally{this.loadingChat.set(!1)}})}loadPaymentRequests(){return b(this,null,function*(){this.loadingPaymentRequests.set(!0);try{let t=this.project();if(!t||!t.chat_room_id){console.log("\u26A0\uFE0F No project or chat room found"),this.paymentRequests.set([]);return}console.log("\u{1F504} Loading payment requests from chat messages");let r=(yield this.chatService.getChatMessagesAsync(t.chat_room_id)).filter(s=>{if(s.message_type!=="payment_request")return!1;let _=s.payment_description?.toLowerCase()||"";return _!=="project payment"&&_!=="initial project payment"});console.log("\u{1F4B3} Found additional payment request messages:",r.map(s=>({id:s._id,amount:s.payment_amount,status:s.payment_status||"undefined",description:s.payment_description,createdAt:s.createdAt}))),console.log("\u2795 Additional payment requests count:",r.length),this.paymentRequests.set(r)}catch(t){console.error("Error loading payment requests:",t),this.paymentRequests.set([])}finally{this.loadingPaymentRequests.set(!1)}})}refreshPaymentRequests(){return b(this,null,function*(){let t=this.project();t&&(console.log("\u{1F504} Manual refresh of payment requests"),yield this.loadProject(t._id))})}goBack(){this.router.navigate(["/dashboard/projects"])}acceptProject(){return b(this,null,function*(){let t=this.project();if(t)try{yield this.projectService.acceptProjectAsync(t._id),yield this.loadProject(t._id)}catch(e){console.error("Error accepting project:",e),this.error.set("Failed to accept project")}})}requestPayment(){return b(this,null,function*(){let t=this.project();if(!t)return;let e=this.existingChat();if(!e)try{e=yield this.chatService.createOrGetChatAsync({project_id:t._id}),this.existingChat.set(e)}catch(_){console.error("Error creating chat:",_),this.error.set("Failed to create project chat");return}let r={defaultAmount:t.offered_price||0,isStartPayment:!0};this.dialog.open(xt,{width:"500px",disableClose:!0,data:r}).afterClosed().subscribe(_=>b(this,null,function*(){if(_)try{yield this.chatService.requestAdditionalPaymentAsync(e._id,_),yield this.projectService.updateProjectAsync(t._id,{status:"payment_requested"}),yield this.loadProject(t._id),alert("Payment request sent successfully! The client will be notified to make payment.")}catch(h){console.error("Error requesting payment:",h),this.error.set("Failed to request payment")}}))})}startProject(){return b(this,null,function*(){let t=this.project();if(t)try{yield this.projectService.updateProjectAsync(t._id,{status:"in_progress"}),yield this.loadProject(t._id),this.dashboardRefreshService.triggerRefresh(),alert("Project started successfully! You can now begin working on the project.")}catch(e){console.error("Error starting project:",e),this.error.set("Failed to start project")}})}rejectProject(){return b(this,null,function*(){let t=this.project();if(!t)return;let e=prompt("Please provide a reason for rejection:");if(e!==null)try{yield this.projectService.rejectProjectAsync(t._id,e),yield this.loadProject(t._id)}catch(r){console.error("Error rejecting project:",r),this.error.set("Failed to reject project")}})}requestCompletion(){return b(this,null,function*(){let t=this.project();if(!t)return;let e=this.existingChat();if(!e)try{e=yield this.chatService.createOrGetChatAsync({project_id:t._id}),this.existingChat.set(e)}catch(s){console.error("Error creating chat:",s),this.error.set("Failed to create project chat");return}this.dialog.open(Kt,{width:"500px",disableClose:!0}).afterClosed().subscribe(s=>b(this,null,function*(){if(s)try{yield this.chatService.requestCompletionAsync(e._id,s),yield this.loadProject(t._id),this.dashboardRefreshService.triggerRefresh(),alert("Completion request sent successfully! The client will be notified to review and approve.")}catch(_){console.error("Error requesting completion:",_),this.error.set("Failed to request completion")}}))})}requestAdditionalPayment(){return b(this,null,function*(){let t=this.project();if(!t)return;let e=this.existingChat();if(!e)try{e=yield this.chatService.createOrGetChatAsync({project_id:t._id}),this.existingChat.set(e)}catch(s){console.error("Error creating chat:",s),this.error.set("Failed to create project chat");return}this.dialog.open(xt,{width:"500px",disableClose:!0}).afterClosed().subscribe(s=>b(this,null,function*(){if(s)try{yield this.chatService.requestAdditionalPaymentAsync(e._id,s),yield this.loadProject(t._id),alert("Additional payment request sent successfully!")}catch(_){console.error("Error requesting additional payment:",_),this.error.set("Failed to request additional payment")}}))})}startChat(){return b(this,null,function*(){let t=this.project();if(t)try{let e=yield this.chatService.createOrGetChatAsync({project_id:t._id});this.router.navigate(["/dashboard/messages/chat",e._id])}catch(e){console.error("Error starting chat:",e),alert("Failed to start chat. Please try again.")}})}goToExistingChat(){return b(this,null,function*(){let t=this.existingChat();t&&this.router.navigate(["/dashboard/messages/chat",t._id])})}getStatusColor(t){return{requested:"bg-blue-100 text-blue-800 border-blue-200",under_review:"bg-yellow-100 text-yellow-800 border-yellow-200",accepted:"bg-green-100 text-green-800 border-green-200",started:"bg-indigo-100 text-indigo-800 border-indigo-200",payment_requested:"bg-orange-100 text-orange-800 border-orange-200",payment_pending:"bg-orange-100 text-orange-800 border-orange-200",payment_completed:"bg-emerald-100 text-emerald-800 border-emerald-200",in_progress:"bg-purple-100 text-purple-800 border-purple-200",awaiting_client_approval:"bg-amber-100 text-amber-800 border-amber-200",completed:"bg-green-100 text-green-800 border-green-200",rejected:"bg-red-100 text-red-800 border-red-200",cancelled:"bg-gray-100 text-gray-800 border-gray-200",settled:"bg-teal-100 text-teal-800 border-teal-200"}[t]||"bg-gray-100 text-gray-800 border-gray-200"}getStatusText(t){return{pending:"Pending",accepted:"Accepted",in_progress:"In Progress",awaiting_client_approval:"Awaiting Your Approval",completed:"Completed",rejected:"Rejected",cancelled:"Cancelled"}[t]||t}approveCompletion(){return b(this,null,function*(){let t=this.project();if(t)try{let e=this.existingChat();if(e){let s=(yield this.chatService.getChatMessagesAsync(e._id)).filter(_=>_.message_type==="completion_request"&&_.completion_status==="pending").sort((_,h)=>new Date(h.createdAt).getTime()-new Date(_.createdAt).getTime())[0];s&&(yield this.chatService.respondToCompletionRequestAsync(e._id,s._id,{status:"approved"}))}else yield this.projectService.updateProjectAsync(t._id,{status:"completed"});yield this.loadProject(t._id),yield this.checkReviewEligibility(),this.dashboardRefreshService.triggerRefresh()}catch(e){console.error("Error approving completion:",e),this.error.set("Failed to approve completion")}})}rejectCompletion(){return b(this,null,function*(){let t=this.project();if(!t)return;let e=prompt("Please provide a reason for rejecting the completion:");if(e)try{let r=this.existingChat();if(r){let _=(yield this.chatService.getChatMessagesAsync(r._id)).filter(h=>h.message_type==="completion_request"&&h.completion_status==="pending").sort((h,J)=>new Date(J.createdAt).getTime()-new Date(h.createdAt).getTime())[0];_&&(yield this.chatService.respondToCompletionRequestAsync(r._id,_._id,{status:"rejected",rejection_reason:e}))}else yield this.projectService.updateProjectAsync(t._id,{status:"in_progress"});yield this.loadProject(t._id),this.dashboardRefreshService.triggerRefresh()}catch(r){console.error("Error rejecting completion:",r),this.error.set("Failed to reject completion")}})}canApproveCompletion(){let t=this.project(),e=this.user();if(!t||!e)return!1;let r=typeof t.client_id=="string"?t.client_id:t.client_id?._id;return t.status==="awaiting_client_approval"&&r===e._id}approvePaymentRequest(t){return b(this,null,function*(){try{let e=this.existingChat(),r=this.project();if(!e||!r)return;let s=typeof r.business_id=="string"?"Business Owner":r.business_id?.name||"Business Owner";this.dialog.open(gt,{width:"500px",disableClose:!0,data:{amount:t.payment_amount?.toString()||"0",description:t.payment_description||"Additional payment",businessName:s,chatId:e._id,messageId:t._id}}).afterClosed().subscribe(h=>b(this,null,function*(){if(h&&h.paymentIntentId)try{yield this.refreshPaymentStatus(),console.log("Payment approved successfully with method:",h.paymentMethod),console.log("Payment completed for amount:",h.amount)}catch(J){console.error("Error approving payment request:",J),this.error.set("Failed to approve payment request")}}))}catch(e){console.error("Error opening payment modal:",e),this.error.set("Failed to open payment modal")}})}rejectPaymentRequest(t){return b(this,null,function*(){let e=prompt("Please provide a reason for rejecting this payment request:");if(e)try{let r=this.existingChat();if(!r)return;yield this.chatService.respondToPaymentRequestAsync(r._id,t._id,{status:"rejected",rejection_reason:e});let s=this.project();s&&(yield this.loadProject(s._id))}catch(r){console.error("Error rejecting payment request:",r),this.error.set("Failed to reject payment request")}})}refreshPaymentStatus(){return b(this,null,function*(){let t=this.project();t&&(yield this.loadProject(t._id))})}approveProjectPayment(){return b(this,null,function*(){try{let t=this.project();if(!t)return;let e=typeof t.business_id=="string"?"Business Owner":t.business_id?.name||"Business Owner";this.dialog.open(gt,{width:"500px",disableClose:!0,data:{amount:t.offered_price?.toString()||"0",description:`Payment for project: ${t.title}`,businessName:e,projectId:t._id,isProjectPayment:!0}}).afterClosed().subscribe(s=>b(this,null,function*(){if(s&&s.paymentIntentId)try{yield this.loadProject(t._id),console.log("Project payment completed successfully")}catch(_){console.error("Error reloading project after payment:",_),this.error.set("Payment completed but failed to reload project")}}))}catch(t){console.error("Error opening project payment modal:",t),this.error.set("Failed to open payment modal")}})}declineProjectPayment(){return b(this,null,function*(){let t=prompt("Please provide a reason for declining this payment:");if(t)try{if(!this.project())return;alert(`Thank you for your feedback. Reason: "${t}"

Please contact the business owner directly to discuss payment terms. The decline functionality will be available soon.`)}catch(e){console.error("Error declining project payment:",e),this.error.set("Failed to decline payment")}})}getPaymentStatusColor(t){return{pending:"bg-yellow-100 text-yellow-800 border-yellow-200",approved:"bg-green-100 text-green-800 border-green-200",payment_pending:"bg-blue-100 text-blue-800 border-blue-200",paid:"bg-green-100 text-green-800 border-green-200",rejected:"bg-red-100 text-red-800 border-red-200"}[t]||"bg-gray-100 text-gray-800 border-gray-200"}formatPaymentTime(t){let e=new Date(t),s=Math.floor((new Date().getTime()-e.getTime())/1e3);return s<60?"just now":s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:e.toLocaleDateString()}formatPrice(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}formatDate(t){if(!t)return"Not set";try{return(typeof t=="string"?new Date(t):t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Unknown"}}getBusinessName(t){return typeof t.business_id=="object"&&t.business_id.name?t.business_id.name:"Unknown Business"}getClientName(t){if(typeof t.client_id=="object"){let e=t.client_id;return`${e.first_name} ${e.last_name}`}return"Unknown Client"}getServiceNames(t){return t.selected_services&&Array.isArray(t.selected_services)?t.selected_services.map(e=>{if(typeof e=="object"&&e!==null){if("name"in e&&e.name)return e.name;if("service_id"in e&&typeof e.service_id=="object"&&e.service_id!==null&&"name"in e.service_id)return e.service_id.name}return typeof e=="string"?"Service Details Available":"Unknown Service"}):[]}getServiceDetails(t){return t.selected_services&&Array.isArray(t.selected_services)?t.selected_services.map(e=>typeof e=="object"&&e!==null&&"_id"in e?{name:e.name||"Unnamed Service",price:e.price,pricing_type:e.pricing_type,description:e.short_description||e.description}:typeof e=="string"?{name:"Service Details Not Available",price:void 0,pricing_type:void 0,description:`Service ID: ${e} - Please contact support if this persists`}:{name:"Unknown Service Format",price:void 0,pricing_type:void 0,description:"Service data structure not recognized"}):[]}formatServicePrice(t,e){if(!t)return"Price not specified";let r=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t);if(!e)return r;switch(e.toLowerCase()){case"fixed":return`${r} (Fixed)`;case"hourly":return`${r}/hour`;case"daily":return`${r}/day`;case"weekly":return`${r}/week`;case"monthly":return`${r}/month`;case"per_project":return`${r} (Per Project)`;default:return`${r} (${e})`}}navigateToBusinessProfile(t){t&&this.router.navigate(["/business/profile",t])}getBusinessInfo(t){return typeof t.business_id=="object"&&t.business_id?{name:t.business_id.name||"Unknown Business",logo_url:t.business_id.logo_url,id:t.business_id._id}:null}getClientInfo(t){return typeof t.client_id=="object"&&t.client_id?{first_name:t.client_id.first_name||"Unknown",last_name:t.client_id.last_name||"Client",email:t.client_id.email}:null}formatFileSize(t){if(t===0)return"0 Bytes";let e=1024,r=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,s)).toFixed(2))+" "+r[s]}getFileIcon(t){return t.startsWith("image/")?"image":t.includes("pdf")?"picture_as_pdf":t.includes("word")||t.includes("document")?"description":t.includes("sheet")||t.includes("excel")?"table_chart":t.includes("presentation")||t.includes("powerpoint")?"slideshow":t.includes("text")?"text_snippet":"attach_file"}navigateToChat(){return b(this,null,function*(){let t=this.project();if(t)try{let e=this.existingChat();e||(e=yield this.chatService.createOrGetChatAsync({project_id:t._id}),this.existingChat.set(e)),e&&this.router.navigate(["/dashboard/messages/chat",e._id])}catch(e){console.error("Error navigating to chat:",e),this.error.set("Failed to open chat. Please try again.")}})}checkReviewEligibility(){return b(this,null,function*(){let t=this.user(),e=this.project();if(!t||!e){this.canLeaveReview.set(!1),this.existingReview.set(null);return}let r=typeof e.client_id=="string"?e.client_id:e.client_id?._id,s=t._id===r,_=e.status==="completed";if(!s||!_){this.canLeaveReview.set(!1),this.existingReview.set(null);return}try{let h=typeof e.business_id=="string"?e.business_id:e.business_id._id,ee=(yield this.reviewService.getBusinessReviewsAsync(h)).find(te=>te.project_id._id===e._id&&te.user_id._id===t._id);ee?(this.canLeaveReview.set(!1),this.existingReview.set(ee)):(this.canLeaveReview.set(!0),this.existingReview.set(null))}catch(h){console.error("Error checking review eligibility:",h),this.canLeaveReview.set(!1),this.existingReview.set(null)}})}handleReviewAction(){this.existingReview()?this.viewExistingReview():this.canLeaveReview()&&this.openReviewDialog()}openReviewDialog(){return b(this,null,function*(){let t=this.project();if(!t)return;let e=typeof t.business_id=="string"?t.business_id:t.business_id._id,r=typeof t.business_id=="object"&&t.business_id.name?t.business_id.name:"Business";this.dialog.open(Qt,{width:"600px",data:{businessId:e,projectId:t._id,businessName:r,projectTitle:t.title}}).afterClosed().subscribe(_=>b(this,null,function*(){_&&(console.log("Review submitted successfully"),yield this.checkReviewEligibility())}))})}viewExistingReview(){let t=this.existingReview();if(!t)return;let e=["Your Review for this Project","",`Overall Rating: ${t.rating}/5 \u2B50`,"","Detailed Ratings:",`\u2022 Service Quality: ${t.service_quality||"N/A"}/5`,`\u2022 Communication: ${t.communication||"N/A"}/5`,`\u2022 Timeliness: ${t.timeliness||"N/A"}/5`,`\u2022 Value for Money: ${t.value_for_money||"N/A"}/5`,"",`Comment: ${t.comment||"No comment provided"}`,"",`Submitted: ${new Date(t.createdAt).toLocaleDateString()}`].join(`
`);alert(e)}testReviewEligibility(){return b(this,null,function*(){console.log("=== Manual Review Eligibility Test ==="),yield this.checkReviewEligibility(),console.log("Current state after test:",{canLeaveReview:this.canLeaveReview(),existingReview:this.existingReview(),showReviewButton:this.showReviewButton()})})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=B({type:i,selectors:[["app-project-details"]],decls:20,vars:7,consts:[[1,"min-h-screen","bg-gray-50","py-8","px-4","sm:px-6","lg:px-8"],[1,"max-w-7xl","mx-auto"],[1,"flex","items-center","justify-between","mb-8"],[1,"flex","items-center","space-x-4"],["mat-icon-button","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","bg-white","shadow-sm","border","border-gray-200","hover:bg-gray-50","transition-colors",3,"click"],[1,"text-gray-600"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"flex","items-center","space-x-3"],[1,"p-6","bg-gray-50","border-b","border-gray-200"],[1,"p-6","bg-orange-50","border-b","border-orange-200"],[1,"p-6","bg-yellow-50","border-b","border-yellow-200"],[1,"mb-8","bg-red-50","border-l-4","border-red-400","p-6","rounded-r-lg","shadow-sm"],[1,"flex","flex-col","items-center","justify-center","py-20"],[1,"grid","grid-cols-1","xl:grid-cols-3","gap-8"],[1,"flex","items-center","px-6","py-3","bg-blue-600","hover:bg-blue-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm"],[1,"flex","items-center","px-6","py-3","bg-orange-600","hover:bg-orange-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm"],[3,"disabled","class"],[1,"flex","items-center","px-6","py-3","bg-indigo-600","hover:bg-indigo-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm"],[1,"flex","items-center","px-6","py-3","bg-purple-600","hover:bg-purple-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm"],[1,"flex","items-center","px-6","py-3","bg-blue-600","hover:bg-blue-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[1,"mr-2","w-5","h-5"],[1,"ml-2","bg-red-500","text-white","text-xs","rounded-full","px-2","py-1","min-w-[20px]","h-5","flex","items-center","justify-center"],[1,"flex","items-center","px-6","py-3","bg-green-600","hover:bg-green-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[1,"flex","items-center","px-6","py-3","bg-red-600","hover:bg-red-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[1,"flex","items-center","px-6","py-3","bg-orange-600","hover:bg-orange-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[3,"click","disabled"],[1,"flex","items-center","px-6","py-3","bg-indigo-600","hover:bg-indigo-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[1,"flex","items-center","px-6","py-3","bg-purple-600","hover:bg-purple-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"flex","flex-wrap","gap-3"],[1,"text-gray-700","mb-4"],[1,"flex","items-center","px-6","py-3","bg-yellow-600","hover:bg-yellow-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[1,"flex","items-start"],[1,"flex-shrink-0"],[1,"text-red-400","w-6","h-6"],[1,"ml-3"],[1,"text-lg","font-medium","text-red-800"],[1,"mt-2","text-red-700"],["diameter","48"],[1,"mt-4","text-lg","text-gray-600"],[1,"xl:col-span-2","space-y-8"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-200","overflow-hidden"],[1,"px-8","py-6","border-b","border-gray-200"],[1,"flex","items-start","justify-between"],[1,"flex-1"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"flex-shrink-0","ml-4"],[1,"px-8","py-6","space-y-6"],[1,"p-6","bg-red-50","border","border-red-200","rounded-xl"],[1,"text-xl","font-semibold","text-gray-900"],[1,"px-8","py-6"],[1,"flex","items-center","space-x-6"],[1,"space-y-8"],[1,"px-6","py-5","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900"],[1,"px-6","py-6","space-y-6"],[1,"text-center"],[1,"text-sm","font-medium","text-gray-500","uppercase","tracking-wide","mb-2"],[1,"text-3xl","font-bold","text-green-600"],[1,"pt-6","border-t","border-gray-200"],[1,"bg-white","rounded-xl","shadow-sm","border","border-green-200","overflow-hidden"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-gray-900","flex","items-center"],[1,"mr-2","text-blue-600"],[1,"px-3","py-1","text-xs","bg-blue-100","text-blue-700","rounded-lg","hover:bg-blue-200","transition-colors"],[1,"px-6","py-6"],[1,"flex","items-center","justify-center","py-4"],[1,"space-y-6"],[1,"text-center","py-8"],[1,"px-6","py-6","space-y-4"],["mat-stroked-button","",1,"w-full","h-12","text-base","font-semibold","rounded-lg","border-2","border-gray-300","text-gray-700","hover:bg-gray-50",3,"click"],[1,"mr-2"],[1,"text-lg","font-semibold","text-gray-900","mb-3"],[1,"text-gray-700","leading-relaxed","text-base"],[1,"rounded-lg","overflow-hidden","border","border-gray-200","max-w-md"],[1,"w-full","h-auto","object-cover",3,"src","alt"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"flex","items-center","justify-between","p-4","bg-gray-50","rounded-xl","border","border-gray-200","hover:bg-gray-100","hover:border-gray-300","transition-all","duration-200"],[1,"text-xs","text-gray-500","mt-3"],[1,"flex","items-center","space-x-3","flex-1","min-w-0"],[1,"p-3","bg-white","rounded-lg","shadow-sm","border","border-gray-200"],[1,"text-blue-600","w-6","h-6"],[1,"flex-1","min-w-0"],[1,"text-sm","font-semibold","text-gray-900","truncate"],[1,"text-xs","text-gray-500"],[1,"text-xs","text-gray-400","capitalize"],["target","_blank","rel","noopener noreferrer",1,"flex","items-center","px-4","py-2","text-sm","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors","shadow-sm","ml-3","flex-shrink-0",3,"href"],[1,"w-4","h-4","mr-1"],[1,"space-y-4"],[1,"bg-blue-50","border","border-blue-200","rounded-xl","p-5","hover:bg-blue-100","transition-colors"],[1,"flex","items-center","space-x-2","mb-2"],[1,"w-5","h-5","text-blue-600"],[1,"text-lg","font-semibold","text-blue-900"],[1,"text-sm","text-blue-700","mb-3","leading-relaxed"],[1,"inline-flex","items-center","px-3","py-1.5","bg-blue-200","text-blue-800","rounded-lg","text-sm","font-semibold"],[1,"inline-flex","items-center","px-3","py-1.5","bg-gray-200","text-gray-600","rounded-lg","text-sm"],[1,"p-4","bg-gray-50","rounded-xl","border","border-gray-200"],[1,"flex","items-center","space-x-2"],[1,"w-5","h-5","text-gray-400"],[1,"text-sm","text-gray-600"],[1,"text-lg","font-semibold","text-red-800","mb-2","flex","items-center"],[1,"w-5","h-5","mr-2","text-red-600"],[1,"text-red-700","leading-relaxed"],[1,"w-20","h-20","rounded-xl","object-cover","border","border-gray-200","shadow-sm",3,"src","alt"],[1,"w-20","h-20","rounded-xl","bg-gradient-to-br","from-blue-500","to-blue-600","flex","items-center","justify-center","border","border-gray-200","shadow-sm"],[1,"text-2xl","font-bold","text-blue-600","hover:text-blue-800","transition-colors","mb-1","text-left","cursor-pointer","underline-offset-4","hover:underline",3,"click"],[1,"mt-2","flex","items-center","space-x-2"],[1,"text-white","w-10","h-10"],[1,"w-4","h-4","text-gray-400"],[1,"text-sm","text-gray-500"],[1,"w-20","h-20","rounded-full","bg-gradient-to-br","from-indigo-400","to-indigo-600","flex","items-center","justify-center","shadow-sm"],[1,"text-2xl","font-bold","text-gray-900","mb-1"],[1,"text-sm","text-gray-500","mt-1"],[1,"mr-2","text-orange-600"],[1,"border","border-orange-200","rounded-lg","p-6","bg-orange-50"],[1,"flex","items-start","justify-between","mb-4"],[1,"flex","items-center","space-x-2","mb-3"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-sm","font-medium","bg-orange-100","text-orange-800","border","border-orange-200"],[1,"font-semibold","text-xl","text-orange-900","mb-2"],[1,"text-sm","text-orange-700","mb-4"],[1,"text-sm","text-gray-600","mb-4"],[1,"flex","gap-3","mt-4"],[1,"flex-1","px-6","py-3","bg-green-600","hover:bg-green-700","text-white","text-sm","font-medium","rounded-lg","transition-colors","flex","items-center","justify-center",3,"click"],[1,"w-4","h-4","mr-2"],[1,"flex-1","px-6","py-3","bg-red-600","hover:bg-red-700","text-white","text-sm","font-medium","rounded-lg","transition-colors","flex","items-center","justify-center",3,"click"],[1,"px-6","py-5","border-b","border-green-200","bg-green-50"],[1,"text-lg","font-semibold","text-green-900","flex","items-center"],[1,"mr-2","text-green-600"],[1,"flex","items-center","p-4","bg-green-50","rounded-lg","border","border-green-200"],[1,"text-green-600","mr-3"],[1,"text-green-800","font-medium","mb-1"],[1,"text-green-700","text-sm"],[1,"px-3","py-1","text-xs","bg-blue-100","text-blue-700","rounded-lg","hover:bg-blue-200","transition-colors",3,"click"],["diameter","24"],[1,"ml-2","text-sm","text-gray-600"],[1,"border-b","border-gray-200","pb-6"],[1,"text-sm","font-semibold","text-gray-700","mb-3","flex","items-center"],[1,"w-4","h-4","mr-1","text-purple-600"],[1,"border","border-purple-200","rounded-lg","p-4","bg-purple-50"],[1,"flex","items-start","justify-between","mb-3"],[1,"font-semibold","text-lg","text-gray-900"],[1,"text-sm","text-gray-600","mb-2"],[1,"text-right"],[1,"text-green-600"],[1,"text-red-600"],[1,"text-blue-600"],[1,"text-yellow-600"],[1,"flex","items-center","justify-center","mt-3","p-2","bg-green-50","rounded-lg","border","border-green-200"],[1,"text-green-600","mr-2","w-4","h-4"],[1,"text-green-800","font-medium","text-sm"],[1,"w-4","h-4","mr-1","text-blue-600"],[1,"border","border-gray-200","rounded-lg","p-4"],[1,"flex","gap-2","mt-4"],[1,"flex","items-center","justify-center","mt-4","p-3","bg-green-50","rounded-lg","border","border-green-200"],[1,"flex-1","px-4","py-2","bg-green-600","hover:bg-green-700","text-white","text-sm","font-medium","rounded-lg","transition-colors",3,"click"],[1,"flex-1","px-4","py-2","bg-red-600","hover:bg-red-700","text-white","text-sm","font-medium","rounded-lg","transition-colors",3,"click"],[1,"text-green-600","mr-2"],[1,"text-green-800","font-medium"],[1,"text-gray-400","mb-2",2,"font-size","48px","width","48px","height","48px"]],template:function(e,r){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),v("click",function(){return r.goBack()}),a(5,"mat-icon",5),n(6,"arrow_back"),o()(),a(7,"div")(8,"h1",6),n(9,"Project Details"),o(),a(10,"p",7),n(11,"View complete project information"),o()()(),a(12,"div",8),c(13,eo,8,5),o(),c(14,oo,10,2,"div",9),c(15,ro,19,1,"div",10),c(16,co,10,3,"div",11),o(),c(17,mo,10,1,"div",12),c(18,po,4,0,"div",13)(19,sa,73,25,"div",14),o()()),e&2&&(l(13),m(r.project()&&r.isBusinessOwner()?13:-1),l(),m(r.project()&&r.isClient()&&ne(6,hi).includes(r.project().status)?14:-1),l(),m(r.project()&&r.canApproveCompletion()?15:-1),l(),m(r.project()&&r.isClient()&&r.showReviewButton()?16:-1),l(),m(r.error()?17:-1),l(),m(r.loading()?18:r.project()?19:-1))},dependencies:[A,G,U,ze,$,q,Ee,ye,K,ae,Ue],styles:[".mat-mdc-raised-button.mat-primary{border-radius:.5rem!important}  .mat-mdc-outlined-button{border-radius:.5rem!important}  .mat-icon{width:auto!important;height:auto!important;font-size:inherit!important}  .mat-mdc-progress-spinner circle{stroke:#3b82f6}"]})};var lt=class i{notificationService=w(Tt);ngOnInit(){console.log("Test Notifications Component loaded")}createTestProjectNotification(){let t={_id:"test-project-"+Date.now(),recipient_id:"current-user",title:"Test Project Created",message:"A new project has been created for your business.",type:"project_created",priority:"high",is_read:!1,is_seen:!1,project_id:{_id:"test-project-id",title:"Test Project",description:"This is a test project",status:"pending"},business_id:{_id:"test-business-id",name:"Test Business",logo_url:""},createdAt:new Date,updatedAt:new Date};this.notificationService.handleNewNotification(t),console.log("Test project notification created")}createTestMessageNotification(){let t={_id:"test-message-"+Date.now(),recipient_id:"current-user",title:"New Message",message:"You have received a new message.",type:"message_received",priority:"medium",is_read:!1,is_seen:!1,metadata:{chatId:"test-chat-id"},createdAt:new Date,updatedAt:new Date};this.notificationService.handleNewNotification(t),console.log("Test message notification created")}createTestSystemNotification(){let t={_id:"test-system-"+Date.now(),recipient_id:"current-user",title:"System Update",message:"The system has been updated with new features.",type:"system_announcement",priority:"low",is_read:!1,is_seen:!1,createdAt:new Date,updatedAt:new Date};this.notificationService.handleNewNotification(t),console.log("Test system notification created")}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=B({type:i,selectors:[["app-test-notifications"]],decls:10,vars:0,consts:[[1,"p-6"],[1,"text-xl","font-bold","mb-4"],[1,"space-y-2"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","mr-2",3,"click"],[1,"px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","mr-2",3,"click"],[1,"px-4","py-2","bg-purple-600","text-white","rounded-lg","hover:bg-purple-700",3,"click"]],template:function(e,r){e&1&&(p(0,"div",0)(1,"h2",1),n(2,"Test Notifications"),u(),p(3,"div",2)(4,"button",3),N("click",function(){return r.createTestProjectNotification()}),n(5," Create Test Project Notification "),u(),p(6,"button",4),N("click",function(){return r.createTestMessageNotification()}),n(7," Create Test Message Notification "),u(),p(8,"button",5),N("click",function(){return r.createTestSystemNotification()}),n(9," Create Test System Notification "),u()()())},dependencies:[A],encapsulation:2})};var bi=(i,t)=>t.code,da=(i,t)=>t.name;function ca(i,t){i&1&&(a(0,"mat-error"),n(1,"First name is required"),o())}function ma(i,t){i&1&&(a(0,"mat-error"),n(1,"Last name is required"),o())}function pa(i,t){i&1&&(a(0,"mat-error"),n(1,"Email is required"),o())}function _a(i,t){i&1&&(a(0,"mat-error"),n(1,"Please enter a valid email"),o())}function ua(i,t){i&1&&(a(0,"mat-error"),n(1,"Phone number is required"),o())}function ga(i,t){if(i&1&&(a(0,"mat-error"),n(1),o()),i&2){let e=d();l(),g(e.phone==null||e.phone.errors==null||e.phone.errors.usaPhone==null?null:e.phone.errors.usaPhone.message)}}function xa(i,t){if(i&1&&(a(0,"mat-option",20),n(1),o()),i&2){let e=t.$implicit;E("value",e.code),l(),g(e.name)}}function fa(i,t){i&1&&(a(0,"mat-error"),n(1,"State is required"),o())}function Ca(i,t){i&1&&(a(0,"mat-option",22),n(1,"Please select a state first"),o())}function va(i,t){if(i&1&&(a(0,"mat-option",20),n(1),o()),i&2){let e=t.$implicit;E("value",e.name),l(),g(e.name)}}function ha(i,t){i&1&&(a(0,"mat-error"),n(1,"City is required"),o())}function ba(i,t){if(i&1&&(a(0,"mat-option",20),n(1),o()),i&2){let e=t.$implicit;E("value",e.code),l(),g(e.name)}}function ya(i,t){i&1&&(a(0,"mat-error"),n(1,"Heritage is required"),o())}function Ea(i,t){i&1&&(a(0,"mat-icon",28),n(1,"refresh"),o())}function wa(i,t){i&1&&(a(0,"mat-error"),n(1,"Current password is required"),o())}function Sa(i,t){i&1&&(a(0,"mat-error"),n(1,"New password is required"),o())}function ja(i,t){i&1&&(a(0,"mat-error"),n(1,"Password must be at least 6 characters"),o())}function Pa(i,t){i&1&&(a(0,"mat-error"),n(1,"Please confirm your password"),o())}function Ta(i,t){i&1&&(a(0,"mat-error"),n(1,"Passwords do not match"),o())}function Ma(i,t){i&1&&(a(0,"mat-icon",28),n(1,"refresh"),o())}var st=class i{authService=w(W);fb=w(pe);snackBar=w(we);citiesService=w(qt);user=this.authService.user;isLoading=S(!1);countries=Ft;usStates=Gt;availableCities=S([]);profileForm;passwordForm;constructor(){let t=this.user();this.profileForm=this.fb.group({first_name:[t?.first_name||"",[L.required]],last_name:[t?.last_name||"",[L.required]],email:[t?.email||"",[L.required,L.email]],phone:[t?.phone||"",[L.required,$t.usaPhone()]],bio:[t?.bio||""],city:[t?.city||"",[L.required]],state:[t?.state||"",[L.required]],country:[{value:t?.country||"USA",disabled:!0}],country_of_origin:[t?.country_of_origin||"",[L.required]]}),t?.state&&(this.onStateSelected(t.state,!0),t?.city&&setTimeout(()=>{this.citiesService.getCitiesByState(t.state).some(s=>s.name===t.city)?this.profileForm.patchValue({city:t.city}):(console.warn(`City "${t.city}" not found in state "${t.state}"`),this.profileForm.patchValue({city:""}))},0)),this.passwordForm=this.fb.group({currentPassword:["",[L.required]],newPassword:["",[L.required,L.minLength(6)]],confirmPassword:["",[L.required]]},{validators:this.passwordMatchValidator})}onStateSelected(t,e=!1){if(t){let r=this.citiesService.getCitiesByState(t);this.availableCities.set(r),e||this.profileForm.patchValue({city:""})}else this.availableCities.set([])}displayCity(t){return t?t.name:""}passwordMatchValidator(t){let e=t.get("newPassword"),r=t.get("confirmPassword");return e&&r&&e.value!==r.value?r.setErrors({mismatch:!0}):r?.setErrors(null),null}updateProfile(){return b(this,null,function*(){if(this.profileForm.invalid){this.snackBar.open("Please fill in all required fields correctly","Close",{duration:3e3,panelClass:["error-snackbar"]});return}this.isLoading.set(!0);try{let t=this.profileForm.value,e=yield this.authService.updateProfile(t);if(e.error)throw e.error;this.snackBar.open("Profile updated successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]})}catch(t){this.snackBar.open(t?.message||"Failed to update profile. Please try again.","Close",{duration:3e3,panelClass:["error-snackbar"]})}finally{this.isLoading.set(!1)}})}updatePassword(){return b(this,null,function*(){if(this.passwordForm.invalid){this.snackBar.open("Please fill in all fields correctly","Close",{duration:3e3,panelClass:["error-snackbar"]});return}this.isLoading.set(!0);try{let{currentPassword:t,newPassword:e}=this.passwordForm.value;this.passwordForm.reset(),this.snackBar.open("Password updated successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]})}catch{this.snackBar.open("Failed to update password. Please try again.","Close",{duration:3e3,panelClass:["error-snackbar"]})}finally{this.isLoading.set(!1)}})}getUserInitials(){let t=this.user();if(!t)return"";if(t.first_name||t.last_name){let e=t.first_name?.charAt(0).toUpperCase()||"",r=t.last_name?.charAt(0).toUpperCase()||"";return e+r}return t.email.charAt(0).toUpperCase()}get phone(){return this.profileForm.get("phone")}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=B({type:i,selectors:[["app-profile"]],decls:135,vars:25,consts:[[1,"max-w-4xl","mx-auto","p-6"],[1,"mb-8"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"profile-tabs"],["label","Profile Information"],[1,"tab-content"],[1,"profile-card"],[1,"flex","items-center","space-x-4","mb-6"],[1,"w-16","h-16","bg-blue-600","text-white","rounded-full","flex","items-center","justify-center","text-xl","font-bold"],[1,"text-xl","font-semibold"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline",1,"w-full"],["matInput","","formControlName","first_name","placeholder","Enter your first name"],["matSuffix",""],["matInput","","formControlName","last_name","placeholder","Enter your last name"],["matInput","","formControlName","email","type","email","placeholder","Enter your email"],["matInput","","formControlName","phone","placeholder","(555) 123-4567","type","tel","appPhoneFormat",""],["formControlName","state",3,"selectionChange"],[3,"value"],["formControlName","city",3,"disabled"],["disabled",""],["matInput","","formControlName","country","readonly",""],["formControlName","country_of_origin"],["matInput","","formControlName","bio","rows","4","placeholder","Tell us about yourself"],[1,"flex","justify-end","pt-4"],["mat-raised-button","","color","primary","type","submit",1,"px-8",3,"disabled"],[1,"animate-spin","mr-2"],["label","Change Password"],[1,"password-card"],["matInput","","formControlName","currentPassword","type","password","placeholder","Enter current password"],["matInput","","formControlName","newPassword","type","password","placeholder","Enter new password"],["matInput","","formControlName","confirmPassword","type","password","placeholder","Confirm new password"]],template:function(e,r){if(e&1&&(a(0,"div",0)(1,"div",1)(2,"h1",2),n(3,"Profile Settings"),o(),a(4,"p",3),n(5,"Manage your account information and settings"),o()(),a(6,"mat-tab-group",4)(7,"mat-tab",5)(8,"div",6)(9,"mat-card",7)(10,"mat-card-header")(11,"div",8)(12,"div",9),n(13),o(),a(14,"div")(15,"h2",10),n(16),o(),a(17,"p",3),n(18),o()()()(),a(19,"mat-card-content")(20,"form",11),v("ngSubmit",function(){return r.updateProfile()}),a(21,"div",12)(22,"mat-form-field",13)(23,"mat-label"),n(24,"First Name *"),o(),j(25,"input",14),a(26,"mat-icon",15),n(27,"person"),o(),c(28,ca,2,0,"mat-error"),o(),a(29,"mat-form-field",13)(30,"mat-label"),n(31,"Last Name *"),o(),j(32,"input",16),a(33,"mat-icon",15),n(34,"person"),o(),c(35,ma,2,0,"mat-error"),o(),a(36,"mat-form-field",13)(37,"mat-label"),n(38,"Email"),o(),j(39,"input",17),a(40,"mat-icon",15),n(41,"email"),o(),c(42,pa,2,0,"mat-error"),c(43,_a,2,0,"mat-error"),o(),a(44,"mat-form-field",13)(45,"mat-label"),n(46,"Phone *"),o(),j(47,"input",18),a(48,"mat-icon",15),n(49,"phone"),o(),c(50,ua,2,0,"mat-error"),c(51,ga,2,1,"mat-error"),o(),a(52,"mat-form-field",13)(53,"mat-label"),n(54,"State *"),o(),a(55,"mat-select",19),v("selectionChange",function(_){return r.onStateSelected(_.value)}),F(56,xa,2,2,"mat-option",20,bi),o(),a(58,"mat-icon",15),n(59,"map"),o(),c(60,fa,2,0,"mat-error"),o(),a(61,"mat-form-field",13)(62,"mat-label"),n(63,"City *"),o(),a(64,"mat-select",21),c(65,Ca,2,0,"mat-option",22),F(66,va,2,2,"mat-option",20,da),o(),a(68,"mat-icon",15),n(69,"location_city"),o(),c(70,ha,2,0,"mat-error"),o(),a(71,"mat-form-field",13)(72,"mat-label"),n(73,"Country"),o(),j(74,"input",23),a(75,"mat-icon",15),n(76,"flag"),o(),a(77,"mat-hint"),n(78,"Country is set to USA by default"),o()(),a(79,"mat-form-field",13)(80,"mat-label"),n(81,"Heritage"),o(),a(82,"mat-select",24),F(83,ba,2,2,"mat-option",20,bi),o(),a(85,"mat-icon",15),n(86,"home"),o(),c(87,ya,2,0,"mat-error"),o()(),a(88,"mat-form-field",13)(89,"mat-label"),n(90,"Bio"),o(),j(91,"textarea",25),a(92,"mat-icon",15),n(93,"description"),o()(),a(94,"div",26)(95,"button",27),c(96,Ea,2,0,"mat-icon",28),n(97," Update Profile "),o()()()()()()(),a(98,"mat-tab",29)(99,"div",6)(100,"mat-card",30)(101,"mat-card-header")(102,"mat-card-title"),n(103,"Change Password"),o(),a(104,"mat-card-subtitle"),n(105,"Update your account password"),o()(),a(106,"mat-card-content")(107,"form",11),v("ngSubmit",function(){return r.updatePassword()}),a(108,"mat-form-field",13)(109,"mat-label"),n(110,"Current Password"),o(),j(111,"input",31),a(112,"mat-icon",15),n(113,"lock"),o(),c(114,wa,2,0,"mat-error"),o(),a(115,"mat-form-field",13)(116,"mat-label"),n(117,"New Password"),o(),j(118,"input",32),a(119,"mat-icon",15),n(120,"lock_outline"),o(),c(121,Sa,2,0,"mat-error"),c(122,ja,2,0,"mat-error"),o(),a(123,"mat-form-field",13)(124,"mat-label"),n(125,"Confirm New Password"),o(),j(126,"input",33),a(127,"mat-icon",15),n(128,"lock_outline"),o(),c(129,Pa,2,0,"mat-error"),c(130,Ta,2,0,"mat-error"),o(),a(131,"div",26)(132,"button",27),c(133,Ma,2,0,"mat-icon",28),n(134," Update Password "),o()()()()()()()()()),e&2){let s,_,h,J,ee,te,Fe,Ve,Ne,Re,Be,Ae,Oe,Le;l(13),x(" ",r.getUserInitials()," "),l(3),g((((s=r.user())==null?null:s.first_name)+" "+(((s=r.user())==null?null:s.last_name)||"")).trim()||((s=r.user())==null?null:s.email)),l(2),g((_=r.user())==null?null:_.email),l(2),E("formGroup",r.profileForm),l(8),m((h=r.profileForm.get("first_name"))!=null&&h.hasError("required")&&((h=r.profileForm.get("first_name"))!=null&&h.touched)?28:-1),l(7),m((J=r.profileForm.get("last_name"))!=null&&J.hasError("required")&&((J=r.profileForm.get("last_name"))!=null&&J.touched)?35:-1),l(7),m((ee=r.profileForm.get("email"))!=null&&ee.hasError("required")&&((ee=r.profileForm.get("email"))!=null&&ee.touched)?42:-1),l(),m((te=r.profileForm.get("email"))!=null&&te.hasError("email")&&((te=r.profileForm.get("email"))!=null&&te.touched)?43:-1),l(7),m(r.phone!=null&&r.phone.hasError("required")&&(r.phone!=null&&r.phone.touched)?50:-1),l(),m(r.phone!=null&&r.phone.hasError("usaPhone")&&(r.phone!=null&&r.phone.touched)?51:-1),l(5),V(r.usStates),l(4),m((Fe=r.profileForm.get("state"))!=null&&Fe.hasError("required")&&((Fe=r.profileForm.get("state"))!=null&&Fe.touched)?60:-1),l(4),E("disabled",r.availableCities().length===0),l(),m(r.availableCities().length===0?65:-1),l(),V(r.availableCities()),l(4),m((Ve=r.profileForm.get("city"))!=null&&Ve.hasError("required")&&((Ve=r.profileForm.get("city"))!=null&&Ve.touched)?70:-1),l(13),V(r.countries),l(4),m((Ne=r.profileForm.get("country_of_origin"))!=null&&Ne.hasError("required")&&((Ne=r.profileForm.get("country_of_origin"))!=null&&Ne.touched)?87:-1),l(8),E("disabled",r.isLoading()||r.profileForm.invalid),l(),m(r.isLoading()?96:-1),l(11),E("formGroup",r.passwordForm),l(7),m((Re=r.passwordForm.get("currentPassword"))!=null&&Re.hasError("required")&&((Re=r.passwordForm.get("currentPassword"))!=null&&Re.touched)?114:-1),l(7),m((Be=r.passwordForm.get("newPassword"))!=null&&Be.hasError("required")&&((Be=r.passwordForm.get("newPassword"))!=null&&Be.touched)?121:-1),l(),m((Ae=r.passwordForm.get("newPassword"))!=null&&Ae.hasError("minlength")&&((Ae=r.passwordForm.get("newPassword"))!=null&&Ae.touched)?122:-1),l(7),m((Oe=r.passwordForm.get("confirmPassword"))!=null&&Oe.hasError("required")&&((Oe=r.passwordForm.get("confirmPassword"))!=null&&Oe.touched)?129:-1),l(),m((Le=r.passwordForm.get("confirmPassword"))!=null&&Le.hasError("mismatch")&&((Le=r.passwordForm.get("confirmPassword"))!=null&&Le.touched)?130:-1),l(2),E("disabled",r.isLoading()||r.passwordForm.invalid),l(),m(r.isLoading()?133:-1)}},dependencies:[A,_e,et,Ze,se,de,ce,me,K,le,Qe,Xe,Je,Ke,fe,xe,ue,tt,Dt,ge,he,It,G,U,$,q,Se,Te,je,Pe,ve,Ce,re,Ut],styles:[".profile-tabs[_ngcontent-%COMP%]{margin-top:2rem}.profile-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:2rem 0}.profile-tabs[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%], .profile-tabs[_ngcontent-%COMP%]   .password-card[_ngcontent-%COMP%]{box-shadow:0 4px 6px -1px #0000001a;border-radius:12px;border:1px solid #e5e7eb}.profile-tabs[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.profile-tabs[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-bottom:1rem}.profile-tabs[_ngcontent-%COMP%]   .animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}  .mat-mdc-tab-group .mat-mdc-tab-header{border-bottom:1px solid #e5e7eb}  .mat-mdc-tab-group .mat-mdc-tab{font-weight:500}  .mat-mdc-card .mat-mdc-card-header .mat-mdc-card-title{font-size:1.5rem;font-weight:600;color:#111827}  .mat-mdc-card .mat-mdc-card-header .mat-mdc-card-subtitle{color:#6b7280}  .mat-mdc-form-field .mat-mdc-form-field-flex{border-radius:8px}  .mat-mdc-raised-button.mat-primary{background-color:#2563eb}  .mat-mdc-raised-button.mat-primary:hover:not([disabled]){background-color:#1d4ed8}  .error-snackbar{background-color:#dc2626!important;color:#fff!important}  .success-snackbar{background-color:#059669!important;color:#fff!important}"]})};function ka(i,t){i&1&&(a(0,"mat-icon",39),n(1,"refresh"),o())}var dt=class i{authService=w(W);fb=w(pe);snackBar=w(we);user=this.authService.user;isLoading=S(!1);settingsForm;constructor(){let t=this.user();this.settingsForm=this.fb.group({emailNotifications:[!0],pushNotifications:[!0],marketingEmails:[!1],projectUpdates:[!0],messageNotifications:[!0],language:["en"],timezone:["UTC"],theme:["light"]})}saveSettings(){return b(this,null,function*(){this.isLoading.set(!0);try{let t=this.settingsForm.value;this.snackBar.open("Settings saved successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]})}catch{this.snackBar.open("Failed to save settings. Please try again.","Close",{duration:3e3,panelClass:["error-snackbar"]})}finally{this.isLoading.set(!1)}})}resetSettings(){return b(this,null,function*(){this.settingsForm.patchValue({emailNotifications:!0,pushNotifications:!0,marketingEmails:!1,projectUpdates:!0,messageNotifications:!0,language:"en",timezone:"UTC",theme:"light"}),this.snackBar.open("Settings reset to default values","Close",{duration:3e3})})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=B({type:i,selectors:[["app-settings"]],decls:114,vars:4,consts:[[1,"max-w-4xl","mx-auto","p-6"],[1,"mb-8"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"settings-card"],[1,"mr-2"],[1,"space-y-4"],[1,"flex","items-center","justify-between"],[1,"font-medium","text-gray-900"],[1,"text-sm","text-gray-600"],["formControlName","emailNotifications","color","primary"],["formControlName","pushNotifications","color","primary"],["formControlName","marketingEmails","color","primary"],["formControlName","projectUpdates","color","primary"],["formControlName","messageNotifications","color","primary"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline"],["formControlName","language"],["value","en"],["value","es"],["value","fr"],["value","de"],["matSuffix",""],["formControlName","timezone"],["value","UTC"],["value","America/New_York"],["value","America/Chicago"],["value","America/Denver"],["value","America/Los_Angeles"],["value","Europe/London"],["value","Europe/Paris"],["formControlName","theme"],["value","light"],["value","dark"],["value","auto"],[1,"flex","justify-between","pt-6"],["mat-stroked-button","","type","button",1,"px-6",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",1,"px-8",3,"disabled"],[1,"animate-spin","mr-2"]],template:function(e,r){e&1&&(a(0,"div",0)(1,"div",1)(2,"h1",2),n(3,"Settings"),o(),a(4,"p",3),n(5,"Manage your account preferences and notification settings"),o()(),a(6,"form",4),v("ngSubmit",function(){return r.saveSettings()}),a(7,"mat-card",5)(8,"mat-card-header")(9,"mat-card-title")(10,"mat-icon",6),n(11,"notifications"),o(),n(12," Notifications "),o(),a(13,"mat-card-subtitle"),n(14,"Choose how you want to be notified about activity"),o()(),a(15,"mat-card-content")(16,"div",7)(17,"div",8)(18,"div")(19,"h3",9),n(20,"Email Notifications"),o(),a(21,"p",10),n(22,"Receive notifications via email"),o()(),j(23,"mat-slide-toggle",11),o(),a(24,"div",8)(25,"div")(26,"h3",9),n(27,"Push Notifications"),o(),a(28,"p",10),n(29,"Receive push notifications in your browser"),o()(),j(30,"mat-slide-toggle",12),o(),a(31,"div",8)(32,"div")(33,"h3",9),n(34,"Marketing Emails"),o(),a(35,"p",10),n(36,"Receive promotional and marketing emails"),o()(),j(37,"mat-slide-toggle",13),o(),a(38,"div",8)(39,"div")(40,"h3",9),n(41,"Project Updates"),o(),a(42,"p",10),n(43,"Get notified about project status changes"),o()(),j(44,"mat-slide-toggle",14),o(),a(45,"div",8)(46,"div")(47,"h3",9),n(48,"Message Notifications"),o(),a(49,"p",10),n(50,"Get notified when you receive new messages"),o()(),j(51,"mat-slide-toggle",15),o()()()(),a(52,"mat-card",5)(53,"mat-card-header")(54,"mat-card-title")(55,"mat-icon",6),n(56,"tune"),o(),n(57," Preferences "),o(),a(58,"mat-card-subtitle"),n(59,"Customize your experience"),o()(),a(60,"mat-card-content")(61,"div",16)(62,"mat-form-field",17)(63,"mat-label"),n(64,"Language"),o(),a(65,"mat-select",18)(66,"mat-option",19),n(67,"English"),o(),a(68,"mat-option",20),n(69,"Spanish"),o(),a(70,"mat-option",21),n(71,"French"),o(),a(72,"mat-option",22),n(73,"German"),o()(),a(74,"mat-icon",23),n(75,"language"),o()(),a(76,"mat-form-field",17)(77,"mat-label"),n(78,"Timezone"),o(),a(79,"mat-select",24)(80,"mat-option",25),n(81,"UTC"),o(),a(82,"mat-option",26),n(83,"Eastern Time"),o(),a(84,"mat-option",27),n(85,"Central Time"),o(),a(86,"mat-option",28),n(87,"Mountain Time"),o(),a(88,"mat-option",29),n(89,"Pacific Time"),o(),a(90,"mat-option",30),n(91,"London"),o(),a(92,"mat-option",31),n(93,"Paris"),o()(),a(94,"mat-icon",23),n(95,"schedule"),o()(),a(96,"mat-form-field",17)(97,"mat-label"),n(98,"Theme"),o(),a(99,"mat-select",32)(100,"mat-option",33),n(101,"Light"),o(),a(102,"mat-option",34),n(103,"Dark"),o(),a(104,"mat-option",35),n(105,"Auto"),o()(),a(106,"mat-icon",23),n(107,"palette"),o()()()()(),a(108,"div",36)(109,"button",37),v("click",function(){return r.resetSettings()}),n(110," Reset to Default "),o(),a(111,"button",38),c(112,ka,2,0,"mat-icon",39),n(113," Save Settings "),o()()()()),e&2&&(l(6),E("formGroup",r.settingsForm),l(103),E("disabled",r.isLoading()),l(2),E("disabled",r.isLoading()||r.settingsForm.invalid),l(),m(r.isLoading()?112:-1))},dependencies:[A,_e,et,se,de,ce,me,K,le,Qe,Xe,Je,Ke,fe,xe,ue,ge,he,G,U,$,q,Xt,Jt,ve,Ce,re,Se],styles:[".settings-card[_ngcontent-%COMP%]{box-shadow:0 4px 6px -1px #0000001a;border-radius:12px;border:1px solid #e5e7eb;margin-bottom:1.5rem}.settings-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:1rem}.settings-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.25rem;font-weight:600;color:#111827}.settings-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{color:#6b7280;margin-top:.5rem}.settings-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding-top:0}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}  .mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected .mdc-switch__track{background-color:#2563eb}  .mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected .mdc-switch__handle .mdc-switch__ripple{background-color:#2563eb}  .mat-mdc-form-field .mat-mdc-form-field-flex{border-radius:8px}  .mat-mdc-raised-button.mat-primary{background-color:#2563eb}  .mat-mdc-raised-button.mat-primary:hover:not([disabled]){background-color:#1d4ed8}  .mat-mdc-outlined-button{border-color:#d1d5db;color:#374151}  .mat-mdc-outlined-button:hover:not([disabled]){background-color:#f9fafb;border-color:#9ca3af}  .error-snackbar{background-color:#dc2626!important;color:#fff!important}  .success-snackbar{background-color:#059669!important;color:#fff!important}"]})};var ct=class i{constructor(t){this.http=t}apiUrl=`${Ye.api.baseUrl}/withdrawals`;createWithdrawal(t){return this.http.post(this.apiUrl,t)}getWithdrawals(t=1,e=10,r){let s=new wt().set("page",t.toString()).set("limit",e.toString());return r&&(s=s.set("status",r)),this.http.get(this.apiUrl,{params:s})}getWithdrawal(t){return this.http.get(`${this.apiUrl}/${t}`)}cancelWithdrawal(t){return this.http.post(`${this.apiUrl}/${t}/cancel`,{})}getWithdrawalStats(){return this.http.get(`${this.apiUrl}/stats/summary`)}processWithdrawal(t){return this.http.post(`${this.apiUrl}/${t}/process`,{})}getStatusColor(t){switch(t){case"pending":return"text-yellow-600 bg-yellow-100";case"processing":return"text-blue-600 bg-blue-100";case"completed":return"text-green-600 bg-green-100";case"failed":return"text-red-600 bg-red-100";case"cancelled":return"text-gray-600 bg-gray-100";default:return"text-gray-600 bg-gray-100"}}getStatusIcon(t){switch(t){case"pending":return"clock";case"processing":return"sync";case"completed":return"check-circle";case"failed":return"x-circle";case"cancelled":return"minus-circle";default:return"help-circle"}}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}calculateFee(t){return Math.round(t*.03*100)/100}calculateNetAmount(t){return t-this.calculateFee(t)}static \u0275fac=function(e){return new(e||i)(Ct(Ge))};static \u0275prov=ft({token:i,factory:i.\u0275fac,providedIn:"root"})};function Da(i,t){if(i&1&&(a(0,"mat-icon",8),n(1),o()),i&2){let e=d();k(e.getIconClass()),l(),x(" ",e.data.icon," ")}}var mt=class i{constructor(t,e){this.dialogRef=t;this.data=e}onConfirm(){this.dialogRef.close(!0)}onCancel(){this.dialogRef.close(!1)}getIconClass(){let t="w-8 h-8";switch(this.data.type){case"danger":return`${t} text-red-600`;case"warning":return`${t} text-yellow-600`;case"info":default:return`${t} text-blue-600`}}getConfirmButtonClass(){switch(this.data.type){case"danger":return"bg-red-600 hover:bg-red-700 text-white";case"warning":return"bg-yellow-600 hover:bg-yellow-700 text-white";case"info":default:return"bg-blue-600 hover:bg-blue-700 text-white"}}static \u0275fac=function(e){return new(e||i)(_t(At),_t(Ot))};static \u0275cmp=B({type:i,selectors:[["app-confirmation-dialog"]],decls:12,vars:7,consts:[[1,"p-6"],[1,"flex","items-center","mb-4"],[1,"mr-3","text-3xl",3,"class"],[1,"text-xl","font-semibold","text-gray-900"],[1,"text-gray-600","mb-6","leading-relaxed"],[1,"flex","justify-end","gap-3"],["mat-stroked-button","",1,"px-4","py-2",3,"click"],["mat-raised-button","",1,"px-4","py-2",3,"click"],[1,"mr-3","text-3xl"]],template:function(e,r){e&1&&(a(0,"div",0)(1,"div",1),c(2,Da,2,3,"mat-icon",2),a(3,"h2",3),n(4),o()(),a(5,"p",4),n(6),o(),a(7,"div",5)(8,"button",6),v("click",function(){return r.onCancel()}),n(9),o(),a(10,"button",7),v("click",function(){return r.onConfirm()}),n(11),o()()()),e&2&&(l(2),m(r.data.icon?2:-1),l(2),g(r.data.title),l(2),g(r.data.message),l(3),x(" ",r.data.cancelText||"Cancel"," "),l(),k(r.getConfirmButtonClass()),l(),x(" ",r.data.confirmText||"Confirm"," "))},dependencies:[A,nt,G,U,$,q],encapsulation:2})};var Ia=(i,t,e,r)=>({"bg-green-50 border-green-200":i,"bg-yellow-50 border-yellow-200":t,"bg-red-50 border-red-200":e,"bg-gray-50 border-gray-200":r}),Fa=(i,t,e,r)=>({"text-green-600":i,"text-yellow-600":t,"text-red-600":e,"text-gray-600":r}),Va=(i,t,e,r)=>({"text-green-700":i,"text-yellow-700":t,"text-red-700":e,"text-gray-700":r}),Si=()=>["date","method","description","amount","status"],Na=(i,t,e,r,s)=>({"bg-yellow-100 text-yellow-800":i,"bg-blue-100 text-blue-800":t,"bg-green-100 text-green-800":e,"bg-red-100 text-red-800":r,"bg-gray-100 text-gray-800":s}),Ra=(i,t)=>t._id;function Ba(i,t){i&1&&j(0,"mat-spinner",12)}function Aa(i,t){i&1&&(a(0,"mat-icon",13),n(1,"account_balance_wallet"),o())}function Oa(i,t){if(i&1){let e=y();a(0,"button",11),v("click",function(){f(e);let s=d();return C(s.withdrawToStripe())}),c(1,Ba,1,0,"mat-spinner",12)(2,Aa,2,0,"mat-icon",13),n(3," Withdraw to Stripe "),o()}if(i&2){let e=d();E("disabled",e.stripeLoading()),l(),m(e.stripeLoading()?1:2)}}function La(i,t){i&1&&j(0,"mat-spinner",12)}function qa(i,t){i&1&&(a(0,"mat-icon",13),n(1,"payment"),o())}function $a(i,t){if(i&1){let e=y();a(0,"button",14),v("click",function(){f(e);let s=d();return C(s.connectStripe())}),c(1,La,1,0,"mat-spinner",12)(2,qa,2,0,"mat-icon",13),n(3," Connect Stripe "),o()}if(i&2){let e=d();E("disabled",e.stripeLoading()),l(),m(e.stripeLoading()?1:2)}}function Ua(i,t){i&1&&j(0,"mat-spinner",12)}function Ga(i,t){i&1&&(a(0,"mat-icon",13),n(1,"dashboard"),o())}function Wa(i,t){i&1&&j(0,"mat-spinner",12)}function Ha(i,t){i&1&&(a(0,"mat-icon",13),n(1,"link_off"),o())}function za(i,t){if(i&1){let e=y();a(0,"div",8)(1,"button",15),v("click",function(){f(e);let s=d();return C(s.openStripeDashboard())}),c(2,Ua,1,0,"mat-spinner",12)(3,Ga,2,0,"mat-icon",13),n(4," Stripe Dashboard "),o(),a(5,"button",16),v("click",function(){f(e);let s=d();return C(s.disconnectStripe())}),c(6,Wa,1,0,"mat-spinner",12)(7,Ha,2,0,"mat-icon",13),n(8," Disconnect "),o()()}if(i&2){let e=d();l(),E("disabled",e.stripeLoading()),l(),m(e.stripeLoading()?2:3),l(3),E("disabled",e.stripeLoading()),l(),m(e.stripeLoading()?6:7)}}function Ya(i,t){i&1&&(a(0,"div",9),j(1,"mat-spinner",17),a(2,"span",18),n(3,"Loading earnings data..."),o()())}function Ka(i,t){if(i&1){let e=y();a(0,"div",10)(1,"mat-icon",19),n(2,"error"),o(),a(3,"h3",20),n(4,"Error Loading Data"),o(),a(5,"p",21),n(6),o(),a(7,"button",22),v("click",function(){f(e);let s=d();return C(s.retryLoad())}),a(8,"mat-icon",13),n(9,"refresh"),o(),n(10," Try Again "),o()()}if(i&2){let e=d();l(6),g(e.error())}}function Qa(i,t){i&1&&n(0," check_circle ")}function Ja(i,t){i&1&&n(0," schedule ")}function Xa(i,t){i&1&&n(0," error ")}function Za(i,t){i&1&&n(0," payment ")}function er(i,t){i&1&&n(0," Stripe Connected ")}function tr(i,t){i&1&&n(0," Stripe Setup Pending ")}function ir(i,t){i&1&&n(0," Stripe Connection Failed ")}function nr(i,t){i&1&&n(0," Stripe Not Connected ")}function or(i,t){i&1&&j(0,"mat-spinner",84)}function ar(i,t){i&1&&(a(0,"mat-icon",85),n(1,"refresh"),o())}function rr(i,t){if(i&1){let e=y();a(0,"button",83),v("click",function(){f(e);let s=d(2);return C(s.refreshStripeAccountStatus())}),c(1,or,1,0,"mat-spinner",84)(2,ar,2,0,"mat-icon",85),o()}if(i&2){let e=d(2);E("disabled",e.stripeLoading()),l(),m(e.stripeLoading()?1:2)}}function lr(i,t){i&1&&j(0,"mat-spinner",87)}function sr(i,t){if(i&1){let e=y();a(0,"button",86),v("click",function(){f(e);let s=d(2);return C(s.withdrawToStripe())}),c(1,lr,1,0,"mat-spinner",87),n(2," Withdraw to Stripe "),o()}if(i&2){let e=d(2);E("disabled",e.stripeLoading()),l(),m(e.stripeLoading()?1:-1)}}function dr(i,t){i&1&&j(0,"mat-spinner",87)}function cr(i,t){if(i&1){let e=y();a(0,"button",88),v("click",function(){f(e);let s=d(2);return C(s.connectStripe())}),c(1,dr,1,0,"mat-spinner",87),n(2," Connect Stripe "),o()}if(i&2){let e=d(2);E("disabled",e.stripeLoading()),l(),m(e.stripeLoading()?1:-1)}}function mr(i,t){i&1&&(a(0,"button",39),n(1," No funds available "),o())}function pr(i,t){i&1&&j(0,"mat-spinner",87)}function _r(i,t){if(i&1){let e=y();a(0,"button",89),v("click",function(){f(e);let s=d(2);return C(s.connectStripe())}),c(1,pr,1,0,"mat-spinner",87),n(2," Complete Stripe Setup "),o()}if(i&2){let e=d(2);E("disabled",e.stripeLoading()),l(),m(e.stripeLoading()?1:-1)}}function ur(i,t){i&1&&j(0,"mat-spinner",91)}function gr(i,t){i&1&&(a(0,"mat-icon",92),n(1,"dashboard"),o())}function xr(i,t){i&1&&j(0,"mat-spinner",91)}function fr(i,t){i&1&&(a(0,"mat-icon",92),n(1,"link_off"),o())}function Cr(i,t){if(i&1){let e=y();a(0,"div",8)(1,"button",90),v("click",function(){f(e);let s=d(2);return C(s.openStripeDashboard())}),c(2,ur,1,0,"mat-spinner",91)(3,gr,2,0,"mat-icon",92),n(4," Dashboard "),o(),a(5,"button",93),v("click",function(){f(e);let s=d(2);return C(s.disconnectStripe())}),c(6,xr,1,0,"mat-spinner",91)(7,fr,2,0,"mat-icon",92),n(8," Disconnect "),o()()}if(i&2){let e=d(2);l(),E("disabled",e.stripeLoading()),l(),m(e.stripeLoading()?2:3),l(3),E("disabled",e.stripeLoading()),l(),m(e.stripeLoading()?6:7)}}function vr(i,t){i&1&&n(0," Connected to Stripe Express account. You can access your dashboard or disconnect anytime. ")}function hr(i,t){i&1&&n(0," Connect Stripe to withdraw funds ")}function br(i,t){if(i&1){let e=y();a(0,"button",94),v("click",function(){f(e);let s=d(2);return C(s.clearFilters())}),a(1,"mat-icon"),n(2,"clear"),o(),n(3," Clear Filters "),o()}}function yr(i,t){i&1&&(a(0,"div",78),j(1,"mat-spinner",95),a(2,"p",96),n(3,"Loading transactions..."),o()())}function Er(i,t){if(i&1){let e=y();a(0,"div",79)(1,"mat-icon",97),n(2,"filter_list_off"),o(),a(3,"h3",98),n(4,"No Transactions Match Your Filters"),o(),a(5,"p",99),n(6,"Try adjusting your date range or activity type filters."),o(),a(7,"button",100),v("click",function(){f(e);let s=d(2);return C(s.clearFilters())}),n(8," Clear Filters "),o()()}}function wr(i,t){i&1&&(a(0,"div",79)(1,"mat-icon",97),n(2,"receipt_long"),o(),a(3,"h3",98),n(4,"No Transactions Yet"),o(),a(5,"p",101),n(6,"Your transaction history will appear here once you start earning."),o()())}function Sr(i,t){i&1&&(a(0,"th",116),n(1,"Date"),o())}function jr(i,t){if(i&1&&(a(0,"td",117),n(1),o()),i&2){let e=t.$implicit,r=d(4);l(),x(" ",r.formatDate(e.createdAt)," ")}}function Pr(i,t){i&1&&(a(0,"th",116),n(1,"Activity"),o())}function Tr(i,t){if(i&1&&(a(0,"td",118)(1,"span",119),n(2),o()()),i&2){let e=t.$implicit,r=d(4);l(),k(r.getTransactionTypeColor(e.transaction_type)),l(),x(" ",r.getTransactionTypeLabel(e.transaction_type)," ")}}function Mr(i,t){i&1&&(a(0,"th",116),n(1,"Description"),o())}function kr(i,t){if(i&1&&(a(0,"p",120),n(1),o()),i&2){let e=d().$implicit;l(),x("Project: ",e.project_id.title)}}function Dr(i,t){if(i&1&&(a(0,"p",120),n(1),o()),i&2){let e=d().$implicit;l(),x("From: ",e.business_id.name)}}function Ir(i,t){if(i&1&&(a(0,"td",117)(1,"div")(2,"p",119),n(3),o(),c(4,kr,2,1,"p",120),c(5,Dr,2,1,"p",120),o()()),i&2){let e=t.$implicit;l(3),g(e.description||"No description"),l(),m(e.project_id?4:-1),l(),m(e.business_id?5:-1)}}function Fr(i,t){i&1&&(a(0,"th",121),n(1,"Amount"),o())}function Vr(i,t){if(i&1&&(a(0,"td",122)(1,"span",123),n(2),o()()),i&2){let e=t.$implicit,r=d(4);l(),k(e.amount>=0?"text-green-600":"text-red-600"),l(),x(" ",r.formatCurrency(e.amount)," ")}}function Nr(i,t){i&1&&(a(0,"th",116),n(1,"Status"),o())}function Rr(i,t){if(i&1&&(a(0,"td",118)(1,"span",124),n(2),D(3,"titlecase"),o()()),i&2){let e=t.$implicit,r=d(4);l(),k(r.getStatusColor(e.status)),l(),x(" ",R(3,3,e.status)," ")}}function Br(i,t){i&1&&j(0,"tr",125)}function Ar(i,t){i&1&&j(0,"tr",126)}function Or(i,t){if(i&1&&(a(0,"div",81)(1,"table",103),z(2,104),O(3,Sr,2,0,"th",105)(4,jr,2,1,"td",106),Y(),z(5,107),O(6,Pr,2,0,"th",105)(7,Tr,3,3,"td",108),Y(),z(8,109),O(9,Mr,2,0,"th",105)(10,Ir,6,3,"td",106),Y(),z(11,110),O(12,Fr,2,0,"th",111)(13,Vr,3,3,"td",112),Y(),z(14,113),O(15,Nr,2,0,"th",105)(16,Rr,4,5,"td",108),Y(),O(17,Br,1,0,"tr",114)(18,Ar,1,0,"tr",115),o()()),i&2){let e=d(3);l(),E("dataSource",e.filteredTransactions()),l(16),E("matHeaderRowDef",e.displayedColumns),l(),E("matRowDefColumns",e.displayedColumns)}}function Lr(i,t){if(i&1&&(a(0,"p",134),n(1),o()),i&2){let e=d().$implicit;l(),x("Project: ",e.project_id.title)}}function qr(i,t){if(i&1&&(a(0,"p",46),n(1),o()),i&2){let e=d().$implicit;l(),x("From: ",e.business_id.name)}}function $r(i,t){if(i&1&&(a(0,"div",127)(1,"div",128)(2,"div",129)(3,"h4",130),n(4),o(),a(5,"p",29),n(6),o()(),a(7,"span",131),n(8),o()(),a(9,"div",132)(10,"p",133),n(11),o(),c(12,Lr,2,1,"p",134),c(13,qr,2,1,"p",46),o(),a(14,"div",135)(15,"span",136),n(16),o(),a(17,"span",124),n(18),D(19,"titlecase"),o()()()),i&2){let e=t.$implicit,r=d(4);l(4),x(" ",r.getTransactionTypeLabel(e.transaction_type)," "),l(2),g(r.formatDate(e.createdAt)),l(),k(e.amount>=0?"text-green-600":"text-red-600"),l(),x(" ",r.formatCurrency(e.amount)," "),l(3),g(e.description||"No description"),l(),m(e.project_id?12:-1),l(),m(e.business_id?13:-1),l(2),k(r.getTransactionTypeColor(e.transaction_type)),l(),x(" ",r.getTransactionTypeLabel(e.transaction_type)," "),l(),k(r.getStatusColor(e.status)),l(),x(" ",R(19,14,e.status)," ")}}function Ur(i,t){if(i&1&&(a(0,"div",102),F(1,$r,20,16,"div",127,Ra),o()),i&2){let e=d(3);l(),V(e.filteredTransactions())}}function Gr(i,t){if(i&1&&c(0,Or,19,3,"div",81)(1,Ur,3,0,"div",102),i&2){let e=d(2);m(e.viewMode()==="list"?0:1)}}function Wr(i,t){i&1&&(a(0,"div",78),j(1,"mat-spinner",95),a(2,"p",96),n(3,"Loading withdrawals..."),o()())}function Hr(i,t){if(i&1){let e=y();a(0,"button",139),v("click",function(){f(e);let s=d(3);return C(s.connectStripe())}),n(1," Connect Stripe to Start "),o()}}function zr(i,t){if(i&1){let e=y();a(0,"div",138)(1,"div",140)(2,"mat-icon",141),n(3,"info"),o(),a(4,"span",142),n(5,"Stripe Account Connected"),o()(),a(6,"p",143),n(7," Your withdrawals will appear here. You can manage your Stripe account using the buttons above. "),o(),a(8,"div",8)(9,"button",144),v("click",function(){f(e);let s=d(3);return C(s.openStripeDashboard())}),n(10," View Dashboard "),o(),a(11,"button",145),v("click",function(){f(e);let s=d(3);return C(s.disconnectStripe())}),n(12," Disconnect "),o()()()}if(i&2){let e=d(3);l(9),E("disabled",e.stripeLoading()),l(2),E("disabled",e.stripeLoading())}}function Yr(i,t){if(i&1&&(a(0,"div",79)(1,"mat-icon",97),n(2,"account_balance_wallet"),o(),a(3,"h3",98),n(4,"No Withdrawals Yet"),o(),a(5,"p",99),n(6,"Your withdrawal history will appear here once you make your first withdrawal."),o(),c(7,Hr,2,0,"button",137)(8,zr,13,2,"div",138),o()),i&2){let e=d(2);l(7),m(e.hasStripeAccount()?8:7)}}function Kr(i,t){i&1&&(a(0,"th",116),n(1,"Date"),o())}function Qr(i,t){if(i&1&&(a(0,"td",117),n(1),o()),i&2){let e=t.$implicit,r=d(3);l(),x(" ",r.formatDate(e.createdAt)," ")}}function Jr(i,t){i&1&&(a(0,"th",116),n(1,"Method"),o())}function Xr(i,t){if(i&1&&(a(0,"td",118)(1,"div",32)(2,"mat-icon",43),n(3,"payment"),o(),a(4,"span",119),n(5),D(6,"titlecase"),o()()()),i&2){let e=t.$implicit;l(5),g(R(6,1,e.method))}}function Zr(i,t){i&1&&(a(0,"th",116),n(1,"Description"),o())}function el(i,t){if(i&1&&(a(0,"p",120),n(1),o()),i&2){let e=d().$implicit;l(),x("Stripe Account: ",e.stripe_account_id)}}function tl(i,t){if(i&1&&(a(0,"p",147),n(1),o()),i&2){let e=d().$implicit;l(),x("Transfer ID: ",e.stripe_transfer_id)}}function il(i,t){if(i&1&&(a(0,"p",120),n(1),o()),i&2){let e=d().$implicit;l(),x("To: ",e.paypal_account.email)}}function nl(i,t){if(i&1&&(a(0,"p",147),n(1),o()),i&2){let e=d().$implicit;l(),x("PayPal ID: ",e.paypal_transaction_id)}}function ol(i,t){if(i&1&&(a(0,"td",117)(1,"div")(2,"p",119),n(3),o(),c(4,el,2,1,"p",120),c(5,tl,2,1,"p",147),c(6,il,2,1,"p",120),c(7,nl,2,1,"p",147),o()()),i&2){let e=t.$implicit;l(3),g(e.description||"Withdrawal via Stripe"),l(),m(e.stripe_account_id?4:-1),l(),m(e.stripe_transfer_id?5:-1),l(),m(e.paypal_account!=null&&e.paypal_account.email?6:-1),l(),m(e.paypal_transaction_id?7:-1)}}function al(i,t){i&1&&(a(0,"th",121),n(1,"Amount"),o())}function rl(i,t){if(i&1&&(a(0,"p",46),n(1),D(2,"currency"),o(),a(3,"p",149),n(4),D(5,"currency"),o()),i&2){let e=d().$implicit;l(),x("Fee: ",R(2,2,e.fee)),l(3),x("Net: ",R(5,4,e.net_amount))}}function ll(i,t){if(i&1&&(a(0,"td",122)(1,"div")(2,"span",148),n(3),D(4,"currency"),o(),c(5,rl,6,6),o()()),i&2){let e=t.$implicit;l(3),x("-",R(4,2,e.amount)),l(2),m(e.fee>0?5:-1)}}function sl(i,t){i&1&&(a(0,"th",116),n(1,"Status"),o())}function dl(i,t){if(i&1&&(a(0,"td",118)(1,"span",150),n(2),D(3,"titlecase"),o()()),i&2){let e=t.$implicit;l(),E("ngClass",bt(4,Na,e.status==="pending",e.status==="processing",e.status==="completed",e.status==="failed",e.status==="cancelled")),l(),x(" ",R(3,2,e.status)," ")}}function cl(i,t){i&1&&j(0,"tr",125)}function ml(i,t){i&1&&j(0,"tr",126)}function pl(i,t){if(i&1&&(a(0,"div",81)(1,"table",103),z(2,104),O(3,Kr,2,0,"th",105)(4,Qr,2,1,"td",106),Y(),z(5,146),O(6,Jr,2,0,"th",105)(7,Xr,7,3,"td",108),Y(),z(8,109),O(9,Zr,2,0,"th",105)(10,ol,8,5,"td",106),Y(),z(11,110),O(12,al,2,0,"th",111)(13,ll,6,4,"td",112),Y(),z(14,113),O(15,sl,2,0,"th",105)(16,dl,4,10,"td",108),Y(),O(17,cl,1,0,"tr",114)(18,ml,1,0,"tr",115),o()()),i&2){let e=d(2);l(),E("dataSource",e.withdrawals()),l(16),E("matHeaderRowDef",ne(3,Si)),l(),E("matRowDefColumns",ne(4,Si))}}function _l(i,t){i&1&&(a(0,"div",82)(1,"mat-icon",97),n(2,"account_balance_wallet"),o(),a(3,"h3",98),n(4,"Start Earning Today"),o(),a(5,"p",151),n(6,"Complete projects and build your portfolio to start earning money."),o(),a(7,"button",152)(8,"mat-icon",13),n(9,"business"),o(),n(10," Create Your Business Profile "),o()())}function ul(i,t){if(i&1){let e=y();a(0,"div",23)(1,"mat-card",24)(2,"div",25)(3,"h3",26),n(4,"Available funds"),o(),a(5,"mat-icon",27),n(6,"account_balance_wallet"),o()(),a(7,"div",28)(8,"p",29),n(9,"Balance available for withdrawal"),o(),a(10,"p",30),n(11),D(12,"currency"),o()(),a(13,"div",31)(14,"div",32)(15,"mat-icon",33),c(16,Qa,1,0)(17,Ja,1,0)(18,Xa,1,0)(19,Za,1,0),o(),a(20,"span",34),c(21,er,1,0)(22,tr,1,0)(23,ir,1,0)(24,nr,1,0),o(),c(25,rr,3,2,"button",35),o()(),a(26,"div",36),c(27,sr,3,2,"button",37)(28,cr,3,2,"button",38)(29,mr,2,0,"button",39)(30,_r,3,2,"button",40),c(31,Cr,9,4,"div",8),o(),a(32,"p",41),c(33,vr,1,0)(34,hr,1,0),o()(),a(35,"mat-card",42)(36,"div",25)(37,"h3",26),n(38,"Future payments"),o(),a(39,"mat-icon",43),n(40,"schedule"),o()(),a(41,"div",44)(42,"div")(43,"p",29),n(44,"Payments being cleared"),o(),a(45,"p",45),n(46),D(47,"currency"),o(),a(48,"p",46),n(49,"Funds from completed projects awaiting clearance."),o()(),a(50,"div")(51,"p",29),n(52,"Active project earnings"),o(),a(53,"p",45),n(54),D(55,"currency"),o(),a(56,"p",46),n(57,"Earnings from ongoing projects."),o()()()(),a(58,"mat-card",42)(59,"div",25)(60,"h3",26),n(61,"Earnings to date"),o(),a(62,"mat-icon",47),n(63,"trending_up"),o()(),a(64,"p",30),n(65),D(66,"currency"),o(),a(67,"p",48),n(68,"Your total earnings since joining."),o()()(),a(69,"div",49)(70,"div",50)(71,"div",51)(72,"mat-form-field",52)(73,"mat-label"),n(74,"Date Range"),o(),a(75,"mat-date-range-input",53)(76,"input",54),v("dateChange",function(){f(e);let s=d();return C(s.onDateFilterChange())}),o(),a(77,"input",55),v("dateChange",function(){f(e);let s=d();return C(s.onDateFilterChange())}),o()(),a(78,"mat-hint"),n(79,"MM/DD/YYYY \u2013 MM/DD/YYYY"),o(),j(80,"mat-datepicker-toggle",56)(81,"mat-date-range-picker",null,0),o(),a(83,"mat-form-field",57)(84,"mat-label"),n(85,"Activity Type"),o(),a(86,"mat-select",58),v("selectionChange",function(s){f(e);let _=d();return C(_.onActivityFilterChange(s))}),a(87,"mat-option",59),n(88,"All Activities"),o(),a(89,"mat-option",60),n(90,"Project Started"),o(),a(91,"mat-option",61),n(92,"Project Completed"),o(),a(93,"mat-option",62),n(94,"Additional Payment"),o(),a(95,"mat-option",63),n(96,"Payment Cleared"),o(),a(97,"mat-option",64),n(98,"Withdrawal"),o(),a(99,"mat-option",65),n(100,"Refund"),o(),a(101,"mat-option",66),n(102,"Platform Fee"),o()()(),c(103,br,4,0,"button",67),o(),a(104,"div",68)(105,"button",69),v("click",function(){f(e);let s=d();return C(s.setViewMode("grid"))}),a(106,"mat-icon"),n(107,"grid_view"),o()(),a(108,"button",70),v("click",function(){f(e);let s=d();return C(s.setViewMode("list"))}),a(109,"mat-icon"),n(110,"view_list"),o()(),a(111,"button",71),v("click",function(){f(e);let s=d();return C(s.emailActivityReport())}),a(112,"mat-icon",13),n(113,"email"),o(),n(114," Email Report "),o(),a(115,"button",72),v("click",function(){f(e);let s=d();return C(s.debugFilters())}),n(116," Debug "),o()()()(),a(117,"mat-card",73)(118,"div",74)(119,"h2",75),n(120,"Transaction History"),o(),a(121,"p",4),n(122,"View your earnings and withdrawal history"),o()(),a(123,"mat-tab-group",76)(124,"mat-tab",77),c(125,yr,4,0,"div",78)(126,Er,9,0,"div",79)(127,wr,7,0,"div",79)(128,Gr,2,1),o(),a(129,"mat-tab",80),c(130,Wr,4,0,"div",78)(131,Yr,9,1,"div",79)(132,pl,19,5,"div",81),o()()(),c(133,_l,11,0,"div",82)}if(i&2){let e,r,s=vt(82),_=d();l(11),g(R(12,25,_.earningsSummary().available)),l(2),E("ngClass",$e(33,Ia,_.stripeConnectionStatus()==="connected",_.stripeConnectionStatus()==="pending",_.stripeConnectionStatus()==="failed",_.stripeConnectionStatus()==="not-connected")),l(2),E("ngClass",$e(38,Fa,_.stripeConnectionStatus()==="connected",_.stripeConnectionStatus()==="pending",_.stripeConnectionStatus()==="failed",_.stripeConnectionStatus()==="not-connected")),l(),m((e=_.stripeConnectionStatus())==="connected"?16:e==="pending"?17:e==="failed"?18:19),l(4),E("ngClass",$e(43,Va,_.stripeConnectionStatus()==="connected",_.stripeConnectionStatus()==="pending",_.stripeConnectionStatus()==="failed",_.stripeConnectionStatus()==="not-connected")),l(),m((r=_.stripeConnectionStatus())==="connected"?21:r==="pending"?22:r==="failed"?23:24),l(4),m(_.stripeConnectionStatus()==="failed"||_.stripeConnectionStatus()==="pending"?25:-1),l(2),m(_.stripeConnectionStatus()==="connected"&&_.earningsSummary().available>0?27:_.stripeConnectionStatus()==="not-connected"?28:_.earningsSummary().available<=0?29:30),l(4),m(_.stripeConnectionStatus()==="connected"?31:-1),l(2),m(_.hasStripeAccount()?33:34),l(13),g(R(47,27,_.earningsSummary().payments_clearing)),l(8),g(R(55,29,_.earningsSummary().active_orders)),l(11),g(R(66,31,_.earningsSummary().total_earnings)),l(10),E("rangePicker",s)("formGroup",_.filterForm),l(5),E("for",s),l(23),m(_.hasActiveFilters()?103:-1),l(2),ut("bg-gray-200",_.viewMode()==="grid"),l(3),ut("bg-gray-200",_.viewMode()==="list"),l(3),E("disabled",_.loading()),l(14),m(_.loadingTransactions()?125:_.filteredTransactions().length===0&&_.hasActiveFilters()?126:_.transactions().length===0?127:128),l(5),m(_.stripeLoading()?130:_.withdrawals().length===0?131:132),l(3),m(_.showEmptyState()?133:-1)}}var pt=class i{http=w(Ge);stripeConnectService=w(Lt);withdrawalService=w(ct);dialog=w(it);snackBar=w(we);fb=w(pe);apiUrl=`${Ye.api.baseUrl}/wallets`;loading=S(!1);loadingTransactions=S(!1);earningsSummary=S(null);transactions=S([]);filteredTransactions=S([]);error=S(null);viewMode=S("list");stripeAccountStatus=S({has_account:!1,payouts_enabled:!1,requirements_due:!1});withdrawals=S([]);stripeLoading=S(!1);filterForm=this.fb.group({startDate:[null],endDate:[null],activityFilter:[""]});hasEarnings=T(()=>{let t=this.earningsSummary();return t&&t.total_earnings>0});canWithdraw=T(()=>{let t=this.earningsSummary();return t&&t.available>0});showEmptyState=T(()=>{let t=this.earningsSummary(),e=this.transactions();return!this.loading()&&t&&e.length===0});hasActiveFilters=T(()=>{let t=this.filterForm.value;return!!(t.startDate||t.endDate||t.activityFilter&&t.activityFilter!=="")});hasStripeAccount=T(()=>{let t=this.stripeAccountStatus();return t.has_account&&t.payouts_enabled&&!t.requirements_due});canWithdrawToStripe=T(()=>this.canWithdraw()&&this.hasStripeAccount());stripeConnectionStatus=T(()=>{let t=this.stripeAccountStatus();return t.has_account?t.requirements_due?"pending":t.payouts_enabled?"connected":"failed":"not-connected"});displayedColumns=["date","type","description","amount","status"];ngOnInit(){return b(this,null,function*(){yield this.loadEarningsSummary(),yield this.loadTransactions(),yield this.loadStripeAccountStatus(),yield this.loadWithdrawals(),this.filterForm.valueChanges.subscribe(()=>{this.applyFilters()})})}loadEarningsSummary(){return b(this,null,function*(){console.log("\u{1F504} Loading earnings summary..."),this.loading.set(!0),this.error.set(null);try{console.log("\u{1F4E1} Making API call to:",`${this.apiUrl}/summary`);let t=yield H(this.http.get(`${this.apiUrl}/summary`));if(console.log("\u2705 API Response:",t),t)this.earningsSummary.set(t),console.log("\u{1F4B0} Earnings summary set:",t);else{console.log("\u{1F3D7}\uFE0F No earnings data, setting default...");let e={active_orders:0,payments_clearing:0,available:0,total_earnings:0};this.earningsSummary.set(e)}}catch(t){if(console.error("\u274C Error loading earnings summary:",t),console.error("Error details:",{status:t.status,statusText:t.statusText,message:t.message,url:t.url}),t.status===401)this.error.set("Authentication failed. Please log in again.");else if(t.status===404){console.log("\u{1F3D7}\uFE0F Wallets not found, setting default summary...");let e={active_orders:0,payments_clearing:0,available:0,total_earnings:0};this.earningsSummary.set(e)}else this.error.set("Failed to load earnings data")}finally{this.loading.set(!1),console.log("\u{1F3C1} Loading complete. Summary:",this.earningsSummary())}})}loadTransactions(){return b(this,null,function*(){this.loadingTransactions.set(!0);try{let e=(yield H(this.http.get(`${this.apiUrl}/transactions`)))||[];this.transactions.set(e);let r=[...new Set(e.map(s=>s.transaction_type))];console.log("Available transaction types in data:",r),this.applyFilters()}catch(t){console.error("Error loading transactions:",t),this.transactions.set([]),this.filteredTransactions.set([])}finally{this.loadingTransactions.set(!1)}})}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}getTransactionTypeLabel(t){return{project_started:"Project Started",project_completed:"Project Completed",additional_payment:"Additional Payment",payment_cleared:"Payment Cleared",withdrawal:"Withdrawal",refund:"Refund",platform_fee:"Platform Fee"}[t]||t}getStatusColor(t){return{completed:"text-green-600",pending:"text-yellow-600",failed:"text-red-600",cancelled:"text-gray-600"}[t]||"text-gray-600"}getTransactionTypeColor(t){return{project_started:"text-blue-600",project_completed:"text-green-600",additional_payment:"text-green-600",payment_cleared:"text-purple-600",withdrawal:"text-red-600",platform_fee:"text-orange-600",refund:"text-purple-600"}[t]||"text-gray-600"}retryLoad(){return b(this,null,function*(){yield this.loadEarningsSummary(),yield this.loadTransactions()})}loadStripeAccountStatus(){return b(this,null,function*(){try{this.stripeLoading.set(!0);let t=yield H(this.stripeConnectService.getAccountStatus());this.stripeAccountStatus.set(t)}catch(t){console.error("Error loading Stripe account status:",t)}finally{this.stripeLoading.set(!1)}})}refreshStripeAccountStatus(){return b(this,null,function*(){try{this.stripeLoading.set(!0);let t=yield H(this.stripeConnectService.refreshAccountStatus());this.stripeAccountStatus.set(t),this.snackBar.open("Stripe account status refreshed","Close",{duration:3e3})}catch(t){console.error("Error refreshing Stripe account status:",t),this.snackBar.open("Failed to refresh Stripe status","Close",{duration:3e3})}finally{this.stripeLoading.set(!1)}})}loadWithdrawals(){return b(this,null,function*(){try{let t=yield H(this.withdrawalService.getWithdrawals());this.withdrawals.set(t.withdrawals)}catch(t){console.error("Error loading withdrawals:",t)}})}connectStripe(){return b(this,null,function*(){try{this.stripeLoading.set(!0);let t=yield H(this.stripeConnectService.createOrGetAccount());t.onboarding_url?window.location.href=t.onboarding_url:(yield this.loadStripeAccountStatus(),this.snackBar.open("Stripe account already connected","Close",{duration:3e3}))}catch(t){console.error("Error connecting Stripe:",t),this.snackBar.open("Failed to connect Stripe account","Close",{duration:3e3})}finally{this.stripeLoading.set(!1)}})}withdrawToStripe(){return b(this,null,function*(){let t=this.earningsSummary();if(!t||t.available<=0){this.snackBar.open("No funds available for withdrawal","Close",{duration:3e3});return}if(!this.hasStripeAccount()){this.snackBar.open("Please complete your Stripe account setup first","Close",{duration:3e3});return}try{let e={amount:t.available,method:"stripe"},r=yield H(this.withdrawalService.createWithdrawal(e));this.snackBar.open(`Withdrawal of $${t.available.toFixed(2)} initiated successfully`,"Close",{duration:5e3}),yield this.loadEarningsSummary(),yield this.loadWithdrawals()}catch(e){console.error("Error initiating withdrawal:",e),e.error?.message?.includes("payouts not enabled")||e.error?.message?.includes("Stripe payouts not enabled")?(this.snackBar.open("Stripe payouts not enabled. Refreshing account status...","Close",{duration:5e3}),yield this.refreshStripeAccountStatus()):this.snackBar.open("Failed to initiate withdrawal","Close",{duration:3e3})}})}disconnectStripe(){return b(this,null,function*(){if(!this.hasStripeAccount()){this.snackBar.open("No Stripe account connected","Close",{duration:3e3});return}let t={title:"Disconnect Stripe Account",message:"Are you sure you want to disconnect your Stripe account? You will not be able to withdraw funds until you reconnect. Any pending withdrawals will continue to process normally.",confirmText:"Disconnect",cancelText:"Keep Connected",type:"warning",icon:"warning"},e=this.dialog.open(mt,{width:"450px",data:t,disableClose:!0});if(yield H(e.afterClosed()))try{this.stripeLoading.set(!0);let s=yield H(this.stripeConnectService.disconnectAccount());s.success?(this.snackBar.open("Stripe account disconnected successfully","Close",{duration:3e3}),yield this.loadStripeAccountStatus()):this.snackBar.open(s.message||"Failed to disconnect Stripe account","Close",{duration:3e3})}catch(s){console.error("Error disconnecting Stripe:",s),this.snackBar.open("Failed to disconnect Stripe account","Close",{duration:3e3})}finally{this.stripeLoading.set(!1)}})}openStripeDashboard(){return b(this,null,function*(){if(!this.hasStripeAccount()){this.snackBar.open("No Stripe account connected","Close",{duration:3e3});return}try{this.stripeLoading.set(!0);let t=yield H(this.stripeConnectService.createLoginLink());t.url&&window.open(t.url,"_blank")}catch(t){console.error("Error opening Stripe dashboard:",t),this.snackBar.open("Failed to open Stripe dashboard","Close",{duration:3e3})}finally{this.stripeLoading.set(!1)}})}onDateFilterChange(){console.log("Date filter changed:",this.filterForm.value),this.applyFilters()}onActivityFilterChange(t){console.log("Activity filter changed:",this.filterForm.value,t),this.applyFilters()}clearFilters(){this.filterForm.reset({startDate:null,endDate:null,activityFilter:""}),this.applyFilters()}applyFilters(){let t=this.filterForm.value,e=[...this.transactions()];if(console.log("Applying filters with form value:",t),console.log("Original transactions count:",e.length),t.startDate||t.endDate){let r=e.length;e=e.filter(s=>{let _=new Date(s.createdAt);return!(t.startDate&&_<new Date(t.startDate)||t.endDate&&_>new Date(t.endDate))}),console.log("After date filter:",e.length,"removed:",r-e.length)}if(t.activityFilter&&t.activityFilter!==""){let r=e.length;e=e.filter(s=>{let _=s.transaction_type===t.activityFilter;return console.log("Transaction type:",s.transaction_type,"Filter:",t.activityFilter,"Matches:",_),_}),console.log("After activity filter:",e.length,"removed:",r-e.length)}console.log("Final filtered transactions count:",e.length),this.filteredTransactions.set(e)}setViewMode(t){this.viewMode.set(t)}emailActivityReport(){return b(this,null,function*(){try{this.loading.set(!0),this.snackBar.open("Activity report sent to your email","Close",{duration:3e3})}catch(t){console.error("Error sending email report:",t),this.snackBar.open("Failed to send email report","Close",{duration:3e3})}finally{this.loading.set(!1)}})}debugFilters(){console.log("=== FILTER DEBUG ==="),console.log("Form value:",this.filterForm.value),console.log("Total transactions:",this.transactions().length),console.log("Filtered transactions:",this.filteredTransactions().length),console.log("Has active filters:",this.hasActiveFilters());let t=[...new Set(this.transactions().map(e=>e.transaction_type))];console.log("Available transaction types:",t),this.applyFilters()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=B({type:i,selectors:[["app-earnings"]],decls:14,vars:3,consts:[["picker",""],[1,"earnings-container","p-6","space-y-6","bg-gray-50","min-h-screen"],[1,"flex","justify-between","items-center"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"flex","gap-3"],[1,"bg-green-600","hover:bg-green-700","text-white","px-6","py-3","rounded-lg","font-medium","transition-colors","disabled:opacity-50",3,"disabled"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-6","py-3","rounded-lg","font-medium","transition-colors","disabled:opacity-50",3,"disabled"],[1,"flex","gap-2"],[1,"flex","items-center","justify-center","py-12"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-6","text-center"],[1,"bg-green-600","hover:bg-green-700","text-white","px-6","py-3","rounded-lg","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],["diameter","20",1,"inline-block","mr-2"],[1,"mr-2"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-6","py-3","rounded-lg","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],["matTooltip","Open Stripe Dashboard",1,"bg-gray-100","hover:bg-gray-200","text-gray-700","px-4","py-3","rounded-lg","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],["matTooltip","Disconnect Stripe Account",1,"bg-red-100","hover:bg-red-200","text-red-700","px-4","py-3","rounded-lg","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],["diameter","40"],[1,"ml-3","text-gray-600"],[1,"text-red-600","mb-2",2,"font-size","48px","width","48px","height","48px"],[1,"text-lg","font-semibold","text-red-900","mb-2"],[1,"text-red-700","mb-4"],[1,"bg-red-600","hover:bg-red-700","text-white","px-4","py-2","rounded-lg","font-medium","transition-colors",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"p-6","hover:shadow-lg","transition-shadow"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-sm","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"text-green-600"],[1,"space-y-2"],[1,"text-sm","text-gray-600"],[1,"text-4xl","font-bold","text-gray-900"],[1,"mt-4","p-3","rounded-lg","border",3,"ngClass"],[1,"flex","items-center","space-x-2"],[1,"text-lg",3,"ngClass"],[1,"text-sm","font-medium",3,"ngClass"],[1,"ml-2","text-xs","bg-gray-100","hover:bg-gray-200","text-gray-600","px-2","py-1","rounded","transition-colors","disabled:opacity-50",3,"disabled"],[1,"mt-4","space-y-2"],[1,"w-full","bg-green-600","text-white","px-4","py-2","rounded-lg","hover:bg-green-700","transition-colors","disabled:opacity-50",3,"disabled"],[1,"w-full","bg-blue-600","text-white","px-4","py-2","rounded-lg","hover:bg-blue-700","transition-colors","disabled:opacity-50",3,"disabled"],["disabled","",1,"w-full","bg-gray-300","text-gray-500","px-4","py-2","rounded-lg","cursor-not-allowed"],[1,"w-full","bg-orange-600","text-white","px-4","py-2","rounded-lg","hover:bg-orange-700","transition-colors","disabled:opacity-50",3,"disabled"],[1,"mt-3","text-xs","text-gray-500"],[1,"p-6"],[1,"text-blue-600"],[1,"space-y-4"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-xs","text-gray-500"],[1,"text-purple-600"],[1,"text-sm","text-gray-600","mt-2"],[1,"bg-white","rounded-lg","border","border-gray-200","p-6"],[1,"flex","flex-wrap","gap-4","items-center"],[1,"flex","gap-4","flex-wrap"],["appearance","outline",1,"min-w-[250px]"],[3,"rangePicker","formGroup"],["matStartDate","","formControlName","startDate","placeholder","Start date",3,"dateChange"],["matEndDate","","formControlName","endDate","placeholder","End date",3,"dateChange"],["matIconSuffix","",3,"for"],["appearance","outline",1,"min-w-[200px]"],["formControlName","activityFilter",3,"selectionChange"],["value",""],["value","project_started"],["value","project_completed"],["value","additional_payment"],["value","payment_cleared"],["value","withdrawal"],["value","refund"],["value","platform_fee"],["mat-stroked-button","",1,"self-start","mt-2"],[1,"ml-auto","flex","gap-2"],["mat-icon-button","","matTooltip","Grid View",1,"hover:bg-gray-100","transition-colors",3,"click"],["mat-icon-button","","matTooltip","List View",1,"hover:bg-gray-100","transition-colors",3,"click"],["mat-raised-button","","color","primary",1,"ml-2",3,"click","disabled"],["mat-stroked-button","",1,"ml-2","text-xs",3,"click"],[1,"overflow-hidden"],[1,"p-6","border-b","border-gray-200"],[1,"text-xl","font-semibold","text-gray-900"],[1,"transaction-tabs"],["label","Earnings"],[1,"p-6","text-center"],[1,"p-12","text-center"],["label","Withdrawals"],[1,"overflow-x-auto"],[1,"bg-white","rounded-lg","border","border-gray-200","p-12","text-center"],[1,"ml-2","text-xs","bg-gray-100","hover:bg-gray-200","text-gray-600","px-2","py-1","rounded","transition-colors","disabled:opacity-50",3,"click","disabled"],["diameter","12",1,"inline-block"],[1,"text-xs"],[1,"w-full","bg-green-600","text-white","px-4","py-2","rounded-lg","hover:bg-green-700","transition-colors","disabled:opacity-50",3,"click","disabled"],["diameter","16",1,"inline-block","mr-2"],[1,"w-full","bg-blue-600","text-white","px-4","py-2","rounded-lg","hover:bg-blue-700","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"w-full","bg-orange-600","text-white","px-4","py-2","rounded-lg","hover:bg-orange-700","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"flex-1","bg-gray-100","text-gray-700","px-3","py-2","rounded-lg","hover:bg-gray-200","transition-colors","disabled:opacity-50","text-sm",3,"click","disabled"],["diameter","14",1,"inline-block","mr-2"],[1,"mr-1","text-sm"],[1,"flex-1","bg-red-100","text-red-700","px-3","py-2","rounded-lg","hover:bg-red-200","transition-colors","disabled:opacity-50","text-sm",3,"click","disabled"],["mat-stroked-button","",1,"self-start","mt-2",3,"click"],["diameter","30"],[1,"mt-2","text-gray-600"],[1,"text-gray-400","mb-4",2,"font-size","64px","width","64px","height","64px"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600","mb-4"],["mat-raised-button","","color","primary",3,"click"],[1,"text-gray-600"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4","p-6"],["mat-table","",1,"w-full",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","","class","font-semibold text-gray-900",4,"matHeaderCellDef"],["mat-cell","","class","text-gray-600",4,"matCellDef"],["matColumnDef","type"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","amount"],["mat-header-cell","","class","font-semibold text-gray-900 text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","status"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","hover:bg-gray-50",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"font-semibold","text-gray-900"],["mat-cell","",1,"text-gray-600"],["mat-cell",""],[1,"font-medium"],[1,"text-sm","text-gray-500"],["mat-header-cell","",1,"font-semibold","text-gray-900","text-right"],["mat-cell","",1,"text-right"],[1,"font-semibold"],[1,"px-2","py-1","rounded-full","text-xs","font-medium","bg-gray-100"],["mat-header-row",""],["mat-row","",1,"hover:bg-gray-50"],[1,"bg-white","p-4","rounded-lg","border","border-gray-200","hover:shadow-lg","transition-shadow"],[1,"flex","items-start","justify-between","mb-3"],[1,"flex-1"],[1,"font-medium","text-gray-900","mb-1"],[1,"font-bold","text-lg"],[1,"mb-3"],[1,"text-sm","text-gray-700"],[1,"text-xs","text-gray-500","mt-1"],[1,"flex","items-center","justify-between"],[1,"text-xs","font-medium"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-4","py-2","rounded-lg","font-medium","transition-colors"],[1,"mt-4","p-4","bg-blue-50","border","border-blue-200","rounded-lg"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-4","py-2","rounded-lg","font-medium","transition-colors",3,"click"],[1,"flex","items-center","mb-2"],[1,"text-blue-600","mr-2"],[1,"font-medium","text-blue-900"],[1,"text-blue-700","text-sm","mb-3"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-3","py-2","rounded-lg","text-sm","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"bg-white","border","border-blue-300","text-blue-700","px-3","py-2","rounded-lg","text-sm","font-medium","hover:bg-blue-50","transition-colors","disabled:opacity-50",3,"click","disabled"],["matColumnDef","method"],[1,"text-xs","text-gray-400"],[1,"font-semibold","text-red-600"],[1,"text-xs","text-gray-600","font-medium"],[1,"px-2","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"text-gray-600","mb-6"],["routerLink","../businesses",1,"bg-gray-900","text-white","px-6","py-3","rounded-lg","font-medium","hover:bg-gray-800","transition-colors"]],template:function(e,r){e&1&&(a(0,"div",1)(1,"div",2)(2,"div")(3,"h1",3),n(4,"Earnings & Payments"),o(),a(5,"p",4),n(6,"Manage your earnings, track payments, and request withdrawals"),o()(),a(7,"div",5),c(8,Oa,4,2,"button",6)(9,$a,4,2,"button",7),c(10,za,9,4,"div",8),o()(),c(11,Ya,4,0,"div",9)(12,Ka,11,1,"div",10)(13,ul,134,48),o()),e&2&&(l(8),m(r.canWithdrawToStripe()?8:r.canWithdraw()&&!r.hasStripeAccount()?9:-1),l(2),m(r.hasStripeAccount()?10:-1),l(),m(r.loading()?11:r.error()?12:r.earningsSummary()?13:-1))},dependencies:[A,yt,He,St,_e,Ze,se,de,ce,me,K,le,G,U,ze,$,q,Ee,ye,Te,je,Pe,di,Zt,ti,ai,ii,ei,ri,ni,oi,li,si,nt,Se,fe,xe,ue,tt,ge,he,ve,Ce,re,gi,ci,mi,pi,_i,ui,jt,Bt,Rt,ae,Ue],styles:[".earnings-container[_ngcontent-%COMP%]{min-height:calc(100vh - 64px)}.mat-mdc-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;transition:box-shadow .2s ease-in-out}.mat-mdc-card[_ngcontent-%COMP%]:hover{box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}.transaction-tabs[_ngcontent-%COMP%]   .mat-mdc-tab-group[_ngcontent-%COMP%]{--mat-tab-divider-color: #e5e7eb}.transaction-tabs[_ngcontent-%COMP%]   .mat-mdc-tab[_ngcontent-%COMP%]{min-width:120px}.mat-mdc-table[_ngcontent-%COMP%]{background:transparent}.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{background:#f9fafb;border-bottom:1px solid #e5e7eb;font-weight:600;color:#374151;padding:16px}.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid #f3f4f6;padding:16px}.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]:hover{background-color:#f9fafb}button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;font-weight:500;transition:all .2s ease-in-out}button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:4px 8px;border-radius:9999px;font-size:12px;font-weight:500}.status-badge.completed[_ngcontent-%COMP%]{background-color:#dcfce7;color:#166534}.status-badge.pending[_ngcontent-%COMP%]{background-color:#fef3c7;color:#92400e}.status-badge.failed[_ngcontent-%COMP%]{background-color:#fee2e2;color:#991b1b}.status-badge.cancelled[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#6b7280}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.animate-pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s cubic-bezier(.4,0,.6,1) infinite}@media (max-width: 768px){.earnings-container[_ngcontent-%COMP%]{padding:16px}.grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.mat-mdc-table[_ngcontent-%COMP%]{font-size:14px}.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%], .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:8px}}"]})};var Ie=(i,t)=>{let e=w(W),r=w(X);return(e.user()?.user_mode||"client")!=="business_owner"?(r.navigate(["/dashboard/projects"]),!1):!0};var k0=[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"overview",component:ot,canActivate:[Ie]},{path:"businesses",loadChildren:()=>import("./chunk-OW5AFLTC.js").then(i=>i.BUSINESSES_ROUTES),canActivate:[Ie]},{path:"services",loadChildren:()=>import("./chunk-3LMMRDVF.js").then(i=>i.SERVICES_ROUTES),canActivate:[Ie]},{path:"notifications",loadChildren:()=>import("./chunk-TM5D4TG4.js").then(i=>i.NOTIFICATION_ROUTES)},{path:"messages",loadChildren:()=>import("./chunk-YIEOZ5VU.js").then(i=>i.MESSAGES_ROUTES)},{path:"favorites",loadComponent:()=>import("./chunk-RVNYVEGC.js").then(i=>i.FavoritesComponent)},{path:"projects",component:at},{path:"projects/:id",component:rt},{path:"earnings",component:pt,canActivate:[Ie]},{path:"profile",component:st},{path:"settings",component:dt},{path:"test-notifications",component:lt},{path:"**",redirectTo:""}];export{k0 as DASHBOARD_ROUTES};
