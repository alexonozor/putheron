import"./chunk-RNGT6N3O.js";import"./chunk-UNULKHHN.js";import{a as P,b as I}from"./chunk-F52GGYS4.js";import"./chunk-3DWAHAUX.js";import{c as k,d as T}from"./chunk-CAUPKMHV.js";import{a as M}from"./chunk-SY63MTEM.js";import"./chunk-SRA5OYUU.js";import{s as w,t as S}from"./chunk-EZYZDCTR.js";import"./chunk-FTO62232.js";import"./chunk-LIZM4CZI.js";import"./chunk-QD7SSFII.js";import{b as C,d as V}from"./chunk-ARLYTOMD.js";import"./chunk-GTSDDWM5.js";import{t as E}from"./chunk-Z5YYMG7R.js";import{Eb as c,Fb as d,Lb as t,Mb as i,Nb as h,Ub as v,Yb as x,_a as l,_b as s,fa as g,ka as f,la as p,mc as n,nc as _,pb as b,ua as y}from"./chunk-ME5BD2TS.js";import{e as u}from"./chunk-JKOY2XUY.js";function N(r,o){r&1&&(t(0,"div",2),h(1,"mat-spinner",4),t(2,"h2",5),n(3,"Verifying your email..."),i(),t(4,"p",6),n(5,"Please wait while we verify your email address."),i()())}function L(r,o){if(r&1&&(t(0,"p",10),n(1," Verified: "),t(2,"strong"),n(3),i()()),r&2){let e=s(2);l(3),_(e.userEmail())}}function q(r,o){if(r&1){let e=v();t(0,"div",3)(1,"div",7)(2,"mat-icon",8),n(3,"check_circle"),i(),t(4,"h2",9),n(5,"Email Verified!"),i(),t(6,"p",6),n(7,"Your email address has been successfully verified."),i(),c(8,L,4,1,"p",10),i(),t(9,"div",11)(10,"p",12),n(11,"You will be redirected to login in a few seconds..."),i(),t(12,"button",13),x("click",function(){f(e);let m=s();return p(m.goToLogin())}),n(13," Go to Login Now "),i()()()}if(r&2){let e=s();l(8),d(e.userEmail()?8:-1)}}function A(r,o){if(r&1){let e=v();t(0,"button",19),x("click",function(){f(e);let m=s(2);return p(m.resendVerification())}),n(1," Resend Verification Email "),i()}}function B(r,o){if(r&1){let e=v();t(0,"div",3)(1,"div",7)(2,"mat-icon",14),n(3,"error_outline"),i(),t(4,"h2",9),n(5,"Verification Failed"),i(),t(6,"p",15),n(7),i()(),t(8,"div",11),c(9,A,2,0,"button",16),t(10,"button",17),x("click",function(){f(e);let m=s();return p(m.goToSignup())}),n(11," Back to Sign Up "),i(),t(12,"button",18),x("click",function(){f(e);let m=s();return p(m.goToLogin())}),n(13," Already have a verified account? Login "),i()()()}if(r&2){let e=s();l(7),_(e.error()),l(2),d(e.userEmail()?9:-1)}}var D=class r{authService=g(M);router=g(V);route=g(C);verifying=y(!0);success=y(!1);error=y("");userEmail=y("");ngOnInit(){return u(this,null,function*(){this.route.queryParams.subscribe(o=>u(this,null,function*(){let e=o.token;e?yield this.verifyEmail(e):(this.verifying.set(!1),this.error.set("Invalid verification link. Please request a new verification email."))}))})}verifyEmail(o){return u(this,null,function*(){try{let e=yield this.authService.verifyEmail(o);e.success?(this.success.set(!0),this.userEmail.set(e.data?.user?.email||""),setTimeout(()=>{this.router.navigate(["/auth/login"],{queryParams:{message:"Email verified successfully! Please log in to your account."}})},5e3)):this.error.set(e.message||"Verification failed. Please try again.")}catch(e){this.error.set(e?.message||"Verification failed. The link may be invalid or expired.")}finally{this.verifying.set(!1)}})}resendVerification(){return u(this,null,function*(){if(!this.userEmail()){this.error.set("Unable to resend verification. Please try registering again.");return}try{(yield this.authService.resendEmailVerification(this.userEmail())).success&&this.router.navigate(["/auth/signup"],{queryParams:{message:"Verification email sent. Please check your inbox.",email:this.userEmail()}})}catch(o){this.error.set(o?.message||"Failed to resend verification email.")}})}goToSignup(){this.router.navigate(["/auth/signup"])}goToLogin(){this.router.navigate(["/auth/login"])}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=b({type:r,selectors:[["app-verify-email"]],decls:5,vars:3,consts:[[1,"min-h-screen","bg-gradient-to-br","from-blue-500","to-purple-600","flex","items-center","justify-center","p-4"],[1,"w-full","max-w-md","bg-white","rounded-2xl","shadow-xl","p-8"],[1,"text-center","space-y-4"],[1,"text-center","space-y-6"],["diameter","40",1,"mx-auto"],[1,"text-xl","font-semibold","text-gray-900"],[1,"text-gray-600"],[1,"mb-6"],[1,"text-6xl","text-green-500","mb-4"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-sm","text-gray-500","mt-2"],[1,"space-y-3"],[1,"text-sm","text-gray-600"],["mat-raised-button","","color","primary",1,"w-full","py-3","text-base","font-medium",3,"click"],[1,"text-6xl","text-red-500","mb-4"],[1,"text-red-600","mb-4"],["mat-raised-button","","color","accent",1,"w-full","py-3","text-base","font-medium","mb-3"],["mat-stroked-button","","color","primary",1,"w-full","py-3","text-base","font-medium","mb-2",3,"click"],["mat-button","","color","primary",1,"w-full","py-3","text-base","font-medium",3,"click"],["mat-raised-button","","color","accent",1,"w-full","py-3","text-base","font-medium","mb-3",3,"click"]],template:function(e,a){e&1&&(t(0,"div",0)(1,"div",1),c(2,N,6,0,"div",2),c(3,q,14,1,"div",3),c(4,B,14,2,"div",3),i()()),e&2&&(l(2),d(a.verifying()?2:-1),l(),d(!a.verifying()&&a.success()?3:-1),l(),d(!a.verifying()&&!a.success()&&a.error()?4:-1))},dependencies:[E,T,k,S,w,I,P],encapsulation:2})};export{D as VerifyEmailComponent};
