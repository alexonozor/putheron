import{a as Qi,b as Xi,c as Zi,d as Ki,e as Ji,f as en,g as tn,h as nn,i as an,j as on,k as rn}from"./chunk-7XVKCAGC.js";import{a as ke,b as je,c as Pe}from"./chunk-377OMIEP.js";import{a as wi,b as ki,c as Ti,d as Oi,e as Ui}from"./chunk-MWZX77KL.js";import{c as Di,d as Ii,e as Fi,f as Ai,g as Ri,h as Bi,i as Vi,j as $i,k as qi}from"./chunk-YIVRBKGY.js";import{c as Li}from"./chunk-FVHQ2RBE.js";import{a as ji,b as Pi}from"./chunk-HTZZLHND.js";import{a as Si}from"./chunk-BA636YVP.js";import{a as Ei}from"./chunk-YJLN6TF5.js";import{a as Wi,b as Hi,c as Yi}from"./chunk-LALEQXTX.js";import{a as zi,b as Gi,c as xt,g as ht}from"./chunk-DO4L3PMT.js";import{a as Se,c as Ni}from"./chunk-SVZIP27C.js";import{a as ue,b as he,c as Ce,d as ve,f as yi,g as be}from"./chunk-YBIUMASP.js";import{b as ge,c as bi,d as pt,f as fe,i as xe}from"./chunk-ONRM2VRP.js";import{a as hi}from"./chunk-4XS6KTXL.js";import{a as Mi}from"./chunk-7RWCIHFI.js";import"./chunk-PO6UNUML.js";import{a as Rt,b as pi,c as _i,e as Bt,f as ui,o as gi,s as fi,v as xi}from"./chunk-CMLQFD7Y.js";import{a as Ci,c as dt,d as vi,e as N,h as se,i as ce,l as mt,n as de,o as me,v as pe,x as _e}from"./chunk-HHROQGCJ.js";import{a as ye,b as we}from"./chunk-PGWRYLCF.js";import{b as ct,c as B,d as V}from"./chunk-OHJMO3OZ.js";import{a as L}from"./chunk-DJDHPW5V.js";import{$ as ft,F as le,G as $,H as q,U as di,V as mi,X as Ee,Y as _t,Z as ut,_ as gt,aa as W,f as oi,j as ri,l as li,o as si,u as ci,w as st}from"./chunk-ZISXHAQT.js";import"./chunk-32N7BY3Y.js";import{a as lt}from"./chunk-YYV7O7JP.js";import{$a as Yt,Ba as D,Bb as tt,Ca as Je,Cb as Jt,Da as Ie,Ea as Ft,Eb as I,Fb as F,Ga as p,Ib as At,J as Lt,Ja as oe,Ka as b,Ma as Z,N as $t,Na as k,Nb as it,O as Ye,P as Qe,Pa as d,Pb as ee,Q as De,Qb as ei,R as qt,S as C,Sa as P,Sb as E,Ta as T,Ua as a,Va as n,Vb as ti,W as Ut,Wa as h,X as g,Xa as z,Y as f,Ya as G,Yb as ii,Z as j,_ as A,_a as v,aa as Xe,ab as u,ac as re,ba as zt,bb as c,ca as Dt,cb as Qt,d as X,da as Gt,db as Xt,ec as nt,fa as Ze,gc as R,ha as S,hb as Fe,i as Nt,ib as Ae,jb as Re,jc as ni,kc as at,l as U,la as Ke,mb as et,na as Wt,nb as o,ob as _,pb as x,pc as ot,qb as Zt,ra as J,rc as K,sa as l,sc as ai,ta as Ht,vc as rt,wa as It,wb as Kt,xb as Be,z as Mt}from"./chunk-5O25OI26.js";import{a as ae,d as w}from"./chunk-QEZ3K4DX.js";var sn=(t,i)=>i._id;function vn(t,i){if(t&1&&(a(0,"div",0)(1,"div",2),j(),a(2,"svg",3),h(3,"path",4),n(),A(),a(4,"div")(5,"h3",5),o(6,"Error"),n(),a(7,"p",6),o(8),n()()()()),t&2){let e=c();l(8),_(e.error())}}function bn(t,i){t&1&&(a(0,"div",1),h(1,"div",7),a(2,"span",8),o(3,"Loading..."),n()())}function yn(t,i){if(t&1){let e=v();a(0,"div",35)(1,"div",47),j(),a(2,"svg",48),h(3,"path",18),n()(),A(),a(4,"h4",49),o(5,"No businesses yet"),n(),a(6,"p",50),o(7,"Get started by creating your first business"),n(),a(8,"button",51),u("click",function(){g(e);let s=c(3);return f(s.navigateToCreateBusiness())}),j(),a(9,"svg",52),h(10,"path",46),n(),o(11," Create Business "),n()()}}function wn(t,i){if(t&1&&h(0,"img",55),t&2){let e=c().$implicit;b("src",e.logo_url,J)("alt",e.name)}}function Sn(t,i){t&1&&(a(0,"div",56),j(),a(1,"svg",63),h(2,"path",18),n()())}function En(t,i){if(t&1){let e=v();a(0,"div",54),u("click",function(){let s=g(e).$implicit,m=c(4);return f(m.viewBusiness(s._id))}),p(1,wn,1,2,"img",55)(2,Sn,3,0,"div",56),a(3,"div",57)(4,"p",58),o(5),n(),a(6,"div",59)(7,"span",60),o(8),I(9,"titlecase"),n()()(),j(),a(10,"svg",61),h(11,"path",62),n()()}if(t&2){let e=i.$implicit,r=c(4);l(),d(e.logo_url?1:2),l(4),_(e.name),l(2),k(r.getStatusColor(e.status)),l(),x(" ",F(9,5,e.status)," ")}}function kn(t,i){if(t&1&&(a(0,"div",36),P(1,En,12,7,"div",53,sn),n()),t&2){let e=c(3);l(),T(e.userBusinesses().slice(0,3))}}function jn(t,i){if(t&1){let e=v();a(0,"div",9)(1,"div",11)(2,"div",12)(3,"div",13)(4,"div")(5,"p",14),o(6,"Total Businesses"),n(),a(7,"p",15),o(8),n()(),a(9,"div",16),j(),a(10,"svg",17),h(11,"path",18),n()()()(),A(),a(12,"div",12)(13,"div",13)(14,"div")(15,"p",14),o(16,"Active Services"),n(),a(17,"p",15),o(18),n()(),a(19,"div",19),j(),a(20,"svg",20),h(21,"path",21)(22,"path",22),n()()()(),A(),a(23,"div",12)(24,"div",13)(25,"div")(26,"p",14),o(27,"Projects"),n(),a(28,"p",15),o(29),n()(),a(30,"div",23),j(),a(31,"svg",24),h(32,"path",25),n()()()(),A(),a(33,"div",12)(34,"div",13)(35,"div")(36,"p",14),o(37,"Messages"),n(),a(38,"p",15),o(39,"0"),n()(),a(40,"div",26),j(),a(41,"svg",27),h(42,"path",28),n()()()()(),A(),a(43,"div",29)(44,"div",30)(45,"div",31)(46,"div",13)(47,"h3",32),o(48,"Recent Businesses"),n(),a(49,"button",33),u("click",function(){g(e);let s=c(2);return f(s.setActiveTab("businesses"))}),o(50," View All \u2192 "),n()()(),a(51,"div",34),p(52,yn,12,0,"div",35)(53,kn,3,0,"div",36),n()(),a(54,"div",30)(55,"div",31)(56,"h3",32),o(57,"Quick Actions"),n()(),a(58,"div",34)(59,"div",36)(60,"button",37),u("click",function(){g(e);let s=c(2);return f(s.navigateToCreateBusiness())}),a(61,"div",38)(62,"div",39),j(),a(63,"svg",40),h(64,"path",18),n()(),A(),a(65,"div",41)(66,"p",42),o(67,"Create New Business"),n(),a(68,"p",43),o(69,"Set up a new business profile"),n()()()(),a(70,"button",37),u("click",function(){g(e);let s=c(2);return f(s.createService())}),a(71,"div",38)(72,"div",44),j(),a(73,"svg",45),h(74,"path",46),n()(),A(),a(75,"div",41)(76,"p",42),o(77,"Add New Service"),n(),a(78,"p",43),o(79,"Create a service for your business"),n()()()()()()()()()}if(t&2){let e=c(2);l(8),_(e.userBusinesses().length),l(10),_(e.getTotalServices()),l(11),_(e.getTotalProjects()),l(23),d(e.userBusinesses().length===0?52:53)}}function Pn(t,i){if(t&1){let e=v();a(0,"div",67)(1,"div",69),j(),a(2,"svg",70),h(3,"path",18),n()(),A(),a(4,"h3",71),o(5,"No businesses yet"),n(),a(6,"p",50),o(7,"Get started by creating your first business listing."),n(),a(8,"button",72),u("click",function(){g(e);let s=c(3);return f(s.navigateToCreateBusiness())}),j(),a(9,"svg",52),h(10,"path",46),n(),o(11," Create Your First Business "),n()()}}function Tn(t,i){if(t&1&&h(0,"img",55),t&2){let e=c().$implicit;b("src",e.logo_url,J)("alt",e.name+" logo")}}function Mn(t,i){t&1&&(a(0,"div",56),j(),a(1,"svg",63),h(2,"path",18),n()())}function Dn(t,i){if(t&1){let e=v();a(0,"div",74),u("click",function(){let s=g(e).$implicit,m=c(4);return f(m.viewBusiness(s._id))}),a(1,"div",34)(2,"div",75),p(3,Tn,1,2,"img",55)(4,Mn,3,0,"div",56),a(5,"div",57)(6,"h4",76),o(7),n(),a(8,"span",60),o(9),I(10,"titlecase"),n()()(),a(11,"p",77),o(12),n(),a(13,"div",78)(14,"span"),o(15),n(),a(16,"span"),o(17),n()()(),a(18,"div",79)(19,"div",13)(20,"div",80)(21,"button",81),u("click",function(s){let m=g(e).$implicit,y=c(4);return s.stopPropagation(),f(y.viewBusiness(m._id))}),j(),a(22,"svg",82),h(23,"path",22)(24,"path",83),n()(),A(),a(25,"button",84),u("click",function(s){let m=g(e).$implicit,y=c(4);return s.stopPropagation(),f(y.editBusiness(m._id))}),j(),a(26,"svg",82),h(27,"path",85),n()()(),A(),a(28,"button",86),u("click",function(s){let m=g(e).$implicit,y=c(4);return s.stopPropagation(),f(y.deleteBusiness(m._id))}),j(),a(29,"svg",87),h(30,"path",88),n()()()()()}if(t&2){let e=i.$implicit,r=c(4);l(3),d(e.logo_url?3:4),l(4),_(e.name),l(),k(r.getStatusColor(e.status)),l(),x(" ",F(10,8,e.status)," "),l(3),x(" ",e.short_description||e.description||"No description available"," "),l(3),_(r.getCategoryName(e)),l(2),x("",e.view_count||0," views")}}function In(t,i){if(t&1&&(a(0,"div",68),P(1,Dn,31,10,"div",73,sn),n()),t&2){let e=c(3);l(),T(e.userBusinesses())}}function Fn(t,i){if(t&1){let e=v();a(0,"div",10)(1,"div",13)(2,"div")(3,"h2",64),o(4,"Your Businesses"),n(),a(5,"p",65),o(6,"Manage and monitor your business listings"),n()(),a(7,"button",66),u("click",function(){g(e);let s=c(2);return f(s.navigateToCreateBusiness())}),j(),a(8,"svg",52),h(9,"path",46),n(),o(10," New Business "),n()(),p(11,Pn,12,0,"div",67)(12,In,3,0,"div",68),n()}if(t&2){let e=c(2);l(11),d(e.hasBusinesses()?12:11)}}function An(t,i){if(t&1){let e=v();a(0,"div",10)(1,"div",13)(2,"div")(3,"h2",64),o(4,"Your Services"),n(),a(5,"p",65),o(6,"Manage services across all your businesses"),n()(),a(7,"button",66),u("click",function(){g(e);let s=c(2);return f(s.createService())}),j(),a(8,"svg",52),h(9,"path",46),n(),o(10," New Service "),n()(),A(),a(11,"div",67)(12,"div",69),j(),a(13,"svg",70),h(14,"path",21)(15,"path",22),n()(),A(),a(16,"h3",71),o(17,"Services Management"),n(),a(18,"p",50),o(19,"This feature will be available soon. You can manage services from individual business profiles."),n(),a(20,"button",89),u("click",function(){g(e);let s=c(2);return f(s.setActiveTab("businesses"))}),o(21," View Businesses "),n()()()}}function Rn(t,i){t&1&&(a(0,"div",10)(1,"div",13)(2,"div")(3,"h2",64),o(4,"Your Projects"),n(),a(5,"p",65),o(6,"Showcase your work and portfolio"),n()()(),a(7,"div",67)(8,"div",69),j(),a(9,"svg",70),h(10,"path",25),n()(),A(),a(11,"h3",71),o(12,"Projects Coming Soon"),n(),a(13,"p",90),o(14,"Portfolio and project management features will be available in a future update."),n()()())}function Bn(t,i){t&1&&(a(0,"div",10)(1,"div",13)(2,"div")(3,"h2",64),o(4,"Messages"),n(),a(5,"p",65),o(6,"Communicate with clients and prospects"),n()()(),a(7,"div",67)(8,"div",69),j(),a(9,"svg",70),h(10,"path",28),n()(),A(),a(11,"h3",71),o(12,"Messaging Coming Soon"),n(),a(13,"p",90),o(14,"Direct messaging and communication features will be available in a future update."),n()()())}function Vn(t,i){if(t&1&&p(0,jn,80,4,"div",9)(1,Fn,13,1,"div",10)(2,An,22,0,"div",10)(3,Rn,15,0,"div",10)(4,Bn,15,0,"div",10),t&2){let e,r=c();d((e=r.activeTab())==="overview"?0:e==="businesses"?1:e==="services"?2:e==="projects"?3:e==="messages"?4:-1)}}var Ct=class t{authService=C(L);router=C(K);route=C(ot);businessService=C(Ei);projectService=C(Se);userBusinesses=S([]);userServices=S([]);userProjects=S([]);loading=S(!1);error=S(null);activeTab=S("overview");user=this.authService.user;hasBusinesses=E(()=>this.userBusinesses().length>0);totalServices=E(()=>this.userServices().length);totalProjects=E(()=>this.userProjects().length);ngOnInit(){if(!this.user()){this.router.navigate(["/auth"]);return}let i=this.router.url.split("/"),e=i[i.length-1];e==="dashboard"||e==="overview"||e===""?this.activeTab.set("overview"):this.activeTab.set(e),this.loadDashboardData()}loadDashboardData(){return w(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let i=yield this.businessService.getMyBusinessesAsync();this.userBusinesses.set(i);let e=[];for(let r of i)try{let s=yield this.businessService.getBusinessServicesAsync(r._id);e=[...e,...s]}catch(s){console.warn(`Failed to load services for business ${r._id}:`,s)}this.userServices.set(e);try{let r=yield this.projectService.getAllMyProjectsAsync();this.userProjects.set(r)}catch(r){console.warn("Failed to load projects:",r),this.userProjects.set([])}}catch(i){console.error("Error loading dashboard data:",i),this.error.set(i.message||"Failed to load dashboard data")}finally{this.loading.set(!1)}})}setActiveTab(i){this.activeTab.set(i)}getTotalServices(){return this.totalServices()}getTotalProjects(){return this.totalProjects()}navigateToCreateBusiness(){this.router.navigate(["/dashboard/businesses/create-business"])}createService(){if(this.userBusinesses().length===0){alert("Please create a business first before adding services.");return}this.router.navigate(["/dashboard/services/create"])}viewProjects(){this.router.navigate(["/dashboard/projects"])}viewBusiness(i){this.router.navigate(["/business",i])}editBusiness(i){alert("Edit business functionality will be available soon!")}deleteBusiness(i){confirm("Are you sure you want to delete this business? This action cannot be undone.")&&alert("Delete business functionality will be available soon!")}viewProfile(){alert("Profile page will be available soon!")}viewMessages(){alert("Messages page will be available soon!")}getStatusColor(i){switch(i){case"approved":return"text-green-600";case"pending":return"text-yellow-600";case"rejected":return"text-red-600";case"suspended":return"text-gray-600";default:return"text-gray-600"}}getStatusIcon(i){switch(i){case"approved":return"bg-green-400";case"pending":return"bg-yellow-400";case"rejected":return"bg-red-400";case"suspended":return"bg-gray-400";default:return"bg-gray-400"}}getCategoryName(i){return typeof i.category_id=="object"&&i.category_id?.name?i.category_id.name:"Unknown Category"}getSubcategoryName(i){return typeof i.subcategory_id=="object"&&i.subcategory_id?.name?i.subcategory_id.name:null}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=D({type:t,selectors:[["app-overviews"]],decls:3,vars:2,consts:[[1,"mb-6","bg-red-50","border-l-4","border-red-400","p-4","rounded-r-lg"],[1,"flex","items-center","justify-center","py-12"],[1,"flex"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-red-400","mr-3"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"text-sm","font-medium","text-red-800"],[1,"mt-1","text-sm","text-red-700"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-gray-900"],[1,"ml-3","text-gray-600"],[1,"space-y-8"],[1,"space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"bg-white","rounded-xl","border","border-gray-200","p-6","hover:shadow-lg","transition-all","duration-200"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-500","mb-1"],[1,"text-3xl","font-bold","text-gray-900"],[1,"p-3","bg-blue-50","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"p-3","bg-green-50","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"p-3","bg-purple-50","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V8a2 2 0 012-2V6"],[1,"p-3","bg-orange-50","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"bg-white","rounded-xl","border","border-gray-200","overflow-hidden"],[1,"px-6","py-4","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-blue-600","hover:text-blue-800","font-medium","transition-colors",3,"click"],[1,"p-6"],[1,"text-center","py-12"],[1,"space-y-4"],[1,"w-full","flex","items-center","p-4","border-2","border-dashed","border-gray-300","rounded-lg","hover:border-gray-400","hover:bg-gray-50","transition-all","duration-200","group",3,"click"],[1,"flex","items-center","space-x-4"],[1,"p-3","bg-blue-50","rounded-lg","group-hover:bg-blue-100","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-600"],[1,"text-left"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-xs","text-gray-500"],[1,"p-3","bg-green-50","rounded-lg","group-hover:bg-green-100","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"p-4","bg-gray-50","rounded-full","w-16","h-16","mx-auto","mb-4","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],[1,"inline-flex","items-center","px-4","py-2","bg-gray-900","text-white","rounded-lg","hover:bg-gray-800","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],[1,"flex","items-center","space-x-4","p-3","rounded-lg","hover:bg-gray-50","cursor-pointer","transition-all","duration-200","border","border-transparent","hover:border-gray-200"],[1,"flex","items-center","space-x-4","p-3","rounded-lg","hover:bg-gray-50","cursor-pointer","transition-all","duration-200","border","border-transparent","hover:border-gray-200",3,"click"],[1,"h-12","w-12","rounded-lg","object-cover",3,"src","alt"],[1,"h-12","w-12","rounded-lg","bg-gray-100","flex","items-center","justify-center"],[1,"flex-1","min-w-0"],[1,"text-sm","font-medium","text-gray-900","truncate"],[1,"flex","items-center","space-x-2","mt-1"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-400"],[1,"text-xl","font-semibold","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","px-4","py-2","bg-gray-900","text-white","rounded-lg","hover:bg-gray-800","transition-colors","font-medium","text-sm",3,"click"],[1,"bg-white","rounded-xl","border","border-gray-200","p-12","text-center","shadow-sm"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"p-4","bg-gray-50","rounded-full","w-20","h-20","mx-auto","mb-6","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-gray-300"],[1,"text-xl","font-medium","text-gray-900","mb-2"],[1,"inline-flex","items-center","px-6","py-3","bg-gray-900","text-white","rounded-lg","hover:bg-gray-800","transition-colors","font-medium",3,"click"],[1,"bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-lg","transition-all","cursor-pointer","overflow-hidden"],[1,"bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-lg","transition-all","cursor-pointer","overflow-hidden",3,"click"],[1,"flex","items-center","space-x-4","mb-4"],[1,"text-lg","font-medium","text-gray-900","truncate"],[1,"text-sm","text-gray-600","mb-4","line-clamp-2"],[1,"flex","items-center","justify-between","text-xs","text-gray-500"],[1,"px-6","py-3","border-t","border-gray-200","bg-gray-50"],[1,"flex","space-x-2"],["title","View Business",1,"p-2","hover:bg-gray-200","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["title","Edit Business",1,"p-2","hover:bg-gray-200","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["title","Delete Business",1,"p-2","hover:bg-red-50","hover:text-red-700","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"inline-flex","items-center","px-4","py-2","border","border-gray-300","text-gray-700","rounded-lg","hover:bg-gray-50","transition-colors","font-medium",3,"click"],[1,"text-gray-500"]],template:function(e,r){e&1&&p(0,vn,9,1,"div",0)(1,bn,4,0,"div",1)(2,Vn,5,1),e&2&&(d(r.error()?0:-1),l(),d(r.loading()?1:2))},dependencies:[R,re],styles:["[_nghost-%COMP%]{display:block}"]})};var Y=(t,i)=>i._id;function On(t,i){if(t&1&&(a(0,"div",5)(1,"div",8)(2,"mat-icon",9),o(3,"error"),n(),a(4,"div")(5,"h3",10),o(6,"Error"),n(),a(7,"p",11),o(8),n()()()()),t&2){let e=c();l(8),_(e.error())}}function Nn(t,i){t&1&&(a(0,"div",6),h(1,"mat-spinner",12),a(2,"span",13),o(3,"Loading projects..."),n()())}function Ln(t,i){if(t&1){let e=v();a(0,"div",17)(1,"div",19)(2,"mat-icon",20),o(3,"assignment"),n()(),a(4,"h3",21),o(5,"No project requests yet"),n(),a(6,"p",22),o(7,"Start by browsing businesses and creating your first project request."),n(),a(8,"button",23),u("click",function(){g(e);let s=c(2);return f(s.navigateToHome())}),o(9," Browse Businesses "),n()()}}function $n(t,i){if(t&1&&(a(0,"p",34),o(1),n()),t&2){let e=c().$implicit;l(),_(e.description)}}function qn(t,i){if(t&1){let e=v();a(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3",30),o(4),n(),a(5,"span",31)(6,"mat-icon",32),o(7,"schedule"),n(),o(8),n()(),a(9,"p",33),o(10),n(),p(11,$n,2,1,"p",34),a(12,"div",35)(13,"div",36)(14,"span",37)(15,"mat-icon",38),o(16,"attach_money"),n(),o(17," Budget "),n(),a(18,"span",39),o(19),n()(),a(20,"div",36)(21,"span",37)(22,"mat-icon",38),o(23,"event"),n(),o(24," Submitted "),n(),a(25,"span",40),o(26),n()()()(),a(27,"div",41)(28,"button",42),u("click",function(){let s=g(e).$implicit,m=c(4);return f(m.viewProject(s))}),a(29,"mat-icon"),o(30,"visibility"),n(),o(31," View Details "),n()()()}if(t&2){let e=i.$implicit,r=c(4);l(4),_(e.title),l(),k(r.getStatusColor(e.status)),l(3),x(" ",r.getStatusText(e.status)," "),l(2),_(r.getBusinessName(e)),l(),d(e.description?11:-1),l(8),_(r.formatPrice(e.offered_price)),l(7),_(r.formatDate(e.createdAt))}}function Un(t,i){if(t&1&&(a(0,"div",2)(1,"h3",24)(2,"mat-icon",25),o(3,"schedule"),n(),o(4),n(),a(5,"div",26),P(6,qn,32,8,"div",27,Y),n()()),t&2){let e=c(3);l(4),x(" Pending Approval (",e.pendingMyProjects().length,") "),l(2),T(e.pendingMyProjects())}}function zn(t,i){if(t&1&&(a(0,"p",34),o(1),n()),t&2){let e=c().$implicit;l(),_(e.description)}}function Gn(t,i){if(t&1&&(a(0,"div",36)(1,"span",37)(2,"mat-icon",38),o(3,"check_circle"),n(),o(4," Accepted "),n(),a(5,"span",40),o(6),n()()),t&2){let e=c().$implicit,r=c(4);l(6),_(r.formatDate(e.accepted_at))}}function Wn(t,i){if(t&1){let e=v();a(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3",30),o(4),n(),a(5,"span",31)(6,"mat-icon",32),o(7),n(),o(8),n()(),a(9,"p",33),o(10),n(),p(11,zn,2,1,"p",34),a(12,"div",35)(13,"div",36)(14,"span",37)(15,"mat-icon",38),o(16,"attach_money"),n(),o(17," Budget "),n(),a(18,"span",39),o(19),n()(),p(20,Gn,7,1,"div",36),n()(),a(21,"div",41)(22,"button",42),u("click",function(){let s=g(e).$implicit,m=c(4);return f(m.viewProject(s))}),a(23,"mat-icon"),o(24,"visibility"),n(),o(25," View Details "),n()()()}if(t&2){let e=i.$implicit,r=c(4);l(4),_(e.title),l(),k(r.getStatusColor(e.status)),l(2),x(" ",e.status==="accepted"?"check_circle":"work"," "),l(),x(" ",r.getStatusText(e.status)," "),l(2),_(r.getBusinessName(e)),l(),d(e.description?11:-1),l(8),_(r.formatPrice(e.offered_price)),l(),d(e.accepted_at?20:-1)}}function Hn(t,i){if(t&1&&(a(0,"div",2)(1,"h3",24)(2,"mat-icon",43),o(3,"work"),n(),o(4),n(),a(5,"div",26),P(6,Wn,26,9,"div",27,Y),n()()),t&2){let e=c(3);l(4),x(" Active Projects (",e.activeMyProjects().length,") "),l(2),T(e.activeMyProjects())}}function Yn(t,i){if(t&1&&(a(0,"p",34),o(1),n()),t&2){let e=c().$implicit;l(),_(e.description)}}function Qn(t,i){if(t&1&&(a(0,"div",36)(1,"span",37)(2,"mat-icon",38),o(3,"event_available"),n(),o(4," Completed "),n(),a(5,"span",40),o(6),n()()),t&2){let e=c().$implicit,r=c(4);l(6),_(r.formatDate(e.completed_at))}}function Xn(t,i){if(t&1){let e=v();a(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3",30),o(4),n(),a(5,"span",31)(6,"mat-icon",32),o(7,"check_circle"),n(),o(8),n()(),a(9,"p",33),o(10),n(),p(11,Yn,2,1,"p",34),a(12,"div",35)(13,"div",36)(14,"span",37)(15,"mat-icon",38),o(16,"attach_money"),n(),o(17," Final Amount "),n(),a(18,"span",39),o(19),n()(),p(20,Qn,7,1,"div",36),n()(),a(21,"div",41)(22,"button",42),u("click",function(){let s=g(e).$implicit,m=c(4);return f(m.viewProject(s))}),a(23,"mat-icon"),o(24,"visibility"),n(),o(25," View Details "),n()()()}if(t&2){let e=i.$implicit,r=c(4);l(4),_(e.title),l(),k(r.getStatusColor(e.status)),l(3),x(" ",r.getStatusText(e.status)," "),l(2),_(r.getBusinessName(e)),l(),d(e.description?11:-1),l(8),_(r.formatPrice(e.offered_price)),l(),d(e.completed_at?20:-1)}}function Zn(t,i){if(t&1&&(a(0,"div",2)(1,"h3",24)(2,"mat-icon",44),o(3,"check_circle"),n(),o(4),n(),a(5,"div",26),P(6,Xn,26,8,"div",27,Y),n()()),t&2){let e=c(3);l(4),x(" Completed Projects (",e.completedMyProjects().length,") "),l(2),T(e.completedMyProjects())}}function Kn(t,i){if(t&1&&(a(0,"p",34),o(1),n()),t&2){let e=c().$implicit;l(),_(e.description)}}function Jn(t,i){if(t&1&&(a(0,"div",46)(1,"p",47),o(2,"Rejection Reason:"),n(),a(3,"p",48),o(4),n()()),t&2){let e=c().$implicit;l(4),_(e.rejection_reason)}}function ea(t,i){if(t&1&&(a(0,"div",36)(1,"span",37)(2,"mat-icon",38),o(3,"event"),n(),o(4," Rejected "),n(),a(5,"span",40),o(6),n()()),t&2){let e=c().$implicit,r=c(4);l(6),_(r.formatDate(e.rejected_at))}}function ta(t,i){if(t&1){let e=v();a(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3",30),o(4),n(),a(5,"span",31)(6,"mat-icon",32),o(7,"cancel"),n(),o(8),n()(),a(9,"p",33),o(10),n(),p(11,Kn,2,1,"p",34)(12,Jn,5,1,"div",46),a(13,"div",35)(14,"div",36)(15,"span",37)(16,"mat-icon",38),o(17,"attach_money"),n(),o(18," Proposed Budget "),n(),a(19,"span",39),o(20),n()(),p(21,ea,7,1,"div",36),n()(),a(22,"div",41)(23,"button",42),u("click",function(){let s=g(e).$implicit,m=c(4);return f(m.viewProject(s))}),a(24,"mat-icon"),o(25,"visibility"),n(),o(26," View Details "),n()()()}if(t&2){let e=i.$implicit,r=c(4);l(4),_(e.title),l(),k(r.getStatusColor(e.status)),l(3),x(" ",r.getStatusText(e.status)," "),l(2),_(r.getBusinessName(e)),l(),d(e.description?11:-1),l(),d(e.rejection_reason?12:-1),l(8),_(r.formatPrice(e.offered_price)),l(),d(e.rejected_at?21:-1)}}function ia(t,i){if(t&1&&(a(0,"div",2)(1,"h3",24)(2,"mat-icon",45),o(3,"cancel"),n(),o(4),n(),a(5,"div",26),P(6,ta,27,9,"div",27,Y),n()()),t&2){let e=c(3);l(4),x(" Rejected Projects (",e.rejectedMyProjects().length,") "),l(2),T(e.rejectedMyProjects())}}function na(t,i){if(t&1&&(a(0,"p",34),o(1),n()),t&2){let e=c().$implicit;l(),_(e.description)}}function aa(t,i){if(t&1&&(a(0,"div",50)(1,"p",51),o(2,"Cancellation Reason:"),n(),a(3,"p",52),o(4),n()()),t&2){let e=c().$implicit;l(4),_(e.cancellation_reason)}}function oa(t,i){if(t&1&&(a(0,"div",36)(1,"span",37)(2,"mat-icon",38),o(3,"event"),n(),o(4," Cancelled "),n(),a(5,"span",40),o(6),n()()),t&2){let e=c().$implicit,r=c(4);l(6),_(r.formatDate(e.cancelled_at))}}function ra(t,i){if(t&1){let e=v();a(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3",30),o(4),n(),a(5,"span",31)(6,"mat-icon",32),o(7,"block"),n(),o(8),n()(),a(9,"p",33),o(10),n(),p(11,na,2,1,"p",34)(12,aa,5,1,"div",50),a(13,"div",35)(14,"div",36)(15,"span",37)(16,"mat-icon",38),o(17,"attach_money"),n(),o(18," Budget "),n(),a(19,"span",39),o(20),n()(),p(21,oa,7,1,"div",36),n()(),a(22,"div",41)(23,"button",42),u("click",function(){let s=g(e).$implicit,m=c(4);return f(m.viewProject(s))}),a(24,"mat-icon"),o(25,"visibility"),n(),o(26," View Details "),n()()()}if(t&2){let e=i.$implicit,r=c(4);l(4),_(e.title),l(),k(r.getStatusColor(e.status)),l(3),x(" ",r.getStatusText(e.status)," "),l(2),_(r.getBusinessName(e)),l(),d(e.description?11:-1),l(),d(e.cancellation_reason?12:-1),l(8),_(r.formatPrice(e.offered_price)),l(),d(e.cancelled_at?21:-1)}}function la(t,i){if(t&1&&(a(0,"div",2)(1,"h3",24)(2,"mat-icon",49),o(3,"block"),n(),o(4),n(),a(5,"div",26),P(6,ra,27,9,"div",27,Y),n()()),t&2){let e=c(3);l(4),x(" Cancelled Projects (",e.cancelledMyProjects().length,") "),l(2),T(e.cancelledMyProjects())}}function sa(t,i){if(t&1&&p(0,Un,8,1,"div",2)(1,Hn,8,1,"div",2)(2,Zn,8,1,"div",2)(3,ia,8,1,"div",2)(4,la,8,1,"div",2),t&2){let e=c(2);d(e.pendingMyProjects().length>0?0:-1),l(),d(e.activeMyProjects().length>0?1:-1),l(),d(e.completedMyProjects().length>0?2:-1),l(),d(e.rejectedMyProjects().length>0?3:-1),l(),d(e.cancelledMyProjects().length>0?4:-1)}}function ca(t,i){t&1&&(a(0,"div",17)(1,"div",19)(2,"mat-icon",20),o(3,"business_center"),n()(),a(4,"h3",21),o(5,"No project inquiries yet"),n(),a(6,"p",22),o(7,"When clients are interested in your services, their project requests will appear here."),n()())}function da(t,i){if(t&1&&(a(0,"p",34),o(1),n()),t&2){let e=c().$implicit;l(),_(e.description)}}function ma(t,i){if(t&1){let e=v();a(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3",30),o(4),n(),a(5,"span",31)(6,"mat-icon",32),o(7,"schedule"),n(),o(8),n()(),a(9,"p",33),o(10),n(),p(11,da,2,1,"p",34),a(12,"div",35)(13,"div",36)(14,"span",37)(15,"mat-icon",38),o(16,"attach_money"),n(),o(17," Client Budget "),n(),a(18,"span",39),o(19),n()(),a(20,"div",36)(21,"span",37)(22,"mat-icon",38),o(23,"event"),n(),o(24," Received "),n(),a(25,"span",40),o(26),n()()()(),a(27,"div",41)(28,"div",53)(29,"button",54),u("click",function(){let s=g(e).$implicit,m=c(4);return f(m.viewProject(s))}),a(30,"mat-icon"),o(31,"visibility"),n(),o(32," View "),n(),a(33,"button",55),u("click",function(){let s=g(e).$implicit,m=c(4);return f(m.acceptProject(s))}),a(34,"mat-icon"),o(35,"check"),n(),o(36," Accept "),n(),a(37,"button",56),u("click",function(){let s=g(e).$implicit,m=c(4);return f(m.rejectProject(s))}),a(38,"mat-icon"),o(39,"close"),n(),o(40," Reject "),n()()()()}if(t&2){let e=i.$implicit,r=c(4);l(4),_(e.title),l(),k(r.getStatusColor(e.status)),l(3),x(" ",r.getStatusText(e.status)," "),l(2),_(r.getClientName(e)),l(),d(e.description?11:-1),l(8),_(r.formatPrice(e.offered_price)),l(7),_(r.formatDate(e.createdAt))}}function pa(t,i){if(t&1&&(a(0,"div",2)(1,"h3",24)(2,"mat-icon",25),o(3,"schedule"),n(),o(4),n(),a(5,"div",26),P(6,ma,41,8,"div",27,Y),n()()),t&2){let e=c(3);l(4),x(" Pending Requests (",e.pendingBusinessProjects().length,") "),l(2),T(e.pendingBusinessProjects())}}function _a(t,i){if(t&1&&(a(0,"p",34),o(1),n()),t&2){let e=c().$implicit;l(),_(e.description)}}function ua(t,i){if(t&1&&(a(0,"div",36)(1,"span",37)(2,"mat-icon",38),o(3,"event"),n(),o(4," Deadline "),n(),a(5,"span",40),o(6),n()()),t&2){let e=c().$implicit,r=c(4);l(6),_(r.formatDate(e.deadline))}}function ga(t,i){if(t&1){let e=v();a(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3",30),o(4),n(),a(5,"span",31)(6,"mat-icon",32),o(7),n(),o(8),n()(),a(9,"p",33),o(10),n(),p(11,_a,2,1,"p",34),a(12,"div",35)(13,"div",36)(14,"span",37)(15,"mat-icon",38),o(16,"attach_money"),n(),o(17," Budget "),n(),a(18,"span",39),o(19),n()(),p(20,ua,7,1,"div",36),n()(),a(21,"div",41)(22,"button",42),u("click",function(){let s=g(e).$implicit,m=c(4);return f(m.viewProject(s))}),a(23,"mat-icon"),o(24,"visibility"),n(),o(25," View Details "),n()()()}if(t&2){let e=i.$implicit,r=c(4);l(4),_(e.title),l(),k(r.getStatusColor(e.status)),l(2),x(" ",e.status==="accepted"?"check_circle":"work"," "),l(),x(" ",r.getStatusText(e.status)," "),l(2),_(r.getClientName(e)),l(),d(e.description?11:-1),l(8),_(r.formatPrice(e.offered_price)),l(),d(e.deadline?20:-1)}}function fa(t,i){if(t&1&&(a(0,"div",2)(1,"h3",24)(2,"mat-icon",43),o(3,"work"),n(),o(4),n(),a(5,"div",26),P(6,ga,26,9,"div",27,Y),n()()),t&2){let e=c(3);l(4),x(" Active Projects (",e.activeBusinessProjects().length,") "),l(2),T(e.activeBusinessProjects())}}function xa(t,i){if(t&1&&(a(0,"p",34),o(1),n()),t&2){let e=c().$implicit;l(),_(e.description)}}function ha(t,i){if(t&1&&(a(0,"div",36)(1,"span",37)(2,"mat-icon",38),o(3,"event_available"),n(),o(4," Completed "),n(),a(5,"span",40),o(6),n()()),t&2){let e=c().$implicit,r=c(4);l(6),_(r.formatDate(e.completed_at))}}function Ca(t,i){if(t&1){let e=v();a(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3",30),o(4),n(),a(5,"span",31)(6,"mat-icon",32),o(7,"check_circle"),n(),o(8),n()(),a(9,"p",33),o(10),n(),p(11,xa,2,1,"p",34),a(12,"div",35)(13,"div",36)(14,"span",37)(15,"mat-icon",38),o(16,"attach_money"),n(),o(17," Final Amount "),n(),a(18,"span",39),o(19),n()(),p(20,ha,7,1,"div",36),n()(),a(21,"div",41)(22,"button",42),u("click",function(){let s=g(e).$implicit,m=c(4);return f(m.viewProject(s))}),a(23,"mat-icon"),o(24,"visibility"),n(),o(25," View Details "),n()()()}if(t&2){let e=i.$implicit,r=c(4);l(4),_(e.title),l(),k(r.getStatusColor(e.status)),l(3),x(" ",r.getStatusText(e.status)," "),l(2),_(r.getClientName(e)),l(),d(e.description?11:-1),l(8),_(r.formatPrice(e.offered_price)),l(),d(e.completed_at?20:-1)}}function va(t,i){if(t&1&&(a(0,"div",2)(1,"h3",24)(2,"mat-icon",44),o(3,"check_circle"),n(),o(4),n(),a(5,"div",26),P(6,Ca,26,8,"div",27,Y),n()()),t&2){let e=c(3);l(4),x(" Completed Projects (",e.completedBusinessProjects().length,") "),l(2),T(e.completedBusinessProjects())}}function ba(t,i){if(t&1&&(a(0,"p",34),o(1),n()),t&2){let e=c().$implicit;l(),_(e.description)}}function ya(t,i){if(t&1&&(a(0,"div",46)(1,"p",47),o(2,"Rejection Reason:"),n(),a(3,"p",48),o(4),n()()),t&2){let e=c().$implicit;l(4),_(e.rejection_reason)}}function wa(t,i){if(t&1&&(a(0,"div",36)(1,"span",37)(2,"mat-icon",38),o(3,"event"),n(),o(4," Rejected "),n(),a(5,"span",40),o(6),n()()),t&2){let e=c().$implicit,r=c(4);l(6),_(r.formatDate(e.rejected_at))}}function Sa(t,i){if(t&1){let e=v();a(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3",30),o(4),n(),a(5,"span",31)(6,"mat-icon",32),o(7,"cancel"),n(),o(8),n()(),a(9,"p",33),o(10),n(),p(11,ba,2,1,"p",34)(12,ya,5,1,"div",46),a(13,"div",35)(14,"div",36)(15,"span",37)(16,"mat-icon",38),o(17,"attach_money"),n(),o(18," Client Budget "),n(),a(19,"span",39),o(20),n()(),p(21,wa,7,1,"div",36),n()(),a(22,"div",41)(23,"button",42),u("click",function(){let s=g(e).$implicit,m=c(4);return f(m.viewProject(s))}),a(24,"mat-icon"),o(25,"visibility"),n(),o(26," View Details "),n()()()}if(t&2){let e=i.$implicit,r=c(4);l(4),_(e.title),l(),k(r.getStatusColor(e.status)),l(3),x(" ",r.getStatusText(e.status)," "),l(2),_(r.getClientName(e)),l(),d(e.description?11:-1),l(),d(e.rejection_reason?12:-1),l(8),_(r.formatPrice(e.offered_price)),l(),d(e.rejected_at?21:-1)}}function Ea(t,i){if(t&1&&(a(0,"div",2)(1,"h3",24)(2,"mat-icon",45),o(3,"cancel"),n(),o(4),n(),a(5,"div",26),P(6,Sa,27,9,"div",27,Y),n()()),t&2){let e=c(3);l(4),x(" Rejected Projects (",e.rejectedBusinessProjects().length,") "),l(2),T(e.rejectedBusinessProjects())}}function ka(t,i){if(t&1&&(a(0,"p",34),o(1),n()),t&2){let e=c().$implicit;l(),_(e.description)}}function ja(t,i){if(t&1&&(a(0,"div",50)(1,"p",51),o(2,"Cancellation Reason:"),n(),a(3,"p",52),o(4),n()()),t&2){let e=c().$implicit;l(4),_(e.cancellation_reason)}}function Pa(t,i){if(t&1&&(a(0,"div",36)(1,"span",37)(2,"mat-icon",38),o(3,"event"),n(),o(4," Cancelled "),n(),a(5,"span",40),o(6),n()()),t&2){let e=c().$implicit,r=c(4);l(6),_(r.formatDate(e.cancelled_at))}}function Ta(t,i){if(t&1){let e=v();a(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3",30),o(4),n(),a(5,"span",31)(6,"mat-icon",32),o(7,"block"),n(),o(8),n()(),a(9,"p",33),o(10),n(),p(11,ka,2,1,"p",34)(12,ja,5,1,"div",50),a(13,"div",35)(14,"div",36)(15,"span",37)(16,"mat-icon",38),o(17,"attach_money"),n(),o(18," Budget "),n(),a(19,"span",39),o(20),n()(),p(21,Pa,7,1,"div",36),n()(),a(22,"div",41)(23,"button",42),u("click",function(){let s=g(e).$implicit,m=c(4);return f(m.viewProject(s))}),a(24,"mat-icon"),o(25,"visibility"),n(),o(26," View Details "),n()()()}if(t&2){let e=i.$implicit,r=c(4);l(4),_(e.title),l(),k(r.getStatusColor(e.status)),l(3),x(" ",r.getStatusText(e.status)," "),l(2),_(r.getClientName(e)),l(),d(e.description?11:-1),l(),d(e.cancellation_reason?12:-1),l(8),_(r.formatPrice(e.offered_price)),l(),d(e.cancelled_at?21:-1)}}function Ma(t,i){if(t&1&&(a(0,"div",2)(1,"h3",24)(2,"mat-icon",49),o(3,"block"),n(),o(4),n(),a(5,"div",26),P(6,Ta,27,9,"div",27,Y),n()()),t&2){let e=c(3);l(4),x(" Cancelled Projects (",e.cancelledBusinessProjects().length,") "),l(2),T(e.cancelledBusinessProjects())}}function Da(t,i){if(t&1&&p(0,pa,8,1,"div",2)(1,fa,8,1,"div",2)(2,va,8,1,"div",2)(3,Ea,8,1,"div",2)(4,Ma,8,1,"div",2),t&2){let e=c(2);d(e.pendingBusinessProjects().length>0?0:-1),l(),d(e.activeBusinessProjects().length>0?1:-1),l(),d(e.completedBusinessProjects().length>0?2:-1),l(),d(e.rejectedBusinessProjects().length>0?3:-1),l(),d(e.cancelledBusinessProjects().length>0?4:-1)}}function Ia(t,i){if(t&1){let e=v();a(0,"mat-tab-group",14),u("selectedTabChange",function(s){g(e);let m=c();return f(m.onTabChange(s.index))}),a(1,"mat-tab",15)(2,"div",16),p(3,Ln,10,0,"div",17)(4,sa,5,5),n()(),a(5,"mat-tab",18)(6,"div",16),p(7,ca,8,0,"div",17)(8,Da,5,5),n()()()}if(t&2){let e=c();l(3),d(e.myProjects().length===0?3:4),l(4),d(e.businessProjects().length===0?7:8)}}var vt=class t{authService=C(L);projectService=C(Se);router=C(K);loading=S(!1);error=S(null);myProjects=S([]);businessProjects=S([]);activeTab=S(0);user=this.authService.user;pendingMyProjects=E(()=>this.myProjects().filter(i=>i.status==="pending"));activeMyProjects=E(()=>this.myProjects().filter(i=>["accepted","in_progress"].includes(i.status)));completedMyProjects=E(()=>this.myProjects().filter(i=>["completed","settled"].includes(i.status)));rejectedMyProjects=E(()=>this.myProjects().filter(i=>i.status==="rejected"));cancelledMyProjects=E(()=>this.myProjects().filter(i=>i.status==="cancelled"));pendingBusinessProjects=E(()=>this.businessProjects().filter(i=>i.status==="pending"));activeBusinessProjects=E(()=>this.businessProjects().filter(i=>["accepted","in_progress"].includes(i.status)));completedBusinessProjects=E(()=>this.businessProjects().filter(i=>["completed","settled"].includes(i.status)));rejectedBusinessProjects=E(()=>this.businessProjects().filter(i=>i.status==="rejected"));cancelledBusinessProjects=E(()=>this.businessProjects().filter(i=>i.status==="cancelled"));ngOnInit(){if(!this.user()){this.router.navigate(["/auth"]);return}this.loadProjects()}loadProjects(){return w(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let i=yield this.projectService.getMyProjectsAsync("client");this.myProjects.set(i);let e=yield this.projectService.getMyProjectsAsync("business_owner");this.businessProjects.set(e)}catch(i){console.error("Error loading projects:",i),this.error.set("Failed to load projects")}finally{this.loading.set(!1)}})}onTabChange(i){this.activeTab.set(i)}getStatusColor(i){return{pending:"bg-yellow-100 text-yellow-800",accepted:"bg-blue-100 text-blue-800",in_progress:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800",settled:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",cancelled:"bg-orange-100 text-orange-800"}[i]||"bg-gray-100 text-gray-800"}getStatusText(i){return{pending:"Pending",accepted:"Accepted",in_progress:"In Progress",completed:"Completed",settled:"Settled",rejected:"Rejected",cancelled:"Cancelled"}[i]||i}formatPrice(i){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(i)}formatDate(i){try{return(typeof i=="string"?new Date(i):i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Unknown"}}getBusinessName(i){return typeof i.business_id=="object"&&i.business_id.name?i.business_id.name:"Unknown Business"}getClientName(i){if(typeof i.client_id=="object"){let e=i.client_id;return`${e.first_name} ${e.last_name}`}return"Unknown Client"}viewProject(i){this.router.navigate(["/dashboard/projects",i._id])}acceptProject(i){return w(this,null,function*(){try{yield this.projectService.updateProjectAsync(i._id,{status:"accepted"}),this.loadProjects()}catch(e){console.error("Error accepting project:",e),this.error.set("Failed to accept project")}})}rejectProject(i){return w(this,null,function*(){let e=prompt("Please provide a reason for rejection:");if(e)try{yield this.projectService.updateProjectAsync(i._id,{status:"rejected",rejection_reason:e}),this.loadProjects()}catch(r){console.error("Error rejecting project:",r),this.error.set("Failed to reject project")}})}navigateToHome(){this.router.navigate(["/"])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=D({type:t,selectors:[["app-projects"]],decls:10,vars:2,consts:[[1,"min-h-screen","bg-gray-50","p-6"],[1,"max-w-7xl","mx-auto"],[1,"mb-8"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600"],[1,"mb-6","bg-red-50","border-l-4","border-red-400","p-4","rounded-r-lg"],[1,"flex","items-center","justify-center","py-12"],[1,"projects-tabs"],[1,"flex"],[1,"text-red-400","mr-3"],[1,"text-sm","font-medium","text-red-800"],[1,"mt-1","text-sm","text-red-700"],["diameter","40"],[1,"ml-3","text-gray-600"],[1,"projects-tabs",3,"selectedTabChange"],["label","My Project Requests"],[1,"py-6"],[1,"bg-white","rounded-xl","border","border-gray-200","p-12","text-center"],["label","Business Inquiries"],[1,"p-4","bg-gray-50","rounded-full","w-20","h-20","mx-auto","mb-6","flex","items-center","justify-center"],[1,"text-gray-400","text-4xl"],[1,"text-xl","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],["mat-raised-button","","color","primary",3,"click"],[1,"text-lg","font-semibold","text-gray-900","mb-4","flex","items-center"],[1,"mr-2","text-yellow-600"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-200","overflow-hidden","hover:shadow-md","transition-shadow","duration-200"],[1,"p-6","pb-4"],[1,"flex","items-start","justify-between","mb-3"],[1,"text-lg","font-semibold","text-gray-900","line-clamp-2"],[1,"inline-flex","items-center","px-2.5","py-1","rounded-full","text-xs","font-medium"],[1,"w-3","h-3","mr-1","text-xs"],[1,"text-sm","text-gray-600","mb-4"],[1,"text-sm","text-gray-700","mb-4","line-clamp-3"],[1,"space-y-3"],[1,"flex","items-center","justify-between"],[1,"text-sm","text-gray-500","flex","items-center"],[1,"w-4","h-4","mr-1"],[1,"text-sm","font-semibold","text-gray-900"],[1,"text-sm","text-gray-700"],[1,"px-6","py-4","bg-gray-50","border-t","border-gray-100"],["mat-stroked-button","",1,"w-full",3,"click"],[1,"mr-2","text-blue-600"],[1,"mr-2","text-green-600"],[1,"mr-2","text-red-600"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"text-sm","text-red-800","font-medium","mb-1"],[1,"text-sm","text-red-700"],[1,"mr-2","text-orange-600"],[1,"mb-4","p-3","bg-orange-50","border","border-orange-200","rounded-lg"],[1,"text-sm","text-orange-800","font-medium","mb-1"],[1,"text-sm","text-orange-700"],[1,"flex","space-x-2"],["mat-stroked-button","",1,"flex-1",3,"click"],["mat-raised-button","","color","primary",1,"flex-1",3,"click"],["mat-button","","color","warn",1,"flex-1",3,"click"]],template:function(e,r){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),o(4,"Projects"),n(),a(5,"p",4),o(6,"Manage your project requests and business inquiries"),n()(),p(7,On,9,1,"div",5)(8,Nn,4,0,"div",6)(9,Ia,9,2,"mat-tab-group",7),n()()),e&2&&(l(7),d(r.error()?7:-1),l(),d(r.loading()?8:9))},dependencies:[R,rt,Pe,ke,je,W,Li,V,B,q,$,we,ye],styles:[".projects-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body-wrapper{padding-top:0}.project-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.project-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026;transform:translateY(-2px)}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-header[_ngcontent-%COMP%]{padding-bottom:8px}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;line-height:1.4}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin-top:4px}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-actions[_ngcontent-%COMP%]{padding-top:8px;display:flex;align-items:center;gap:8px}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-actions.action-buttons[_ngcontent-%COMP%]{flex-wrap:wrap}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-actions.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;min-width:80px}.project-card.pending-request[_ngcontent-%COMP%]{border-left:4px solid #f59e0b;background:linear-gradient(135deg,#fffbeb,#fef3c7)}.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.status-badge[_ngcontent-%COMP%]{font-weight:500;text-transform:capitalize}@media (max-width: 768px){.project-card[_ngcontent-%COMP%]   .mat-mdc-card-actions.action-buttons[_ngcontent-%COMP%]{flex-direction:column}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-actions.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.empty-state[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9);border:2px dashed #e2e8f0}"]})};var Fa=()=>["pending","accepted","in_progress"],Aa=(t,i)=>i.url,Ra=(t,i)=>i.name,mn=(t,i)=>i._id;function Ba(t,i){t&1&&(a(0,"button",15)(1,"mat-icon",17),o(2,"hourglass_empty"),n(),o(3," Loading... "),n())}function Va(t,i){if(t&1&&(a(0,"span",19),o(1),n()),t&2){let e=c(3);l(),x(" ",e.chatUnreadCount()," ")}}function Oa(t,i){if(t&1){let e=v();a(0,"button",18),u("click",function(){g(e);let s=c(2);return f(s.goToExistingChat())}),a(1,"mat-icon",17),o(2,"chat"),n(),o(3," Open Chat "),p(4,Va,2,1,"span",19),n()}if(t&2){let e=c(2);l(4),d(e.chatUnreadCount()>0?4:-1)}}function Na(t,i){t&1&&(a(0,"button",15)(1,"mat-icon",17),o(2,"hourglass_empty"),n(),o(3," Loading... "),n())}function La(t,i){if(t&1&&(a(0,"span",19),o(1),n()),t&2){let e=c(5);l(),x(" ",e.chatUnreadCount()," ")}}function $a(t,i){if(t&1){let e=v();a(0,"button",18),u("click",function(){g(e);let s=c(4);return f(s.goToExistingChat())}),a(1,"mat-icon",17),o(2,"chat"),n(),o(3," Open Chat "),p(4,La,2,1,"span",19),n()}if(t&2){let e=c(4);l(4),d(e.chatUnreadCount()>0?4:-1)}}function qa(t,i){if(t&1){let e=v();a(0,"button",21),u("click",function(){g(e);let s=c(4);return f(s.startChat())}),a(1,"mat-icon",17),o(2,"chat"),n(),o(3," Start Chat "),n()}}function Ua(t,i){if(t&1&&p(0,Na,4,0,"button",15)(1,$a,5,1,"button",16)(2,qa,4,0,"button",20),t&2){let e=c(3);d(e.loadingChat()?0:e.existingChat()?1:2)}}function za(t,i){if(t&1&&p(0,Ua,3,1),t&2){let e=c(2);d(e.project()&&(e.project().status==="accepted"||e.project().status==="in_progress"||e.project().status==="completed")?0:-1)}}function Ga(t,i){if(t&1&&p(0,Ba,4,0,"button",15)(1,Oa,5,1,"button",16)(2,za,1,1),t&2){let e=c();d(e.loadingChat()?0:e.existingChat()?1:2)}}function Wa(t,i){if(t&1&&(a(0,"span",24),o(1),n()),t&2){let e=c(2);l(),x(" ",e.chatUnreadCount()," ")}}function Ha(t,i){if(t&1){let e=v();a(0,"button",22),u("click",function(){g(e);let s=c();return f(s.navigateToChat())}),a(1,"mat-icon",23),o(2,"chat"),n(),o(3," Chat with Client "),p(4,Wa,2,1,"span",24),n(),a(5,"button",25),u("click",function(){g(e);let s=c();return f(s.acceptProject())}),a(6,"mat-icon",23),o(7,"check_circle"),n(),o(8," Accept Project "),n(),a(9,"button",26),u("click",function(){g(e);let s=c();return f(s.rejectProject())}),a(10,"mat-icon",23),o(11,"cancel"),n(),o(12," Reject Project "),n()}if(t&2){let e=c();l(4),d(e.chatUnreadCount()>0?4:-1)}}function Ya(t,i){if(t&1&&(a(0,"span",24),o(1),n()),t&2){let e=c(2);l(),x(" ",e.chatUnreadCount()," ")}}function Qa(t,i){if(t&1){let e=v();a(0,"button",22),u("click",function(){g(e);let s=c();return f(s.navigateToChat())}),a(1,"mat-icon",23),o(2,"chat"),n(),o(3," Chat with Client "),p(4,Ya,2,1,"span",24),n(),a(5,"button",25),u("click",function(){g(e);let s=c();return f(s.markInProgress())}),a(6,"mat-icon",23),o(7,"play_arrow"),n(),o(8," Start Project "),n()}if(t&2){let e=c();l(4),d(e.chatUnreadCount()>0?4:-1)}}function Xa(t,i){if(t&1&&(a(0,"span",24),o(1),n()),t&2){let e=c(2);l(),x(" ",e.chatUnreadCount()," ")}}function Za(t,i){if(t&1){let e=v();a(0,"button",22),u("click",function(){g(e);let s=c();return f(s.navigateToChat())}),a(1,"mat-icon",23),o(2,"chat"),n(),o(3," Chat with Client "),p(4,Xa,2,1,"span",24),n(),a(5,"button",27),u("click",function(){g(e);let s=c();return f(s.markCompleted())}),a(6,"mat-icon",23),o(7,"check"),n(),o(8," Mark as Completed "),n()}if(t&2){let e=c();l(4),d(e.chatUnreadCount()>0?4:-1)}}function Ka(t,i){t&1&&o(0," Chat with Business ")}function Ja(t,i){t&1&&o(0," Chat with Business Owner ")}function eo(t,i){if(t&1&&(a(0,"span",24),o(1),n()),t&2){let e=c(2);l(),x(" ",e.chatUnreadCount()," ")}}function to(t,i){if(t&1){let e=v();a(0,"div",9)(1,"h3",28),o(2,"Client Actions"),n(),a(3,"div",29)(4,"button",22),u("click",function(){g(e);let s=c();return f(s.navigateToChat())}),a(5,"mat-icon",23),o(6,"chat"),n(),p(7,Ka,1,0)(8,Ja,1,0)(9,eo,2,1,"span",24),n()()()}if(t&2){let e=c();l(7),d(e.project().status==="pending"?7:8),l(2),d(e.chatUnreadCount()>0?9:-1)}}function io(t,i){if(t&1&&(a(0,"span",24),o(1),n()),t&2){let e=c(2);l(),x(" ",e.chatUnreadCount()," ")}}function no(t,i){if(t&1){let e=v();a(0,"div",10)(1,"h3",28),o(2,"Project Completion Review"),n(),a(3,"p",30),o(4,"The business owner has marked this project as completed. Please review the work and approve or reject the completion."),n(),a(5,"div",29)(6,"button",25),u("click",function(){g(e);let s=c();return f(s.approveCompletion())}),a(7,"mat-icon",23),o(8,"check_circle"),n(),o(9," Approve Completion "),n(),a(10,"button",26),u("click",function(){g(e);let s=c();return f(s.rejectCompletion())}),a(11,"mat-icon",23),o(12,"cancel"),n(),o(13," Request Changes "),n(),a(14,"button",22),u("click",function(){g(e);let s=c();return f(s.navigateToChat())}),a(15,"mat-icon",23),o(16,"chat"),n(),o(17," Discuss with Business Owner "),p(18,io,2,1,"span",24),n()()()}if(t&2){let e=c();l(18),d(e.chatUnreadCount()>0?18:-1)}}function ao(t,i){t&1&&(a(0,"p",30),o(1,"You have already reviewed this project. Click below to view your review."),n())}function oo(t,i){t&1&&(a(0,"p",30),o(1,"Share your experience with this business to help other clients make informed decisions."),n())}function ro(t,i){if(t&1){let e=v();a(0,"div",11)(1,"h3",28),o(2,"Project Review"),n(),p(3,ao,2,0,"p",30)(4,oo,2,0,"p",30),a(5,"div",29)(6,"button",31),u("click",function(){g(e);let s=c();return f(s.handleReviewAction())}),a(7,"mat-icon",23),o(8),n(),o(9),n()()()}if(t&2){let e=c();l(3),d(e.existingReview()?3:4),l(5),_(e.existingReview()?"visibility":"star"),l(),x(" ",e.reviewButtonText()," ")}}function lo(t,i){if(t&1&&(a(0,"div",12)(1,"div",32)(2,"div",33)(3,"mat-icon",34),o(4,"error"),n()(),a(5,"div",35)(6,"h3",36),o(7,"Error"),n(),a(8,"p",37),o(9),n()()()()),t&2){let e=c();l(9),_(e.error())}}function so(t,i){t&1&&(a(0,"div",13),h(1,"mat-spinner",38),a(2,"p",39),o(3,"Loading project details..."),n()())}function co(t,i){if(t&1&&o(0),t&2){let e=c(2);x(" Project with ",e.getBusinessName(e.project())," ")}}function mo(t,i){if(t&1&&o(0),t&2){let e=c(2);x(" Project from ",e.getClientName(e.project())," ")}}function po(t,i){if(t&1&&(a(0,"div")(1,"h3",62),o(2,"Description"),n(),a(3,"p",63),o(4),n()()),t&2){let e=c(2);l(4),_(e.project().description)}}function _o(t,i){if(t&1&&(a(0,"div")(1,"h3",62),o(2,"Additional Notes"),n(),a(3,"p",63),o(4),n()()),t&2){let e=c(2);l(4),_(e.project().additional_notes)}}function uo(t,i){if(t&1&&(a(0,"div")(1,"h3",62),o(2,"Project Image"),n(),a(3,"div",64),h(4,"img",65),n()()),t&2){let e=c(2);l(4),b("src",e.project().image_url,J)("alt",e.project().title)}}function go(t,i){if(t&1&&(a(0,"div",67)(1,"div",69)(2,"div",70)(3,"mat-icon",71),o(4),n()(),a(5,"div",72)(6,"p",73),o(7),n(),a(8,"p",74),o(9),n(),a(10,"p",75),o(11),n()()(),a(12,"a",76)(13,"mat-icon",77),o(14,"download"),n(),o(15," Download "),n()()),t&2){let e=i.$implicit,r=c(3);l(4),_(r.getFileIcon(e.type)),l(3),_(e.name),l(2),_(r.formatFileSize(e.size)),l(2),_(e.type.split("/")[1]||"file"),l(),b("href",e.url,J)}}function fo(t,i){if(t&1&&(a(0,"div")(1,"h3",28),o(2,"Project Documents"),n(),a(3,"div",66),P(4,go,16,5,"div",67,Aa),n(),a(6,"p",68),o(7),n()()),t&2){let e=c(2);l(4),T(e.project().attachments),l(3),x("",e.project().attachments.length," document(s) attached to this project")}}function xo(t,i){if(t&1&&(a(0,"p",83),o(1),n()),t&2){let e=c().$implicit;l(),_(e.description)}}function ho(t,i){if(t&1&&(a(0,"div",84)(1,"mat-icon",77),o(2,"attach_money"),n(),o(3),n()),t&2){let e=c().$implicit,r=c(3);l(3),x(" ",r.formatServicePrice(e.price,e.pricing_type)," ")}}function Co(t,i){t&1&&(a(0,"div",85)(1,"mat-icon",77),o(2,"help_outline"),n(),o(3," Price not specified "),n())}function vo(t,i){if(t&1&&(a(0,"div",79)(1,"div",43)(2,"div",44)(3,"div",80)(4,"mat-icon",81),o(5,"star"),n(),a(6,"h4",82),o(7),n()(),p(8,xo,2,1,"p",83)(9,ho,4,1,"div",84)(10,Co,4,0,"div",85),n()()()),t&2){let e=i.$implicit;l(7),_(e.name),l(),d(e.description?8:-1),l(),d(e.price?9:10)}}function bo(t,i){if(t&1&&(a(0,"div")(1,"h3",28),o(2,"Selected Services"),n(),a(3,"div",78),P(4,vo,11,3,"div",79,Ra),n(),a(6,"p",68),o(7),n()()),t&2){let e=c(2);l(4),T(e.getServiceDetails(e.project())),l(3),x("",e.getServiceDetails(e.project()).length," service(s) selected for this project")}}function yo(t,i){t&1&&(a(0,"div")(1,"h3",62),o(2,"Selected Services"),n(),a(3,"div",86)(4,"div",87)(5,"mat-icon",88),o(6,"info"),n(),a(7,"p",89),o(8,"No specific services selected for this project"),n()()()())}function wo(t,i){if(t&1&&(a(0,"div",48)(1,"h3",90)(2,"mat-icon",91),o(3,"error_outline"),n(),o(4," Rejection Reason "),n(),a(5,"p",92),o(6),n()()),t&2){let e=c(2);l(6),_(e.project().rejection_reason)}}function So(t,i){t&1&&o(0," Business Information ")}function Eo(t,i){t&1&&o(0," Client Information ")}function ko(t,i){if(t&1&&h(0,"img",93),t&2){let e=c();b("src",e.logo_url,J)("alt",e.name)}}function jo(t,i){t&1&&(a(0,"div",94)(1,"mat-icon",97),o(2,"business"),n()())}function Po(t,i){if(t&1&&(a(0,"div",96)(1,"mat-icon",98),o(2,"link"),n(),a(3,"span",99),o(4),n()()),t&2){let e=c();l(4),x("/business/",e.slug,"")}}function To(t,i){if(t&1){let e=v();a(0,"div",51),p(1,ko,1,2,"img",93)(2,jo,3,0,"div",94),a(3,"div",44)(4,"button",95),u("click",function(){let s=g(e),m=c(2);return f(m.navigateToBusinessProfile(s.slug))}),o(5),n(),a(6,"p",5),o(7,"Click to view business profile"),n(),p(8,Po,5,1,"div",96),n()()}if(t&2){let e=i;l(),d(e.logo_url?1:2),l(4),x(" ",e.name," "),l(3),d(e.slug?8:-1)}}function Mo(t,i){if(t&1&&(a(0,"p",5),o(1),n()),t&2){let e=c();l(),_(e.email)}}function Do(t,i){if(t&1&&(a(0,"div",51)(1,"div",100)(2,"mat-icon",97),o(3,"person"),n()(),a(4,"div",44)(5,"h3",101),o(6),n(),p(7,Mo,2,1,"p",5),a(8,"p",102),o(9,"Project Client"),n()()()),t&2){let e=i;l(6),Zt(" ",e.first_name," ",e.last_name," "),l(),d(e.email?7:-1)}}function Io(t,i){if(t&1&&(a(0,"div",59)(1,"p",57),o(2,"Deadline"),n(),a(3,"p",54),o(4),n()()),t&2){let e=c(2);l(4),_(e.formatDate(e.project().deadline))}}function Fo(t,i){if(t&1&&(a(0,"div",59)(1,"p",57),o(2,"Accepted"),n(),a(3,"p",54),o(4),n()()),t&2){let e=c(2);l(4),_(e.formatDate(e.project().accepted_at))}}function Ao(t,i){if(t&1&&(a(0,"div",59)(1,"p",57),o(2,"Completed"),n(),a(3,"p",54),o(4),n()()),t&2){let e=c(2);l(4),_(e.formatDate(e.project().completed_at))}}function Ro(t,i){if(t&1&&(a(0,"div",59)(1,"p",57),o(2,"Rejected"),n(),a(3,"p",54),o(4),n()()),t&2){let e=c(2);l(4),_(e.formatDate(e.project().rejected_at))}}function Bo(t,i){t&1&&(a(0,"div",105),h(1,"mat-spinner",107),a(2,"span",108),o(3,"Loading payment requests..."),n()())}function Vo(t,i){if(t&1&&(a(0,"p",112),o(1),n()),t&2){let e=c().$implicit;l(),_(e.payment_description)}}function Oo(t,i){if(t&1&&(a(0,"p",89),o(1),n()),t&2){let e=c().$implicit;l(),_(e.content)}}function No(t,i){if(t&1){let e=v();a(0,"div",113)(1,"button",114),u("click",function(){g(e);let s=c().$implicit,m=c(4);return f(m.approvePaymentRequest(s))}),a(2,"mat-icon",77),o(3,"check"),n(),o(4," Approve & Pay "),n(),a(5,"button",115),u("click",function(){g(e);let s=c().$implicit,m=c(4);return f(m.rejectPaymentRequest(s))}),a(6,"mat-icon",77),o(7,"close"),n(),o(8," Reject "),n()()}}function Lo(t,i){if(t&1&&(a(0,"div",109)(1,"div",110)(2,"div",44)(3,"div",80)(4,"span"),o(5),I(6,"titlecase"),n(),a(7,"span",74),o(8),n()(),a(9,"h4",111),o(10),I(11,"currency"),n(),p(12,Vo,2,1,"p",112)(13,Oo,2,1,"p",89),n()(),p(14,No,9,0,"div",113),n()),t&2){let e=i.$implicit,r=c(4);l(4),k("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+r.getPaymentStatusColor(e.payment_status||"pending")),l(),x(" ",F(6,8,e.payment_status||"pending")," "),l(3),_(r.formatPaymentTime(e.createdAt)),l(2),x(" ",At(11,10,e.payment_amount,"USD","symbol","1.0-0")," "),l(2),d(e.payment_description?12:-1),l(),d(e.content?13:-1),l(),d(e.payment_status==="pending"?14:-1)}}function $o(t,i){if(t&1&&P(0,Lo,15,15,"div",109,mn),t&2){let e=c(3);T(e.pendingPaymentRequests())}}function qo(t,i){t&1&&(a(0,"div",106)(1,"mat-icon",116),o(2,"payment"),n(),a(3,"p",89),o(4,"No pending payment requests"),n()())}function Uo(t,i){if(t&1&&(a(0,"div",41)(1,"div",53)(2,"h3",103)(3,"mat-icon",104),o(4,"payment"),n(),o(5," Payment Requests "),n()(),a(6,"div",60),p(7,Bo,4,0,"div",105)(8,$o,2,0)(9,qo,5,0,"div",106),n()()),t&2){let e=c(2);l(7),d(e.loadingPaymentRequests()?7:8),l(2),d(!e.loadingPaymentRequests()&&e.pendingPaymentRequests().length===0?9:-1)}}function zo(t,i){t&1&&(a(0,"div",105),h(1,"mat-spinner",107),a(2,"span",108),o(3,"Loading payment history..."),n()())}function Go(t,i){if(t&1&&(a(0,"p",122),o(1),n()),t&2){let e=c().$implicit;l(),_(e.payment_description)}}function Wo(t,i){if(t&1&&(a(0,"p",99),o(1),n()),t&2){let e=c().$implicit;l(),_(e.content)}}function Ho(t,i){t&1&&(a(0,"mat-icon",124),o(1,"check_circle"),n())}function Yo(t,i){t&1&&(a(0,"mat-icon",125),o(1,"cancel"),n())}function Qo(t,i){t&1&&(a(0,"mat-icon",126),o(1,"schedule"),n())}function Xo(t,i){if(t&1){let e=v();a(0,"div",113)(1,"button",114),u("click",function(){g(e);let s=c().$implicit,m=c(4);return f(m.approvePaymentRequest(s))}),a(2,"mat-icon",77),o(3,"check"),n(),o(4," Approve & Pay "),n(),a(5,"button",115),u("click",function(){g(e);let s=c().$implicit,m=c(4);return f(m.rejectPaymentRequest(s))}),a(6,"mat-icon",77),o(7,"close"),n(),o(8," Reject "),n()()}}function Zo(t,i){if(t&1&&(a(0,"div",120)(1,"div",110)(2,"div",44)(3,"div",80)(4,"span"),o(5),I(6,"titlecase"),n(),a(7,"span",74),o(8),n()(),a(9,"h4",121),o(10),I(11,"currency"),n(),p(12,Go,2,1,"p",122)(13,Wo,2,1,"p",99),n(),a(14,"div",123),p(15,Ho,2,0,"mat-icon",124)(16,Yo,2,0,"mat-icon",125)(17,Qo,2,0,"mat-icon",126),n()(),p(18,Xo,9,0,"div",113),n()),t&2){let e=i.$implicit,r=c(4);l(4),k("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+r.getPaymentStatusColor(e.payment_status||"pending")),l(),x(" ",F(6,9,e.payment_status||"pending")," "),l(3),_(r.formatPaymentTime(e.createdAt)),l(2),x(" ",At(11,11,e.payment_amount,"USD","symbol","1.0-0")," "),l(2),d(e.payment_description?12:-1),l(),d(e.content?13:-1),l(2),d(e.payment_status==="approved"?15:e.payment_status==="rejected"?16:17),l(3),d(e.payment_status==="pending"&&r.isClient()?18:-1)}}function Ko(t,i){if(t&1&&(a(0,"div",78),P(1,Zo,19,16,"div",120,mn),n()),t&2){let e=c(3);l(),T(e.paymentRequests())}}function Jo(t,i){t&1&&(a(0,"div",119)(1,"mat-icon",127),o(2,"payment"),n(),a(3,"p",89),o(4,"No payment requests have been made for this project"),n()())}function er(t,i){if(t&1&&(a(0,"div",41)(1,"div",53)(2,"h3",103)(3,"mat-icon",117),o(4,"history"),n(),o(5," Payment Request History "),n()(),a(6,"div",118),p(7,zo,4,0,"div",105)(8,Ko,3,0,"div",78)(9,Jo,5,0,"div",119),n()()),t&2){let e=c(2);l(7),d(e.loadingPaymentRequests()?7:8),l(2),d(!e.loadingPaymentRequests()&&e.paymentRequests().length===0?9:-1)}}function tr(t,i){if(t&1){let e=v();a(0,"div",14)(1,"div",40)(2,"div",41)(3,"div",42)(4,"div",43)(5,"div",44)(6,"h2",45),o(7),n(),a(8,"p",5),p(9,co,1,1)(10,mo,1,1),n()(),a(11,"div",46)(12,"span"),o(13),n()()()(),a(14,"div",47),p(15,po,5,1,"div")(16,_o,5,1,"div")(17,uo,5,2,"div")(18,fo,8,1,"div")(19,bo,8,1,"div")(20,yo,9,0,"div")(21,wo,7,1,"div",48),n()(),a(22,"div",41)(23,"div",42)(24,"h2",49),p(25,So,1,0)(26,Eo,1,0),n()(),a(27,"div",50),p(28,To,9,3,"div",51)(29,Do,10,3,"div",51),n()()(),a(30,"div",52)(31,"div",41)(32,"div",53)(33,"h3",54),o(34,"Project Details"),n()(),a(35,"div",55)(36,"div",56)(37,"p",57),o(38,"Budget"),n(),a(39,"p",58),o(40),n()(),p(41,Io,5,1,"div",59),a(42,"div",59)(43,"p",57),o(44,"Created"),n(),a(45,"p",54),o(46),n()(),p(47,Fo,5,1,"div",59)(48,Ao,5,1,"div",59)(49,Ro,5,1,"div",59),n()(),p(50,Uo,10,2,"div",41)(51,er,10,2,"div",41),a(52,"div",41)(53,"div",53)(54,"h3",54),o(55,"Actions"),n()(),a(56,"div",60)(57,"button",61),u("click",function(){g(e);let s=c();return f(s.goBack())}),a(58,"mat-icon",17),o(59,"arrow_back"),n(),o(60," Back to Projects "),n()()()()()}if(t&2){let e,r,s=c();l(7),_(s.project().title),l(2),d(s.isClient()?9:s.isBusinessOwner()?10:-1),l(3),k("inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold "+s.getStatusColor(s.project().status)),l(),x(" ",s.getStatusText(s.project().status)," "),l(2),d(s.project().description?15:-1),l(),d(s.project().additional_notes?16:-1),l(),d(s.project().image_url?17:-1),l(),d(s.project().attachments&&s.project().attachments.length>0?18:-1),l(),d(s.getServiceDetails(s.project()).length>0?19:20),l(2),d(s.project().rejection_reason?21:-1),l(4),d(s.isClient()?25:s.isBusinessOwner()?26:-1),l(3),d((e=s.isClient()&&s.getBusinessInfo(s.project()))?28:-1,e),l(),d((r=s.isBusinessOwner()&&s.getClientInfo(s.project()))?29:-1,r),l(11),_(s.formatPrice(s.project().offered_price)),l(),d(s.project().deadline?41:-1),l(5),_(s.formatDate(s.project().createdAt)),l(),d(s.project().accepted_at?47:-1),l(),d(s.project().completed_at?48:-1),l(),d(s.project().rejected_at?49:-1),l(),d(s.isClient()&&s.hasPendingPaymentRequests()?50:-1),l(),d(s.paymentRequests().length>0?51:-1)}}var bt=class t{route=C(ot);router=C(K);projectService=C(Se);authService=C(L);chatService=C(Wi);reviewService=C(Ni);dashboardRefreshService=C(Oi);dialog=C(xt);loading=S(!1);error=S(null);project=S(null);existingChat=S(null);chatUnreadCount=S(0);loadingChat=S(!1);paymentRequests=S([]);loadingPaymentRequests=S(!1);canLeaveReview=S(!1);existingReview=S(null);user=this.authService.user;isClient=E(()=>{let i=this.project(),e=this.user();if(!i||!e)return!1;let r=typeof i.client_id=="string"?i.client_id:i.client_id?._id;return e._id===r});isBusinessOwner=E(()=>{let i=this.project(),e=this.user();if(!i||!e)return!1;let r=typeof i.business_owner_id=="string"?i.business_owner_id:i.business_owner_id?._id;return e._id===r});pendingPaymentRequests=E(()=>this.paymentRequests().filter(i=>i.message_type==="payment_request"&&i.payment_status==="pending"));approvedPaymentRequests=E(()=>this.paymentRequests().filter(i=>i.message_type==="payment_request"&&i.payment_status==="approved"));rejectedPaymentRequests=E(()=>this.paymentRequests().filter(i=>i.message_type==="payment_request"&&i.payment_status==="rejected"));hasPendingPaymentRequests=E(()=>this.pendingPaymentRequests().length>0);hasPaymentHistory=E(()=>this.paymentRequests().length>0);reviewButtonText=E(()=>{let i=this.existingReview(),e=this.canLeaveReview();return i?`View Review (${i.rating}\u2B50)`:e?"Leave Review":""});showReviewButton=E(()=>{let i=this.canLeaveReview(),e=this.existingReview();return!!(i||e)});ngOnInit(){if(!this.user()){this.router.navigate(["/auth"]);return}let i=this.route.snapshot.params.id;if(!i){this.error.set("Project ID is required"),this.router.navigate(["/dashboard/projects"]);return}this.loadProject(i)}loadProject(i){return w(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let e=yield this.projectService.getProjectAsync(i);if(this.project.set(e),e.status==="accepted"||e.status==="in_progress"||e.status==="awaiting_client_approval"||e.status==="completed"){yield this.checkForExistingChat(i);let r=this.existingChat();r&&(yield this.loadPaymentRequests(r._id))}yield this.checkReviewEligibility(),console.log("Review service available:",!!this.reviewService)}catch(e){console.error("Error loading project:",e),this.error.set("Failed to load project details")}finally{this.loading.set(!1)}})}checkForExistingChat(i){return w(this,null,function*(){this.loadingChat.set(!0);try{let e=yield this.chatService.getChatByProjectIdAsync(i);if(this.existingChat.set(e),e){let r=yield this.chatService.getChatUnreadCountAsync(e._id);this.chatUnreadCount.set(r)}}catch(e){console.error("Error checking for existing chat:",e)}finally{this.loadingChat.set(!1)}})}loadPaymentRequests(i){return w(this,null,function*(){this.loadingPaymentRequests.set(!0);try{let r=(yield this.chatService.getChatMessagesAsync(i)).filter(s=>s.message_type==="payment_request");this.paymentRequests.set(r)}catch(e){console.error("Error loading payment requests:",e)}finally{this.loadingPaymentRequests.set(!1)}})}goBack(){this.router.navigate(["/dashboard/projects"])}acceptProject(){return w(this,null,function*(){let i=this.project();if(i)try{yield this.projectService.updateProjectAsync(i._id,{status:"accepted"}),this.loadProject(i._id),this.dashboardRefreshService.triggerRefresh()}catch(e){console.error("Error accepting project:",e),this.error.set("Failed to accept project")}})}rejectProject(){return w(this,null,function*(){let i=this.project();if(!i)return;let e=prompt("Please provide a reason for rejection:");if(e)try{yield this.projectService.updateProjectAsync(i._id,{status:"rejected",rejection_reason:e}),this.loadProject(i._id),this.dashboardRefreshService.triggerRefresh()}catch(r){console.error("Error rejecting project:",r),this.error.set("Failed to reject project")}})}markInProgress(){return w(this,null,function*(){let i=this.project();if(i)try{yield this.projectService.updateProjectAsync(i._id,{status:"in_progress"}),this.loadProject(i._id),this.dashboardRefreshService.triggerRefresh()}catch(e){console.error("Error marking project as in progress:",e),this.error.set("Failed to update project status")}})}markCompleted(){return w(this,null,function*(){let i=this.project();if(i)try{yield this.projectService.updateProjectAsync(i._id,{status:"completed"}),this.loadProject(i._id),this.dashboardRefreshService.triggerRefresh()}catch(e){console.error("Error marking project as completed:",e),this.error.set("Failed to update project status")}})}startChat(){return w(this,null,function*(){let i=this.project();if(i)try{let e=yield this.chatService.createOrGetChatAsync({project_id:i._id});this.router.navigate(["/dashboard/messages/chat",e._id])}catch(e){console.error("Error starting chat:",e),alert("Failed to start chat. Please try again.")}})}goToExistingChat(){return w(this,null,function*(){let i=this.existingChat();i&&this.router.navigate(["/dashboard/messages/chat",i._id])})}getStatusColor(i){return{pending:"bg-yellow-100 text-yellow-800 border-yellow-200",accepted:"bg-blue-100 text-blue-800 border-blue-200",in_progress:"bg-purple-100 text-purple-800 border-purple-200",awaiting_client_approval:"bg-orange-100 text-orange-800 border-orange-200",completed:"bg-green-100 text-green-800 border-green-200",rejected:"bg-red-100 text-red-800 border-red-200",cancelled:"bg-gray-100 text-gray-800 border-gray-200"}[i]||"bg-gray-100 text-gray-800 border-gray-200"}getStatusText(i){return{pending:"Pending",accepted:"Accepted",in_progress:"In Progress",awaiting_client_approval:"Awaiting Your Approval",completed:"Completed",rejected:"Rejected",cancelled:"Cancelled"}[i]||i}approveCompletion(){return w(this,null,function*(){let i=this.project();if(i)try{let e=this.existingChat();if(e){let s=(yield this.chatService.getChatMessagesAsync(e._id)).filter(m=>m.message_type==="completion_request"&&m.completion_status==="pending").sort((m,y)=>new Date(y.createdAt).getTime()-new Date(m.createdAt).getTime())[0];s&&(yield this.chatService.respondToCompletionRequestAsync(e._id,s._id,{status:"approved"}))}else yield this.projectService.updateProjectAsync(i._id,{status:"completed"});yield this.loadProject(i._id),yield this.checkReviewEligibility(),this.dashboardRefreshService.triggerRefresh()}catch(e){console.error("Error approving completion:",e),this.error.set("Failed to approve completion")}})}rejectCompletion(){return w(this,null,function*(){let i=this.project();if(!i)return;let e=prompt("Please provide a reason for rejecting the completion:");if(e)try{let r=this.existingChat();if(r){let m=(yield this.chatService.getChatMessagesAsync(r._id)).filter(y=>y.message_type==="completion_request"&&y.completion_status==="pending").sort((y,M)=>new Date(M.createdAt).getTime()-new Date(y.createdAt).getTime())[0];m&&(yield this.chatService.respondToCompletionRequestAsync(r._id,m._id,{status:"rejected",rejection_reason:e}))}else yield this.projectService.updateProjectAsync(i._id,{status:"in_progress"});yield this.loadProject(i._id),this.dashboardRefreshService.triggerRefresh()}catch(r){console.error("Error rejecting completion:",r),this.error.set("Failed to reject completion")}})}canApproveCompletion(){let i=this.project(),e=this.user();if(!i||!e)return!1;let r=typeof i.client_id=="string"?i.client_id:i.client_id?._id;return i.status==="awaiting_client_approval"&&r===e._id}approvePaymentRequest(i){return w(this,null,function*(){try{let e=this.existingChat(),r=this.project();if(!e||!r)return;let s=typeof r.business_id=="string"?"Business Owner":r.business_id?.name||"Business Owner";this.dialog.open(Hi,{width:"500px",disableClose:!0,data:{amount:i.payment_amount?.toString()||"0",description:i.payment_description||"Additional payment",businessName:s,chatId:e._id,messageId:i._id}}).afterClosed().subscribe(y=>w(this,null,function*(){if(y&&y.paymentIntentId)try{yield this.loadPaymentRequests(e._id),console.log("Payment approved successfully with method:",y.paymentMethod),console.log("Payment completed for amount:",y.amount)}catch(M){console.error("Error approving payment request:",M),this.error.set("Failed to approve payment request")}}))}catch(e){console.error("Error opening payment modal:",e),this.error.set("Failed to open payment modal")}})}rejectPaymentRequest(i){return w(this,null,function*(){let e=prompt("Please provide a reason for rejecting this payment request:");if(e)try{let r=this.existingChat();if(!r)return;yield this.chatService.respondToPaymentRequestAsync(r._id,i._id,{status:"rejected",rejection_reason:e}),yield this.loadPaymentRequests(r._id)}catch(r){console.error("Error rejecting payment request:",r),this.error.set("Failed to reject payment request")}})}getPaymentStatusColor(i){return{pending:"bg-yellow-100 text-yellow-800 border-yellow-200",approved:"bg-green-100 text-green-800 border-green-200",payment_pending:"bg-blue-100 text-blue-800 border-blue-200",paid:"bg-green-100 text-green-800 border-green-200",rejected:"bg-red-100 text-red-800 border-red-200"}[i]||"bg-gray-100 text-gray-800 border-gray-200"}formatPaymentTime(i){let e=new Date(i),s=Math.floor((new Date().getTime()-e.getTime())/1e3);return s<60?"just now":s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:e.toLocaleDateString()}formatPrice(i){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(i)}formatDate(i){if(!i)return"Not set";try{return(typeof i=="string"?new Date(i):i).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Unknown"}}getBusinessName(i){return typeof i.business_id=="object"&&i.business_id.name?i.business_id.name:"Unknown Business"}getClientName(i){if(typeof i.client_id=="object"){let e=i.client_id;return`${e.first_name} ${e.last_name}`}return"Unknown Client"}getServiceNames(i){return i.selected_services&&Array.isArray(i.selected_services)?i.selected_services.map(e=>{if(typeof e=="object"&&e!==null){if("name"in e&&e.name)return e.name;if("service_id"in e&&typeof e.service_id=="object"&&e.service_id!==null&&"name"in e.service_id)return e.service_id.name}return typeof e=="string"?"Service Details Available":"Unknown Service"}):[]}getServiceDetails(i){return i.selected_services&&Array.isArray(i.selected_services)?i.selected_services.map(e=>typeof e=="object"&&e!==null&&"_id"in e?{name:e.name||"Unnamed Service",price:e.price,pricing_type:e.pricing_type,description:e.short_description||e.description}:typeof e=="string"?{name:"Service Details Not Available",price:void 0,pricing_type:void 0,description:`Service ID: ${e} - Please contact support if this persists`}:{name:"Unknown Service Format",price:void 0,pricing_type:void 0,description:"Service data structure not recognized"}):[]}formatServicePrice(i,e){if(!i)return"Price not specified";let r=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(i);if(!e)return r;switch(e.toLowerCase()){case"fixed":return`${r} (Fixed)`;case"hourly":return`${r}/hour`;case"daily":return`${r}/day`;case"weekly":return`${r}/week`;case"monthly":return`${r}/month`;case"per_project":return`${r} (Per Project)`;default:return`${r} (${e})`}}navigateToBusinessProfile(i){i&&this.router.navigate(["/business",i])}getBusinessInfo(i){return typeof i.business_id=="object"&&i.business_id?{name:i.business_id.name||"Unknown Business",logo_url:i.business_id.logo_url,slug:i.business_id.slug}:null}getClientInfo(i){return typeof i.client_id=="object"&&i.client_id?{first_name:i.client_id.first_name||"Unknown",last_name:i.client_id.last_name||"Client",email:i.client_id.email}:null}formatFileSize(i){if(i===0)return"0 Bytes";let e=1024,r=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(i)/Math.log(e));return parseFloat((i/Math.pow(e,s)).toFixed(2))+" "+r[s]}getFileIcon(i){return i.startsWith("image/")?"image":i.includes("pdf")?"picture_as_pdf":i.includes("word")||i.includes("document")?"description":i.includes("sheet")||i.includes("excel")?"table_chart":i.includes("presentation")||i.includes("powerpoint")?"slideshow":i.includes("text")?"text_snippet":"attach_file"}navigateToChat(){return w(this,null,function*(){let i=this.project();if(i)try{let e=this.existingChat();e||(e=yield this.chatService.createOrGetChatAsync({project_id:i._id}),this.existingChat.set(e)),e&&this.router.navigate(["/dashboard/messages/chat",e._id])}catch(e){console.error("Error navigating to chat:",e),this.error.set("Failed to open chat. Please try again.")}})}checkReviewEligibility(){return w(this,null,function*(){let i=this.user(),e=this.project();if(!i||!e){this.canLeaveReview.set(!1),this.existingReview.set(null);return}let r=typeof e.client_id=="string"?e.client_id:e.client_id?._id,s=i._id===r,m=e.status==="completed";if(!s||!m){this.canLeaveReview.set(!1),this.existingReview.set(null);return}try{let y=typeof e.business_id=="string"?e.business_id:e.business_id._id,O=(yield this.reviewService.getBusinessReviewsAsync(y)).find(Q=>Q.project_id._id===e._id&&Q.user_id._id===i._id);O?(this.canLeaveReview.set(!1),this.existingReview.set(O)):(this.canLeaveReview.set(!0),this.existingReview.set(null))}catch(y){console.error("Error checking review eligibility:",y),this.canLeaveReview.set(!1),this.existingReview.set(null)}})}handleReviewAction(){this.existingReview()?this.viewExistingReview():this.canLeaveReview()&&this.openReviewDialog()}openReviewDialog(){return w(this,null,function*(){let i=this.project();if(!i)return;let e=typeof i.business_id=="string"?i.business_id:i.business_id._id,r=typeof i.business_id=="object"&&i.business_id.name?i.business_id.name:"Business";this.dialog.open(Yi,{width:"600px",data:{businessId:e,projectId:i._id,businessName:r,projectTitle:i.title}}).afterClosed().subscribe(m=>w(this,null,function*(){m&&(console.log("Review submitted successfully"),yield this.checkReviewEligibility())}))})}viewExistingReview(){let i=this.existingReview();if(!i)return;let e=["Your Review for this Project","",`Overall Rating: ${i.rating}/5 \u2B50`,"","Detailed Ratings:",`\u2022 Service Quality: ${i.service_quality||"N/A"}/5`,`\u2022 Communication: ${i.communication||"N/A"}/5`,`\u2022 Timeliness: ${i.timeliness||"N/A"}/5`,`\u2022 Value for Money: ${i.value_for_money||"N/A"}/5`,"",`Comment: ${i.comment||"No comment provided"}`,"",`Submitted: ${new Date(i.createdAt).toLocaleDateString()}`].join(`
`);alert(e)}testReviewEligibility(){return w(this,null,function*(){console.log("=== Manual Review Eligibility Test ==="),yield this.checkReviewEligibility(),console.log("Current state after test:",{canLeaveReview:this.canLeaveReview(),existingReview:this.existingReview(),showReviewButton:this.showReviewButton()})})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=D({type:t,selectors:[["app-project-details"]],decls:23,vars:10,consts:[[1,"min-h-screen","bg-gray-50","py-8","px-4","sm:px-6","lg:px-8"],[1,"max-w-7xl","mx-auto"],[1,"flex","items-center","justify-between","mb-8"],[1,"flex","items-center","space-x-4"],["mat-icon-button","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","bg-white","shadow-sm","border","border-gray-200","hover:bg-gray-50","transition-colors",3,"click"],[1,"text-gray-600"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"flex","items-center","space-x-3"],[1,"p-6","bg-gray-50","border-b","border-gray-200"],[1,"p-6","bg-orange-50","border-b","border-orange-200"],[1,"p-6","bg-yellow-50","border-b","border-yellow-200"],[1,"mb-8","bg-red-50","border-l-4","border-red-400","p-6","rounded-r-lg","shadow-sm"],[1,"flex","flex-col","items-center","justify-center","py-20"],[1,"grid","grid-cols-1","xl:grid-cols-3","gap-8"],["mat-raised-button","","disabled","",1,"px-6","py-3","text-base","font-semibold","rounded-lg"],["mat-raised-button","","color","primary",1,"px-6","py-3","text-base","font-semibold","rounded-lg","relative"],[1,"mr-2"],["mat-raised-button","","color","primary",1,"px-6","py-3","text-base","font-semibold","rounded-lg","relative",3,"click"],[1,"absolute","-top-2","-right-2","bg-red-500","text-white","text-xs","font-bold","rounded-full","h-6","w-6","flex","items-center","justify-center"],["mat-raised-button","","color","primary",1,"px-6","py-3","text-base","font-semibold","rounded-lg"],["mat-raised-button","","color","primary",1,"px-6","py-3","text-base","font-semibold","rounded-lg",3,"click"],[1,"flex","items-center","px-6","py-3","bg-blue-600","hover:bg-blue-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[1,"mr-2","w-5","h-5"],[1,"ml-2","bg-red-500","text-white","text-xs","rounded-full","px-2","py-1","min-w-[20px]","h-5","flex","items-center","justify-center"],[1,"flex","items-center","px-6","py-3","bg-green-600","hover:bg-green-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[1,"flex","items-center","px-6","py-3","bg-red-600","hover:bg-red-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[1,"flex","items-center","px-6","py-3","bg-purple-600","hover:bg-purple-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"flex","flex-wrap","gap-3"],[1,"text-gray-700","mb-4"],[1,"flex","items-center","px-6","py-3","bg-yellow-600","hover:bg-yellow-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[1,"flex","items-start"],[1,"flex-shrink-0"],[1,"text-red-400","w-6","h-6"],[1,"ml-3"],[1,"text-lg","font-medium","text-red-800"],[1,"mt-2","text-red-700"],["diameter","48"],[1,"mt-4","text-lg","text-gray-600"],[1,"xl:col-span-2","space-y-8"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-200","overflow-hidden"],[1,"px-8","py-6","border-b","border-gray-200"],[1,"flex","items-start","justify-between"],[1,"flex-1"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"flex-shrink-0","ml-4"],[1,"px-8","py-6","space-y-6"],[1,"p-6","bg-red-50","border","border-red-200","rounded-xl"],[1,"text-xl","font-semibold","text-gray-900"],[1,"px-8","py-6"],[1,"flex","items-center","space-x-6"],[1,"space-y-8"],[1,"px-6","py-5","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900"],[1,"px-6","py-6","space-y-6"],[1,"text-center"],[1,"text-sm","font-medium","text-gray-500","uppercase","tracking-wide","mb-2"],[1,"text-3xl","font-bold","text-green-600"],[1,"pt-6","border-t","border-gray-200"],[1,"px-6","py-6","space-y-4"],["mat-stroked-button","",1,"w-full","h-12","text-base","font-semibold","rounded-lg","border-2","border-gray-300","text-gray-700","hover:bg-gray-50",3,"click"],[1,"text-lg","font-semibold","text-gray-900","mb-3"],[1,"text-gray-700","leading-relaxed","text-base"],[1,"rounded-lg","overflow-hidden","border","border-gray-200","max-w-md"],[1,"w-full","h-auto","object-cover",3,"src","alt"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"flex","items-center","justify-between","p-4","bg-gray-50","rounded-xl","border","border-gray-200","hover:bg-gray-100","hover:border-gray-300","transition-all","duration-200"],[1,"text-xs","text-gray-500","mt-3"],[1,"flex","items-center","space-x-3","flex-1","min-w-0"],[1,"p-3","bg-white","rounded-lg","shadow-sm","border","border-gray-200"],[1,"text-blue-600","w-6","h-6"],[1,"flex-1","min-w-0"],[1,"text-sm","font-semibold","text-gray-900","truncate"],[1,"text-xs","text-gray-500"],[1,"text-xs","text-gray-400","capitalize"],["target","_blank","rel","noopener noreferrer",1,"flex","items-center","px-4","py-2","text-sm","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors","shadow-sm","ml-3","flex-shrink-0",3,"href"],[1,"w-4","h-4","mr-1"],[1,"space-y-4"],[1,"bg-blue-50","border","border-blue-200","rounded-xl","p-5","hover:bg-blue-100","transition-colors"],[1,"flex","items-center","space-x-2","mb-2"],[1,"w-5","h-5","text-blue-600"],[1,"text-lg","font-semibold","text-blue-900"],[1,"text-sm","text-blue-700","mb-3","leading-relaxed"],[1,"inline-flex","items-center","px-3","py-1.5","bg-blue-200","text-blue-800","rounded-lg","text-sm","font-semibold"],[1,"inline-flex","items-center","px-3","py-1.5","bg-gray-200","text-gray-600","rounded-lg","text-sm"],[1,"p-4","bg-gray-50","rounded-xl","border","border-gray-200"],[1,"flex","items-center","space-x-2"],[1,"w-5","h-5","text-gray-400"],[1,"text-sm","text-gray-600"],[1,"text-lg","font-semibold","text-red-800","mb-2","flex","items-center"],[1,"w-5","h-5","mr-2","text-red-600"],[1,"text-red-700","leading-relaxed"],[1,"w-20","h-20","rounded-xl","object-cover","border","border-gray-200","shadow-sm",3,"src","alt"],[1,"w-20","h-20","rounded-xl","bg-gradient-to-br","from-blue-500","to-blue-600","flex","items-center","justify-center","border","border-gray-200","shadow-sm"],[1,"text-2xl","font-bold","text-blue-600","hover:text-blue-800","transition-colors","mb-1","text-left","cursor-pointer","underline-offset-4","hover:underline",3,"click"],[1,"mt-2","flex","items-center","space-x-2"],[1,"text-white","w-10","h-10"],[1,"w-4","h-4","text-gray-400"],[1,"text-sm","text-gray-500"],[1,"w-20","h-20","rounded-full","bg-gradient-to-br","from-indigo-400","to-indigo-600","flex","items-center","justify-center","shadow-sm"],[1,"text-2xl","font-bold","text-gray-900","mb-1"],[1,"text-sm","text-gray-500","mt-1"],[1,"text-lg","font-semibold","text-gray-900","flex","items-center"],[1,"mr-2","text-orange-600"],[1,"flex","items-center","justify-center","py-4"],[1,"text-center","py-4"],["diameter","24"],[1,"ml-2","text-sm","text-gray-600"],[1,"border","border-orange-200","rounded-lg","p-4","bg-orange-50"],[1,"flex","items-start","justify-between","mb-3"],[1,"font-semibold","text-lg","text-orange-900"],[1,"text-sm","text-orange-700","mb-2"],[1,"flex","gap-2","mt-4"],[1,"flex-1","px-4","py-2","bg-green-600","hover:bg-green-700","text-white","text-sm","font-medium","rounded-lg","transition-colors",3,"click"],[1,"flex-1","px-4","py-2","bg-red-600","hover:bg-red-700","text-white","text-sm","font-medium","rounded-lg","transition-colors",3,"click"],[1,"text-gray-400","mb-2"],[1,"mr-2","text-blue-600"],[1,"px-6","py-6"],[1,"text-center","py-8"],[1,"border","border-gray-200","rounded-lg","p-4"],[1,"font-semibold","text-lg","text-gray-900"],[1,"text-sm","text-gray-600","mb-2"],[1,"text-right"],[1,"text-green-600"],[1,"text-red-600"],[1,"text-yellow-600"],[1,"text-gray-400","mb-2",2,"font-size","48px","width","48px","height","48px"]],template:function(e,r){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),u("click",function(){return r.goBack()}),a(5,"mat-icon",5),o(6,"arrow_back"),n()(),a(7,"div")(8,"h1",6),o(9,"Project Details"),n(),a(10,"p",7),o(11,"View complete project information"),n()()(),a(12,"div",8),p(13,Ga,3,1)(14,Ha,13,1)(15,Qa,9,1)(16,Za,9,1),n(),p(17,to,10,2,"div",9)(18,no,19,1,"div",10)(19,ro,10,3,"div",11),n(),p(20,lo,10,1,"div",12)(21,so,4,0,"div",13)(22,tr,61,22,"div",14),n()()),e&2&&(l(13),d(r.project()&&(r.project().status==="accepted"||r.project().status==="in_progress"||r.project().status==="completed")?13:-1),l(),d(r.project()&&r.isBusinessOwner()&&r.project().status==="pending"?14:-1),l(),d(r.project()&&r.isBusinessOwner()&&r.project().status==="accepted"?15:-1),l(),d(r.project()&&r.isBusinessOwner()&&r.project().status==="in_progress"?16:-1),l(),d(r.project()&&r.isClient()&&Be(9,Fa).includes(r.project().status)?17:-1),l(),d(r.project()&&r.canApproveCompletion()?18:-1),l(),d(r.project()&&r.isClient()&&r.showReviewButton()?19:-1),l(),d(r.error()?20:-1),l(),d(r.loading()?21:r.project()?22:-1))},dependencies:[R,re,nt,V,B,ct,q,$,we,ye,W],styles:[".mat-mdc-raised-button.mat-primary{border-radius:.5rem!important}  .mat-mdc-outlined-button{border-radius:.5rem!important}  .mat-icon{width:auto!important;height:auto!important;font-size:inherit!important}  .mat-mdc-progress-spinner circle{stroke:#3b82f6}"]})};var yt=class t{notificationService=C(hi);ngOnInit(){console.log("Test Notifications Component loaded")}createTestProjectNotification(){let i={_id:"test-project-"+Date.now(),recipient_id:"current-user",title:"Test Project Created",message:"A new project has been created for your business.",type:"project_created",priority:"high",is_read:!1,is_seen:!1,project_id:{_id:"test-project-id",title:"Test Project",description:"This is a test project",status:"pending"},business_id:{_id:"test-business-id",name:"Test Business",logo_url:""},createdAt:new Date,updatedAt:new Date};this.notificationService.handleNewNotification(i),console.log("Test project notification created")}createTestMessageNotification(){let i={_id:"test-message-"+Date.now(),recipient_id:"current-user",title:"New Message",message:"You have received a new message.",type:"message_received",priority:"medium",is_read:!1,is_seen:!1,metadata:{chatId:"test-chat-id"},createdAt:new Date,updatedAt:new Date};this.notificationService.handleNewNotification(i),console.log("Test message notification created")}createTestSystemNotification(){let i={_id:"test-system-"+Date.now(),recipient_id:"current-user",title:"System Update",message:"The system has been updated with new features.",type:"system_announcement",priority:"low",is_read:!1,is_seen:!1,createdAt:new Date,updatedAt:new Date};this.notificationService.handleNewNotification(i),console.log("Test system notification created")}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=D({type:t,selectors:[["app-test-notifications"]],decls:10,vars:0,consts:[[1,"p-6"],[1,"text-xl","font-bold","mb-4"],[1,"space-y-2"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","mr-2",3,"click"],[1,"px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","mr-2",3,"click"],[1,"px-4","py-2","bg-purple-600","text-white","rounded-lg","hover:bg-purple-700",3,"click"]],template:function(e,r){e&1&&(a(0,"div",0)(1,"h2",1),o(2,"Test Notifications"),n(),a(3,"div",2)(4,"button",3),u("click",function(){return r.createTestProjectNotification()}),o(5," Create Test Project Notification "),n(),a(6,"button",4),u("click",function(){return r.createTestMessageNotification()}),o(7," Create Test Message Notification "),n(),a(8,"button",5),u("click",function(){return r.createTestSystemNotification()}),o(9," Create Test System Notification "),n()()())},dependencies:[R],encapsulation:2})};function ir(t,i){if(t&1){let e=v();a(0,"div",1)(1,"button",2),u("click",function(){g(e);let s=c();return f(s.action())}),o(2),n()()}if(t&2){let e=c();l(2),x(" ",e.data.action," ")}}var nr=["label"];function ar(t,i){}var or=Math.pow(2,31)-1,Ne=class{_overlayRef;instance;containerInstance;_afterDismissed=new X;_afterOpened=new X;_onAction=new X;_durationTimeoutId;_dismissedByAction=!1;constructor(i,e){this._overlayRef=e,this.containerInstance=i,i._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(i){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(i,or))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},pn=new De("MatSnackBarData"),Te=class{politeness="assertive";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},rr=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ie({type:t,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return t})(),lr=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ie({type:t,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return t})(),sr=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ie({type:t,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return t})(),_n=(()=>{class t{snackBarRef=C(Ne);data=C(pn);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=D({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(r,s){r&1&&(a(0,"div",0),o(1),n(),p(2,ir,3,1,"div",1)),r&2&&(l(),x(" ",s.data.message,`
`),l(),d(s.hasAction?2:-1))},dependencies:[B,rr,lr,sr],styles:[`.mat-mdc-simple-snack-bar{display:flex}
`],encapsulation:2,changeDetection:0})}return t})(),Vt="_mat-snack-bar-enter",Ot="_mat-snack-bar-exit",cr=(()=>{class t extends _i{_ngZone=C(Gt);_elementRef=C(Ze);_changeDetectorRef=C(it);_platform=C(oi);_rendersRef;_animationsDisabled=C(Ke,{optional:!0})==="NoopAnimations";snackBarConfig=C(Te);_document=C(ti);_trackedModals=new Set;_enterFallback;_exitFallback;_renders=new X;_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new X;_onExit=new X;_onEnter=new X;_animationState="void";_live;_label;_role;_liveElementId=C(st).getId("mat-snack-bar-container-live-");constructor(){super();let e=this.snackBarConfig;e.politeness==="assertive"&&!e.announcementMessage?this._live="assertive":e.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert")),this._rendersRef=Wt(()=>this._renders.next(),{manualCleanup:!0})}attachComponentPortal(e){this._assertNotAttached();let r=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),r}attachTemplatePortal(e){this._assertNotAttached();let r=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),r}attachDomPortal=e=>{this._assertNotAttached();let r=this._portalOutlet.attachDomPortal(e);return this._afterPortalAttached(),r};onAnimationEnd(e){e===Ot?this._completeExit():e===Vt&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?this._renders.pipe(Mt(1)).subscribe(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(Vt)))}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(Vt)},200)))}exit(){return this._destroyed?Nt(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?this._renders.pipe(Mt(1)).subscribe(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(Ot)))}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(Ot),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit(),this._renders.complete(),this._rendersRef.destroy()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let e=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(y=>e.classList.add(y)):e.classList.add(r)),this._exposeToModals();let s=this._label.nativeElement,m="mdc-snackbar__label";s.classList.toggle(m,!s.querySelector(`.${m}`))}_exposeToModals(){let e=this._liveElementId,r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let s=0;s<r.length;s++){let m=r[s],y=m.getAttribute("aria-owns");this._trackedModals.add(m),y?y.indexOf(e)===-1&&m.setAttribute("aria-owns",y+" "+e):m.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{let r=e.getAttribute("aria-owns");if(r){let s=r.replace(this._liveElementId,"").trim();s.length>0?e.setAttribute("aria-owns",s):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;let e=this._elementRef.nativeElement,r=e.querySelector("[aria-hidden]"),s=e.querySelector("[aria-live]");if(r&&s){let m=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&r.contains(document.activeElement)&&(m=document.activeElement),r.removeAttribute("aria-hidden"),s.appendChild(r),m?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=D({type:t,selectors:[["mat-snack-bar-container"]],viewQuery:function(r,s){if(r&1&&(Fe(Bt,7),Fe(nr,7)),r&2){let m;Ae(m=Re())&&(s._portalOutlet=m.first),Ae(m=Re())&&(s._label=m.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(r,s){r&1&&u("animationend",function(y){return s.onAnimationEnd(y.animationName)})("animationcancel",function(y){return s.onAnimationEnd(y.animationName)}),r&2&&Z("mat-snack-bar-container-enter",s._animationState==="visible")("mat-snack-bar-container-exit",s._animationState==="hidden")("mat-snack-bar-container-animations-enabled",!s._animationsDisabled)},features:[Ft],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(r,s){r&1&&(a(0,"div",1)(1,"div",2,0)(3,"div",3),p(4,ar,0,0,"ng-template",4),n(),h(5,"div"),n()()),r&2&&(l(5),oe("aria-live",s._live)("role",s._role)("id",s._liveElementId))},dependencies:[Bt],styles:[`@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mdc-snackbar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mdc-snackbar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mdc-snackbar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mdc-snackbar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mdc-snackbar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mdc-snackbar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mdc-snackbar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}
`],encapsulation:2})}return t})();function dr(){return new Te}var mr=new De("mat-snack-bar-default-options",{providedIn:"root",factory:dr}),ie=(()=>{class t{_overlay=C(fi);_live=C(ci);_injector=C(Xe);_breakpointObserver=C(si);_parentSnackBar=C(t,{optional:!0,skipSelf:!0});_defaultConfig=C(mr);_snackBarRefAtThisLevel=null;simpleSnackBarComponent=_n;snackBarContainerComponent=cr;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(){}openFromComponent(e,r){return this._attach(e,r)}openFromTemplate(e,r){return this._attach(e,r)}open(e,r="",s){let m=ae(ae({},this._defaultConfig),s);return m.data={message:e,action:r},m.announcementMessage===e&&(m.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,m)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,r){let s=r&&r.viewContainerRef&&r.viewContainerRef.injector,m=Xe.create({parent:s||this._injector,providers:[{provide:Te,useValue:r}]}),y=new Rt(this.snackBarContainerComponent,r.viewContainerRef,m),M=e.attach(y);return M.instance.snackBarConfig=r,M.instance}_attach(e,r){let s=ae(ae(ae({},new Te),this._defaultConfig),r),m=this._createOverlay(s),y=this._attachSnackBarContainer(m,s),M=new Ne(y,m);if(e instanceof Ht){let O=new pi(e,null,{$implicit:s.data,snackBarRef:M});M.instance=y.attachTemplatePortal(O)}else{let O=this._createInjector(s,M),Q=new Rt(e,void 0,O),ne=y.attachComponentPortal(Q);M.instance=ne.instance}return this._breakpointObserver.observe(Mi.HandsetPortrait).pipe(Lt(m.detachments())).subscribe(O=>{m.overlayElement.classList.toggle(this.handsetCssClass,O.matches)}),s.announcementMessage&&y._onAnnounce.subscribe(()=>{this._live.announce(s.announcementMessage,s.politeness)}),this._animateSnackBar(M,s),this._openedSnackBarRef=M,this._openedSnackBarRef}_animateSnackBar(e,r){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),r.duration&&r.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(r.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter()}_createOverlay(e){let r=new gi;r.direction=e.direction;let s=this._overlay.position().global(),m=e.direction==="rtl",y=e.horizontalPosition==="left"||e.horizontalPosition==="start"&&!m||e.horizontalPosition==="end"&&m,M=!y&&e.horizontalPosition!=="center";return y?s.left("0"):M?s.right("0"):s.centerHorizontally(),e.verticalPosition==="top"?s.top("0"):s.bottom("0"),r.positionStrategy=s,this._overlay.create(r)}_createInjector(e,r){let s=e&&e.viewContainerRef&&e.viewContainerRef.injector;return Xe.create({parent:s||this._injector,providers:[{provide:Ne,useValue:r},{provide:pn,useValue:e.data}]})}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Me=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Je({type:t});static \u0275inj=Qe({providers:[ie],imports:[xi,ui,V,le,_n,le]})}return t})();var un=(t,i)=>i.code,pr=(t,i)=>i.name;function _r(t,i){t&1&&(a(0,"mat-error"),o(1,"First name is required"),n())}function ur(t,i){t&1&&(a(0,"mat-error"),o(1,"Last name is required"),n())}function gr(t,i){t&1&&(a(0,"mat-error"),o(1,"Email is required"),n())}function fr(t,i){t&1&&(a(0,"mat-error"),o(1,"Please enter a valid email"),n())}function xr(t,i){t&1&&(a(0,"mat-error"),o(1,"Phone number is required"),n())}function hr(t,i){if(t&1&&(a(0,"mat-error"),o(1),n()),t&2){let e=c();l(),_(e.phone==null||e.phone.errors==null||e.phone.errors.usaPhone==null?null:e.phone.errors.usaPhone.message)}}function Cr(t,i){if(t&1&&(a(0,"mat-option",20),o(1),n()),t&2){let e=i.$implicit;b("value",e.code),l(),_(e.name)}}function vr(t,i){t&1&&(a(0,"mat-error"),o(1,"State is required"),n())}function br(t,i){t&1&&(a(0,"mat-option",22),o(1,"Please select a state first"),n())}function yr(t,i){if(t&1&&(a(0,"mat-option",20),o(1),n()),t&2){let e=i.$implicit;b("value",e.name),l(),_(e.name)}}function wr(t,i){t&1&&(a(0,"mat-error"),o(1,"City is required"),n())}function Sr(t,i){if(t&1&&(a(0,"mat-option",20),o(1),n()),t&2){let e=i.$implicit;b("value",e.code),l(),_(e.name)}}function Er(t,i){t&1&&(a(0,"mat-error"),o(1,"Country of origin is required"),n())}function kr(t,i){t&1&&(a(0,"mat-icon",28),o(1,"refresh"),n())}function jr(t,i){t&1&&(a(0,"mat-error"),o(1,"Current password is required"),n())}function Pr(t,i){t&1&&(a(0,"mat-error"),o(1,"New password is required"),n())}function Tr(t,i){t&1&&(a(0,"mat-error"),o(1,"Password must be at least 6 characters"),n())}function Mr(t,i){t&1&&(a(0,"mat-error"),o(1,"Please confirm your password"),n())}function Dr(t,i){t&1&&(a(0,"mat-error"),o(1,"Passwords do not match"),n())}function Ir(t,i){t&1&&(a(0,"mat-icon",28),o(1,"refresh"),n())}var wt=class t{authService=C(L);fb=C(pe);snackBar=C(ie);citiesService=C(ki);user=this.authService.user;isLoading=S(!1);countries=wi;usStates=Ti;availableCities=S([]);profileForm;passwordForm;constructor(){let i=this.user();this.profileForm=this.fb.group({first_name:[i?.first_name||"",[N.required]],last_name:[i?.last_name||"",[N.required]],email:[i?.email||"",[N.required,N.email]],phone:[i?.phone||"",[N.required,ji.usaPhone()]],bio:[i?.bio||""],city:[i?.city||"",[N.required]],state:[i?.state||"",[N.required]],country:[{value:i?.country||"USA",disabled:!0}],country_of_origin:[i?.country_of_origin||"",[N.required]]}),i?.state&&(this.onStateSelected(i.state,!0),i?.city&&setTimeout(()=>{this.citiesService.getCitiesByState(i.state).some(s=>s.name===i.city)?this.profileForm.patchValue({city:i.city}):(console.warn(`City "${i.city}" not found in state "${i.state}"`),this.profileForm.patchValue({city:""}))},0)),this.passwordForm=this.fb.group({currentPassword:["",[N.required]],newPassword:["",[N.required,N.minLength(6)]],confirmPassword:["",[N.required]]},{validators:this.passwordMatchValidator})}onStateSelected(i,e=!1){if(i){let r=this.citiesService.getCitiesByState(i);this.availableCities.set(r),e||this.profileForm.patchValue({city:""})}else this.availableCities.set([])}displayCity(i){return i?i.name:""}passwordMatchValidator(i){let e=i.get("newPassword"),r=i.get("confirmPassword");return e&&r&&e.value!==r.value?r.setErrors({mismatch:!0}):r?.setErrors(null),null}updateProfile(){return w(this,null,function*(){if(this.profileForm.invalid){this.snackBar.open("Please fill in all required fields correctly","Close",{duration:3e3,panelClass:["error-snackbar"]});return}this.isLoading.set(!0);try{let i=this.profileForm.value,e=yield this.authService.updateProfile(i);if(e.error)throw e.error;this.snackBar.open("Profile updated successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]})}catch(i){this.snackBar.open(i?.message||"Failed to update profile. Please try again.","Close",{duration:3e3,panelClass:["error-snackbar"]})}finally{this.isLoading.set(!1)}})}updatePassword(){return w(this,null,function*(){if(this.passwordForm.invalid){this.snackBar.open("Please fill in all fields correctly","Close",{duration:3e3,panelClass:["error-snackbar"]});return}this.isLoading.set(!0);try{let{currentPassword:i,newPassword:e}=this.passwordForm.value;this.passwordForm.reset(),this.snackBar.open("Password updated successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]})}catch{this.snackBar.open("Failed to update password. Please try again.","Close",{duration:3e3,panelClass:["error-snackbar"]})}finally{this.isLoading.set(!1)}})}getUserInitials(){let i=this.user();if(!i)return"";if(i.first_name||i.last_name){let e=i.first_name?.charAt(0).toUpperCase()||"",r=i.last_name?.charAt(0).toUpperCase()||"";return e+r}return i.email.charAt(0).toUpperCase()}get phone(){return this.profileForm.get("phone")}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=D({type:t,selectors:[["app-profile"]],decls:135,vars:25,consts:[[1,"max-w-4xl","mx-auto","p-6"],[1,"mb-8"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"profile-tabs"],["label","Profile Information"],[1,"tab-content"],[1,"profile-card"],[1,"flex","items-center","space-x-4","mb-6"],[1,"w-16","h-16","bg-blue-600","text-white","rounded-full","flex","items-center","justify-center","text-xl","font-bold"],[1,"text-xl","font-semibold"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline",1,"w-full"],["matInput","","formControlName","first_name","placeholder","Enter your first name"],["matSuffix",""],["matInput","","formControlName","last_name","placeholder","Enter your last name"],["matInput","","formControlName","email","type","email","placeholder","Enter your email"],["matInput","","formControlName","phone","placeholder","(555) 123-4567","type","tel","appPhoneFormat",""],["formControlName","state",3,"selectionChange"],[3,"value"],["formControlName","city",3,"disabled"],["disabled",""],["matInput","","formControlName","country","readonly",""],["formControlName","country_of_origin"],["matInput","","formControlName","bio","rows","4","placeholder","Tell us about yourself"],[1,"flex","justify-end","pt-4"],["mat-raised-button","","color","primary","type","submit",1,"px-8",3,"disabled"],[1,"animate-spin","mr-2"],["label","Change Password"],[1,"password-card"],["matInput","","formControlName","currentPassword","type","password","placeholder","Enter current password"],["matInput","","formControlName","newPassword","type","password","placeholder","Enter new password"],["matInput","","formControlName","confirmPassword","type","password","placeholder","Confirm new password"]],template:function(e,r){if(e&1&&(a(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"Profile Settings"),n(),a(4,"p",3),o(5,"Manage your account information and settings"),n()(),a(6,"mat-tab-group",4)(7,"mat-tab",5)(8,"div",6)(9,"mat-card",7)(10,"mat-card-header")(11,"div",8)(12,"div",9),o(13),n(),a(14,"div")(15,"h2",10),o(16),n(),a(17,"p",3),o(18),n()()()(),a(19,"mat-card-content")(20,"form",11),u("ngSubmit",function(){return r.updateProfile()}),a(21,"div",12)(22,"mat-form-field",13)(23,"mat-label"),o(24,"First Name *"),n(),h(25,"input",14),a(26,"mat-icon",15),o(27,"person"),n(),p(28,_r,2,0,"mat-error"),n(),a(29,"mat-form-field",13)(30,"mat-label"),o(31,"Last Name *"),n(),h(32,"input",16),a(33,"mat-icon",15),o(34,"person"),n(),p(35,ur,2,0,"mat-error"),n(),a(36,"mat-form-field",13)(37,"mat-label"),o(38,"Email"),n(),h(39,"input",17),a(40,"mat-icon",15),o(41,"email"),n(),p(42,gr,2,0,"mat-error")(43,fr,2,0,"mat-error"),n(),a(44,"mat-form-field",13)(45,"mat-label"),o(46,"Phone *"),n(),h(47,"input",18),a(48,"mat-icon",15),o(49,"phone"),n(),p(50,xr,2,0,"mat-error")(51,hr,2,1,"mat-error"),n(),a(52,"mat-form-field",13)(53,"mat-label"),o(54,"State *"),n(),a(55,"mat-select",19),u("selectionChange",function(m){return r.onStateSelected(m.value)}),P(56,Cr,2,2,"mat-option",20,un),n(),a(58,"mat-icon",15),o(59,"map"),n(),p(60,vr,2,0,"mat-error"),n(),a(61,"mat-form-field",13)(62,"mat-label"),o(63,"City *"),n(),a(64,"mat-select",21),p(65,br,2,0,"mat-option",22),P(66,yr,2,2,"mat-option",20,pr),n(),a(68,"mat-icon",15),o(69,"location_city"),n(),p(70,wr,2,0,"mat-error"),n(),a(71,"mat-form-field",13)(72,"mat-label"),o(73,"Country"),n(),h(74,"input",23),a(75,"mat-icon",15),o(76,"flag"),n(),a(77,"mat-hint"),o(78,"Country is set to USA by default"),n()(),a(79,"mat-form-field",13)(80,"mat-label"),o(81,"Country of Origin"),n(),a(82,"mat-select",24),P(83,Sr,2,2,"mat-option",20,un),n(),a(85,"mat-icon",15),o(86,"home"),n(),p(87,Er,2,0,"mat-error"),n()(),a(88,"mat-form-field",13)(89,"mat-label"),o(90,"Bio"),n(),h(91,"textarea",25),a(92,"mat-icon",15),o(93,"description"),n()(),a(94,"div",26)(95,"button",27),p(96,kr,2,0,"mat-icon",28),o(97," Update Profile "),n()()()()()()(),a(98,"mat-tab",29)(99,"div",6)(100,"mat-card",30)(101,"mat-card-header")(102,"mat-card-title"),o(103,"Change Password"),n(),a(104,"mat-card-subtitle"),o(105,"Update your account password"),n()(),a(106,"mat-card-content")(107,"form",11),u("ngSubmit",function(){return r.updatePassword()}),a(108,"mat-form-field",13)(109,"mat-label"),o(110,"Current Password"),n(),h(111,"input",31),a(112,"mat-icon",15),o(113,"lock"),n(),p(114,jr,2,0,"mat-error"),n(),a(115,"mat-form-field",13)(116,"mat-label"),o(117,"New Password"),n(),h(118,"input",32),a(119,"mat-icon",15),o(120,"lock_outline"),n(),p(121,Pr,2,0,"mat-error")(122,Tr,2,0,"mat-error"),n(),a(123,"mat-form-field",13)(124,"mat-label"),o(125,"Confirm New Password"),n(),h(126,"input",33),a(127,"mat-icon",15),o(128,"lock_outline"),n(),p(129,Mr,2,0,"mat-error")(130,Dr,2,0,"mat-error"),n(),a(131,"div",26)(132,"button",27),p(133,Ir,2,0,"mat-icon",28),o(134," Update Password "),n()()()()()()()()()),e&2){let s,m,y,M,O,Q,ne,$e,qe,Ue,ze,Ge,We,He;l(13),x(" ",r.getUserInitials()," "),l(3),_((((s=r.user())==null?null:s.first_name)+" "+(((s=r.user())==null?null:s.last_name)||"")).trim()||((s=r.user())==null?null:s.email)),l(2),_((m=r.user())==null?null:m.email),l(2),b("formGroup",r.profileForm),l(8),d((y=r.profileForm.get("first_name"))!=null&&y.hasError("required")&&((y=r.profileForm.get("first_name"))!=null&&y.touched)?28:-1),l(7),d((M=r.profileForm.get("last_name"))!=null&&M.hasError("required")&&((M=r.profileForm.get("last_name"))!=null&&M.touched)?35:-1),l(7),d((O=r.profileForm.get("email"))!=null&&O.hasError("required")&&((O=r.profileForm.get("email"))!=null&&O.touched)?42:-1),l(),d((Q=r.profileForm.get("email"))!=null&&Q.hasError("email")&&((Q=r.profileForm.get("email"))!=null&&Q.touched)?43:-1),l(7),d(r.phone!=null&&r.phone.hasError("required")&&(r.phone!=null&&r.phone.touched)?50:-1),l(),d(r.phone!=null&&r.phone.hasError("usaPhone")&&(r.phone!=null&&r.phone.touched)?51:-1),l(5),T(r.usStates),l(4),d((ne=r.profileForm.get("state"))!=null&&ne.hasError("required")&&((ne=r.profileForm.get("state"))!=null&&ne.touched)?60:-1),l(4),b("disabled",r.availableCities().length===0),l(),d(r.availableCities().length===0?65:-1),l(),T(r.availableCities()),l(4),d(($e=r.profileForm.get("city"))!=null&&$e.hasError("required")&&(($e=r.profileForm.get("city"))!=null&&$e.touched)?70:-1),l(13),T(r.countries),l(4),d((qe=r.profileForm.get("country_of_origin"))!=null&&qe.hasError("required")&&((qe=r.profileForm.get("country_of_origin"))!=null&&qe.touched)?87:-1),l(8),b("disabled",r.isLoading()||r.profileForm.invalid),l(),d(r.isLoading()?96:-1),l(11),b("formGroup",r.passwordForm),l(7),d((Ue=r.passwordForm.get("currentPassword"))!=null&&Ue.hasError("required")&&((Ue=r.passwordForm.get("currentPassword"))!=null&&Ue.touched)?114:-1),l(7),d((ze=r.passwordForm.get("newPassword"))!=null&&ze.hasError("required")&&((ze=r.passwordForm.get("newPassword"))!=null&&ze.touched)?121:-1),l(),d((Ge=r.passwordForm.get("newPassword"))!=null&&Ge.hasError("minlength")&&((Ge=r.passwordForm.get("newPassword"))!=null&&Ge.touched)?122:-1),l(7),d((We=r.passwordForm.get("confirmPassword"))!=null&&We.hasError("required")&&((We=r.passwordForm.get("confirmPassword"))!=null&&We.touched)?129:-1),l(),d((He=r.passwordForm.get("confirmPassword"))!=null&&He.hasError("mismatch")&&((He=r.passwordForm.get("confirmPassword"))!=null&&He.touched)?130:-1),l(2),b("disabled",r.isLoading()||r.passwordForm.invalid),l(),d(r.isLoading()?133:-1)}},dependencies:[R,_e,mt,dt,se,ce,de,me,W,Ee,ut,ft,gt,_t,he,xe,ge,pt,bi,fe,be,yi,V,B,q,$,Me,Pe,ke,je,ve,Ce,ue,Pi],styles:[".profile-tabs[_ngcontent-%COMP%]{margin-top:2rem}.profile-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:2rem 0}.profile-tabs[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%], .profile-tabs[_ngcontent-%COMP%]   .password-card[_ngcontent-%COMP%]{box-shadow:0 4px 6px -1px #0000001a;border-radius:12px;border:1px solid #e5e7eb}.profile-tabs[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.profile-tabs[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-bottom:1rem}.profile-tabs[_ngcontent-%COMP%]   .animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}  .mat-mdc-tab-group .mat-mdc-tab-header{border-bottom:1px solid #e5e7eb}  .mat-mdc-tab-group .mat-mdc-tab{font-weight:500}  .mat-mdc-card .mat-mdc-card-header .mat-mdc-card-title{font-size:1.5rem;font-weight:600;color:#111827}  .mat-mdc-card .mat-mdc-card-header .mat-mdc-card-subtitle{color:#6b7280}  .mat-mdc-form-field .mat-mdc-form-field-flex{border-radius:8px}  .mat-mdc-raised-button.mat-primary{background-color:#2563eb}  .mat-mdc-raised-button.mat-primary:hover:not([disabled]){background-color:#1d4ed8}  .error-snackbar{background-color:#dc2626!important;color:#fff!important}  .success-snackbar{background-color:#059669!important;color:#fff!important}"]})};var Fr=["switch"],Ar=["*"];function Rr(t,i){t&1&&(a(0,"span",10),j(),a(1,"svg",12),h(2,"path",13),n(),a(3,"svg",14),h(4,"path",15),n()())}var Br=new De("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1,disabledInteractive:!1})}),Vr={provide:Ci,useExisting:$t(()=>Et),multi:!0},St=class{source;checked;constructor(i,e){this.source=i,this.checked=e}},Et=(()=>{class t{_elementRef=C(Ze);_focusMonitor=C(ri);_changeDetectorRef=C(it);defaults=C(Br);_onChange=e=>{};_onTouched=()=>{};_validatorOnChange=()=>{};_uniqueId;_checked=!1;_createChangeEvent(e){return new St(this,e)}_labelId;get buttonId(){return`${this.id||this._uniqueId}-button`}_switchElement;focus(){this._switchElement.nativeElement.focus()}_noopAnimations;_focused;name=null;id;labelPosition="after";ariaLabel=null;ariaLabelledby=null;ariaDescribedby;required;color;disabled=!1;disableRipple=!1;tabIndex=0;get checked(){return this._checked}set checked(e){this._checked=e,this._changeDetectorRef.markForCheck()}hideIcon;disabledInteractive;change=new Dt;toggleChange=new Dt;get inputId(){return`${this.id||this._uniqueId}-input`}constructor(){C(li).load(mi);let e=C(new zt("tabindex"),{optional:!0}),r=this.defaults,s=C(Ke,{optional:!0});this.tabIndex=e==null?0:parseInt(e)||0,this.color=r.color||"accent",this._noopAnimations=s==="NoopAnimations",this.id=this._uniqueId=C(st).getId("mat-mdc-slide-toggle-"),this.hideIcon=r.hideIcon??!1,this.disabledInteractive=r.disabledInteractive??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e==="keyboard"||e==="program"?(this._focused=!0,this._changeDetectorRef.markForCheck()):e||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnChanges(e){e.required&&this._validatorOnChange()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorOnChange=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.disabled||(this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new St(this,this.checked))))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=D({type:t,selectors:[["mat-slide-toggle"]],viewQuery:function(r,s){if(r&1&&Fe(Fr,5),r&2){let m;Ae(m=Re())&&(s._switchElement=m.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(r,s){r&2&&(Yt("id",s.id),oe("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),k(s.color?"mat-"+s.color:""),Z("mat-mdc-slide-toggle-focused",s._focused)("mat-mdc-slide-toggle-checked",s.checked)("_mat-animation-noopable",s._noopAnimations))},inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],required:[2,"required","required",ee],color:"color",disabled:[2,"disabled","disabled",ee],disableRipple:[2,"disableRipple","disableRipple",ee],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:ei(e)],checked:[2,"checked","checked",ee],hideIcon:[2,"hideIcon","hideIcon",ee],disabledInteractive:[2,"disabledInteractive","disabledInteractive",ee]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[Kt([Vr,{provide:vi,useExisting:t,multi:!0}]),Ut],ngContentSelectors:Ar,decls:13,vars:27,consts:[["switch",""],["mat-internal-form-field","",3,"labelPosition"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],[1,"mdc-label",3,"click","for"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(r,s){if(r&1){let m=v();Qt(),a(0,"div",1)(1,"button",2,0),u("click",function(){return g(m),f(s._handleClick())}),h(3,"span",3),a(4,"span",4)(5,"span",5)(6,"span",6),h(7,"span",7),n(),a(8,"span",8),h(9,"span",9),n(),p(10,Rr,5,0,"span",10),n()()(),a(11,"label",11),u("click",function(M){return g(m),f(M.stopPropagation())}),Xt(12),n()()}if(r&2){let m=et(2);b("labelPosition",s.labelPosition),l(),Z("mdc-switch--selected",s.checked)("mdc-switch--unselected",!s.checked)("mdc-switch--checked",s.checked)("mdc-switch--disabled",s.disabled)("mat-mdc-slide-toggle-disabled-interactive",s.disabledInteractive),b("tabIndex",s.disabled&&!s.disabledInteractive?-1:s.tabIndex)("disabled",s.disabled&&!s.disabledInteractive),oe("id",s.buttonId)("name",s.name)("aria-label",s.ariaLabel)("aria-labelledby",s._getAriaLabelledBy())("aria-describedby",s.ariaDescribedby)("aria-required",s.required||null)("aria-checked",s.checked)("aria-disabled",s.disabled&&s.disabledInteractive?"true":null),l(8),b("matRippleTrigger",m)("matRippleDisabled",s.disableRipple||s.disabled)("matRippleCentered",!0),l(),d(s.hideIcon?-1:10),l(),b("for",s.buttonId),oe("id",s._labelId)}},dependencies:[di,Si],styles:[`.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative;width:var(--mdc-switch-track-width, 52px)}.mdc-switch.mdc-switch--disabled{cursor:default;pointer-events:none}.mdc-switch.mat-mdc-slide-toggle-disabled-interactive{pointer-events:auto}.mdc-switch__track{overflow:hidden;position:relative;width:100%;height:var(--mdc-switch-track-height, 32px);border-radius:var(--mdc-switch-track-shape, var(--mat-sys-corner-full))}.mdc-switch--disabled.mdc-switch .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity, 0.12)}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%;border-width:var(--mat-switch-track-outline-width, 2px);border-color:var(--mat-switch-track-outline-color, var(--mat-sys-outline))}.mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track::after{border-width:var(--mat-switch-selected-track-outline-width, 2px);border-color:var(--mat-switch-selected-track-outline-color, transparent)}.mdc-switch--disabled .mdc-switch__track::before,.mdc-switch--disabled .mdc-switch__track::after{border-width:var(--mat-switch-disabled-unselected-track-outline-width, 2px);border-color:var(--mat-switch-disabled-unselected-track-outline-color, var(--mat-sys-on-surface))}@media(forced-colors: active){.mdc-switch__track{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0);background:var(--mdc-switch-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch--selected .mdc-switch__track::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-switch-hidden-track-opacity, 0);transition:var(--mat-switch-hidden-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-switch-visible-track-opacity, 1);transition:var(--mat-switch-visible-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, var(--mat-sys-surface-variant))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::before,.mdc-switch.mdc-switch--disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch__track::after{transform:translateX(-100%);background:var(--mdc-switch-selected-track-color, var(--mat-sys-primary))}[dir=rtl] .mdc-switch__track::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::after{transform:translateX(0)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-switch-visible-track-opacity, 1);transition:var(--mat-switch-visible-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-switch-hidden-track-opacity, 0);transition:var(--mat-switch-hidden-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, var(--mat-sys-primary))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::after,.mdc-switch.mdc-switch--disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, var(--mat-sys-on-surface))}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0);width:calc(100% - var(--mdc-switch-handle-width))}[dir=rtl] .mdc-switch__handle-track{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto;transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1);width:var(--mdc-switch-handle-width);height:var(--mdc-switch-handle-height);border-radius:var(--mdc-switch-handle-shape, var(--mat-sys-corner-full))}[dir=rtl] .mdc-switch__handle{left:auto;right:0}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-switch-unselected-handle-size, 16px);height:var(--mat-switch-unselected-handle-size, 16px);margin:var(--mat-switch-unselected-handle-horizontal-margin, 0 8px)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-unselected-with-icon-handle-horizontal-margin, 0 4px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-switch-selected-handle-size, 24px);height:var(--mat-switch-selected-handle-size, 24px);margin:var(--mat-switch-selected-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-selected-with-icon-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-switch-with-icon-handle-size, 24px);height:var(--mat-switch-with-icon-handle-size, 24px)}.mat-mdc-slide-toggle .mdc-switch:active:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-switch-pressed-handle-size, 28px);height:var(--mat-switch-pressed-handle-size, 28px)}.mat-mdc-slide-toggle .mdc-switch--selected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-selected-pressed-handle-horizontal-margin, 0 22px)}.mat-mdc-slide-toggle .mdc-switch--unselected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-unselected-pressed-handle-horizontal-margin, 0 2px)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-selected-handle-opacity, 1)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-unselected-handle-opacity, 0.38)}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media(forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mat-sys-on-primary))}.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, var(--mat-sys-primary-container))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:hover:not(:focus):not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:focus:not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:active .mdc-switch__handle::after,.mdc-switch--selected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, var(--mat-sys-surface))}.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, var(--mat-sys-outline))}.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, var(--mat-sys-on-surface))}.mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__shadow,.mdc-switch.mdc-switch--disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1;width:var(--mdc-switch-state-layer-size, 40px);height:var(--mdc-switch-state-layer-size, 40px)}.mdc-switch__ripple::after{content:"";opacity:0}.mdc-switch--disabled .mdc-switch__ripple::after{display:none}.mat-mdc-slide-toggle-disabled-interactive .mdc-switch__ripple::after{display:block}.mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:75ms opacity cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:focus .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:active .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:hover:not(:focus) .mdc-switch__ripple::after,.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-pressed-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-selected-pressed-state-layer-color, var(--mat-sys-primary));opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch__icons{position:relative;height:100%;width:100%;z-index:1;transform:translateZ(0)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity, 0.38)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity, 0.38)}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size, 16px);height:var(--mdc-switch-unselected-icon-size, 16px);fill:var(--mdc-switch-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size, 16px);height:var(--mdc-switch-selected-icon-size, 16px);fill:var(--mdc-switch-selected-icon-color, var(--mat-sys-on-primary-container))}.mdc-switch--selected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mat-sys-on-surface))}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{-webkit-user-select:none;user-select:none;display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-internal-form-field{color:var(--mat-switch-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-switch-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-switch-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-switch-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-switch-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-switch-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mdc-switch-disabled-label-text-color)}
`],encapsulation:2,changeDetection:0})}return t})();var hn=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Je({type:t});static \u0275inj=Qe({imports:[Et,le,le]})}return t})();function Nr(t,i){t&1&&(a(0,"mat-icon",39),o(1,"refresh"),n())}var kt=class t{authService=C(L);fb=C(pe);snackBar=C(ie);user=this.authService.user;isLoading=S(!1);settingsForm;constructor(){let i=this.user();this.settingsForm=this.fb.group({emailNotifications:[!0],pushNotifications:[!0],marketingEmails:[!1],projectUpdates:[!0],messageNotifications:[!0],language:["en"],timezone:["UTC"],theme:["light"]})}saveSettings(){return w(this,null,function*(){this.isLoading.set(!0);try{let i=this.settingsForm.value;this.snackBar.open("Settings saved successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]})}catch{this.snackBar.open("Failed to save settings. Please try again.","Close",{duration:3e3,panelClass:["error-snackbar"]})}finally{this.isLoading.set(!1)}})}resetSettings(){return w(this,null,function*(){this.settingsForm.patchValue({emailNotifications:!0,pushNotifications:!0,marketingEmails:!1,projectUpdates:!0,messageNotifications:!0,language:"en",timezone:"UTC",theme:"light"}),this.snackBar.open("Settings reset to default values","Close",{duration:3e3})})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=D({type:t,selectors:[["app-settings"]],decls:114,vars:4,consts:[[1,"max-w-4xl","mx-auto","p-6"],[1,"mb-8"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"settings-card"],[1,"mr-2"],[1,"space-y-4"],[1,"flex","items-center","justify-between"],[1,"font-medium","text-gray-900"],[1,"text-sm","text-gray-600"],["formControlName","emailNotifications","color","primary"],["formControlName","pushNotifications","color","primary"],["formControlName","marketingEmails","color","primary"],["formControlName","projectUpdates","color","primary"],["formControlName","messageNotifications","color","primary"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline"],["formControlName","language"],["value","en"],["value","es"],["value","fr"],["value","de"],["matSuffix",""],["formControlName","timezone"],["value","UTC"],["value","America/New_York"],["value","America/Chicago"],["value","America/Denver"],["value","America/Los_Angeles"],["value","Europe/London"],["value","Europe/Paris"],["formControlName","theme"],["value","light"],["value","dark"],["value","auto"],[1,"flex","justify-between","pt-6"],["mat-stroked-button","","type","button",1,"px-6",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",1,"px-8",3,"disabled"],[1,"animate-spin","mr-2"]],template:function(e,r){e&1&&(a(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"Settings"),n(),a(4,"p",3),o(5,"Manage your account preferences and notification settings"),n()(),a(6,"form",4),u("ngSubmit",function(){return r.saveSettings()}),a(7,"mat-card",5)(8,"mat-card-header")(9,"mat-card-title")(10,"mat-icon",6),o(11,"notifications"),n(),o(12," Notifications "),n(),a(13,"mat-card-subtitle"),o(14,"Choose how you want to be notified about activity"),n()(),a(15,"mat-card-content")(16,"div",7)(17,"div",8)(18,"div")(19,"h3",9),o(20,"Email Notifications"),n(),a(21,"p",10),o(22,"Receive notifications via email"),n()(),h(23,"mat-slide-toggle",11),n(),a(24,"div",8)(25,"div")(26,"h3",9),o(27,"Push Notifications"),n(),a(28,"p",10),o(29,"Receive push notifications in your browser"),n()(),h(30,"mat-slide-toggle",12),n(),a(31,"div",8)(32,"div")(33,"h3",9),o(34,"Marketing Emails"),n(),a(35,"p",10),o(36,"Receive promotional and marketing emails"),n()(),h(37,"mat-slide-toggle",13),n(),a(38,"div",8)(39,"div")(40,"h3",9),o(41,"Project Updates"),n(),a(42,"p",10),o(43,"Get notified about project status changes"),n()(),h(44,"mat-slide-toggle",14),n(),a(45,"div",8)(46,"div")(47,"h3",9),o(48,"Message Notifications"),n(),a(49,"p",10),o(50,"Get notified when you receive new messages"),n()(),h(51,"mat-slide-toggle",15),n()()()(),a(52,"mat-card",5)(53,"mat-card-header")(54,"mat-card-title")(55,"mat-icon",6),o(56,"tune"),n(),o(57," Preferences "),n(),a(58,"mat-card-subtitle"),o(59,"Customize your experience"),n()(),a(60,"mat-card-content")(61,"div",16)(62,"mat-form-field",17)(63,"mat-label"),o(64,"Language"),n(),a(65,"mat-select",18)(66,"mat-option",19),o(67,"English"),n(),a(68,"mat-option",20),o(69,"Spanish"),n(),a(70,"mat-option",21),o(71,"French"),n(),a(72,"mat-option",22),o(73,"German"),n()(),a(74,"mat-icon",23),o(75,"language"),n()(),a(76,"mat-form-field",17)(77,"mat-label"),o(78,"Timezone"),n(),a(79,"mat-select",24)(80,"mat-option",25),o(81,"UTC"),n(),a(82,"mat-option",26),o(83,"Eastern Time"),n(),a(84,"mat-option",27),o(85,"Central Time"),n(),a(86,"mat-option",28),o(87,"Mountain Time"),n(),a(88,"mat-option",29),o(89,"Pacific Time"),n(),a(90,"mat-option",30),o(91,"London"),n(),a(92,"mat-option",31),o(93,"Paris"),n()(),a(94,"mat-icon",23),o(95,"schedule"),n()(),a(96,"mat-form-field",17)(97,"mat-label"),o(98,"Theme"),n(),a(99,"mat-select",32)(100,"mat-option",33),o(101,"Light"),n(),a(102,"mat-option",34),o(103,"Dark"),n(),a(104,"mat-option",35),o(105,"Auto"),n()(),a(106,"mat-icon",23),o(107,"palette"),n()()()()(),a(108,"div",36)(109,"button",37),u("click",function(){return r.resetSettings()}),o(110," Reset to Default "),n(),a(111,"button",38),p(112,Nr,2,0,"mat-icon",39),o(113," Save Settings "),n()()()()),e&2&&(l(6),b("formGroup",r.settingsForm),l(103),b("disabled",r.isLoading()),l(2),b("disabled",r.isLoading()||r.settingsForm.invalid),l(),d(r.isLoading()?112:-1))},dependencies:[R,_e,mt,se,ce,de,me,W,Ee,ut,ft,gt,_t,he,xe,ge,fe,be,V,B,q,$,hn,Et,ve,Ce,ue,Me],styles:[".settings-card[_ngcontent-%COMP%]{box-shadow:0 4px 6px -1px #0000001a;border-radius:12px;border:1px solid #e5e7eb;margin-bottom:1.5rem}.settings-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:1rem}.settings-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.25rem;font-weight:600;color:#111827}.settings-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{color:#6b7280;margin-top:.5rem}.settings-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding-top:0}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}  .mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected .mdc-switch__track{background-color:#2563eb}  .mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected .mdc-switch__handle .mdc-switch__ripple{background-color:#2563eb}  .mat-mdc-form-field .mat-mdc-form-field-flex{border-radius:8px}  .mat-mdc-raised-button.mat-primary{background-color:#2563eb}  .mat-mdc-raised-button.mat-primary:hover:not([disabled]){background-color:#1d4ed8}  .mat-mdc-outlined-button{border-color:#d1d5db;color:#374151}  .mat-mdc-outlined-button:hover:not([disabled]){background-color:#f9fafb;border-color:#9ca3af}  .error-snackbar{background-color:#dc2626!important;color:#fff!important}  .success-snackbar{background-color:#059669!important;color:#fff!important}"]})};var jt=class t{constructor(i){this.http=i}apiUrl=`${lt.api.baseUrl}/withdrawals`;createWithdrawal(i){return this.http.post(this.apiUrl,i)}getWithdrawals(i=1,e=10,r){let s=new ni().set("page",i.toString()).set("limit",e.toString());return r&&(s=s.set("status",r)),this.http.get(this.apiUrl,{params:s})}getWithdrawal(i){return this.http.get(`${this.apiUrl}/${i}`)}cancelWithdrawal(i){return this.http.post(`${this.apiUrl}/${i}/cancel`,{})}getWithdrawalStats(){return this.http.get(`${this.apiUrl}/stats/summary`)}processWithdrawal(i){return this.http.post(`${this.apiUrl}/${i}/process`,{})}getStatusColor(i){switch(i){case"pending":return"text-yellow-600 bg-yellow-100";case"processing":return"text-blue-600 bg-blue-100";case"completed":return"text-green-600 bg-green-100";case"failed":return"text-red-600 bg-red-100";case"cancelled":return"text-gray-600 bg-gray-100";default:return"text-gray-600 bg-gray-100"}}getStatusIcon(i){switch(i){case"pending":return"clock";case"processing":return"sync";case"completed":return"check-circle";case"failed":return"x-circle";case"cancelled":return"minus-circle";default:return"help-circle"}}formatCurrency(i){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(i)}calculateFee(i){return Math.round(i*.03*100)/100}calculateNetAmount(i){return i-this.calculateFee(i)}static \u0275fac=function(e){return new(e||t)(qt(at))};static \u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})};function Lr(t,i){if(t&1&&(a(0,"mat-icon",8),o(1),n()),t&2){let e=c();k(e.getIconClass()),l(),x(" ",e.data.icon," ")}}var Pt=class t{constructor(i,e){this.dialogRef=i;this.data=e}onConfirm(){this.dialogRef.close(!0)}onCancel(){this.dialogRef.close(!1)}getIconClass(){let i="w-8 h-8";switch(this.data.type){case"danger":return`${i} text-red-600`;case"warning":return`${i} text-yellow-600`;case"info":default:return`${i} text-blue-600`}}getConfirmButtonClass(){switch(this.data.type){case"danger":return"bg-red-600 hover:bg-red-700 text-white";case"warning":return"bg-yellow-600 hover:bg-yellow-700 text-white";case"info":default:return"bg-blue-600 hover:bg-blue-700 text-white"}}static \u0275fac=function(e){return new(e||t)(It(zi),It(Gi))};static \u0275cmp=D({type:t,selectors:[["app-confirmation-dialog"]],decls:12,vars:7,consts:[[1,"p-6"],[1,"flex","items-center","mb-4"],[1,"mr-3","text-3xl",3,"class"],[1,"text-xl","font-semibold","text-gray-900"],[1,"text-gray-600","mb-6","leading-relaxed"],[1,"flex","justify-end","gap-3"],["mat-stroked-button","",1,"px-4","py-2",3,"click"],["mat-raised-button","",1,"px-4","py-2",3,"click"],[1,"mr-3","text-3xl"]],template:function(e,r){e&1&&(a(0,"div",0)(1,"div",1),p(2,Lr,2,3,"mat-icon",2),a(3,"h2",3),o(4),n()(),a(5,"p",4),o(6),n(),a(7,"div",5)(8,"button",6),u("click",function(){return r.onCancel()}),o(9),n(),a(10,"button",7),u("click",function(){return r.onConfirm()}),o(11),n()()()),e&2&&(l(2),d(r.data.icon?2:-1),l(2),_(r.data.title),l(2),_(r.data.message),l(3),x(" ",r.data.cancelText||"Cancel"," "),l(),k(r.getConfirmButtonClass()),l(),x(" ",r.data.confirmText||"Confirm"," "))},dependencies:[R,ht,V,B,q,$],encapsulation:2})};var $r=(t,i,e,r)=>({"bg-green-50 border-green-200":t,"bg-yellow-50 border-yellow-200":i,"bg-red-50 border-red-200":e,"bg-gray-50 border-gray-200":r}),qr=(t,i,e,r)=>({"text-green-600":t,"text-yellow-600":i,"text-red-600":e,"text-gray-600":r}),Ur=(t,i,e,r)=>({"text-green-700":t,"text-yellow-700":i,"text-red-700":e,"text-gray-700":r}),Cn=()=>["date","method","description","amount","status"],zr=(t,i,e,r,s)=>({"bg-yellow-100 text-yellow-800":t,"bg-blue-100 text-blue-800":i,"bg-green-100 text-green-800":e,"bg-red-100 text-red-800":r,"bg-gray-100 text-gray-800":s}),Gr=(t,i)=>i._id;function Wr(t,i){t&1&&h(0,"mat-spinner",12)}function Hr(t,i){t&1&&(a(0,"mat-icon",13),o(1,"account_balance_wallet"),n())}function Yr(t,i){if(t&1){let e=v();a(0,"button",11),u("click",function(){g(e);let s=c();return f(s.withdrawToStripe())}),p(1,Wr,1,0,"mat-spinner",12)(2,Hr,2,0,"mat-icon",13),o(3," Withdraw to Stripe "),n()}if(t&2){let e=c();b("disabled",e.stripeLoading()),l(),d(e.stripeLoading()?1:2)}}function Qr(t,i){t&1&&h(0,"mat-spinner",12)}function Xr(t,i){t&1&&(a(0,"mat-icon",13),o(1,"payment"),n())}function Zr(t,i){if(t&1){let e=v();a(0,"button",14),u("click",function(){g(e);let s=c();return f(s.connectStripe())}),p(1,Qr,1,0,"mat-spinner",12)(2,Xr,2,0,"mat-icon",13),o(3," Connect Stripe "),n()}if(t&2){let e=c();b("disabled",e.stripeLoading()),l(),d(e.stripeLoading()?1:2)}}function Kr(t,i){t&1&&h(0,"mat-spinner",12)}function Jr(t,i){t&1&&(a(0,"mat-icon",13),o(1,"dashboard"),n())}function el(t,i){t&1&&h(0,"mat-spinner",12)}function tl(t,i){t&1&&(a(0,"mat-icon",13),o(1,"link_off"),n())}function il(t,i){if(t&1){let e=v();a(0,"div",8)(1,"button",15),u("click",function(){g(e);let s=c();return f(s.openStripeDashboard())}),p(2,Kr,1,0,"mat-spinner",12)(3,Jr,2,0,"mat-icon",13),o(4," Stripe Dashboard "),n(),a(5,"button",16),u("click",function(){g(e);let s=c();return f(s.disconnectStripe())}),p(6,el,1,0,"mat-spinner",12)(7,tl,2,0,"mat-icon",13),o(8," Disconnect "),n()()}if(t&2){let e=c();l(),b("disabled",e.stripeLoading()),l(),d(e.stripeLoading()?2:3),l(3),b("disabled",e.stripeLoading()),l(),d(e.stripeLoading()?6:7)}}function nl(t,i){t&1&&(a(0,"div",9),h(1,"mat-spinner",17),a(2,"span",18),o(3,"Loading earnings data..."),n()())}function al(t,i){if(t&1){let e=v();a(0,"div",10)(1,"mat-icon",19),o(2,"error"),n(),a(3,"h3",20),o(4,"Error Loading Data"),n(),a(5,"p",21),o(6),n(),a(7,"button",22),u("click",function(){g(e);let s=c();return f(s.retryLoad())}),a(8,"mat-icon",13),o(9,"refresh"),n(),o(10," Try Again "),n()()}if(t&2){let e=c();l(6),_(e.error())}}function ol(t,i){t&1&&o(0," check_circle ")}function rl(t,i){t&1&&o(0," schedule ")}function ll(t,i){t&1&&o(0," error ")}function sl(t,i){t&1&&o(0," payment ")}function cl(t,i){t&1&&o(0," Stripe Connected ")}function dl(t,i){t&1&&o(0," Stripe Setup Pending ")}function ml(t,i){t&1&&o(0," Stripe Connection Failed ")}function pl(t,i){t&1&&o(0," Stripe Not Connected ")}function _l(t,i){t&1&&h(0,"mat-spinner",84)}function ul(t,i){t&1&&(a(0,"mat-icon",85),o(1,"refresh"),n())}function gl(t,i){if(t&1){let e=v();a(0,"button",83),u("click",function(){g(e);let s=c(2);return f(s.refreshStripeAccountStatus())}),p(1,_l,1,0,"mat-spinner",84)(2,ul,2,0,"mat-icon",85),n()}if(t&2){let e=c(2);b("disabled",e.stripeLoading()),l(),d(e.stripeLoading()?1:2)}}function fl(t,i){t&1&&h(0,"mat-spinner",87)}function xl(t,i){if(t&1){let e=v();a(0,"button",86),u("click",function(){g(e);let s=c(2);return f(s.withdrawToStripe())}),p(1,fl,1,0,"mat-spinner",87),o(2," Withdraw to Stripe "),n()}if(t&2){let e=c(2);b("disabled",e.stripeLoading()),l(),d(e.stripeLoading()?1:-1)}}function hl(t,i){t&1&&h(0,"mat-spinner",87)}function Cl(t,i){if(t&1){let e=v();a(0,"button",88),u("click",function(){g(e);let s=c(2);return f(s.connectStripe())}),p(1,hl,1,0,"mat-spinner",87),o(2," Connect Stripe "),n()}if(t&2){let e=c(2);b("disabled",e.stripeLoading()),l(),d(e.stripeLoading()?1:-1)}}function vl(t,i){t&1&&(a(0,"button",39),o(1," No funds available "),n())}function bl(t,i){t&1&&h(0,"mat-spinner",87)}function yl(t,i){if(t&1){let e=v();a(0,"button",89),u("click",function(){g(e);let s=c(2);return f(s.connectStripe())}),p(1,bl,1,0,"mat-spinner",87),o(2," Complete Stripe Setup "),n()}if(t&2){let e=c(2);b("disabled",e.stripeLoading()),l(),d(e.stripeLoading()?1:-1)}}function wl(t,i){t&1&&h(0,"mat-spinner",91)}function Sl(t,i){t&1&&(a(0,"mat-icon",92),o(1,"dashboard"),n())}function El(t,i){t&1&&h(0,"mat-spinner",91)}function kl(t,i){t&1&&(a(0,"mat-icon",92),o(1,"link_off"),n())}function jl(t,i){if(t&1){let e=v();a(0,"div",8)(1,"button",90),u("click",function(){g(e);let s=c(2);return f(s.openStripeDashboard())}),p(2,wl,1,0,"mat-spinner",91)(3,Sl,2,0,"mat-icon",92),o(4," Dashboard "),n(),a(5,"button",93),u("click",function(){g(e);let s=c(2);return f(s.disconnectStripe())}),p(6,El,1,0,"mat-spinner",91)(7,kl,2,0,"mat-icon",92),o(8," Disconnect "),n()()}if(t&2){let e=c(2);l(),b("disabled",e.stripeLoading()),l(),d(e.stripeLoading()?2:3),l(3),b("disabled",e.stripeLoading()),l(),d(e.stripeLoading()?6:7)}}function Pl(t,i){t&1&&o(0," Connected to Stripe Express account. You can access your dashboard or disconnect anytime. ")}function Tl(t,i){t&1&&o(0," Connect Stripe to withdraw funds ")}function Ml(t,i){if(t&1){let e=v();a(0,"button",94),u("click",function(){g(e);let s=c(2);return f(s.clearFilters())}),a(1,"mat-icon"),o(2,"clear"),n(),o(3," Clear Filters "),n()}}function Dl(t,i){t&1&&(a(0,"div",78),h(1,"mat-spinner",95),a(2,"p",96),o(3,"Loading transactions..."),n()())}function Il(t,i){if(t&1){let e=v();a(0,"div",79)(1,"mat-icon",97),o(2,"filter_list_off"),n(),a(3,"h3",98),o(4,"No Transactions Match Your Filters"),n(),a(5,"p",99),o(6,"Try adjusting your date range or activity type filters."),n(),a(7,"button",100),u("click",function(){g(e);let s=c(2);return f(s.clearFilters())}),o(8," Clear Filters "),n()()}}function Fl(t,i){t&1&&(a(0,"div",79)(1,"mat-icon",97),o(2,"receipt_long"),n(),a(3,"h3",98),o(4,"No Transactions Yet"),n(),a(5,"p",101),o(6,"Your transaction history will appear here once you start earning."),n()())}function Al(t,i){t&1&&(a(0,"th",116),o(1,"Date"),n())}function Rl(t,i){if(t&1&&(a(0,"td",117),o(1),n()),t&2){let e=i.$implicit,r=c(4);l(),x(" ",r.formatDate(e.createdAt)," ")}}function Bl(t,i){t&1&&(a(0,"th",116),o(1,"Activity"),n())}function Vl(t,i){if(t&1&&(a(0,"td",118)(1,"span",119),o(2),n()()),t&2){let e=i.$implicit,r=c(4);l(),k(r.getTransactionTypeColor(e.transaction_type)),l(),x(" ",r.getTransactionTypeLabel(e.transaction_type)," ")}}function Ol(t,i){t&1&&(a(0,"th",116),o(1,"Description"),n())}function Nl(t,i){if(t&1&&(a(0,"p",120),o(1),n()),t&2){let e=c().$implicit;l(),x("Project: ",e.project_id.title,"")}}function Ll(t,i){if(t&1&&(a(0,"p",120),o(1),n()),t&2){let e=c().$implicit;l(),x("From: ",e.business_id.name,"")}}function $l(t,i){if(t&1&&(a(0,"td",117)(1,"div")(2,"p",119),o(3),n(),p(4,Nl,2,1,"p",120)(5,Ll,2,1,"p",120),n()()),t&2){let e=i.$implicit;l(3),_(e.description||"No description"),l(),d(e.project_id?4:-1),l(),d(e.business_id?5:-1)}}function ql(t,i){t&1&&(a(0,"th",121),o(1,"Amount"),n())}function Ul(t,i){if(t&1&&(a(0,"td",122)(1,"span",123),o(2),n()()),t&2){let e=i.$implicit,r=c(4);l(),k(e.amount>=0?"text-green-600":"text-red-600"),l(),x(" ",r.formatCurrency(e.amount)," ")}}function zl(t,i){t&1&&(a(0,"th",116),o(1,"Status"),n())}function Gl(t,i){if(t&1&&(a(0,"td",118)(1,"span",124),o(2),I(3,"titlecase"),n()()),t&2){let e=i.$implicit,r=c(4);l(),k(r.getStatusColor(e.status)),l(),x(" ",F(3,3,e.status)," ")}}function Wl(t,i){t&1&&h(0,"tr",125)}function Hl(t,i){t&1&&h(0,"tr",126)}function Yl(t,i){if(t&1&&(a(0,"div",81)(1,"table",103),z(2,104),p(3,Al,2,0,"th",105)(4,Rl,2,1,"td",106),G(),z(5,107),p(6,Bl,2,0,"th",105)(7,Vl,3,3,"td",108),G(),z(8,109),p(9,Ol,2,0,"th",105)(10,$l,6,3,"td",106),G(),z(11,110),p(12,ql,2,0,"th",111)(13,Ul,3,3,"td",112),G(),z(14,113),p(15,zl,2,0,"th",105)(16,Gl,4,5,"td",108),G(),p(17,Wl,1,0,"tr",114)(18,Hl,1,0,"tr",115),n()()),t&2){let e=c(3);l(),b("dataSource",e.filteredTransactions()),l(16),b("matHeaderRowDef",e.displayedColumns),l(),b("matRowDefColumns",e.displayedColumns)}}function Ql(t,i){if(t&1&&(a(0,"p",134),o(1),n()),t&2){let e=c().$implicit;l(),x("Project: ",e.project_id.title,"")}}function Xl(t,i){if(t&1&&(a(0,"p",46),o(1),n()),t&2){let e=c().$implicit;l(),x("From: ",e.business_id.name,"")}}function Zl(t,i){if(t&1&&(a(0,"div",127)(1,"div",128)(2,"div",129)(3,"h4",130),o(4),n(),a(5,"p",29),o(6),n()(),a(7,"span",131),o(8),n()(),a(9,"div",132)(10,"p",133),o(11),n(),p(12,Ql,2,1,"p",134)(13,Xl,2,1,"p",46),n(),a(14,"div",135)(15,"span",136),o(16),n(),a(17,"span",124),o(18),I(19,"titlecase"),n()()()),t&2){let e=i.$implicit,r=c(4);l(4),x(" ",r.getTransactionTypeLabel(e.transaction_type)," "),l(2),_(r.formatDate(e.createdAt)),l(),k(e.amount>=0?"text-green-600":"text-red-600"),l(),x(" ",r.formatCurrency(e.amount)," "),l(3),_(e.description||"No description"),l(),d(e.project_id?12:-1),l(),d(e.business_id?13:-1),l(2),k(r.getTransactionTypeColor(e.transaction_type)),l(),x(" ",r.getTransactionTypeLabel(e.transaction_type)," "),l(),k(r.getStatusColor(e.status)),l(),x(" ",F(19,14,e.status)," ")}}function Kl(t,i){if(t&1&&(a(0,"div",102),P(1,Zl,20,16,"div",127,Gr),n()),t&2){let e=c(3);l(),T(e.filteredTransactions())}}function Jl(t,i){if(t&1&&p(0,Yl,19,3,"div",81)(1,Kl,3,0,"div",102),t&2){let e=c(2);d(e.viewMode()==="list"?0:1)}}function es(t,i){t&1&&(a(0,"div",78),h(1,"mat-spinner",95),a(2,"p",96),o(3,"Loading withdrawals..."),n()())}function ts(t,i){if(t&1){let e=v();a(0,"button",139),u("click",function(){g(e);let s=c(3);return f(s.connectStripe())}),o(1," Connect Stripe to Start "),n()}}function is(t,i){if(t&1){let e=v();a(0,"div",138)(1,"div",140)(2,"mat-icon",141),o(3,"info"),n(),a(4,"span",142),o(5,"Stripe Account Connected"),n()(),a(6,"p",143),o(7," Your withdrawals will appear here. You can manage your Stripe account using the buttons above. "),n(),a(8,"div",8)(9,"button",144),u("click",function(){g(e);let s=c(3);return f(s.openStripeDashboard())}),o(10," View Dashboard "),n(),a(11,"button",145),u("click",function(){g(e);let s=c(3);return f(s.disconnectStripe())}),o(12," Disconnect "),n()()()}if(t&2){let e=c(3);l(9),b("disabled",e.stripeLoading()),l(2),b("disabled",e.stripeLoading())}}function ns(t,i){if(t&1&&(a(0,"div",79)(1,"mat-icon",97),o(2,"account_balance_wallet"),n(),a(3,"h3",98),o(4,"No Withdrawals Yet"),n(),a(5,"p",99),o(6,"Your withdrawal history will appear here once you make your first withdrawal."),n(),p(7,ts,2,0,"button",137)(8,is,13,2,"div",138),n()),t&2){let e=c(2);l(7),d(e.hasStripeAccount()?8:7)}}function as(t,i){t&1&&(a(0,"th",116),o(1,"Date"),n())}function os(t,i){if(t&1&&(a(0,"td",117),o(1),n()),t&2){let e=i.$implicit,r=c(3);l(),x(" ",r.formatDate(e.createdAt)," ")}}function rs(t,i){t&1&&(a(0,"th",116),o(1,"Method"),n())}function ls(t,i){if(t&1&&(a(0,"td",118)(1,"div",32)(2,"mat-icon",43),o(3,"payment"),n(),a(4,"span",119),o(5),I(6,"titlecase"),n()()()),t&2){let e=i.$implicit;l(5),_(F(6,1,e.method))}}function ss(t,i){t&1&&(a(0,"th",116),o(1,"Description"),n())}function cs(t,i){if(t&1&&(a(0,"p",120),o(1),n()),t&2){let e=c().$implicit;l(),x("Stripe Account: ",e.stripe_account_id,"")}}function ds(t,i){if(t&1&&(a(0,"p",147),o(1),n()),t&2){let e=c().$implicit;l(),x("Transfer ID: ",e.stripe_transfer_id,"")}}function ms(t,i){if(t&1&&(a(0,"p",120),o(1),n()),t&2){let e=c().$implicit;l(),x("To: ",e.paypal_account.email,"")}}function ps(t,i){if(t&1&&(a(0,"p",147),o(1),n()),t&2){let e=c().$implicit;l(),x("PayPal ID: ",e.paypal_transaction_id,"")}}function _s(t,i){if(t&1&&(a(0,"td",117)(1,"div")(2,"p",119),o(3),n(),p(4,cs,2,1,"p",120)(5,ds,2,1,"p",147)(6,ms,2,1,"p",120)(7,ps,2,1,"p",147),n()()),t&2){let e=i.$implicit;l(3),_(e.description||"Withdrawal via Stripe"),l(),d(e.stripe_account_id?4:-1),l(),d(e.stripe_transfer_id?5:-1),l(),d(e.paypal_account!=null&&e.paypal_account.email?6:-1),l(),d(e.paypal_transaction_id?7:-1)}}function us(t,i){t&1&&(a(0,"th",121),o(1,"Amount"),n())}function gs(t,i){if(t&1&&(a(0,"p",46),o(1),I(2,"currency"),n(),a(3,"p",149),o(4),I(5,"currency"),n()),t&2){let e=c().$implicit;l(),x("Fee: ",F(2,2,e.fee),""),l(3),x("Net: ",F(5,4,e.net_amount),"")}}function fs(t,i){if(t&1&&(a(0,"td",122)(1,"div")(2,"span",148),o(3),I(4,"currency"),n(),p(5,gs,6,6),n()()),t&2){let e=i.$implicit;l(3),x("-",F(4,2,e.amount),""),l(2),d(e.fee>0?5:-1)}}function xs(t,i){t&1&&(a(0,"th",116),o(1,"Status"),n())}function hs(t,i){if(t&1&&(a(0,"td",118)(1,"span",150),o(2),I(3,"titlecase"),n()()),t&2){let e=i.$implicit;l(),b("ngClass",Jt(4,zr,e.status==="pending",e.status==="processing",e.status==="completed",e.status==="failed",e.status==="cancelled")),l(),x(" ",F(3,2,e.status)," ")}}function Cs(t,i){t&1&&h(0,"tr",125)}function vs(t,i){t&1&&h(0,"tr",126)}function bs(t,i){if(t&1&&(a(0,"div",81)(1,"table",103),z(2,104),p(3,as,2,0,"th",105)(4,os,2,1,"td",106),G(),z(5,146),p(6,rs,2,0,"th",105)(7,ls,7,3,"td",108),G(),z(8,109),p(9,ss,2,0,"th",105)(10,_s,8,5,"td",106),G(),z(11,110),p(12,us,2,0,"th",111)(13,fs,6,4,"td",112),G(),z(14,113),p(15,xs,2,0,"th",105)(16,hs,4,10,"td",108),G(),p(17,Cs,1,0,"tr",114)(18,vs,1,0,"tr",115),n()()),t&2){let e=c(2);l(),b("dataSource",e.withdrawals()),l(16),b("matHeaderRowDef",Be(3,Cn)),l(),b("matRowDefColumns",Be(4,Cn))}}function ys(t,i){t&1&&(a(0,"div",82)(1,"mat-icon",97),o(2,"account_balance_wallet"),n(),a(3,"h3",98),o(4,"Start Earning Today"),n(),a(5,"p",151),o(6,"Complete projects and build your portfolio to start earning money."),n(),a(7,"button",152)(8,"mat-icon",13),o(9,"business"),n(),o(10," Create Your Business Profile "),n()())}function ws(t,i){if(t&1){let e=v();a(0,"div",23)(1,"mat-card",24)(2,"div",25)(3,"h3",26),o(4,"Available funds"),n(),a(5,"mat-icon",27),o(6,"account_balance_wallet"),n()(),a(7,"div",28)(8,"p",29),o(9,"Balance available for withdrawal"),n(),a(10,"p",30),o(11),I(12,"currency"),n()(),a(13,"div",31)(14,"div",32)(15,"mat-icon",33),p(16,ol,1,0)(17,rl,1,0)(18,ll,1,0)(19,sl,1,0),n(),a(20,"span",34),p(21,cl,1,0)(22,dl,1,0)(23,ml,1,0)(24,pl,1,0),n(),p(25,gl,3,2,"button",35),n()(),a(26,"div",36),p(27,xl,3,2,"button",37)(28,Cl,3,2,"button",38)(29,vl,2,0,"button",39)(30,yl,3,2,"button",40)(31,jl,9,4,"div",8),n(),a(32,"p",41),p(33,Pl,1,0)(34,Tl,1,0),n()(),a(35,"mat-card",42)(36,"div",25)(37,"h3",26),o(38,"Future payments"),n(),a(39,"mat-icon",43),o(40,"schedule"),n()(),a(41,"div",44)(42,"div")(43,"p",29),o(44,"Payments being cleared"),n(),a(45,"p",45),o(46),I(47,"currency"),n(),a(48,"p",46),o(49,"Funds from completed projects awaiting clearance."),n()(),a(50,"div")(51,"p",29),o(52,"Active project earnings"),n(),a(53,"p",45),o(54),I(55,"currency"),n(),a(56,"p",46),o(57,"Earnings from ongoing projects."),n()()()(),a(58,"mat-card",42)(59,"div",25)(60,"h3",26),o(61,"Earnings to date"),n(),a(62,"mat-icon",47),o(63,"trending_up"),n()(),a(64,"p",30),o(65),I(66,"currency"),n(),a(67,"p",48),o(68,"Your total earnings since joining."),n()()(),a(69,"div",49)(70,"div",50)(71,"div",51)(72,"mat-form-field",52)(73,"mat-label"),o(74,"Date Range"),n(),a(75,"mat-date-range-input",53)(76,"input",54),u("dateChange",function(){g(e);let s=c();return f(s.onDateFilterChange())}),n(),a(77,"input",55),u("dateChange",function(){g(e);let s=c();return f(s.onDateFilterChange())}),n()(),a(78,"mat-hint"),o(79,"MM/DD/YYYY \u2013 MM/DD/YYYY"),n(),h(80,"mat-datepicker-toggle",56)(81,"mat-date-range-picker",null,0),n(),a(83,"mat-form-field",57)(84,"mat-label"),o(85,"Activity Type"),n(),a(86,"mat-select",58),u("selectionChange",function(s){g(e);let m=c();return f(m.onActivityFilterChange(s))}),a(87,"mat-option",59),o(88,"All Activities"),n(),a(89,"mat-option",60),o(90,"Project Started"),n(),a(91,"mat-option",61),o(92,"Project Completed"),n(),a(93,"mat-option",62),o(94,"Additional Payment"),n(),a(95,"mat-option",63),o(96,"Payment Cleared"),n(),a(97,"mat-option",64),o(98,"Withdrawal"),n(),a(99,"mat-option",65),o(100,"Refund"),n(),a(101,"mat-option",66),o(102,"Platform Fee"),n()()(),p(103,Ml,4,0,"button",67),n(),a(104,"div",68)(105,"button",69),u("click",function(){g(e);let s=c();return f(s.setViewMode("grid"))}),a(106,"mat-icon"),o(107,"grid_view"),n()(),a(108,"button",70),u("click",function(){g(e);let s=c();return f(s.setViewMode("list"))}),a(109,"mat-icon"),o(110,"view_list"),n()(),a(111,"button",71),u("click",function(){g(e);let s=c();return f(s.emailActivityReport())}),a(112,"mat-icon",13),o(113,"email"),n(),o(114," Email Report "),n(),a(115,"button",72),u("click",function(){g(e);let s=c();return f(s.debugFilters())}),o(116," Debug "),n()()()(),a(117,"mat-card",73)(118,"div",74)(119,"h2",75),o(120,"Transaction History"),n(),a(121,"p",4),o(122,"View your earnings and withdrawal history"),n()(),a(123,"mat-tab-group",76)(124,"mat-tab",77),p(125,Dl,4,0,"div",78)(126,Il,9,0,"div",79)(127,Fl,7,0,"div",79)(128,Jl,2,1),n(),a(129,"mat-tab",80),p(130,es,4,0,"div",78)(131,ns,9,1,"div",79)(132,bs,19,5,"div",81),n()()(),p(133,ys,11,0,"div",82)}if(t&2){let e,r,s=et(82),m=c();l(11),_(F(12,25,m.earningsSummary().available)),l(2),b("ngClass",tt(33,$r,m.stripeConnectionStatus()==="connected",m.stripeConnectionStatus()==="pending",m.stripeConnectionStatus()==="failed",m.stripeConnectionStatus()==="not-connected")),l(2),b("ngClass",tt(38,qr,m.stripeConnectionStatus()==="connected",m.stripeConnectionStatus()==="pending",m.stripeConnectionStatus()==="failed",m.stripeConnectionStatus()==="not-connected")),l(),d((e=m.stripeConnectionStatus())==="connected"?16:e==="pending"?17:e==="failed"?18:19),l(4),b("ngClass",tt(43,Ur,m.stripeConnectionStatus()==="connected",m.stripeConnectionStatus()==="pending",m.stripeConnectionStatus()==="failed",m.stripeConnectionStatus()==="not-connected")),l(),d((r=m.stripeConnectionStatus())==="connected"?21:r==="pending"?22:r==="failed"?23:24),l(4),d(m.stripeConnectionStatus()==="failed"||m.stripeConnectionStatus()==="pending"?25:-1),l(2),d(m.stripeConnectionStatus()==="connected"&&m.earningsSummary().available>0?27:m.stripeConnectionStatus()==="not-connected"?28:m.earningsSummary().available<=0?29:30),l(4),d(m.stripeConnectionStatus()==="connected"?31:-1),l(2),d(m.hasStripeAccount()?33:34),l(13),_(F(47,27,m.earningsSummary().payments_clearing)),l(8),_(F(55,29,m.earningsSummary().active_orders)),l(11),_(F(66,31,m.earningsSummary().total_earnings)),l(10),b("rangePicker",s)("formGroup",m.filterForm),l(5),b("for",s),l(23),d(m.hasActiveFilters()?103:-1),l(2),Z("bg-gray-200",m.viewMode()==="grid"),l(3),Z("bg-gray-200",m.viewMode()==="list"),l(3),b("disabled",m.loading()),l(14),d(m.loadingTransactions()?125:m.filteredTransactions().length===0&&m.hasActiveFilters()?126:m.transactions().length===0?127:128),l(5),d(m.stripeLoading()?130:m.withdrawals().length===0?131:132),l(3),d(m.showEmptyState()?133:-1)}}var Tt=class t{http=C(at);stripeConnectService=C(Ui);withdrawalService=C(jt);dialog=C(xt);snackBar=C(ie);fb=C(pe);apiUrl=`${lt.api.baseUrl}/wallets`;loading=S(!1);loadingTransactions=S(!1);earningsSummary=S(null);transactions=S([]);filteredTransactions=S([]);error=S(null);viewMode=S("list");stripeAccountStatus=S({has_account:!1,payouts_enabled:!1,requirements_due:!1});withdrawals=S([]);stripeLoading=S(!1);filterForm=this.fb.group({startDate:[null],endDate:[null],activityFilter:[""]});hasEarnings=E(()=>{let i=this.earningsSummary();return i&&i.total_earnings>0});canWithdraw=E(()=>{let i=this.earningsSummary();return i&&i.available>0});showEmptyState=E(()=>{let i=this.earningsSummary(),e=this.transactions();return!this.loading()&&i&&e.length===0});hasActiveFilters=E(()=>{let i=this.filterForm.value;return!!(i.startDate||i.endDate||i.activityFilter&&i.activityFilter!=="")});hasStripeAccount=E(()=>{let i=this.stripeAccountStatus();return i.has_account&&i.payouts_enabled&&!i.requirements_due});canWithdrawToStripe=E(()=>this.canWithdraw()&&this.hasStripeAccount());stripeConnectionStatus=E(()=>{let i=this.stripeAccountStatus();return i.has_account?i.requirements_due?"pending":i.payouts_enabled?"connected":"failed":"not-connected"});displayedColumns=["date","type","description","amount","status"];ngOnInit(){return w(this,null,function*(){yield this.loadEarningsSummary(),yield this.loadTransactions(),yield this.loadStripeAccountStatus(),yield this.loadWithdrawals(),this.filterForm.valueChanges.subscribe(()=>{this.applyFilters()})})}loadEarningsSummary(){return w(this,null,function*(){console.log("\u{1F504} Loading earnings summary..."),this.loading.set(!0),this.error.set(null);try{console.log("\u{1F4E1} Making API call to:",`${this.apiUrl}/summary`);let i=yield U(this.http.get(`${this.apiUrl}/summary`));if(console.log("\u2705 API Response:",i),i)this.earningsSummary.set(i),console.log("\u{1F4B0} Earnings summary set:",i);else{console.log("\u{1F3D7}\uFE0F No earnings data, setting default...");let e={active_orders:0,payments_clearing:0,available:0,total_earnings:0};this.earningsSummary.set(e)}}catch(i){if(console.error("\u274C Error loading earnings summary:",i),console.error("Error details:",{status:i.status,statusText:i.statusText,message:i.message,url:i.url}),i.status===401)this.error.set("Authentication failed. Please log in again.");else if(i.status===404){console.log("\u{1F3D7}\uFE0F Wallets not found, setting default summary...");let e={active_orders:0,payments_clearing:0,available:0,total_earnings:0};this.earningsSummary.set(e)}else this.error.set("Failed to load earnings data")}finally{this.loading.set(!1),console.log("\u{1F3C1} Loading complete. Summary:",this.earningsSummary())}})}loadTransactions(){return w(this,null,function*(){this.loadingTransactions.set(!0);try{let e=(yield U(this.http.get(`${this.apiUrl}/transactions`)))||[];this.transactions.set(e);let r=[...new Set(e.map(s=>s.transaction_type))];console.log("Available transaction types in data:",r),this.applyFilters()}catch(i){console.error("Error loading transactions:",i),this.transactions.set([]),this.filteredTransactions.set([])}finally{this.loadingTransactions.set(!1)}})}formatCurrency(i){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(i)}formatDate(i){return new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}getTransactionTypeLabel(i){return{project_started:"Project Started",project_completed:"Project Completed",additional_payment:"Additional Payment",payment_cleared:"Payment Cleared",withdrawal:"Withdrawal",refund:"Refund",platform_fee:"Platform Fee"}[i]||i}getStatusColor(i){return{completed:"text-green-600",pending:"text-yellow-600",failed:"text-red-600",cancelled:"text-gray-600"}[i]||"text-gray-600"}getTransactionTypeColor(i){return{project_started:"text-blue-600",project_completed:"text-green-600",additional_payment:"text-green-600",payment_cleared:"text-purple-600",withdrawal:"text-red-600",platform_fee:"text-orange-600",refund:"text-purple-600"}[i]||"text-gray-600"}retryLoad(){return w(this,null,function*(){yield this.loadEarningsSummary(),yield this.loadTransactions()})}loadStripeAccountStatus(){return w(this,null,function*(){try{this.stripeLoading.set(!0);let i=yield U(this.stripeConnectService.getAccountStatus());this.stripeAccountStatus.set(i)}catch(i){console.error("Error loading Stripe account status:",i)}finally{this.stripeLoading.set(!1)}})}refreshStripeAccountStatus(){return w(this,null,function*(){try{this.stripeLoading.set(!0);let i=yield U(this.stripeConnectService.refreshAccountStatus());this.stripeAccountStatus.set(i),this.snackBar.open("Stripe account status refreshed","Close",{duration:3e3})}catch(i){console.error("Error refreshing Stripe account status:",i),this.snackBar.open("Failed to refresh Stripe status","Close",{duration:3e3})}finally{this.stripeLoading.set(!1)}})}loadWithdrawals(){return w(this,null,function*(){try{let i=yield U(this.withdrawalService.getWithdrawals());this.withdrawals.set(i.withdrawals)}catch(i){console.error("Error loading withdrawals:",i)}})}connectStripe(){return w(this,null,function*(){try{this.stripeLoading.set(!0);let i=yield U(this.stripeConnectService.createOrGetAccount());i.onboarding_url?window.location.href=i.onboarding_url:(yield this.loadStripeAccountStatus(),this.snackBar.open("Stripe account already connected","Close",{duration:3e3}))}catch(i){console.error("Error connecting Stripe:",i),this.snackBar.open("Failed to connect Stripe account","Close",{duration:3e3})}finally{this.stripeLoading.set(!1)}})}withdrawToStripe(){return w(this,null,function*(){let i=this.earningsSummary();if(!i||i.available<=0){this.snackBar.open("No funds available for withdrawal","Close",{duration:3e3});return}if(!this.hasStripeAccount()){this.snackBar.open("Please complete your Stripe account setup first","Close",{duration:3e3});return}try{let e={amount:i.available,method:"stripe"},r=yield U(this.withdrawalService.createWithdrawal(e));this.snackBar.open(`Withdrawal of $${i.available.toFixed(2)} initiated successfully`,"Close",{duration:5e3}),yield this.loadEarningsSummary(),yield this.loadWithdrawals()}catch(e){console.error("Error initiating withdrawal:",e),e.error?.message?.includes("payouts not enabled")||e.error?.message?.includes("Stripe payouts not enabled")?(this.snackBar.open("Stripe payouts not enabled. Refreshing account status...","Close",{duration:5e3}),yield this.refreshStripeAccountStatus()):this.snackBar.open("Failed to initiate withdrawal","Close",{duration:3e3})}})}disconnectStripe(){return w(this,null,function*(){if(!this.hasStripeAccount()){this.snackBar.open("No Stripe account connected","Close",{duration:3e3});return}let i={title:"Disconnect Stripe Account",message:"Are you sure you want to disconnect your Stripe account? You will not be able to withdraw funds until you reconnect. Any pending withdrawals will continue to process normally.",confirmText:"Disconnect",cancelText:"Keep Connected",type:"warning",icon:"warning"},e=this.dialog.open(Pt,{width:"450px",data:i,disableClose:!0});if(yield U(e.afterClosed()))try{this.stripeLoading.set(!0);let s=yield U(this.stripeConnectService.disconnectAccount());s.success?(this.snackBar.open("Stripe account disconnected successfully","Close",{duration:3e3}),yield this.loadStripeAccountStatus()):this.snackBar.open(s.message||"Failed to disconnect Stripe account","Close",{duration:3e3})}catch(s){console.error("Error disconnecting Stripe:",s),this.snackBar.open("Failed to disconnect Stripe account","Close",{duration:3e3})}finally{this.stripeLoading.set(!1)}})}openStripeDashboard(){return w(this,null,function*(){if(!this.hasStripeAccount()){this.snackBar.open("No Stripe account connected","Close",{duration:3e3});return}try{this.stripeLoading.set(!0);let i=yield U(this.stripeConnectService.createLoginLink());i.url&&window.open(i.url,"_blank")}catch(i){console.error("Error opening Stripe dashboard:",i),this.snackBar.open("Failed to open Stripe dashboard","Close",{duration:3e3})}finally{this.stripeLoading.set(!1)}})}onDateFilterChange(){console.log("Date filter changed:",this.filterForm.value),this.applyFilters()}onActivityFilterChange(i){console.log("Activity filter changed:",this.filterForm.value,i),this.applyFilters()}clearFilters(){this.filterForm.reset({startDate:null,endDate:null,activityFilter:""}),this.applyFilters()}applyFilters(){let i=this.filterForm.value,e=[...this.transactions()];if(console.log("Applying filters with form value:",i),console.log("Original transactions count:",e.length),i.startDate||i.endDate){let r=e.length;e=e.filter(s=>{let m=new Date(s.createdAt);return!(i.startDate&&m<new Date(i.startDate)||i.endDate&&m>new Date(i.endDate))}),console.log("After date filter:",e.length,"removed:",r-e.length)}if(i.activityFilter&&i.activityFilter!==""){let r=e.length;e=e.filter(s=>{let m=s.transaction_type===i.activityFilter;return console.log("Transaction type:",s.transaction_type,"Filter:",i.activityFilter,"Matches:",m),m}),console.log("After activity filter:",e.length,"removed:",r-e.length)}console.log("Final filtered transactions count:",e.length),this.filteredTransactions.set(e)}setViewMode(i){this.viewMode.set(i)}emailActivityReport(){return w(this,null,function*(){try{this.loading.set(!0),this.snackBar.open("Activity report sent to your email","Close",{duration:3e3})}catch(i){console.error("Error sending email report:",i),this.snackBar.open("Failed to send email report","Close",{duration:3e3})}finally{this.loading.set(!1)}})}debugFilters(){console.log("=== FILTER DEBUG ==="),console.log("Form value:",this.filterForm.value),console.log("Total transactions:",this.transactions().length),console.log("Filtered transactions:",this.filteredTransactions().length),console.log("Has active filters:",this.hasActiveFilters());let i=[...new Set(this.transactions().map(e=>e.transaction_type))];console.log("Available transaction types:",i),this.applyFilters()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=D({type:t,selectors:[["app-earnings"]],decls:14,vars:3,consts:[["picker",""],[1,"earnings-container","p-6","space-y-6","bg-gray-50","min-h-screen"],[1,"flex","justify-between","items-center"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"flex","gap-3"],[1,"bg-green-600","hover:bg-green-700","text-white","px-6","py-3","rounded-lg","font-medium","transition-colors","disabled:opacity-50",3,"disabled"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-6","py-3","rounded-lg","font-medium","transition-colors","disabled:opacity-50",3,"disabled"],[1,"flex","gap-2"],[1,"flex","items-center","justify-center","py-12"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-6","text-center"],[1,"bg-green-600","hover:bg-green-700","text-white","px-6","py-3","rounded-lg","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],["diameter","20",1,"inline-block","mr-2"],[1,"mr-2"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-6","py-3","rounded-lg","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],["matTooltip","Open Stripe Dashboard",1,"bg-gray-100","hover:bg-gray-200","text-gray-700","px-4","py-3","rounded-lg","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],["matTooltip","Disconnect Stripe Account",1,"bg-red-100","hover:bg-red-200","text-red-700","px-4","py-3","rounded-lg","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],["diameter","40"],[1,"ml-3","text-gray-600"],[1,"text-red-600","mb-2",2,"font-size","48px","width","48px","height","48px"],[1,"text-lg","font-semibold","text-red-900","mb-2"],[1,"text-red-700","mb-4"],[1,"bg-red-600","hover:bg-red-700","text-white","px-4","py-2","rounded-lg","font-medium","transition-colors",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"p-6","hover:shadow-lg","transition-shadow"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-sm","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"text-green-600"],[1,"space-y-2"],[1,"text-sm","text-gray-600"],[1,"text-4xl","font-bold","text-gray-900"],[1,"mt-4","p-3","rounded-lg","border",3,"ngClass"],[1,"flex","items-center","space-x-2"],[1,"text-lg",3,"ngClass"],[1,"text-sm","font-medium",3,"ngClass"],[1,"ml-2","text-xs","bg-gray-100","hover:bg-gray-200","text-gray-600","px-2","py-1","rounded","transition-colors","disabled:opacity-50",3,"disabled"],[1,"mt-4","space-y-2"],[1,"w-full","bg-green-600","text-white","px-4","py-2","rounded-lg","hover:bg-green-700","transition-colors","disabled:opacity-50",3,"disabled"],[1,"w-full","bg-blue-600","text-white","px-4","py-2","rounded-lg","hover:bg-blue-700","transition-colors","disabled:opacity-50",3,"disabled"],["disabled","",1,"w-full","bg-gray-300","text-gray-500","px-4","py-2","rounded-lg","cursor-not-allowed"],[1,"w-full","bg-orange-600","text-white","px-4","py-2","rounded-lg","hover:bg-orange-700","transition-colors","disabled:opacity-50",3,"disabled"],[1,"mt-3","text-xs","text-gray-500"],[1,"p-6"],[1,"text-blue-600"],[1,"space-y-4"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-xs","text-gray-500"],[1,"text-purple-600"],[1,"text-sm","text-gray-600","mt-2"],[1,"bg-white","rounded-lg","border","border-gray-200","p-6"],[1,"flex","flex-wrap","gap-4","items-center"],[1,"flex","gap-4","flex-wrap"],["appearance","outline",1,"min-w-[250px]"],[3,"rangePicker","formGroup"],["matStartDate","","formControlName","startDate","placeholder","Start date",3,"dateChange"],["matEndDate","","formControlName","endDate","placeholder","End date",3,"dateChange"],["matIconSuffix","",3,"for"],["appearance","outline",1,"min-w-[200px]"],["formControlName","activityFilter",3,"selectionChange"],["value",""],["value","project_started"],["value","project_completed"],["value","additional_payment"],["value","payment_cleared"],["value","withdrawal"],["value","refund"],["value","platform_fee"],["mat-stroked-button","",1,"self-start","mt-2"],[1,"ml-auto","flex","gap-2"],["mat-icon-button","","matTooltip","Grid View",1,"hover:bg-gray-100","transition-colors",3,"click"],["mat-icon-button","","matTooltip","List View",1,"hover:bg-gray-100","transition-colors",3,"click"],["mat-raised-button","","color","primary",1,"ml-2",3,"click","disabled"],["mat-stroked-button","",1,"ml-2","text-xs",3,"click"],[1,"overflow-hidden"],[1,"p-6","border-b","border-gray-200"],[1,"text-xl","font-semibold","text-gray-900"],[1,"transaction-tabs"],["label","Earnings"],[1,"p-6","text-center"],[1,"p-12","text-center"],["label","Withdrawals"],[1,"overflow-x-auto"],[1,"bg-white","rounded-lg","border","border-gray-200","p-12","text-center"],[1,"ml-2","text-xs","bg-gray-100","hover:bg-gray-200","text-gray-600","px-2","py-1","rounded","transition-colors","disabled:opacity-50",3,"click","disabled"],["diameter","12",1,"inline-block"],[1,"text-xs"],[1,"w-full","bg-green-600","text-white","px-4","py-2","rounded-lg","hover:bg-green-700","transition-colors","disabled:opacity-50",3,"click","disabled"],["diameter","16",1,"inline-block","mr-2"],[1,"w-full","bg-blue-600","text-white","px-4","py-2","rounded-lg","hover:bg-blue-700","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"w-full","bg-orange-600","text-white","px-4","py-2","rounded-lg","hover:bg-orange-700","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"flex-1","bg-gray-100","text-gray-700","px-3","py-2","rounded-lg","hover:bg-gray-200","transition-colors","disabled:opacity-50","text-sm",3,"click","disabled"],["diameter","14",1,"inline-block","mr-2"],[1,"mr-1","text-sm"],[1,"flex-1","bg-red-100","text-red-700","px-3","py-2","rounded-lg","hover:bg-red-200","transition-colors","disabled:opacity-50","text-sm",3,"click","disabled"],["mat-stroked-button","",1,"self-start","mt-2",3,"click"],["diameter","30"],[1,"mt-2","text-gray-600"],[1,"text-gray-400","mb-4",2,"font-size","64px","width","64px","height","64px"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600","mb-4"],["mat-raised-button","","color","primary",3,"click"],[1,"text-gray-600"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4","p-6"],["mat-table","",1,"w-full",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","","class","font-semibold text-gray-900",4,"matHeaderCellDef"],["mat-cell","","class","text-gray-600",4,"matCellDef"],["matColumnDef","type"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","amount"],["mat-header-cell","","class","font-semibold text-gray-900 text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","status"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","hover:bg-gray-50",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"font-semibold","text-gray-900"],["mat-cell","",1,"text-gray-600"],["mat-cell",""],[1,"font-medium"],[1,"text-sm","text-gray-500"],["mat-header-cell","",1,"font-semibold","text-gray-900","text-right"],["mat-cell","",1,"text-right"],[1,"font-semibold"],[1,"px-2","py-1","rounded-full","text-xs","font-medium","bg-gray-100"],["mat-header-row",""],["mat-row","",1,"hover:bg-gray-50"],[1,"bg-white","p-4","rounded-lg","border","border-gray-200","hover:shadow-lg","transition-shadow"],[1,"flex","items-start","justify-between","mb-3"],[1,"flex-1"],[1,"font-medium","text-gray-900","mb-1"],[1,"font-bold","text-lg"],[1,"mb-3"],[1,"text-sm","text-gray-700"],[1,"text-xs","text-gray-500","mt-1"],[1,"flex","items-center","justify-between"],[1,"text-xs","font-medium"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-4","py-2","rounded-lg","font-medium","transition-colors"],[1,"mt-4","p-4","bg-blue-50","border","border-blue-200","rounded-lg"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-4","py-2","rounded-lg","font-medium","transition-colors",3,"click"],[1,"flex","items-center","mb-2"],[1,"text-blue-600","mr-2"],[1,"font-medium","text-blue-900"],[1,"text-blue-700","text-sm","mb-3"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-3","py-2","rounded-lg","text-sm","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"bg-white","border","border-blue-300","text-blue-700","px-3","py-2","rounded-lg","text-sm","font-medium","hover:bg-blue-50","transition-colors","disabled:opacity-50",3,"click","disabled"],["matColumnDef","method"],[1,"text-xs","text-gray-400"],[1,"font-semibold","text-red-600"],[1,"text-xs","text-gray-600","font-medium"],[1,"px-2","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"text-gray-600","mb-6"],["routerLink","../businesses",1,"bg-gray-900","text-white","px-6","py-3","rounded-lg","font-medium","hover:bg-gray-800","transition-colors"]],template:function(e,r){e&1&&(a(0,"div",1)(1,"div",2)(2,"div")(3,"h1",3),o(4,"Earnings & Payments"),n(),a(5,"p",4),o(6,"Manage your earnings, track payments, and request withdrawals"),n()(),a(7,"div",5),p(8,Yr,4,2,"button",6)(9,Zr,4,2,"button",7)(10,il,9,4,"div",8),n()(),p(11,nl,4,0,"div",9)(12,al,11,1,"div",10)(13,ws,134,48),n()),e&2&&(l(8),d(r.canWithdrawToStripe()?8:r.canWithdraw()&&!r.hasStripeAccount()?9:-1),l(2),d(r.hasStripeAccount()?10:-1),l(),d(r.loading()?11:r.error()?12:r.earningsSummary()?13:-1))},dependencies:[R,ii,re,nt,rt,ai,_e,dt,se,ce,de,me,W,Ee,V,B,ct,q,$,we,ye,Pe,ke,je,rn,Qi,Zi,tn,Ki,Xi,nn,Ji,en,an,on,ht,Me,he,xe,ge,pt,fe,be,ve,Ce,ue,Bi,Di,Ii,Fi,Ai,Ri,Vi,qi,$i],styles:[".earnings-container[_ngcontent-%COMP%]{min-height:calc(100vh - 64px)}.mat-mdc-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;transition:box-shadow .2s ease-in-out}.mat-mdc-card[_ngcontent-%COMP%]:hover{box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}.transaction-tabs[_ngcontent-%COMP%]   .mat-mdc-tab-group[_ngcontent-%COMP%]{--mat-tab-header-divider-color: #e5e7eb}.transaction-tabs[_ngcontent-%COMP%]   .mat-mdc-tab[_ngcontent-%COMP%]{min-width:120px}.mat-mdc-table[_ngcontent-%COMP%]{background:transparent}.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{background:#f9fafb;border-bottom:1px solid #e5e7eb;font-weight:600;color:#374151;padding:16px}.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid #f3f4f6;padding:16px}.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]:hover{background-color:#f9fafb}button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;font-weight:500;transition:all .2s ease-in-out}button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:4px 8px;border-radius:9999px;font-size:12px;font-weight:500}.status-badge.completed[_ngcontent-%COMP%]{background-color:#dcfce7;color:#166534}.status-badge.pending[_ngcontent-%COMP%]{background-color:#fef3c7;color:#92400e}.status-badge.failed[_ngcontent-%COMP%]{background-color:#fee2e2;color:#991b1b}.status-badge.cancelled[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#6b7280}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.animate-pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s cubic-bezier(.4,0,.6,1) infinite}@media (max-width: 768px){.earnings-container[_ngcontent-%COMP%]{padding:16px}.grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.mat-mdc-table[_ngcontent-%COMP%]{font-size:14px}.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%], .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:8px}}"]})};var Le=(t,i)=>{let e=C(L),r=C(K);return(e.user()?.user_mode||"client")!=="business_owner"?(r.navigate(["/dashboard/projects"]),!1):!0};var _m=[{path:"",redirectTo:"projects",pathMatch:"full"},{path:"overview",component:Ct,canActivate:[Le]},{path:"businesses",loadChildren:()=>import("./chunk-BZPTZWE5.js").then(t=>t.BUSINESSES_ROUTES),canActivate:[Le]},{path:"services",loadChildren:()=>import("./chunk-C3IJVTJX.js").then(t=>t.SERVICES_ROUTES),canActivate:[Le]},{path:"notifications",loadChildren:()=>import("./chunk-WF6PWTV5.js").then(t=>t.NOTIFICATION_ROUTES)},{path:"messages",loadChildren:()=>import("./chunk-LZX4GZ6Q.js").then(t=>t.MESSAGES_ROUTES)},{path:"projects",component:vt},{path:"projects/:id",component:bt},{path:"earnings",component:Tt,canActivate:[Le]},{path:"profile",component:wt},{path:"settings",component:kt},{path:"test-notifications",component:yt},{path:"**",redirectTo:""}];export{_m as DASHBOARD_ROUTES};
