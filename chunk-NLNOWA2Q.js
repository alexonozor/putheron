import{a as Ve,b as Le,c as Be}from"./chunk-EF2HOZIP.js";import{a as ve,b as Se,c as ye,d as Oe,e as ke}from"./chunk-OWCEGI55.js";import{g as be,i as Me,j as we}from"./chunk-DGEBZL2V.js";import{a as G}from"./chunk-JKST2UYV.js";import{M as fe,N as xe,O as Ce,T as he,a as z,ia as Ee,ja as Pe,ka as Te,la as Fe,sa as Ie}from"./chunk-OIQ4AZ5F.js";import{$b as te,Bb as O,Ca as p,Fa as g,Ia as F,Ib as Q,Jb as I,Ka as m,La as B,Ma as E,Na as P,Oa as i,Pa as n,Qa as d,R as y,Ra as R,Rb as X,Sa as U,Sb as Z,Tb as D,Ua as M,Ub as ee,W as f,Wa as _,X as x,Xa as c,Xb as j,Y as v,Z as S,a as J,b as K,bc as k,d as w,eb as V,ec as ie,fb as o,fc as ne,ga as C,gb as h,hb as b,ib as N,ic as re,jc as oe,kc as ae,lc as se,nc as le,oc as ce,pa as H,pc as de,qa as a,qc as me,rb as q,rc as pe,sb as Y,sc as ue,tc as _e,uc as ge,ya as T}from"./chunk-3RLE7VBR.js";var $=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=T({type:r,selectors:[["app-services"]],decls:1,vars:0,template:function(e,s){e&1&&d(0,"router-outlet")},dependencies:[I,Z],encapsulation:2})};var W=(r,t)=>t._id;function Ge(r,t){r&1&&(i(0,"div",9)(1,"div",31),v(),i(2,"svg",32),d(3,"path",33),n(),S(),i(4,"div")(5,"h3",34),o(6,"No businesses found"),n(),i(7,"p",35),o(8,"You need to create a business before you can add services."),n()()()())}function $e(r,t){if(r&1){let e=M();i(0,"button",36),_("click",function(){f(e);let l=c();return x(l.clearSearch())}),v(),i(1,"svg",37),d(2,"path",38),n()()}}function Ae(r,t){if(r&1&&(i(0,"option",22),o(1),n()),r&2){let e=t.$implicit;g("value",e._id),a(),h(e.name)}}function He(r,t){if(r&1&&(i(0,"div",29)(1,"div",31),v(),i(2,"svg",39),d(3,"path",40),n(),S(),i(4,"div")(5,"h3",41),o(6,"Error"),n(),i(7,"p",42),o(8),n()()()()),r&2){let e=c();a(8),h(e.error())}}function Re(r,t){r&1&&(i(0,"div",30),d(1,"div",43),i(2,"span",44),o(3,"Loading services..."),n()())}function Ue(r,t){if(r&1){let e=M();i(0,"div",46),v(),i(1,"svg",47),d(2,"path",15),n()(),S(),i(3,"h3",48),o(4,"No services found"),n(),i(5,"p",49),o(6,"Try adjusting your search term or filter to find what you're looking for."),n(),i(7,"button",50),_("click",function(){f(e);let l=c(3);return l.clearSearch(),x(l.selectedBusiness.set("all"))}),o(8," Clear Filters "),n()}}function qe(r,t){if(r&1){let e=M();i(0,"div",46),v(),i(1,"svg",47),d(2,"path",51),n()(),S(),i(3,"h3",48),o(4,"Create a business first"),n(),i(5,"p",49),o(6,"You need to have at least one business before you can create services."),n(),i(7,"button",52),_("click",function(){f(e);let l=c(3);return x(l.navigateToCreateBusiness())}),v(),i(8,"svg",53),d(9,"path",8),n(),o(10," Create Business "),n()}}function Ye(r,t){if(r&1){let e=M();i(0,"div",46),v(),i(1,"svg",47),d(2,"path",54)(3,"path",55),n()(),S(),i(4,"h3",48),o(5,"No services yet"),n(),i(6,"p",49),o(7,"Get started by creating your first service for your business."),n(),i(8,"button",52),_("click",function(){f(e);let l=c(3);return x(l.navigateToCreateService())}),v(),i(9,"svg",53),d(10,"path",8),n(),o(11," Create Your First Service "),n()}}function We(r,t){if(r&1&&(i(0,"div",45),p(1,Ue,9,0)(2,qe,11,0)(3,Ye,12,0),n()),r&2){let e=c(2);a(),m(e.searchTerm()||e.selectedBusiness()!=="all"?1:e.userBusinesses().length===0?2:3)}}function Je(r,t){if(r&1&&d(0,"img",60),r&2){let e=c().$implicit;g("src",e.images[0],H)("alt",e.name)}}function Ke(r,t){r&1&&(i(0,"div",61),v(),i(1,"svg",79),d(2,"path",54)(3,"path",55),n()())}function Qe(r,t){r&1&&(i(0,"div",64)(1,"span",80),o(2," Featured "),n()())}function Xe(r,t){if(r&1&&(i(0,"p",68),o(1),n()),r&2){let e=c().$implicit;a(),h(e.category)}}function Ze(r,t){if(r&1&&(i(0,"span",72),o(1),n()),r&2){let e=c().$implicit;a(),h(e.duration)}}function et(r,t){if(r&1&&(i(0,"span",82),o(1),n()),r&2){let e=t.$implicit;a(),b(" ",e," ")}}function tt(r,t){if(r&1&&(i(0,"span",82),o(1),n()),r&2){let e=c(2).$implicit;a(),b(" +",e.features.length-3," more ")}}function it(r,t){if(r&1&&(i(0,"div",66)(1,"div",81),E(2,et,2,1,"span",82,B),p(4,tt,2,1,"span",82),n()()),r&2){let e=c().$implicit;a(2),P(e.features.slice(0,3)),a(2),m(e.features.length>3?4:-1)}}function nt(r,t){if(r&1){let e=M();i(0,"div",58)(1,"div",59),p(2,Je,1,2,"img",60)(3,Ke,4,0,"div",61),i(4,"div",62)(5,"span",63),o(6),n()(),p(7,Qe,3,0,"div",64),n(),i(8,"div",65)(9,"div",66)(10,"h3",67),o(11),n(),i(12,"p",23),o(13),n(),p(14,Xe,2,1,"p",68),n(),i(15,"p",69),o(16),n(),i(17,"div",70)(18,"span",71),o(19),n(),p(20,Ze,2,1,"span",72),n(),p(21,it,5,1,"div",66),i(22,"div",73)(23,"div",74)(24,"button",75),_("click",function(){let l=f(e).$implicit,u=c(4);return x(u.editService(l._id))}),v(),i(25,"svg",26),d(26,"path",76),n()()(),S(),i(27,"button",77),_("click",function(){let l=f(e).$implicit,u=c(4);return x(u.deleteService(l._id))}),v(),i(28,"svg",26),d(29,"path",78),n()()()()()}if(r&2){let e=t.$implicit,s=c(4);a(2),m(e.images&&e.images.length>0?2:3),a(3),F(s.getStatusColor(e.is_active)),a(),b(" ",s.getStatusText(e.is_active)," "),a(),m(e.is_featured?7:-1),a(4),h(e.name),a(2),h(s.getBusinessName(e)),a(),m(e.category?14:-1),a(2),b(" ",e.short_description||e.description||"No description available"," "),a(3),h(s.formatPrice(e)),a(),m(e.duration?20:-1),a(),m(e.features&&e.features.length>0?21:-1)}}function rt(r,t){if(r&1&&(i(0,"div",56),E(1,nt,30,12,"div",58,W),n()),r&2){let e=c(3);a(),P(e.filteredServices())}}function ot(r,t){if(r&1&&d(0,"img",86),r&2){let e=c().$implicit;g("src",e.images[0],H)("alt",e.name)}}function at(r,t){r&1&&(v(),i(0,"svg",87),d(1,"path",54)(2,"path",55),n())}function st(r,t){r&1&&(i(0,"span",80),o(1," Featured "),n())}function lt(r,t){if(r&1&&(i(0,"span"),o(1,"\u2022"),n(),i(2,"span"),o(3),n()),r&2){let e=c().$implicit;a(3),h(e.duration)}}function ct(r,t){if(r&1){let e=M();i(0,"div",83)(1,"div",84)(2,"div",85),p(3,ot,1,2,"img",86)(4,at,3,0,":svg:svg",87),n(),i(5,"div",88)(6,"div",89)(7,"h3",90),o(8),n(),i(9,"span",63),o(10),n(),p(11,st,2,0,"span",80),n(),i(12,"p",91),o(13),n(),i(14,"p",92),o(15),n(),i(16,"div",93)(17,"span",71),o(18),n(),p(19,lt,4,1),i(20,"span"),o(21,"\u2022"),n(),i(22,"span"),o(23),n()()(),i(24,"div",94)(25,"button",75),_("click",function(){let l=f(e).$implicit,u=c(4);return x(u.editService(l._id))}),v(),i(26,"svg",95),d(27,"path",76),n()(),S(),i(28,"button",77),_("click",function(){let l=f(e).$implicit,u=c(4);return x(u.deleteService(l._id))}),v(),i(29,"svg",95),d(30,"path",78),n()()()()()}if(r&2){let e=t.$implicit,s=c(4);a(3),m(e.images&&e.images.length>0?3:4),a(5),h(e.name),a(),F(s.getStatusColor(e.is_active)),a(),b(" ",s.getStatusText(e.is_active)," "),a(),m(e.is_featured?11:-1),a(2),h(s.getBusinessName(e)),a(2),b(" ",e.short_description||e.description||"No description available"," "),a(3),h(s.formatPrice(e)),a(),m(e.duration?19:-1),a(4),b("Created ",s.formatDate(e.createdAt),"")}}function dt(r,t){if(r&1&&(i(0,"div",57),E(1,ct,31,11,"div",83,W),n()),r&2){let e=c(3);a(),P(e.filteredServices())}}function mt(r,t){if(r&1&&p(0,rt,3,0,"div",56)(1,dt,3,0,"div",57),r&2){let e=c(2);m(e.viewMode()==="grid"?0:-1),a(),m(e.viewMode()==="list"?1:-1)}}function pt(r,t){if(r&1&&p(0,We,4,1,"div",45)(1,mt,2,2),r&2){let e=c();m(e.filteredServices().length===0?0:1)}}var A=class r{authService=y(z);router=y(D);businessService=y(G);userServices=C([]);userBusinesses=C([]);loading=C(!1);error=C(null);searchTerm=C("");viewMode=C("grid");selectedBusiness=C("all");user=this.authService.user;filteredServices=O(()=>{let t=this.userServices(),e=this.searchTerm().toLowerCase().trim(),s=this.selectedBusiness();return s!=="all"&&(t=t.filter(l=>typeof l.business_id=="string"?l.business_id===s:l.business_id._id===s)),e&&(t=t.filter(l=>l.name.toLowerCase().includes(e)||l.description?.toLowerCase().includes(e)||l.short_description?.toLowerCase().includes(e)||l.category?.toLowerCase().includes(e)||l.tags?.some(u=>u.toLowerCase().includes(e)))),t});ngOnInit(){if(!this.user()){this.router.navigate(["/auth"]);return}this.loadData()}loadData(){return w(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let t=yield this.businessService.getMyBusinessesAsync();this.userBusinesses.set(t);let e=[];for(let s of t)try{let u=(yield this.businessService.getBusinessServicesAsync(s._id)).map(je=>K(J({},je),{business_id:s}));e=[...e,...u]}catch(l){console.warn(`Failed to load services for business ${s._id}:`,l)}this.userServices.set(e)}catch(t){console.error("Error loading services:",t),this.error.set(t.message||"Failed to load services")}finally{this.loading.set(!1)}})}setViewMode(t){this.viewMode.set(t)}onSearchChange(t){let e=t.target;this.searchTerm.set(e.value)}clearSearch(){this.searchTerm.set("")}onBusinessFilterChange(t){let e=t.target;this.selectedBusiness.set(e.value)}navigateToCreateService(){this.router.navigate(["/dashboard/services/create-service"])}navigateToCreateBusiness(){this.router.navigate(["/dashboard/businesses/create-business"])}editService(t){this.router.navigate(["/dashboard/services/edit-service",t])}deleteService(t){return w(this,null,function*(){let e=this.userServices().find(l=>l._id===t);if(!(!e||!confirm(`Are you sure you want to delete "${e.name}"? This action cannot be undone.`)))try{yield this.businessService.deleteServiceAsync(t);let l=this.userServices().filter(u=>u._id!==t);this.userServices.set(l),alert("Service deleted successfully!")}catch(l){console.error("Error deleting service:",l),alert(l.message||"Failed to delete service")}})}getBusinessName(t){return typeof t.business_id=="object"&&t.business_id?.name?t.business_id.name:"Unknown Business"}formatPrice(t){if(!t.price)return"Price not set";switch(t.pricing_type){case"hourly":return`$${t.price}/hour`;case"project":return`$${t.price}/project`;case"custom":return"Custom pricing";default:return`$${t.price}`}}formatDate(t){return new Date(t).toLocaleDateString()}getStatusColor(t){return t?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}getStatusText(t){return t?"Active":"Inactive"}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=T({type:r,selectors:[["app-list-services"]],decls:45,vars:15,consts:[[1,"min-h-screen","bg-gray-50","p-6"],[1,"max-w-7xl","mx-auto"],[1,"mb-8"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600"],[1,"inline-flex","items-center","px-4","py-2","bg-gray-900","text-white","rounded-lg","transition-colors","font-medium",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"bg-yellow-50","border-l-4","border-yellow-400","p-4","rounded-r-lg","mb-6"],[1,"bg-white","rounded-lg","border","border-gray-200","p-4"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","gap-4"],[1,"relative","flex-1","max-w-md"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","Search services...",1,"block","w-full","pl-10","pr-10","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-gray-900","focus:border-transparent",3,"input","value"],[1,"absolute","inset-y-0","right-0","pr-3","flex","items-center","text-gray-400","hover:text-gray-600"],[1,"flex","items-center","space-x-2"],["for","business-filter",1,"text-sm","text-gray-600"],["id","business-filter",1,"border","border-gray-300","rounded-lg","px-3","py-2","text-sm","focus:ring-2","focus:ring-gray-900","focus:border-transparent",3,"change","value"],["value","all"],[3,"value"],[1,"text-sm","text-gray-600"],[1,"flex","bg-gray-100","rounded-lg","p-1"],[1,"p-2","rounded-md","transition-all","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 10h16M4 14h16M4 18h16"],[1,"mb-6","bg-red-50","border-l-4","border-red-400","p-4","rounded-r-lg"],[1,"flex","items-center","justify-center","py-12"],[1,"flex"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-yellow-400","mr-3"],["fill-rule","evenodd","d","M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"text-sm","font-medium","text-yellow-800"],[1,"mt-1","text-sm","text-yellow-700"],[1,"absolute","inset-y-0","right-0","pr-3","flex","items-center","text-gray-400","hover:text-gray-600",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-red-400","mr-3"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"text-sm","font-medium","text-red-800"],[1,"mt-1","text-sm","text-red-700"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-gray-900"],[1,"ml-3","text-gray-600"],[1,"bg-white","rounded-xl","border","border-gray-200","p-12","text-center"],[1,"p-4","bg-gray-50","rounded-full","w-20","h-20","mx-auto","mb-6","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-gray-300"],[1,"text-xl","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],[1,"inline-flex","items-center","px-4","py-2","border","border-gray-300","text-gray-700","rounded-lg","hover:bg-gray-50","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"inline-flex","items-center","px-6","py-3","bg-gray-900","text-white","rounded-lg","hover:bg-gray-800","transition-colors","font-medium",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"space-y-4"],[1,"bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-lg","transition-all","duration-200","overflow-hidden"],[1,"aspect-video","bg-gray-100","relative","overflow-hidden"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"w-full","h-full","flex","items-center","justify-center","bg-gradient-to-br","from-gray-100","to-gray-200"],[1,"absolute","top-3","right-3"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium"],[1,"absolute","top-3","left-3"],[1,"p-6"],[1,"mb-4"],[1,"text-lg","font-semibold","text-gray-900","truncate"],[1,"text-xs","text-gray-500"],[1,"text-sm","text-gray-600","mb-4","line-clamp-2"],[1,"flex","items-center","justify-between","text-sm","mb-4"],[1,"font-semibold","text-lg","text-gray-900"],[1,"text-gray-500"],[1,"flex","items-center","justify-between","pt-4","border-t","border-gray-200"],[1,"flex","space-x-2"],["title","Edit Service",1,"p-2","text-gray-600","hover:text-gray-900","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["title","Delete Service",1,"p-2","text-red-600","hover:text-red-700","hover:bg-red-50","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","text-gray-400"],[1,"bg-yellow-100","text-yellow-800","inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium"],[1,"flex","flex-wrap","gap-1"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","bg-gray-100","text-gray-800"],[1,"bg-white","rounded-lg","border","border-gray-200","p-6","hover:shadow-md","transition-all","duration-200"],[1,"flex","items-center","space-x-6"],[1,"h-16","w-16","rounded-lg","bg-gray-100","flex","items-center","justify-center","flex-shrink-0","overflow-hidden"],[1,"h-full","w-full","object-cover",3,"src","alt"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],[1,"flex-1","min-w-0"],[1,"flex","items-center","space-x-3","mb-2"],[1,"text-xl","font-semibold","text-gray-900","truncate"],[1,"text-sm","text-gray-600","mb-2"],[1,"text-sm","text-gray-700","line-clamp-2","mb-2"],[1,"flex","items-center","space-x-4","text-sm","text-gray-500"],[1,"flex","items-center","space-x-3","flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"h1",4),o(6,"My Services"),n(),i(7,"p",5),o(8,"Manage services across all your businesses"),n()(),i(9,"button",6),_("click",function(){return s.navigateToCreateService()}),v(),i(10,"svg",7),d(11,"path",8),n(),o(12," New Service "),n()(),p(13,Ge,9,0,"div",9),S(),i(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13),v(),i(18,"svg",14),d(19,"path",15),n()(),S(),i(20,"input",16),_("input",function(u){return s.onSearchChange(u)}),n(),p(21,$e,3,0,"button",17),n(),i(22,"div",18)(23,"label",19),o(24,"Business:"),n(),i(25,"select",20),_("change",function(u){return s.onBusinessFilterChange(u)}),i(26,"option",21),o(27,"All Businesses"),n(),E(28,Ae,2,2,"option",22,W),n()(),i(30,"div",18)(31,"span",23),o(32,"View:"),n(),i(33,"div",24)(34,"button",25),_("click",function(){return s.setViewMode("grid")}),v(),i(35,"svg",26),d(36,"path",27),n()(),S(),i(37,"button",25),_("click",function(){return s.setViewMode("list")}),v(),i(38,"svg",26),d(39,"path",28),n()()()(),S(),i(40,"div",23),o(41),n()()()(),p(42,He,9,1,"div",29)(43,Re,4,0,"div",30)(44,pt,2,1),n()()),e&2&&(a(9),F(s.userBusinesses().length===0?"opacity-50 cursor-not-allowed":"hover:bg-gray-800"),g("disabled",s.userBusinesses().length===0),a(4),m(s.userBusinesses().length===0?13:-1),a(7),g("value",s.searchTerm()),a(),m(s.searchTerm()?21:-1),a(4),g("value",s.selectedBusiness()),a(3),P(s.userBusinesses()),a(6),F(s.viewMode()==="grid"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),a(3),F(s.viewMode()==="list"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),a(4),N(" ",s.filteredServices().length," of ",s.userServices().length," services "),a(),m(s.error()?42:-1),a(),m(s.loading()?43:44))},dependencies:[I,j,_e,le,ce],styles:[".services-container[_ngcontent-%COMP%]{max-width:80rem;margin:0 auto;padding:1.5rem}.services-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.services-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#111827;margin:0}.services-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#6b7280;margin-top:.5rem}.services-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:1rem}.search-filter-bar[_ngcontent-%COMP%]{background-color:#fff;padding:1.5rem;border-radius:.5rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;margin-bottom:2rem}.search-filter-bar[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto auto;gap:1rem;align-items:center}@media (max-width: 768px){.search-filter-bar[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}}.search-filter-bar[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative}.search-filter-bar[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:.75rem;height:1.25rem;width:1.25rem;color:#9ca3af}.search-filter-bar[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem .75rem 2.5rem;border:1px solid #d1d5db;border-radius:.375rem;font-size:.875rem}.search-filter-bar[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 2px #3b82f680}.search-filter-bar[_ngcontent-%COMP%]   .business-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.75rem 1rem;border:1px solid #d1d5db;border-radius:.375rem;font-size:.875rem;background-color:#fff}.search-filter-bar[_ngcontent-%COMP%]   .business-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 2px #3b82f680}.search-filter-bar[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]{display:flex;border:1px solid #d1d5db;border-radius:.375rem;overflow:hidden}.search-filter-bar[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem .75rem;border:none;background-color:#fff;color:#6b7280;cursor:pointer;display:flex;align-items:center;gap:.25rem}.search-filter-bar[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.search-filter-bar[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.search-filter-bar[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:1rem;width:1rem}.services-grid[_ngcontent-%COMP%]{display:grid;gap:1.5rem}.services-grid.grid-view[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(350px,1fr))}.services-grid.list-view[_ngcontent-%COMP%]{grid-template-columns:1fr}.service-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:.5rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;overflow:hidden;transition:box-shadow .2s ease-in-out}.service-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.service-card.list-view[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem}.service-card.list-view[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{flex:1;display:grid;grid-template-columns:2fr 1fr 1fr auto;gap:1rem;align-items:center}.service-card.grid-view[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:1.5rem}.service-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1rem}.service-header[_ngcontent-%COMP%]   .service-info[_ngcontent-%COMP%]{flex:1}.service-header[_ngcontent-%COMP%]   .service-info[_ngcontent-%COMP%]   .service-name[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#111827;margin:0 0 .25rem;line-height:1.4}.service-header[_ngcontent-%COMP%]   .service-info[_ngcontent-%COMP%]   .service-business[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;margin-bottom:.5rem}.service-header[_ngcontent-%COMP%]   .service-info[_ngcontent-%COMP%]   .service-category[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .5rem;background-color:#f3f4f6;color:#374151;font-size:.75rem;border-radius:.25rem}.service-header[_ngcontent-%COMP%]   .service-status[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:.25rem}.service-header[_ngcontent-%COMP%]   .service-status[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:.25rem .5rem;border-radius:.25rem;font-size:.75rem;font-weight:500}.service-header[_ngcontent-%COMP%]   .service-status[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background-color:#dcfce7;color:#166534}.service-header[_ngcontent-%COMP%]   .service-status[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background-color:#fef2f2;color:#dc2626}.service-header[_ngcontent-%COMP%]   .service-status[_ngcontent-%COMP%]   .status-badge.featured[_ngcontent-%COMP%]{background-color:#fef3c7;color:#92400e}.service-description[_ngcontent-%COMP%]{color:#6b7280;font-size:.875rem;line-height:1.5;margin-bottom:1rem;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.service-features[_ngcontent-%COMP%]{margin-bottom:1rem}.service-features[_ngcontent-%COMP%]   .features-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.service-features[_ngcontent-%COMP%]   .features-list[_ngcontent-%COMP%]   .feature-tag[_ngcontent-%COMP%]{padding:.25rem .5rem;background-color:#eff6ff;color:#1d4ed8;font-size:.75rem;border-radius:.25rem}.service-price[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}.service-price[_ngcontent-%COMP%]   .price-amount[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#111827}.service-price[_ngcontent-%COMP%]   .price-type[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;text-transform:capitalize}.service-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.service-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:.5rem 1rem;border-radius:.375rem;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease-in-out}.service-actions[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff;border:1px solid #3b82f6}.service-actions[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%]:hover{background-color:#2563eb}.service-actions[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]{background-color:#fff;color:#374151;border:1px solid #d1d5db}.service-actions[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.service-actions[_ngcontent-%COMP%]   button.btn-danger[_ngcontent-%COMP%]{background-color:#dc2626;color:#fff;border:1px solid #dc2626}.service-actions[_ngcontent-%COMP%]   button.btn-danger[_ngcontent-%COMP%]:hover{background-color:#b91c1c}.service-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{margin:0 auto 1rem;height:4rem;width:4rem;color:#9ca3af}.empty-state[_ngcontent-%COMP%]   .empty-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#111827;margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]   .empty-description[_ngcontent-%COMP%]{color:#6b7280;margin-bottom:2rem}.loading-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:4rem 2rem}.loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite;border-radius:50%;height:2rem;width:2rem;border:2px solid #f3f4f6;border-top:2px solid #3b82f6}.loading-state[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{margin-left:1rem;color:#6b7280}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-state[_ngcontent-%COMP%]{background-color:#fef2f2;border:1px solid #fecaca;border-radius:.375rem;padding:1rem;margin-bottom:2rem}.error-state[_ngcontent-%COMP%]   .error-title[_ngcontent-%COMP%]{font-weight:600;color:#dc2626;margin-bottom:.5rem}.error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#b91c1c}@media (max-width: 768px){.services-container[_ngcontent-%COMP%]{padding:1rem}.services-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.services-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}.services-grid.grid-view[_ngcontent-%COMP%]{grid-template-columns:1fr}.service-card.list-view[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.75rem}.service-actions[_ngcontent-%COMP%]{flex-direction:column}.service-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:none}}"]})};var ut=(r,t)=>t._id;function _t(r,t){r&1&&(i(0,"div",2),d(1,"div",5),n())}function gt(r,t){if(r&1){let e=M();i(0,"div",3)(1,"div",6)(2,"div",7)(3,"mat-icon",8),o(4,"error_outline"),n()(),i(5,"h3",9),o(6),n(),i(7,"div",10)(8,"button",11),_("click",function(){f(e);let l=c();return x(l.goBack())}),o(9," Go Back "),n(),i(10,"button",12),_("click",function(){f(e);let l=c();return x(l.loadData())}),o(11," Try Again "),n()()()()}if(r&2){let e=c();a(6),h(e.error())}}function vt(r,t){r&1&&(i(0,"div",3)(1,"div",6)(2,"div",13)(3,"mat-icon",14),o(4,"business"),n()(),i(5,"h3",9),o(6,"No businesses found"),n(),i(7,"p",15),o(8,"You need to create a business before adding services."),n(),i(9,"button",16)(10,"mat-icon"),o(11,"add"),n(),o(12," Create Business "),n()()())}function ft(r,t){r&1&&o(0," Update your service information and settings ")}function xt(r,t){r&1&&o(0," Create a new service for your business ")}function Ct(r,t){if(r&1&&(i(0,"mat-option",45),o(1),n()),r&2){let e=t.$implicit;g("value",e._id),a(),b(" ",e.name," ")}}function ht(r,t){r&1&&(i(0,"mat-error"),o(1,"Please select a business"),n())}function bt(r,t){if(r&1&&(i(0,"mat-form-field",29)(1,"mat-label"),o(2,"Business"),n(),i(3,"mat-select",62),E(4,Ct,2,2,"mat-option",45,ut),n(),p(6,ht,2,0,"mat-error"),n()),r&2){let e=c(2);a(4),P(e.userBusinesses()),a(2),m(e.business_id!=null&&e.business_id.hasError("required")&&(e.business_id!=null&&e.business_id.touched)?6:-1)}}function St(r,t){r&1&&(i(0,"mat-error"),o(1,"Service name is required"),n())}function yt(r,t){r&1&&(i(0,"mat-error"),o(1,"Service name must be at least 2 characters"),n())}function Mt(r,t){r&1&&(i(0,"mat-error"),o(1,"Service name cannot exceed 100 characters"),n())}function wt(r,t){r&1&&(i(0,"mat-error"),o(1,"Short description cannot exceed 160 characters"),n())}function Et(r,t){r&1&&(i(0,"mat-error"),o(1,"Price cannot be negative"),n())}function Pt(r,t){if(r&1&&(i(0,"mat-option",45),o(1),q(2,"titlecase"),n()),r&2){let e=t.$implicit;g("value",e),a(),b(" ",Y(2,2,e)," ")}}function Ot(r,t){if(r&1&&(o(0),q(1,"titlecase")),r&2){let e=c(2);N(" $",e.price==null?null:e.price.value," (",Y(1,2,e.pricing_type==null?null:e.pricing_type.value),") ")}}function kt(r,t){r&1&&o(0," Not specified ")}function Tt(r,t){r&1&&(i(0,"span",60),o(1,"Active"),n())}function Ft(r,t){r&1&&(i(0,"span",22),o(1,"Inactive"),n())}function It(r,t){r&1&&(i(0,"span",61),o(1,"\u2022 Featured"),n())}function Vt(r,t){if(r&1&&(R(0),i(1,"mat-icon",63),o(2,"hourglass_empty"),n(),o(3),U()),r&2){let e=c(2);a(3),b(" ",e.isEditMode()?"Updating...":"Creating..."," ")}}function Lt(r,t){if(r&1&&(R(0),i(1,"mat-icon",19),o(2),n(),o(3),U()),r&2){let e=c(2);a(2),h(e.isEditMode()?"save":"add"),a(),b(" ",e.submitButtonText()," ")}}function Bt(r,t){if(r&1){let e=M();i(0,"div",4)(1,"div",17)(2,"button",18),_("click",function(){f(e);let l=c();return x(l.goBack())}),i(3,"mat-icon",19),o(4,"arrow_back"),n(),o(5," Back to Services "),n(),i(6,"div",20)(7,"h1",21),o(8),n(),i(9,"p",22),p(10,ft,1,0)(11,xt,1,0),n()()(),i(12,"div",23)(13,"mat-stepper",24,0)(15,"mat-step",25)(16,"form",26)(17,"div")(18,"h3",27),o(19," Service Details "),n(),i(20,"p",28),o(21," Provide basic information about your service. "),n()(),p(22,bt,7,1,"mat-form-field",29),i(23,"mat-form-field",29)(24,"mat-label"),o(25,"Service Name"),n(),d(26,"input",30),p(27,St,2,0,"mat-error")(28,yt,2,0,"mat-error")(29,Mt,2,0,"mat-error"),n(),i(30,"mat-form-field",29)(31,"mat-label"),o(32,"URL Slug"),n(),d(33,"input",31),i(34,"mat-hint"),o(35,"Used in URLs. Auto-generated if left blank."),n()(),i(36,"mat-form-field",29)(37,"mat-label"),o(38,"Short Description"),n(),d(39,"textarea",32),i(40,"mat-hint",33),o(41),n(),p(42,wt,2,0,"mat-error"),n(),i(43,"mat-form-field",29)(44,"mat-label"),o(45,"Full Description"),n(),d(46,"textarea",34),n(),i(47,"mat-form-field",29)(48,"mat-label"),o(49,"Category"),n(),d(50,"input",35),n(),i(51,"div",36)(52,"button",37),_("click",function(){f(e);let l=V(14),u=c();return x(u.nextStep(l))}),o(53," Next "),i(54,"mat-icon",38),o(55,"arrow_forward"),n()()()()(),i(56,"mat-step",39)(57,"form",26)(58,"div")(59,"h3",27),o(60," Pricing & Service Features "),n(),i(61,"p",28),o(62," Set your pricing and define what's included in your service. "),n()(),i(63,"div")(64,"h4",40),o(65,"Pricing Information"),n(),i(66,"div",41)(67,"mat-form-field",42)(68,"mat-label"),o(69,"Price"),n(),d(70,"input",43),p(71,Et,2,0,"mat-error"),n(),i(72,"mat-form-field",42)(73,"mat-label"),o(74,"Pricing Type"),n(),i(75,"mat-select",44),E(76,Pt,3,4,"mat-option",45,B),n()()(),i(78,"mat-form-field",29)(79,"mat-label"),o(80,"Duration"),n(),d(81,"input",46),n()(),i(82,"div")(83,"h4",40),o(84,"Service Details"),n(),i(85,"mat-form-field",29)(86,"mat-label"),o(87,"Features"),n(),d(88,"textarea",47),i(89,"mat-hint"),o(90,"Separate features with commas"),n()(),i(91,"mat-form-field",29)(92,"mat-label"),o(93,"Tags"),n(),d(94,"input",48),i(95,"mat-hint"),o(96,"Separate tags with commas"),n()()(),i(97,"div")(98,"h4",40),o(99,"Service Status"),n(),i(100,"div",49)(101,"mat-checkbox",50),o(102," Active (visible to customers) "),n(),i(103,"mat-checkbox",51),o(104," Featured service "),n()()(),i(105,"div",52)(106,"button",53),_("click",function(){f(e);let l=V(14),u=c();return x(u.previousStep(l))}),i(107,"mat-icon",19),o(108,"arrow_back"),n(),o(109," Previous "),n(),i(110,"button",37),_("click",function(){f(e);let l=V(14),u=c();return x(u.nextStep(l))}),o(111," Next "),i(112,"mat-icon",38),o(113,"arrow_forward"),n()()()()(),i(114,"mat-step",54)(115,"form",26)(116,"div")(117,"h3",27),o(118," SEO Settings (Optional) "),n(),i(119,"p",28),o(120," Optimize your service for search engines to improve visibility. "),n()(),i(121,"mat-form-field",29)(122,"mat-label"),o(123,"Meta Title"),n(),d(124,"input",55),i(125,"mat-hint"),o(126,"If left blank, service name will be used"),n()(),i(127,"mat-form-field",29)(128,"mat-label"),o(129,"Meta Description"),n(),d(130,"textarea",56),i(131,"mat-hint",33),o(132),n()(),i(133,"div",57)(134,"h4",40),o(135,"Review Your Service"),n(),i(136,"div",58)(137,"div",52)(138,"span",22),o(139,"Service Name:"),n(),i(140,"span",59),o(141),n()(),i(142,"div",52)(143,"span",22),o(144,"Price:"),n(),i(145,"span",59),p(146,Ot,2,4)(147,kt,1,0),n()(),i(148,"div",52)(149,"span",22),o(150,"Status:"),n(),i(151,"span",59),p(152,Tt,2,0,"span",60)(153,Ft,2,0,"span",22)(154,It,2,0,"span",61),n()()()(),i(155,"div",52)(156,"button",53),_("click",function(){f(e);let l=V(14),u=c();return x(u.previousStep(l))}),i(157,"mat-icon",19),o(158,"arrow_back"),n(),o(159," Previous "),n(),i(160,"button",37),_("click",function(){f(e);let l=c();return x(l.onSubmit())}),p(161,Vt,4,1,"ng-container")(162,Lt,4,2,"ng-container"),n()()()()()()()}if(r&2){let e=c();a(8),b(" ",e.pageTitle()," "),a(2),m(e.isEditMode()?10:11),a(3),g("linear",!0),a(2),g("stepControl",e.serviceInfoForm),a(),g("formGroup",e.serviceInfoForm),a(6),m(e.isEditMode()?-1:22),a(5),m(e.name!=null&&e.name.hasError("required")&&(e.name!=null&&e.name.touched)?27:-1),a(),m(e.name!=null&&e.name.hasError("minlength")&&(e.name!=null&&e.name.touched)?28:-1),a(),m(e.name!=null&&e.name.hasError("maxlength")&&(e.name!=null&&e.name.touched)?29:-1),a(12),b("",((e.short_description==null?null:e.short_description.value)||"").length,"/160 characters"),a(),m(e.short_description!=null&&e.short_description.hasError("maxlength")&&(e.short_description!=null&&e.short_description.touched)?42:-1),a(10),g("disabled",!e.isServiceInfoValid()),a(4),g("stepControl",e.servicePricingForm),a(),g("formGroup",e.servicePricingForm),a(14),m(e.price!=null&&e.price.hasError("min")&&(e.price!=null&&e.price.touched)?71:-1),a(5),P(e.pricingTypes),a(34),g("disabled",!e.isServicePricingValid()),a(4),g("stepControl",e.serviceSeoForm),a(),g("formGroup",e.serviceSeoForm),a(17),b("",((e.meta_description==null?null:e.meta_description.value)||"").length,"/160 characters"),a(9),h((e.name==null?null:e.name.value)||"Not specified"),a(5),m(e.price!=null&&e.price.value?146:147),a(6),m(e.is_active!=null&&e.is_active.value?152:153),a(2),m(e.is_featured!=null&&e.is_featured.value?154:-1),a(6),g("disabled",!e.canSubmitService()),a(),m(e.submitting()?161:162)}}var L=class r{authService=y(z);router=y(D);route=y(X);businessService=y(G);fb=y(ue);userBusinesses=C([]);currentService=C(null);loading=C(!1);error=C(null);submitting=C(!1);isEditMode=C(!1);serviceId=C("");serviceInfoForm;servicePricingForm;serviceSeoForm;pricingTypes=["fixed","hourly","project","custom"];hasBusinesses=O(()=>this.userBusinesses().length>0);canSubmitService=O(()=>this.hasBusinesses()&&!this.submitting());pageTitle=O(()=>this.isEditMode()?"Edit Service":"Create New Service");submitButtonText=O(()=>this.isEditMode()?"Update Service":"Create Service");constructor(){this.serviceInfoForm=this.fb.group({business_id:["",[k.required]],name:["",[k.required,k.minLength(2),k.maxLength(100)]],slug:[""],short_description:["",[k.maxLength(160)]],description:[""],category:[""]}),this.servicePricingForm=this.fb.group({price:[null,[k.min(0)]],pricing_type:["fixed"],duration:[""],is_active:[!0],is_featured:[!1],features:[""],tags:[""]}),this.serviceSeoForm=this.fb.group({meta_title:[""],meta_description:[""]}),this.serviceInfoForm.get("name")?.valueChanges.subscribe(t=>{if(t&&!this.serviceInfoForm.get("slug")?.dirty){let e=this.generateSlug(t);this.serviceInfoForm.get("slug")?.setValue(e)}})}ngOnInit(){return w(this,null,function*(){let t=this.route.snapshot.paramMap.get("id");if(t&&(this.isEditMode.set(!0),this.serviceId.set(t)),yield this.loadUserBusinesses(),!this.hasBusinesses()){this.router.navigate(["/dashboard/businesses/create-business"]);return}if(this.isEditMode())yield this.loadService();else{let e=this.userBusinesses();e.length===1&&this.serviceInfoForm.get("business_id")?.setValue(e[0]._id)}})}loadUserBusinesses(){return w(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let t=yield this.businessService.getMyBusinessesAsync();this.userBusinesses.set(t)}catch(t){console.error("Error loading user businesses:",t),this.error.set(t?.message||"Failed to load businesses")}finally{this.loading.set(!1)}})}loadService(){return w(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let t=yield this.businessService.getServiceAsync(this.serviceId());if(!t)throw new Error("Service not found");this.currentService.set(t),this.populateForm(t)}catch(t){console.error("Error loading service:",t),this.error.set(t?.message||"Failed to load service")}finally{this.loading.set(!1)}})}populateForm(t){this.serviceInfoForm.patchValue({business_id:typeof t.business_id=="string"?t.business_id:t.business_id._id,name:t.name,slug:t.slug,short_description:t.short_description||"",description:t.description||"",category:t.category||""}),this.servicePricingForm.patchValue({price:t.price,pricing_type:t.pricing_type||"fixed",duration:t.duration||"",is_active:t.is_active??!0,is_featured:t.is_featured??!1,features:t.features?.join(", ")||"",tags:t.tags?.join(", ")||""}),this.serviceSeoForm.patchValue({meta_title:t.meta_title||"",meta_description:t.meta_description||""})}generateSlug(t){return t.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}formatFeatures(t){return t.trim()?t.split(",").map(e=>e.trim()).filter(e=>e.length>0):[]}formatTags(t){return t.trim()?t.split(",").map(e=>e.trim()).filter(e=>e.length>0):[]}isServiceInfoValid(){return this.serviceInfoForm.valid}isServicePricingValid(){return this.servicePricingForm.valid}isServiceSeoValid(){return this.serviceSeoForm.valid}nextStep(t){t.next()}previousStep(t){t.previous()}onSubmit(){return w(this,null,function*(){if(!this.isServiceInfoValid()||!this.isServicePricingValid()||!this.isServiceSeoValid()||this.submitting()){this.markAllFormsTouched();return}this.submitting.set(!0),this.error.set(null);try{let t=this.serviceInfoForm.value,e=this.servicePricingForm.value,s=this.serviceSeoForm.value,l={name:t.name,slug:t.slug||this.generateSlug(t.name),short_description:t.short_description||void 0,description:t.description||void 0,category:t.category||void 0,features:this.formatFeatures(e.features),price:e.price||void 0,pricing_type:e.pricing_type,duration:e.duration||void 0,tags:this.formatTags(e.tags),is_active:e.is_active,is_featured:e.is_featured,meta_title:s.meta_title||void 0,meta_description:s.meta_description||void 0};this.isEditMode()?yield this.businessService.updateServiceAsync(this.serviceId(),l):yield this.businessService.createServiceAsync(t.business_id,l),this.router.navigate(["/dashboard/services"])}catch(t){console.error("Error saving service:",t),this.error.set(t?.message||`Failed to ${this.isEditMode()?"update":"create"} service`)}finally{this.submitting.set(!1)}})}markAllFormsTouched(){Object.keys(this.serviceInfoForm.controls).forEach(t=>{this.serviceInfoForm.get(t)?.markAsTouched()}),Object.keys(this.servicePricingForm.controls).forEach(t=>{this.servicePricingForm.get(t)?.markAsTouched()}),Object.keys(this.serviceSeoForm.controls).forEach(t=>{this.serviceSeoForm.get(t)?.markAsTouched()})}onCancel(){this.router.navigate(["/dashboard/services"])}goBack(){this.router.navigate(["/dashboard/services"])}loadData(){this.isEditMode()?this.loadService():this.loadUserBusinesses()}get business_id(){return this.serviceInfoForm.get("business_id")}get name(){return this.serviceInfoForm.get("name")}get slug(){return this.serviceInfoForm.get("slug")}get short_description(){return this.serviceInfoForm.get("short_description")}get description(){return this.serviceInfoForm.get("description")}get category(){return this.serviceInfoForm.get("category")}get features(){return this.serviceInfoForm.get("features")}get price(){return this.servicePricingForm.get("price")}get pricing_type(){return this.servicePricingForm.get("pricing_type")}get duration(){return this.servicePricingForm.get("duration")}get tags(){return this.servicePricingForm.get("tags")}get is_active(){return this.servicePricingForm.get("is_active")}get is_featured(){return this.servicePricingForm.get("is_featured")}get meta_title(){return this.serviceSeoForm.get("meta_title")}get meta_description(){return this.serviceSeoForm.get("meta_description")}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=T({type:r,selectors:[["app-create-service"]],decls:5,vars:1,consts:[["stepper",""],[1,"min-h-screen","bg-gray-50"],[1,"flex","justify-center","items-center","py-20"],[1,"max-w-2xl","mx-auto","px-4","sm:px-6","lg:px-8","py-12"],[1,"max-w-3xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-blue-600"],[1,"text-center","py-12","bg-white","rounded-lg","shadow-sm","border","border-gray-200"],[1,"text-red-400","mb-4"],[1,"text-6xl"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"space-x-4"],[1,"bg-gray-600","text-white","px-4","py-2","rounded-lg","hover:bg-gray-700","transition-colors",3,"click"],[1,"bg-blue-600","text-white","px-4","py-2","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"mx-auto","h-12","w-12","text-gray-400","mb-4"],[2,"font-size","48px","height","48px","width","48px"],[1,"text-sm","text-gray-500","mb-6"],["mat-raised-button","","color","primary","routerLink","/dashboard/businesses/create-business"],[1,"mb-8"],[1,"mb-4","flex","items-center","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],[1,"mr-2"],[1,"text-center"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200"],[1,"service-stepper",3,"linear"],["label","Service Information",3,"stepControl"],[1,"p-6","space-y-6",3,"formGroup"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"text-gray-600","mb-6"],["appearance","outline",1,"w-full"],["matInput","","formControlName","name","placeholder","e.g., Web Design, Logo Creation","required",""],["matInput","","formControlName","slug","placeholder","auto-generated from service name"],["matInput","","formControlName","short_description","rows","2","placeholder","Brief description for search results and previews","maxlength","160"],["align","end"],["matInput","","formControlName","description","rows","4","placeholder","Detailed description of your service"],["matInput","","formControlName","category","placeholder","e.g., Design, Development, Marketing"],[1,"flex","justify-end"],["type","button","mat-flat-button","","color","primary",3,"click","disabled"],[1,"ml-2"],["label","Pricing & Features",3,"stepControl"],[1,"text-md","font-medium","text-gray-900","mb-3"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline"],["matInput","","type","number","formControlName","price","min","0","step","0.01","placeholder","0.00"],["formControlName","pricing_type"],[3,"value"],["matInput","","formControlName","duration","placeholder","e.g., 2-3 weeks, 1 hour"],["matInput","","formControlName","features","rows","3","placeholder","Feature 1, Feature 2, Feature 3"],["matInput","","formControlName","tags","placeholder","tag1, tag2, tag3"],[1,"space-y-4"],["formControlName","is_active"],["formControlName","is_featured"],[1,"flex","justify-between"],["type","button","mat-button","",3,"click"],["label","SEO & Finish",3,"stepControl"],["matInput","","formControlName","meta_title","placeholder","Custom title for search engines"],["matInput","","formControlName","meta_description","rows","3","placeholder","Custom description for search engines","maxlength","160"],[1,"bg-gray-50","rounded-lg","p-4"],[1,"space-y-2","text-sm"],[1,"font-medium"],[1,"text-green-600"],[1,"text-blue-600","ml-2"],["formControlName","business_id","required",""],[1,"animate-spin","mr-2"]],template:function(e,s){e&1&&(i(0,"div",1),p(1,_t,2,0,"div",2)(2,gt,12,1,"div",3)(3,vt,13,0,"div",3)(4,Bt,163,25,"div",4),n()),e&2&&(a(),m(s.loading()?1:s.error()?2:s.hasBusinesses()?4:3))},dependencies:[I,Q,j,ee,ge,re,te,oe,ie,ne,me,pe,de,ae,se,be,he,fe,Ce,xe,we,Me,ye,Se,ve,Pe,Ee,Fe,Te,Ie,ke,Oe,Be,Ve,Le],encapsulation:2})};var Fi=[{path:"",component:$,children:[{path:"list-services",component:A},{path:"",redirectTo:"list-services",pathMatch:"full"},{path:"create-service",component:L},{path:"edit-service/:id",component:L}]}];export{Fi as SERVICES_ROUTES};
