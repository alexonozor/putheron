<mat-card class="h-full flex flex-col !shadow-none !border !border-gray-200 hover:!border-primary transition-all duration-300 !overflow-hidden !rounded-2xl">
  <!-- Service Image -->
  <div class="relative">
    @if (service().images && service().images!.length > 0) {
      <div class="relative h-48 overflow-hidden bg-gray-100">
        <img 
          [src]="service().images![0]" 
          [alt]="service().name"
          class="w-full h-full object-cover"
          (error)="onImageError($event)" />
      </div>
    } @else {
      <div class="relative h-48 bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center">
        <mat-icon class="!text-6xl !w-16 !h-16 text-gray-400">image</mat-icon>
      </div>
    }
    
    <!-- Featured and Active Badges -->
    <div class="absolute top-3 left-3 flex gap-2">
      @if (isFeatured()) {
        <div class="bg-yellow-100 text-yellow-800 px-3 py-1.5 rounded-full text-xs font-semibold shadow-sm">
          Featured
        </div>
      }
      @if (service().is_active) {
        <div class="bg-green-100 text-green-800 px-3 py-1.5 rounded-full text-xs font-semibold shadow-sm">
          Active
        </div>
      }
    </div>
  </div>

  <!-- Card Content -->
  <div class="flex-1 p-6 flex flex-col">
    <!-- Service Title -->
    <h3 class="text-xl font-bold text-gray-900 mb-2 line-clamp-2">
      {{ service().name }}
    </h3>

    <!-- Short Description -->
    @if (service().short_description) {
      <p class="text-sm text-gray-600 mb-4 line-clamp-2 flex-1">
        {{ service().short_description }}
      </p>
    } @else {
      <div class="mb-4 flex-1"></div>
    }

    <!-- Price and Duration -->
    <div class="flex items-center justify-between mb-6 pb-6 border-b border-gray-200">
      <div class="flex items-baseline gap-1">
        <span class="text-3xl font-bold text-gray-900">
          {{ formatPrice(service().price, service().pricing_type) }}
        </span>
      </div>
      @if (service().duration) {
        <div class="text-right">
          <span class="text-base font-medium text-gray-600">
            {{ formatDuration(service().duration) }}
          </span>
        </div>
      }
    </div>

    <!-- Features List -->
    @if (service().features && service().features!.length > 0) {
      <div class="mb-6">
        <h4 class="text-sm font-semibold text-gray-700 mb-3">Includes:</h4>
        <ul class="space-y-2">
          @for (feature of service().features!.slice(0, 3); track feature) {
            <li class="flex items-start gap-2 text-sm text-gray-700">
              <mat-icon class="!w-5 !h-5 !text-base text-green-600 flex-shrink-0 mt-0.5">check_circle</mat-icon>
              <span class="flex-1">{{ feature }}</span>
            </li>
          }
        </ul>
        @if (service().features!.length > 3) {
          <p class="text-xs text-gray-500 mt-2 ml-7">
            +{{ service().features!.length - 3 }} more feature{{ service().features!.length - 3 > 1 ? 's' : '' }}
          </p>
        }
      </div>
    }

    <!-- Action Buttons -->
    <div class="flex items-center gap-3 pt-4 border-t border-gray-100">
      @if (isOwner()) {
        <button mat-icon-button (click)="onEditClick()" class="!text-gray-600 hover:!text-primary">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-icon-button class="!text-red-600 hover:!text-red-700">
          <mat-icon>delete</mat-icon>
        </button>
      } @else {
        <button mat-raised-button color="primary" class="!w-full !font-semibold !text-sm !h-11" (click)="onStartProjectClick()">
          <mat-icon class="mr-2">send</mat-icon>
          Start Project
        </button>
      }
    </div>
  </div>
</mat-card>
