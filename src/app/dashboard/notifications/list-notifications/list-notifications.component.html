<div  class="min-h-screen bg-gray-50">
  
      

  <!-- Main Content -->
  <div class="lg:max-w-7xl  px-4 sm:px-6 lg:px-8 py-8">
    <!-- Dashboard Subheader -->
    <div class="px-6 pt-6">
        <app-dashboard-subheader title="Notifications" subtitle="Manage all your notifications"
          >
          <button matButton="filled" color="primary" (click)="refreshNotifications()" class="flex items-center">
            <mat-icon class="mr-2">refresh</mat-icon>
            Refresh
          </button>
        </app-dashboard-subheader>
      </div>
    <!-- Filter Component -->
    <app-business-search-filter>
      <div class="flex flex-col sm:flex-row gap-4 items-start sm:items-center">
        <!-- Type Filter -->
        <mat-form-field appearance="outline" class="w-full sm:w-64" subscriptSizing="dynamic">
          <mat-label>Notification Type</mat-label>
          <mat-select
            [value]="selectedType()"
            (selectionChange)="onTypeChange($event.value)"
          >
            <mat-option value="">All Types</mat-option>
            <mat-option value="project_created">Project Created</mat-option>
            <mat-option value="project_accepted">Project Accepted</mat-option>
            <mat-option value="project_rejected">Project Rejected</mat-option>
            <mat-option value="project_started">Project Started</mat-option>
            <mat-option value="project_completed">Project Completed</mat-option>
            <mat-option value="message_received">Messages</mat-option>
            <mat-option value="promotion">Promotions</mat-option>
            <mat-option value="system_announcement">Announcements</mat-option>
          </mat-select>
        </mat-form-field>

        <!-- Status Filter -->
        <mat-form-field appearance="outline" class="w-full sm:w-48" subscriptSizing="dynamic">
          <mat-label>Status</mat-label>
          <mat-select
            [value]="selectedStatus()"
            (selectionChange)="onStatusChange($event.value)"
          >
            <mat-option value="">All Status</mat-option>
            <mat-option value="unread">Unread</mat-option>
            <mat-option value="read">Read</mat-option>
          </mat-select>
        </mat-form-field>

        <!-- Actions -->
        @if (unreadCount() > 0) {
          <button
            mat-raised-button
            color="primary"
            (click)="markAllAsRead()"
            class="!normal-case"
          >
            <mat-icon>mark_email_read</mat-icon>
            Mark All Read
          </button>
        }

        @if (hasActiveFilters()) {
          <button
            mat-stroked-button
            (click)="handleClearFilters()"
            class="!normal-case"
          >
            <mat-icon>clear</mat-icon>
            Clear Filters
          </button>
        }
      </div>
    </app-business-search-filter>

    <!-- Stats Component -->
    @if (!isLoading()) {
      <div class="mb-8">
        <app-notification-stats
          [totalCount]="totalCount()"
          [unreadCount]="unreadCount()"
          [readCount]="readCount()"
        ></app-notification-stats>
      </div>
    }

    <!-- Loading State -->
    @if (isLoading() && filteredNotifications().length === 0) {
      <div class="flex items-center justify-center py-16">
        <mat-spinner diameter="50"></mat-spinner>
      </div>
    }

    <!-- Empty State -->
    @if (!isLoading() && filteredNotifications().length === 0) {
      <app-empty-state
        [title]="'No notifications found'"
        [description]="getEmptyMessage()"
        [icon]="'notifications_none'"
      ></app-empty-state>
    }

    <!-- Notifications Grid -->
    @if (filteredNotifications().length > 0 && !isLoading()) {
      <div class="grid grid-cols-1 gap-4 mb-8">
        @for (notification of paginatedNotifications(); track notification._id) {
          <app-notification-item
            [notification]="notification"
            (click)="onNotificationClick(notification)"
            (markAsRead)="onMarkAsRead(notification)"
            (delete)="onDeleteNotification(notification)"
          ></app-notification-item>
        }
      </div>
    }

    <!-- Pagination -->
    @if (filteredNotifications().length > 0 && !isLoading()) {
      <mat-paginator
        #paginator
        [length]="filteredNotifications().length"
        [pageSize]="pageSize()"
        (page)="onPageChange($event)"
        showFirstLastButtons
        class="!sticky !bottom-0 !bg-white !border-t border-gray-100">
      </mat-paginator>
    }
  </div>
</div>