import{a as S}from"./chunk-MAUTWKH5.js";import{a as x,b as A}from"./chunk-M23MWY4A.js";import{a as P}from"./chunk-DVEYH5MF.js";import{s as I,u as T}from"./chunk-IZGM5G4Z.js";import{a as F,b as y}from"./chunk-EPCK2AMG.js";import{g as _}from"./chunk-HNHRL3LT.js";import{w as M}from"./chunk-5TL7AFVW.js";import{Hb as v,Jb as f,Ob as p,Pb as s,Qb as a,Wc as C,ab as c,ac as g,cc as b,ga as n,pc as l,qc as m,rb as d,sc as h,va as r}from"./chunk-VCYZZ2B3.js";import{e as u}from"./chunk-JKOY2XUY.js";function N(i,e){i&1&&(s(0,"mat-icon",1),m(1,"refresh"),a())}function O(i,e){if(i&1&&(s(0,"mat-icon"),m(1),a()),i&2){let t=b();l(t.getIconClass()),c(),h(" ",t.isFavorited()?"favorite":"favorite_border"," ")}}var B=class i{businessId;businessName;size="medium";showText=!1;buttonClass="favorite-button";favoritesService=n(S);authService=n(P);router=n(_);loading=r(!1);isFavorited=r(!1);isAuthenticated=this.authService.isAuthenticated;constructor(){C(()=>{this.businessId&&this.isAuthenticated()?this.favoritesService.isBusinessFavorited(this.businessId).subscribe(e=>this.isFavorited.set(e)):this.isFavorited.set(!1)})}onFavoriteClick(){return u(this,null,function*(){if(!this.isAuthenticated()){this.router.navigate(["/login"]);return}if(!this.businessId){console.error("Business ID is required for favorite button");return}let e=this.isFavorited(),t=this.businessName||"this business";this.loading.set(!0);try{e?(yield this.favoritesService.removeFromFavoritesAsync(this.businessId),console.log(`\u2705 Removed ${t} from favorites`)):(yield this.favoritesService.addToFavoritesAsync(this.businessId),console.log(`\u2705 Added ${t} to favorites`)),this.loading.set(!1)}catch(o){console.error("\u274C Error toggling favorite:",o),this.loading.set(!1)}})}getTooltipText(){return this.isAuthenticated()?this.loading()?"Processing...":this.isFavorited()?"Remove from favorites":"Add to favorites":"Login to save favorites"}getIconClass(){let e="favorite-icon",t=this.isFavorited()?"favorite-icon-active":"favorite-icon-inactive";return`${e} ${t}`}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=d({type:i,selectors:[["app-favorite-button"]],inputs:{businessId:"businessId",businessName:"businessName",size:"size",showText:"showText",buttonClass:"buttonClass"},decls:3,vars:5,consts:[["mat-icon-button","",3,"click","disabled","matTooltip"],[1,"animate-spin"],[3,"class"]],template:function(t,o){t&1&&(s(0,"button",0),g("click",function(){return o.onFavoriteClick()}),v(1,N,2,0,"mat-icon",1)(2,O,2,3,"mat-icon",2),a()),t&2&&(l(o.buttonClass),p("disabled",o.loading())("matTooltip",o.getTooltipText()),c(),f(o.loading()?1:2))},dependencies:[M,y,F,T,I,A,x],styles:[".favorite-button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.favorite-button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.favorite-icon[_ngcontent-%COMP%]{transition:color .2s ease-in-out}.favorite-icon-active[_ngcontent-%COMP%]{color:#ef4444}.favorite-icon-inactive[_ngcontent-%COMP%]{color:#6b7280}.favorite-icon-inactive[_ngcontent-%COMP%]:hover{color:#ef4444}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}"]})};export{B as a};
