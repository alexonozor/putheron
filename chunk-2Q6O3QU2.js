import{a as de,b as pe,c as ce}from"./chunk-SGMUXARX.js";import{a as ue,b as _e}from"./chunk-IYHRCE6R.js";import{a as Ce,b as fe}from"./chunk-JQ4VKR4I.js";import{b as ae}from"./chunk-FGA65A7Y.js";import{a as oe}from"./chunk-WJ4DFVWN.js";import"./chunk-OIXXJWNI.js";import{a as me,b as se}from"./chunk-I5NYEOQ7.js";import{d as O,h as Z,i as ee,j as te,l as ie,m as ne}from"./chunk-RXAK7GQU.js";import{d as Y,e as K,h as Q,k as X}from"./chunk-SQHEFKI2.js";import"./chunk-7RWCIHFI.js";import"./chunk-VRCQRP53.js";import{B as W,c as D,e as d,h as G,i as U,l as $,p as j,r as H,z as J}from"./chunk-MOPYAMLF.js";import"./chunk-RNGT6N3O.js";import"./chunk-TOWFRAUA.js";import{a as re,b as le}from"./chunk-ZH2LY4H3.js";import"./chunk-QVSCKNGL.js";import"./chunk-FX5J5MOS.js";import{b as R,c as B,d as A,e as L}from"./chunk-SUTJIGUH.js";import{a as z}from"./chunk-VJC62ZZJ.js";import"./chunk-WZKZJ5DF.js";import{p as q,q as I}from"./chunk-A72LFUZP.js";import"./chunk-IGUJQH2A.js";import"./chunk-GS6LNAK5.js";import"./chunk-QD7SSFII.js";import{a as M,c as N,d as V}from"./chunk-MEFNJ5SS.js";import"./chunk-GUCRBWY4.js";import{t as k}from"./chunk-REOVWAHI.js";import{Ab as P,Bb as l,Ea as _,Gb as m,Jb as S,Kb as v,Lb as o,Mb as n,Nb as u,Pc as F,Rb as E,Vb as y,Wb as c,cb as r,fa as f,gc as a,hc as g,na as h,oa as x,ob as T,qc as w,ub as s}from"./chunk-BEPULU6C.js";import{e as b}from"./chunk-JKOY2XUY.js";var xe=()=>["/auth/login"],ge=(i,t)=>t.code,Se=(i,t)=>t.name;function ve(i,t){i&1&&(o(0,"mat-error"),a(1,"Required"),n())}function be(i,t){i&1&&(o(0,"mat-error"),a(1,"Required"),n())}function Ee(i,t){i&1&&(o(0,"mat-error"),a(1,"Phone number is required"),n())}function we(i,t){if(i&1&&(o(0,"mat-error"),a(1),n()),i&2){let e=c(2);r(),g(e.phoneControl==null||e.phoneControl.errors==null||e.phoneControl.errors.usaPhone==null?null:e.phoneControl.errors.usaPhone.message)}}function Te(i,t){if(i&1&&(o(0,"mat-option",14),a(1),n()),i&2){let e=t.$implicit;l("value",e.code),r(),g(e.name)}}function Pe(i,t){i&1&&(o(0,"mat-error"),a(1,"Required"),n())}function Fe(i,t){i&1&&(o(0,"mat-option",13),a(1,"Select state first"),n())}function ke(i,t){if(i&1&&(o(0,"mat-option",14),a(1),n()),i&2){let e=t.$implicit;l("value",e.name),r(),g(e.name)}}function Me(i,t){if(i&1&&(o(0,"mat-option",13),a(1,"Select city"),n(),S(2,ke,2,2,"mat-option",14,Se)),i&2){let e=c(2);r(2),v(e.availableCities())}}function Ne(i,t){i&1&&(o(0,"mat-error"),a(1,"Required"),n())}function Ve(i,t){i&1&&(o(0,"mat-error"),a(1,"Please select an option"),n())}function Oe(i,t){i&1&&a(0," Email is required ")}function qe(i,t){i&1&&a(0," Invalid email format ")}function Ie(i,t){if(i&1&&(o(0,"mat-error"),s(1,Oe,1,0)(2,qe,1,0),n()),i&2){let e=c(2);r(),m(e.emailControl!=null&&e.emailControl.hasError("required")?1:e.emailControl!=null&&e.emailControl.hasError("email")?2:-1)}}function Re(i,t){if(i&1&&(o(0,"mat-option",14),a(1),n()),i&2){let e=t.$implicit;l("value",e.name),r(),g(e.name)}}function Be(i,t){i&1&&(o(0,"mat-error"),a(1,"Required"),n())}function Ae(i,t){i&1&&a(0," Password is required ")}function Le(i,t){i&1&&a(0," Minimum 6 characters ")}function ze(i,t){if(i&1&&(o(0,"mat-error"),s(1,Ae,1,0)(2,Le,1,0),n()),i&2){let e=c(2);r(),m(e.passwordControl!=null&&e.passwordControl.hasError("required")?1:e.passwordControl!=null&&e.passwordControl.hasError("minlength")?2:-1)}}function De(i,t){i&1&&a(0," Create Account ")}function Ge(i,t){i&1&&(o(0,"span",27),u(1,"mat-spinner",31),a(2," Creating... "),n())}function Ue(i,t){if(i&1){let e=E();o(0,"div",2)(1,"h2",3),a(2,"Join Our Community"),n(),o(3,"p",4),a(4,"Create your account to get started"),n()(),o(5,"form",5),y("ngSubmit",function(){h(e);let C=c();return x(C.onSubmit())}),o(6,"div",6)(7,"mat-form-field",7)(8,"mat-label"),a(9,"First Name"),n(),u(10,"input",8),o(11,"mat-icon",9),a(12,"person"),n(),s(13,ve,2,0,"mat-error"),n(),o(14,"mat-form-field",7)(15,"mat-label"),a(16,"Last Name"),n(),u(17,"input",10),s(18,be,2,0,"mat-error"),n()(),o(19,"mat-form-field",7)(20,"mat-label"),a(21,"Phone Number"),n(),u(22,"input",11),o(23,"mat-icon",9),a(24,"phone"),n(),s(25,Ee,2,0,"mat-error")(26,we,2,1,"mat-error"),n(),o(27,"div",6)(28,"mat-form-field",7)(29,"mat-label"),a(30,"State"),n(),o(31,"mat-select",12),y("selectionChange",function(C){h(e);let ye=c();return x(ye.onStateSelected(C.value))}),o(32,"mat-option",13),a(33,"Select state"),n(),S(34,Te,2,2,"mat-option",14,ge),n(),o(36,"mat-icon",9),a(37,"location_on"),n(),s(38,Pe,2,0,"mat-error"),n(),o(39,"mat-form-field",7)(40,"mat-label"),a(41,"City"),n(),o(42,"mat-select",15),s(43,Fe,2,0,"mat-option",13)(44,Me,4,0),n(),o(45,"mat-icon",9),a(46,"location_city"),n(),s(47,Ne,2,0,"mat-error"),n()(),o(48,"div",16)(49,"h4",17),a(50,"I want to:"),n(),o(51,"mat-radio-group",18)(52,"div",19)(53,"mat-radio-button",20),a(54," Find women-owned businesses "),n(),o(55,"mat-radio-button",21),a(56," Offer services through my business "),n()()(),s(57,Ve,2,0,"mat-error"),n(),o(58,"div",6)(59,"mat-form-field",7)(60,"mat-label"),a(61,"Email Address"),n(),u(62,"input",22),o(63,"mat-icon",9),a(64,"email"),n(),s(65,Ie,3,1,"mat-error"),n(),o(66,"mat-form-field",7)(67,"mat-label"),a(68,"Heritage"),n(),o(69,"mat-select",23)(70,"mat-option",13),a(71,"Select country"),n(),S(72,Re,2,2,"mat-option",14,ge),n(),o(74,"mat-icon",9),a(75,"public"),n(),s(76,Be,2,0,"mat-error"),n()(),o(77,"mat-form-field",7)(78,"mat-label"),a(79,"Password"),n(),u(80,"input",24),o(81,"button",25),y("click",function(){h(e);let C=c();return x(C.togglePasswordVisibility())}),o(82,"mat-icon"),a(83),n()(),s(84,ze,3,1,"mat-error"),n(),o(85,"button",26),s(86,De,1,0)(87,Ge,3,0,"span",27),n(),o(88,"div",28)(89,"p",29),a(90," Already have an account? "),o(91,"a",30),a(92," Sign in "),n()()()()}if(i&2){let e=c();r(5),l("formGroup",e.signupForm),r(5),l("disabled",e.loading()),r(3),m(e.firstNameControl!=null&&e.firstNameControl.invalid&&(e.firstNameControl!=null&&e.firstNameControl.touched)?13:-1),r(4),l("disabled",e.loading()),r(),m(e.lastNameControl!=null&&e.lastNameControl.invalid&&(e.lastNameControl!=null&&e.lastNameControl.touched)?18:-1),r(4),l("disabled",e.loading()),r(3),m(e.phoneControl!=null&&e.phoneControl.hasError("required")&&(e.phoneControl!=null&&e.phoneControl.touched)?25:-1),r(),m(e.phoneControl!=null&&e.phoneControl.hasError("usaPhone")&&(e.phoneControl!=null&&e.phoneControl.touched)?26:-1),r(5),l("disabled",e.loading()),r(3),v(e.usStates),r(4),m(e.stateControl!=null&&e.stateControl.invalid&&(e.stateControl!=null&&e.stateControl.touched)?38:-1),r(4),l("disabled",e.loading()||e.availableCities().length===0),r(),m(e.availableCities().length===0?43:44),r(4),m(e.cityControl!=null&&e.cityControl.invalid&&(e.cityControl!=null&&e.cityControl.touched)?47:-1),r(4),l("disabled",e.loading()),r(6),m(e.userTypeControl!=null&&e.userTypeControl.invalid&&(e.userTypeControl!=null&&e.userTypeControl.touched)?57:-1),r(5),l("disabled",e.loading()),r(3),m(e.emailControl!=null&&e.emailControl.invalid&&(e.emailControl!=null&&e.emailControl.touched)?65:-1),r(4),l("disabled",e.loading()),r(3),v(e.countries),r(4),m(e.countryOfOriginControl!=null&&e.countryOfOriginControl.invalid&&(e.countryOfOriginControl!=null&&e.countryOfOriginControl.touched)?76:-1),r(4),l("type",e.showPassword()?"text":"password")("disabled",e.loading()),r(),P("aria-label","Toggle password visibility")("aria-pressed",e.showPassword()),r(2),g(e.showPassword()?"visibility_off":"visibility"),r(),m(e.passwordControl!=null&&e.passwordControl.invalid&&(e.passwordControl!=null&&e.passwordControl.touched)?84:-1),r(),l("disabled",e.loading()||!e.signupForm.valid),r(),m(e.loading()?87:86),r(5),l("routerLink",w(28,xe))}}function $e(i,t){i&1&&a(0," Resend Verification Email ")}function je(i,t){i&1&&(o(0,"span",27),u(1,"mat-spinner",31),a(2," Sending... "),n())}function He(i,t){if(i&1){let e=E();o(0,"div",1)(1,"div",32)(2,"mat-icon",33),a(3,"email"),n(),o(4,"h2",3),a(5,"Check Your Email"),n(),o(6,"p",34),a(7," We've sent a verification link to: "),n(),o(8,"p",35),a(9),n(),o(10,"p",4),a(11," Click the link in the email to verify your account and complete your registration. "),n()(),o(12,"div",36)(13,"button",37),y("click",function(){h(e);let C=c();return x(C.resendVerification())}),s(14,$e,1,0)(15,je,3,0,"span",27),n(),o(16,"button",38),a(17," Back to Login "),n()(),o(18,"div",39)(19,"p",40),a(20," Didn't receive the email? Check your spam folder or try resending. "),n()()()}if(i&2){let e=c();r(9),g(e.verificationEmail()),r(4),l("disabled",e.loading()),r(),m(e.loading()?15:14),r(2),l("routerLink",w(4,xe))}}var he=class i{authService=f(z);router=f(N);route=f(M);fb=f(J);citiesService=f(ue);snackBar=f(me);filteredCities=_([]);availableCities=_([]);loading=_(!1);showPassword=_(!1);showVerificationStep=_(!1);verificationEmail=_("");signupForm;countries=oe;usStates=_e;constructor(){this.signupForm=this.fb.group({firstName:["",[d.required]],lastName:["",[d.required]],phone:["",[d.required,Ce.usaPhone]],state:["",[d.required]],city:["",[d.required]],userType:["",[d.required]],email:["",[d.required,d.email]],countryOfOrigin:["",[d.required]],password:["",[d.required,d.minLength(6)]]}),F(()=>{let t=this.stateControl?.value;t?this.loadCitiesForState(t):this.availableCities.set([])})}ngOnInit(){this.route.queryParams.subscribe(t=>{t.message&&this.snackBar.open(t.message,"Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-info"]})})}onSubmit(){return b(this,null,function*(){if(!this.signupForm.valid){this.snackBar.open("Please fill in all required fields correctly","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-error"]});return}let t=this.signupForm.value,e={first_name:t.firstName,last_name:t.lastName,email:t.email,password:t.password,phone:t.phone,state:t.state,city:t.city,country_of_origin:t.countryOfOrigin,is_buyer:t.userType==="buyer",is_seller:t.userType==="seller"};this.loading.set(!0);try{let p=yield this.authService.signUp(e);p.data?(this.snackBar.open("Account created successfully! Please check your email to verify your account.","Close",{duration:6e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-success"]}),this.showVerificationMessage(t.email)):this.snackBar.open(p.error?.message||"Registration failed. Please try again.","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-error"]})}catch(p){this.snackBar.open(p?.message||"An unexpected error occurred. Please try again.","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-error"]})}finally{this.loading.set(!1)}})}showVerificationMessage(t){this.verificationEmail.set(t),this.showVerificationStep.set(!0),this.signupForm.disable()}resendVerification(){return b(this,null,function*(){if(this.verificationEmail()){this.loading.set(!0);try{let t=yield this.authService.resendEmailVerification(this.verificationEmail());t.success?this.snackBar.open("Verification email sent! Please check your inbox.","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-success"]}):this.snackBar.open(t.message||"Failed to resend verification email.","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-error"]})}catch(t){this.snackBar.open(t?.message||"Failed to resend verification email.","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-error"]})}finally{this.loading.set(!1)}}})}onStateSelected(t){this.loadCitiesForState(t),this.signupForm.get("city")?.setValue("")}loadCitiesForState(t){let e=this.citiesService.getCitiesByState(t);this.availableCities.set(e)}togglePasswordVisibility(){this.showPassword.update(t=>!t)}get firstNameControl(){return this.signupForm.get("firstName")}get lastNameControl(){return this.signupForm.get("lastName")}get phoneControl(){return this.signupForm.get("phone")}get stateControl(){return this.signupForm.get("state")}get cityControl(){return this.signupForm.get("city")}get userTypeControl(){return this.signupForm.get("userType")}get emailControl(){return this.signupForm.get("email")}get countryOfOriginControl(){return this.signupForm.get("countryOfOrigin")}get passwordControl(){return this.signupForm.get("password")}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=T({type:i,selectors:[["app-signup"]],decls:3,vars:2,consts:[[1,"signup-container"],[1,"text-center","space-y-6"],[1,"text-center","mb-8"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-2","gap-4"],["appearance","outline"],["matInput","","formControlName","firstName","placeholder","First name",3,"disabled"],["matSuffix",""],["matInput","","formControlName","lastName","placeholder","Last name",3,"disabled"],["matInput","","type","tel","appPhoneFormat","","formControlName","phone","placeholder","(555) 123-4567",3,"disabled"],["formControlName","state",3,"selectionChange","disabled"],["value",""],[3,"value"],["formControlName","city",3,"disabled"],[1,"space-y-3","p-4","bg-gray-50","rounded-lg"],[1,"text-sm","font-medium","text-gray-700","mb-3"],["formControlName","userType",1,"radio-group-inline",3,"disabled"],[1,"radio-options"],["value","buyer",1,"radio-option"],["value","seller",1,"radio-option"],["matInput","","type","email","formControlName","email","placeholder","your@email.com",3,"disabled"],["formControlName","countryOfOrigin",3,"disabled"],["matInput","","formControlName","password","placeholder","Enter password",3,"type","disabled"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"w-full","py-3","text-base","font-medium","mb-4",3,"disabled"],[1,"flex","items-center","justify-center","gap-2"],[1,"mt-4","pt-4","border-t","border-gray-200","text-center"],[1,"text-sm","text-gray-600"],["mat-button","","color","primary",1,"text-sm","font-medium","ml-1",3,"routerLink"],["diameter","16"],[1,"mb-6"],[1,"text-6xl","text-blue-500","mb-4"],[1,"text-gray-600","mb-4"],[1,"text-lg","font-medium","text-gray-900","mb-4"],[1,"space-y-3"],["mat-raised-button","","color","accent",1,"w-full","py-3","text-base","font-medium",3,"click","disabled"],["mat-button","","color","primary",1,"w-full","py-3","text-base","font-medium",3,"routerLink"],[1,"mt-6","pt-4","border-t","border-gray-200"],[1,"text-sm","text-gray-500"]],template:function(e,p){e&1&&(o(0,"div",0),s(1,Ue,93,29)(2,He,21,5,"div",1),n()),e&2&&(r(),m(p.showVerificationStep()?-1:1),r(),m(p.showVerificationStep()?2:-1))},dependencies:[k,W,$,D,G,U,j,H,V,Z,X,Y,K,Q,ne,ie,te,ee,O,L,A,B,R,I,q,ae,ce,de,pe,le,re,se,fe],styles:["[_nghost-%COMP%]{display:block}"]})};export{he as SignupComponent};
