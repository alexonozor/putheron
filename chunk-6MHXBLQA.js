import{a as v}from"./chunk-LDSTDJZ6.js";import{A as c}from"./chunk-FI3M32ZM.js";import{aa as p,fa as a,o as s}from"./chunk-M7BUBJMW.js";import{e as r}from"./chunk-JKOY2XUY.js";var w=class n{http=a(c);configService=a(v);apiUrl=this.configService.apiBaseUrl;createReview(e){return this.http.post(`${this.apiUrl}/reviews`,e)}createReviewAsync(e){return r(this,null,function*(){return(yield s(this.createReview(e))).data})}getBusinessReviews(e){return this.http.get(`${this.apiUrl}/reviews/business/${e}`)}getBusinessReviewsAsync(e){return r(this,null,function*(){try{return(yield s(this.getBusinessReviews(e))).data}catch(t){return console.error("Error fetching business reviews:",{businessId:e,error:t.message,status:t.status,url:t.url}),[]}})}getBusinessRatingStats(e){return this.http.get(`${this.apiUrl}/reviews/business/${e}/stats`)}getBusinessRatingStatsAsync(e){return r(this,null,function*(){return(yield s(this.getBusinessRatingStats(e))).data})}getUserReviews(){return this.http.get(`${this.apiUrl}/reviews/user/reviews`)}getUserReviewsAsync(){return r(this,null,function*(){return(yield s(this.getUserReviews())).data})}getCompletedProjectsForReview(){return this.http.get(`${this.apiUrl}/reviews/user/projects-for-review`)}getCompletedProjectsForReviewAsync(){return r(this,null,function*(){try{console.log("Fetching completed projects for review...");let e=yield s(this.getCompletedProjectsForReview());return console.log("Completed projects response:",e),e.data}catch(e){return console.error("Error fetching completed projects for review:",{error:e.message,status:e.status,url:e.url}),[]}})}canUserReviewProject(e){return this.http.get(`${this.apiUrl}/reviews/project/${e}/can-review`)}canUserReviewProjectAsync(e){return r(this,null,function*(){return(yield s(this.canUserReviewProject(e))).data.can_review})}updateReview(e,t){return this.http.patch(`${this.apiUrl}/reviews/${e}`,t)}updateReviewAsync(e,t){return r(this,null,function*(){return(yield s(this.updateReview(e,t))).data})}deleteReview(e){return this.http.delete(`${this.apiUrl}/reviews/${e}`)}deleteReviewAsync(e){return r(this,null,function*(){yield s(this.deleteReview(e))})}formatRating(e){return e.toFixed(1)}getStarArray(e){let t=[];for(let o=1;o<=5;o++)t.push(o<=Math.round(e));return t}getRatingLabel(e){return e>=4.5?"Excellent":e>=4?"Very Good":e>=3.5?"Good":e>=3?"Fair":e>=2.5?"Poor":"Very Poor"}formatReviewDate(e){if(!e)return"Date not specified";let t=new Date(e),R=new Date().getTime()-t.getTime(),i=Math.floor(R/(1e3*60*60*24));return i===0?"Today":i===1?"Yesterday":i<7?`${i} days ago`:i<30?`${Math.floor(i/7)} weeks ago`:i<365?`${Math.floor(i/30)} months ago`:t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=p({token:n,factory:n.\u0275fac,providedIn:"root"})};export{w as a};
