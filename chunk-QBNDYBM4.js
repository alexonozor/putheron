import{a as _t,b as vt,c as ft}from"./chunk-4UHM6MY7.js";import{a as le,b as gt}from"./chunk-PZHKCHJL.js";import{a as ot,b as at,c as st,d as ct,f as lt,g as dt,i as mt}from"./chunk-N22VLU7D.js";import{a as ze,b as $e}from"./chunk-ROYNIK6S.js";import{a as Ne,b as Ae,c as K,d as je}from"./chunk-PUTTUKWR.js";import{a as $,c as ie,e as Ue,h as U}from"./chunk-FY37IJMK.js";import{a as ut,b as pt}from"./chunk-IW3LDG4W.js";import"./chunk-SNNT4QTV.js";import{d as J,h as ae,i as se,j as ce,l as nt,m as rt}from"./chunk-KLUGINDR.js";import"./chunk-7SWJOEN5.js";import"./chunk-J6NDGHDX.js";import{d as re,e as et,f as tt,g as it,k as oe}from"./chunk-CLNTNSKJ.js";import{A as Xe,B as Ze,C as ne,c as Re,e as R,h as Ge,i as He,m as qe,n as We,q as Ye,s as Qe,x as Je,y as Ke}from"./chunk-U7A7OHU6.js";import{a as Z}from"./chunk-MNGBVTM3.js";import{a as X}from"./chunk-4MGQA2I3.js";import"./chunk-EPCACDVR.js";import{a as ee,b as te}from"./chunk-U3KPP4N4.js";import{a as Q,s as De,t as z,u as L}from"./chunk-VSWUYYDO.js";import"./chunk-LDSTDJZ6.js";import"./chunk-QD7SSFII.js";import{a as k,b as F}from"./chunk-QFHPWKDD.js";import{d as Y}from"./chunk-O2FJLJYH.js";import{e as Le,f as Be,g as q,h as Ve,l as W}from"./chunk-72SEU4B5.js";import"./chunk-JFMUERLE.js";import{n as Fe,t as P}from"./chunk-FI3M32ZM.js";import{$a as c,$b as d,Fb as m,Fc as Oe,Gb as u,Gc as ke,Ib as A,Jb as M,Kb as y,Lb as g,Mb as i,Nb as n,Ob as f,Rc as V,Sb as xe,Tb as be,Vb as h,Ya as B,Zb as p,dc as Pe,eb as I,ec as Te,fa as S,fc as Ie,jc as O,ka as _,kc as j,la as v,ma as D,mc as H,na as N,nc as o,oc as w,pc as x,qb as E,ua as C}from"./chunk-M7BUBJMW.js";import{a as we,b as Ee,e as T}from"./chunk-JKOY2XUY.js";var de=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=E({type:r,selectors:[["app-services"]],decls:1,vars:0,template:function(e,a){e&1&&f(0,"router-outlet")},dependencies:[P,Be],encapsulation:2})};function bt(r,t){if(r&1&&f(0,"img",2),r&2){let e=d();g("src",e.service.images[0],B)("alt",e.service.name)}}function ht(r,t){r&1&&(i(0,"div",3)(1,"mat-icon",20),o(2,"build"),n()()),r&2&&(c(),j("font-size",48,"px")("width",48,"px")("height",48,"px"))}function St(r,t){r&1&&(i(0,"div",6)(1,"span",21)(2,"mat-icon",17),o(3,"star"),n(),o(4," Featured "),n()()),r&2&&(c(2),j("font-size",14,"px")("width",14,"px")("height",14,"px"))}function Mt(r,t){if(r&1&&(i(0,"span",12),o(1),n()),r&2){let e=d();c(),x("$",e.service.price)}}function yt(r,t){r&1&&(i(0,"span",12),o(1,"Custom"),n())}function wt(r,t){if(r&1&&(i(0,"span",13),o(1),n()),r&2){let e=d();c(),w(e.service.duration)}}function Et(r,t){if(r&1&&(i(0,"span",23),o(1),n()),r&2){let e=t.$implicit;c(),x(" ",e," ")}}function Pt(r,t){if(r&1&&(i(0,"span",23),o(1),n()),r&2){let e=d(2);c(),x(" +",e.service.features.length-2," ")}}function Tt(r,t){if(r&1&&(i(0,"div",14)(1,"div",22),M(2,Et,2,1,"span",23,A),m(4,Pt,2,1,"span",23),n()()),r&2){let e=d();c(2),y(e.service.features.slice(0,2)),c(2),u(e.service.features.length>2?4:-1)}}var pe=class r{service;businessName="";statusColorClass="";statusText="";view=new I;edit=new I;delete=new I;onView(){this.view.emit(this.service._id)}onEdit(){this.edit.emit(this.service._id)}onDelete(){this.delete.emit(this.service._id)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=E({type:r,selectors:[["app-service-card"]],inputs:{service:"service",businessName:"businessName",statusColorClass:"statusColorClass",statusText:"statusText"},outputs:{view:"view",edit:"edit",delete:"delete"},decls:33,vars:11,consts:[[1,"h-full","bg-white!","hover:shadow-lg","transition-all","duration-200"],[1,"relative","aspect-video","bg-gray-100","overflow-hidden"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"w-full","h-full","bg-gradient-to-br","from-gray-100","to-gray-200","flex","items-center","justify-center"],[1,"absolute","top-3","right-3"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","backdrop-blur-sm"],[1,"absolute","top-3","left-3"],[1,"p-6"],[1,"text-lg","font-semibold","text-gray-900","truncate","mb-1"],[1,"text-sm","text-gray-600","mb-3"],[1,"text-sm","text-gray-600","mb-4","line-clamp-2"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"mb-4"],[1,"flex","justify-center","gap-2"],["mat-button","","color","accent","title","View Service",3,"click"],[1,"mr-1"],["mat-button","","color","accent","title","Edit Service",3,"click"],["mat-button","","color","warn","title","Delete Service",3,"click"],[1,"text-gray-400"],[1,"bg-yellow-100","text-yellow-800","inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","backdrop-blur-sm"],[1,"flex","flex-wrap","gap-1"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","bg-gray-100","text-gray-800"]],template:function(e,a){e&1&&(i(0,"mat-card",0)(1,"div",1),m(2,bt,1,2,"img",2)(3,ht,3,6,"div",3),i(4,"div",4)(5,"span",5),o(6),n()(),m(7,St,5,6,"div",6),n(),i(8,"mat-card-content",7)(9,"h3",8),o(10),n(),i(11,"p",9),o(12),n(),i(13,"p",10),o(14),n(),i(15,"div",11),m(16,Mt,2,1,"span",12)(17,yt,2,0,"span",12),m(18,wt,2,1,"span",13),n(),m(19,Tt,5,1,"div",14),n(),i(20,"mat-card-actions",15)(21,"button",16),p("click",function(){return a.onView()}),i(22,"mat-icon",17),o(23,"visibility"),n(),o(24," View "),n(),i(25,"button",18),p("click",function(){return a.onEdit()}),i(26,"mat-icon",17),o(27,"edit"),n(),o(28," Edit "),n(),i(29,"button",19),p("click",function(){return a.onDelete()}),i(30,"mat-icon",17),o(31,"delete"),n(),o(32," Delete "),n()()()),e&2&&(c(2),u(a.service.images&&a.service.images.length>0?2:3),c(3),H(a.statusColorClass),c(),x(" ",a.statusText," "),c(),u(a.service.is_featured?7:-1),c(3),w(a.service.name),c(2),w(a.businessName),c(2),x(" ",a.service.short_description||a.service.description||"No description available"," "),c(2),u(a.service.price!==void 0&&a.service.price!==null?16:17),c(2),u(a.service.duration?18:-1),c(),u(a.service.features&&a.service.features.length>0?19:-1))},dependencies:[P,U,$,Ue,ie,L,z,F,k],styles:["[_nghost-%COMP%]{display:block}"]})};function It(r,t){if(r&1&&f(0,"img",3),r&2){let e=d();g("src",e.service.images[0],B)("alt",e.service.name)}}function Ot(r,t){r&1&&(i(0,"div",4)(1,"mat-icon",17),o(2,"build"),n()()),r&2&&(c(),j("font-size",32,"px")("width",32,"px")("height",32,"px"))}function kt(r,t){r&1&&(i(0,"span",7)(1,"mat-icon",18),o(2,"star"),n(),o(3," Featured "),n()),r&2&&(c(),j("font-size",12,"px")("width",12,"px")("height",12,"px"))}function Ft(r,t){if(r&1&&(i(0,"span",12),o(1),n()),r&2){let e=d();c(),x(" $",e.service.price," ")}}function Lt(r,t){r&1&&f(0,"mat-divider")}var ge=class r{service;businessName="";statusColorClass="";statusText="";formattedDate="";isLast=!1;view=new I;edit=new I;delete=new I;menuTrigger;onView(){this.view.emit(this.service._id)}onEdit(){this.edit.emit(this.service._id),this.menuTrigger?.closeMenu()}onDelete(){this.delete.emit(this.service._id),this.menuTrigger?.closeMenu()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=E({type:r,selectors:[["app-service-list-card"]],viewQuery:function(e,a){if(e&1&&Pe(K,5),e&2){let s;Te(s=Ie())&&(a.menuTrigger=s.first)}},inputs:{service:"service",businessName:"businessName",statusColorClass:"statusColorClass",statusText:"statusText",formattedDate:"formattedDate",isLast:"isLast"},outputs:{view:"view",edit:"edit",delete:"delete"},decls:38,vars:11,consts:[["actionsMenu","matMenu"],[1,"mat-list-single-line"],[1,"pb-4"],["matListItemAvatar","",1,"mat-list-avatar",3,"src","alt"],["matListItemAvatar","",1,"mat-list-avatar","bg-gray-100","flex","items-center","justify-center"],["matListItemTitle","",1,"flex","items-center","gap-2"],[1,"text-lg","font-semibold"],[1,"bg-yellow-100","text-yellow-800","inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium"],["matListItemLine","",1,"text-sm","text-gray-600"],["matListItemLine","",1,"text-sm","text-gray-700","line-clamp-2","!mb-0"],["matListItemLine","",1,"flex","items-center","gap-4","mt-2","!mb-5"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800"],["mat-icon-button","","title","More actions","matListItemMeta","",3,"matMenuTriggerFor"],["mat-menu-item","",1,"flex","items-center",3,"click"],[1,"mr-3"],["mat-menu-item","",1,"flex","items-center","text-red-600",3,"click"],[1,"text-gray-400"],[1,"mr-1"]],template:function(e,a){if(e&1){let s=h();i(0,"mat-list",1)(1,"mat-list-item",2),m(2,It,1,2,"img",3)(3,Ot,3,6,"div",4),i(4,"div",5)(5,"span",6),o(6),n(),m(7,kt,4,6,"span",7),n(),i(8,"div",8),o(9),n(),i(10,"div",9),o(11),n(),i(12,"div",10)(13,"span",11),o(14),n(),m(15,Ft,2,1,"span",12),n(),i(16,"button",13)(17,"mat-icon"),o(18,"more_vert"),n()(),i(19,"mat-menu",null,0)(21,"button",14),p("click",function(){return _(s),v(a.onView())}),i(22,"mat-icon",15),o(23,"visibility"),n(),i(24,"span"),o(25,"View"),n()(),i(26,"button",14),p("click",function(){return _(s),v(a.onEdit())}),i(27,"mat-icon",15),o(28,"edit"),n(),i(29,"span"),o(30,"Edit"),n()(),f(31,"mat-divider"),i(32,"button",16),p("click",function(){return _(s),v(a.onDelete())}),i(33,"mat-icon",15),o(34,"delete"),n(),i(35,"span"),o(36,"Delete"),n()()()(),m(37,Lt,1,0,"mat-divider"),n()}if(e&2){let s=O(20);c(2),u(a.service.images&&a.service.images.length>0?2:3),c(4),w(a.service.name),c(),u(a.service.is_featured?7:-1),c(2),x(" ",a.businessName," "),c(2),x(" ",a.service.short_description||a.service.description||"No description available"," "),c(2),H(a.statusColorClass),c(),x(" ",a.statusText," "),c(),u(a.service.price!==void 0&&a.service.price!==null?15:-1),c(),g("matMenuTriggerFor",s),c(21),u(a.isLast?-1:37)}},dependencies:[P,mt,lt,dt,ct,ze,at,ot,st,L,De,F,k,je,Ae,Ne,K,$e],styles:["[_nghost-%COMP%]{display:block}"]})};var Me=(r,t)=>t._id;function Dt(r,t){if(r&1&&(i(0,"mat-option",13),o(1),n()),r&2){let e=t.$implicit;g("value",e._id),c(),w(e.name)}}function Nt(r,t){r&1&&(i(0,"div",15)(1,"div",18),D(),i(2,"svg",19),f(3,"path",20),n(),N(),i(4,"div")(5,"h3",21),o(6,"No businesses found"),n(),i(7,"p",22),o(8,"You need to create a business before you can add services."),n()()()())}function At(r,t){if(r&1&&(i(0,"div",16)(1,"div",18),D(),i(2,"svg",23),f(3,"path",24),n(),N(),i(4,"div")(5,"h3",25),o(6,"Error"),n(),i(7,"p",26),o(8),n()()()()),r&2){let e=d();c(8),w(e.error())}}function jt(r,t){if(r&1&&(i(0,"div",17),f(1,"mat-spinner",27),n()),r&2){let e=d();c(),g("diameter",e.isMobile()?40:60)("strokeWidth",4)}}function zt(r,t){if(r&1){let e=h();i(0,"div",29),D(),i(1,"svg",30),f(2,"path",31),n()(),N(),i(3,"h3",32),o(4,"No services found"),n(),i(5,"p",33),o(6,"Try adjusting your search term or filter to find what you're looking for."),n(),i(7,"button",34),p("click",function(){_(e);let s=d(3);return s.clearSearch(),v(s.selectedBusiness.set("all"))}),o(8," Clear Filters "),n()}}function $t(r,t){if(r&1){let e=h();i(0,"div",29),D(),i(1,"svg",30),f(2,"path",35),n()(),N(),i(3,"h3",32),o(4,"Create a business first"),n(),i(5,"p",33),o(6,"You need to have at least one business before you can create services."),n(),i(7,"button",36),p("click",function(){_(e);let s=d(3);return v(s.navigateToCreateBusiness())}),i(8,"mat-icon",6),o(9,"add"),n(),o(10," Create Business "),n()}}function Ut(r,t){if(r&1){let e=h();i(0,"div",29),D(),i(1,"svg",30),f(2,"path",37)(3,"path",38),n()(),N(),i(4,"h3",32),o(5,"No services yet"),n(),i(6,"p",33),o(7,"Get started by creating your first service for your business."),n(),i(8,"button",36),p("click",function(){_(e);let s=d(3);return v(s.navigateToCreateService())}),i(9,"mat-icon",6),o(10,"add"),n(),o(11," Create Your First Service "),n()}}function Rt(r,t){if(r&1&&(i(0,"div",28),m(1,zt,9,0)(2,$t,11,0)(3,Ut,12,0),n()),r&2){let e=d(2);c(),u(e.searchTerm()||e.selectedBusiness()!=="all"?1:e.userBusinesses().length===0?2:3)}}function Gt(r,t){if(r&1){let e=h();i(0,"app-service-card",43),p("view",function(s){_(e);let l=d(4);return v(l.viewService(s))})("edit",function(s){_(e);let l=d(4);return v(l.editService(s))})("delete",function(s){_(e);let l=d(4);return v(l.deleteService(s))}),n()}if(r&2){let e=t.$implicit,a=d(4);g("service",e)("businessName",a.getBusinessName(e))("statusColorClass",a.getStatusColor(e.is_active))("statusText",a.getStatusText(e.is_active))}}function Ht(r,t){if(r&1&&(i(0,"div",39)(1,"div",41),M(2,Gt,1,4,"app-service-card",42,Me),n()()),r&2){let e=d(3);c(2),y(e.filteredServices())}}function qt(r,t){if(r&1){let e=h();i(0,"app-service-list-card",48),p("view",function(s){_(e);let l=d(4);return v(l.viewService(s))})("edit",function(s){_(e);let l=d(4);return v(l.editService(s))})("delete",function(s){_(e);let l=d(4);return v(l.deleteService(s))}),n()}if(r&2){let e=t.$implicit,a=t.$index,s=t.$count,l=d(4);g("service",e)("businessName",l.getBusinessName(e))("statusColorClass",l.getStatusColor(e.is_active))("statusText",l.getStatusText(e.is_active))("formattedDate",l.formatDate(e.createdAt))("isLast",a===s-1)}}function Wt(r,t){if(r&1&&(i(0,"div",40)(1,"mat-card",44)(2,"mat-card-content",45)(3,"div",46),M(4,qt,1,6,"app-service-list-card",47,Me),n()()()()),r&2){let e=d(3);c(4),y(e.filteredServices())}}function Yt(r,t){if(r&1&&(m(0,Ht,4,0,"div",39),m(1,Wt,6,0,"div",40)),r&2){let e=d(2);u(e.viewMode()==="grid"?0:-1),c(),u(e.viewMode()==="list"?1:-1)}}function Qt(r,t){if(r&1&&m(0,Rt,4,1,"div",28)(1,Yt,2,2),r&2){let e=d();u(e.filteredServices().length===0?0:1)}}var _e=class r{authService=S(X);router=S(q);businessService=S(Z);breakpointObserver=S(Y);userServices=C([]);userBusinesses=C([]);loading=C(!1);error=C(null);searchTerm=C("");viewMode=C("grid");selectedBusiness=C("all");isMobile=C(!1);user=this.authService.user;filteredServices=V(()=>{let t=this.userServices(),e=this.searchTerm().toLowerCase().trim(),a=this.selectedBusiness();return a!=="all"&&(t=t.filter(s=>typeof s.business_id=="string"?s.business_id===a:s.business_id._id===a)),e&&(t=t.filter(s=>s.name.toLowerCase().includes(e)||s.description?.toLowerCase().includes(e)||s.short_description?.toLowerCase().includes(e)||s.tags?.some(l=>l.toLowerCase().includes(e)))),t});ngOnInit(){if(!this.user()){this.router.navigate(["/auth"]);return}this.breakpointObserver.observe([Q.Handset]).subscribe(t=>{this.isMobile.set(t.matches)}),this.loadData()}loadData(){return T(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let t=yield this.businessService.getMyBusinessesAsync();this.userBusinesses.set(t);let e=[];for(let a of t)try{let l=(yield this.businessService.getBusinessServicesAsync(a._id)).map(b=>Ee(we({},b),{business_id:a}));e=[...e,...l]}catch(s){console.warn(`Failed to load services for business ${a._id}:`,s)}this.userServices.set(e)}catch(t){console.error("Error loading services:",t),this.error.set(t.message||"Failed to load services")}finally{this.loading.set(!1)}})}setViewMode(t){this.viewMode.set(t)}onSearchChange(t){let e=t.target;this.searchTerm.set(e.value)}clearSearch(){this.searchTerm.set("")}onBusinessFilterChange(t){let e=t.target;this.selectedBusiness.set(e.value)}navigateToCreateService(){this.router.navigate(["/dashboard/services/create-service"])}navigateToCreateBusiness(){this.router.navigate(["/dashboard/businesses/create-business"])}viewService(t){this.editService(t)}editService(t){this.router.navigate(["/dashboard/services/edit-service",t])}deleteService(t){return T(this,null,function*(){let e=this.userServices().find(s=>s._id===t);if(!(!e||!confirm(`Are you sure you want to delete "${e.name}"? This action cannot be undone.`)))try{yield this.businessService.deleteServiceAsync(t);let s=this.userServices().filter(l=>l._id!==t);this.userServices.set(s),alert("Service deleted successfully!")}catch(s){console.error("Error deleting service:",s),alert(s.message||"Failed to delete service")}})}getBusinessName(t){return typeof t.business_id=="object"&&t.business_id?.name?t.business_id.name:"Unknown Business"}formatPrice(t){if(!t.price)return"Price not set";switch(t.pricing_type){case"hourly":return`$${t.price}/hour`;case"project":return`$${t.price}/project`;case"custom":return"Custom pricing";default:return`$${t.price}`}}formatDate(t){return new Date(t).toLocaleDateString()}getStatusColor(t){return t?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}getStatusText(t){return t?"Active":"Inactive"}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=E({type:r,selectors:[["app-list-services"]],decls:26,vars:7,consts:[[1,"min-h-screen","bg-gray-50"],[1,"mb-8"],[1,"lg:max-w-7xl","max-w-12xl"],[1,"px-6","pt-6"],["title","My Services","subtitle","Manage services across all your businesses",3,"backClicked"],["matButton","filled","color","primary",1,"flex","items-center",3,"click","disabled"],[1,"mr-2"],[1,"px-0","sm:px-6","pt-4"],[3,"searchChange","viewModeChange","clearSearch","searchTerm","viewMode"],[1,"w-full","sm:w-48"],["appearance","outline",1,"w-full"],[3,"selectionChange","value"],["value","all"],[3,"value"],["matPrefix",""],[1,"mx-6","mb-6","bg-yellow-50","border-l-4","border-yellow-400","p-4","rounded-r-lg"],[1,"mb-6","bg-red-50","border-l-4","border-red-400","p-4","rounded-r-lg"],[1,"flex","items-center","justify-center","min-h-screen"],[1,"flex"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-yellow-400","mr-3"],["fill-rule","evenodd","d","M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"text-sm","font-medium","text-yellow-800"],[1,"mt-1","text-sm","text-yellow-700"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-red-400","mr-3"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"text-sm","font-medium","text-red-800"],[1,"mt-1","text-sm","text-red-700"],[3,"diameter","strokeWidth"],[1,"bg-white","rounded-xl","border","border-gray-200","p-12","text-center"],[1,"p-4","bg-gray-50","rounded-full","w-20","h-20","mx-auto","mb-6","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-gray-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"text-xl","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],[1,"inline-flex","items-center","px-4","py-2","border","border-gray-300","text-gray-700","rounded-lg","hover:bg-gray-50","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],["matButton","filled","color","primary","mat-raised-button","",1,"inline-flex","items-center",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"lg:max-w-7xl","max-w-12xl","px-6","pb-12"],[1,"lg:max-w-7xl","max-w-12xl","lg:px-6","px-0","pb-12"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[3,"service","businessName","statusColorClass","statusText"],[3,"view","edit","delete","service","businessName","statusColorClass","statusText"],[1,"bg-white!"],[1,"p-0"],[1,"space-y-0"],[3,"service","businessName","statusColorClass","statusText","formattedDate","isLast"],[3,"view","edit","delete","service","businessName","statusColorClass","statusText","formattedDate","isLast"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-dashboard-subheader",4),p("backClicked",function(){return a.navigateToCreateService()}),i(5,"button",5),p("click",function(){return a.navigateToCreateService()}),i(6,"mat-icon",6),o(7,"add"),n(),o(8," New Service "),n()()(),i(9,"div",7)(10,"app-business-search-filter",8),p("searchChange",function(l){return a.searchTerm.set(l)})("viewModeChange",function(l){return a.setViewMode(l)})("clearSearch",function(){return a.clearSearch()}),i(11,"div",9)(12,"mat-form-field",10)(13,"mat-label"),o(14,"Business"),n(),i(15,"mat-select",11),p("selectionChange",function(l){return a.selectedBusiness.set(l.value)}),i(16,"mat-option",12),o(17,"All Businesses"),n(),M(18,Dt,2,2,"mat-option",13,Me),n(),i(20,"mat-icon",14),o(21,"business"),n()()()()()(),m(22,Nt,9,0,"div",15),m(23,At,9,1,"div",16),m(24,jt,2,2,"div",17)(25,Qt,2,1),n()()),e&2&&(c(5),g("disabled",a.userBusinesses().length===0),c(5),g("searchTerm",a.searchTerm())("viewMode",a.viewMode()),c(5),g("value",a.selectedBusiness()),c(3),y(a.userBusinesses()),c(4),u(a.userBusinesses().length===0?22:-1),c(),u(a.error()?23:-1),c(),u(a.loading()?24:25))},dependencies:[P,W,Ze,ne,ae,oe,re,it,ce,se,J,F,k,L,z,U,$,ie,te,ee,le,gt,pe,ge],styles:[".services-container[_ngcontent-%COMP%]{max-width:80rem;margin:0 auto;padding:1.5rem}.services-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.services-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#111827;margin:0}.services-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#6b7280;margin-top:.5rem}.services-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:1rem}.search-filter-bar[_ngcontent-%COMP%]{background-color:#fff;padding:1.5rem;border-radius:.5rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;margin-bottom:2rem}.search-filter-bar[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto auto;gap:1rem;align-items:center}@media (max-width: 768px){.search-filter-bar[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}}.search-filter-bar[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative}.search-filter-bar[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:.75rem;height:1.25rem;width:1.25rem;color:#9ca3af}.search-filter-bar[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem .75rem 2.5rem;border:1px solid #d1d5db;border-radius:.375rem;font-size:.875rem}.search-filter-bar[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 2px #3b82f680}.search-filter-bar[_ngcontent-%COMP%]   .business-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.75rem 1rem;border:1px solid #d1d5db;border-radius:.375rem;font-size:.875rem;background-color:#fff}.search-filter-bar[_ngcontent-%COMP%]   .business-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 2px #3b82f680}.search-filter-bar[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]{display:flex;border:1px solid #d1d5db;border-radius:.375rem;overflow:hidden}.search-filter-bar[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem .75rem;border:none;background-color:#fff;color:#6b7280;cursor:pointer;display:flex;align-items:center;gap:.25rem}.search-filter-bar[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.search-filter-bar[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.search-filter-bar[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:1rem;width:1rem}.services-grid[_ngcontent-%COMP%]{display:grid;gap:1.5rem}.services-grid.grid-view[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(350px,1fr))}.services-grid.list-view[_ngcontent-%COMP%]{grid-template-columns:1fr}.service-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:.5rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;overflow:hidden;transition:box-shadow .2s ease-in-out}.service-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.service-card.list-view[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem}.service-card.list-view[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{flex:1;display:grid;grid-template-columns:2fr 1fr 1fr auto;gap:1rem;align-items:center}.service-card.grid-view[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:1.5rem}.service-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1rem}.service-header[_ngcontent-%COMP%]   .service-info[_ngcontent-%COMP%]{flex:1}.service-header[_ngcontent-%COMP%]   .service-info[_ngcontent-%COMP%]   .service-name[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#111827;margin:0 0 .25rem;line-height:1.4}.service-header[_ngcontent-%COMP%]   .service-info[_ngcontent-%COMP%]   .service-business[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;margin-bottom:.5rem}.service-header[_ngcontent-%COMP%]   .service-status[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:.25rem}.service-header[_ngcontent-%COMP%]   .service-status[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:.25rem .5rem;border-radius:.25rem;font-size:.75rem;font-weight:500}.service-header[_ngcontent-%COMP%]   .service-status[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background-color:#dcfce7;color:#166534}.service-header[_ngcontent-%COMP%]   .service-status[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background-color:#fef2f2;color:#dc2626}.service-header[_ngcontent-%COMP%]   .service-status[_ngcontent-%COMP%]   .status-badge.featured[_ngcontent-%COMP%]{background-color:#fef3c7;color:#92400e}.service-description[_ngcontent-%COMP%]{color:#6b7280;font-size:.875rem;line-height:1.5;margin-bottom:1rem;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.service-features[_ngcontent-%COMP%]{margin-bottom:1rem}.service-features[_ngcontent-%COMP%]   .features-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.service-features[_ngcontent-%COMP%]   .features-list[_ngcontent-%COMP%]   .feature-tag[_ngcontent-%COMP%]{padding:.25rem .5rem;background-color:#eff6ff;color:#1d4ed8;font-size:.75rem;border-radius:.25rem}.service-price[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}.service-price[_ngcontent-%COMP%]   .price-amount[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#111827}.service-price[_ngcontent-%COMP%]   .price-type[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;text-transform:capitalize}.service-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.service-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:.5rem 1rem;border-radius:.375rem;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease-in-out}.service-actions[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff;border:1px solid #3b82f6}.service-actions[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%]:hover{background-color:#2563eb}.service-actions[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]{background-color:#fff;color:#374151;border:1px solid #d1d5db}.service-actions[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.service-actions[_ngcontent-%COMP%]   button.btn-danger[_ngcontent-%COMP%]{background-color:#dc2626;color:#fff;border:1px solid #dc2626}.service-actions[_ngcontent-%COMP%]   button.btn-danger[_ngcontent-%COMP%]:hover{background-color:#b91c1c}.service-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{margin:0 auto 1rem;height:4rem;width:4rem;color:#9ca3af}.empty-state[_ngcontent-%COMP%]   .empty-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#111827;margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]   .empty-description[_ngcontent-%COMP%]{color:#6b7280;margin-bottom:2rem}.loading-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:4rem 2rem}.loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite;border-radius:50%;height:2rem;width:2rem;border:2px solid #f3f4f6;border-top:2px solid #3b82f6}.loading-state[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{margin-left:1rem;color:#6b7280}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-state[_ngcontent-%COMP%]{background-color:#fef2f2;border:1px solid #fecaca;border-radius:.375rem;padding:1rem;margin-bottom:2rem}.error-state[_ngcontent-%COMP%]   .error-title[_ngcontent-%COMP%]{font-weight:600;color:#dc2626;margin-bottom:.5rem}.error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#b91c1c}@media (max-width: 768px){.services-container[_ngcontent-%COMP%]{padding:1rem}.services-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.services-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}.services-grid.grid-view[_ngcontent-%COMP%]{grid-template-columns:1fr}.service-card.list-view[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.75rem}.service-actions[_ngcontent-%COMP%]{flex-direction:column}.service-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:none}}"]})};var Jt=(r,t)=>t._id;function Kt(r,t){if(r&1&&(i(0,"div",3),f(1,"mat-spinner",6),n()),r&2){let e=d();c(),g("diameter",e.isMobile()?40:60)("strokeWidth",4)}}function Xt(r,t){if(r&1){let e=h();i(0,"div",4)(1,"div",7)(2,"div",8)(3,"mat-icon",9),o(4,"error_outline"),n()(),i(5,"h3",10),o(6),n(),i(7,"div",11)(8,"button",12),p("click",function(){_(e);let s=d();return v(s.goBack())}),o(9," Go Back "),n(),i(10,"button",13),p("click",function(){_(e);let s=d();return v(s.loadData())}),o(11," Try Again "),n()()()()}if(r&2){let e=d();c(6),w(e.error())}}function Zt(r,t){r&1&&(i(0,"div",4)(1,"div",7)(2,"div",14)(3,"mat-icon",15),o(4,"business"),n()(),i(5,"h3",10),o(6,"No businesses found"),n(),i(7,"p",16),o(8,"You need to create a business before adding services."),n(),i(9,"button",17)(10,"mat-icon",18),o(11,"add"),n(),o(12," Create Business "),n()()())}function ei(r,t){if(r&1&&(i(0,"mat-option",39),o(1),n()),r&2){let e=t.$implicit;g("value",e._id),c(),x(" ",e.name," ")}}function ti(r,t){r&1&&(i(0,"mat-error"),o(1,"Please select a business"),n())}function ii(r,t){if(r&1&&(i(0,"mat-form-field",27)(1,"mat-label"),o(2,"Business"),n(),i(3,"mat-select",59),M(4,ei,2,2,"mat-option",39,Jt),n(),m(6,ti,2,0,"mat-error"),n()),r&2){let e=d(2);c(4),y(e.userBusinesses()),c(2),u(e.business_id!=null&&e.business_id.hasError("required")&&(e.business_id!=null&&e.business_id.touched)?6:-1)}}function ni(r,t){r&1&&(i(0,"mat-error"),o(1,"Service name is required"),n())}function ri(r,t){r&1&&(i(0,"mat-error"),o(1,"Service name must be at least 2 characters"),n())}function oi(r,t){r&1&&(i(0,"mat-error"),o(1,"Service name cannot exceed 100 characters"),n())}function ai(r,t){r&1&&(i(0,"mat-error"),o(1,"Price cannot be negative"),n())}function si(r,t){if(r&1&&(i(0,"mat-option",39),o(1),Oe(2,"titlecase"),n()),r&2){let e=t.$implicit;g("value",e),c(),x(" ",ke(2,2,e)," ")}}function ci(r,t){if(r&1){let e=h();i(0,"div",61),f(1,"img",62),i(2,"button",63),p("click",function(){let s=_(e).$implicit,l=d(3);return v(l.removeExistingImage(s))}),i(3,"mat-icon",64),o(4,"close"),n()()()}if(r&2){let e=t.$implicit,a=t.$index;c(),g("src",e,B)("alt","Service image "+(a+1))}}function li(r,t){if(r&1&&(i(0,"div")(1,"h4",34),o(2,"Current Images"),n(),i(3,"div",60),M(4,ci,5,2,"div",61,A),n()()),r&2){let e=d(2);c(4),y(e.existingImages())}}function di(r,t){if(r&1){let e=h();i(0,"div",61),f(1,"img",62),i(2,"button",63),p("click",function(){let s=_(e).$index,l=d(3);return v(l.removeImage(s))}),i(3,"mat-icon",64),o(4,"close"),n()()()}if(r&2){let e=t.$implicit,a=t.$index;c(),g("src",e,B)("alt","Preview "+(a+1))}}function mi(r,t){if(r&1&&(i(0,"div")(1,"h4",34),o(2,"New Images to Upload"),n(),i(3,"div",65),M(4,di,5,2,"div",61,A),n()()),r&2){let e=d(2);c(4),y(e.imagePreviewUrls())}}function ui(r,t){r&1&&(i(0,"div",57)(1,"mat-icon",66),o(2,"refresh"),n(),i(3,"span"),o(4,"Uploading images..."),n()())}function pi(r,t){if(r&1&&(xe(0),o(1),be()),r&2){let e=d(2);c(),x(" ",e.isEditMode()?"Updating...":"Creating..."," ")}}function gi(r,t){if(r&1&&(xe(0),o(1),be()),r&2){let e=d(2);c(),x(" ",e.submitButtonText()," ")}}function _i(r,t){if(r&1){let e=h();i(0,"div",5)(1,"div",19)(2,"app-dashboard-subheader",20),p("backClicked",function(){_(e);let s=d();return v(s.goBack())}),n()(),i(3,"mat-card",21)(4,"mat-stepper",22,0)(6,"mat-step",23)(7,"form",24)(8,"div")(9,"h3",25),o(10," Service Details "),n(),i(11,"p",26),o(12," Provide basic information about your service. "),n()(),m(13,ii,7,1,"mat-form-field",27),i(14,"mat-form-field",27)(15,"mat-label"),o(16,"Service Name"),n(),f(17,"input",28),m(18,ni,2,0,"mat-error"),m(19,ri,2,0,"mat-error"),m(20,oi,2,0,"mat-error"),n(),i(21,"mat-form-field",27)(22,"mat-label"),o(23,"Full Description"),n(),f(24,"textarea",29),n(),i(25,"div",30)(26,"button",31),p("click",function(){_(e);let s=O(5),l=d();return v(l.nextStep(s))}),o(27," Next "),i(28,"mat-icon",32),o(29,"arrow_forward"),n()()()()(),i(30,"mat-step",33)(31,"form",24)(32,"div")(33,"h3",25),o(34," Pricing & Service Features "),n(),i(35,"p",26),o(36," Set your pricing and define what's included in your service. "),n()(),i(37,"div")(38,"h4",34),o(39,"Pricing Information"),n(),i(40,"div",35)(41,"mat-form-field",36)(42,"mat-label"),o(43,"Price"),n(),f(44,"input",37),m(45,ai,2,0,"mat-error"),n(),i(46,"mat-form-field",36)(47,"mat-label"),o(48,"Pricing Type"),n(),i(49,"mat-select",38),M(50,si,3,4,"mat-option",39,A),n()()(),i(52,"mat-form-field",27)(53,"mat-label"),o(54,"Duration"),n(),f(55,"input",40),n()(),i(56,"div")(57,"h4",34),o(58,"Service Details"),n(),i(59,"mat-form-field",27)(60,"mat-label"),o(61,"Features"),n(),f(62,"textarea",41),i(63,"mat-hint"),o(64,"Separate features with commas"),n()(),i(65,"mat-form-field",27)(66,"mat-label"),o(67,"Tags"),n(),f(68,"input",42),i(69,"mat-hint"),o(70,"Separate tags with commas"),n()()(),i(71,"div")(72,"h4",34),o(73,"Service Status"),n(),i(74,"div",43)(75,"mat-checkbox",44),o(76," Active (visible to customers) "),n(),i(77,"mat-checkbox",45),o(78," Featured service "),n()()(),i(79,"div",46)(80,"button",47),p("click",function(){_(e);let s=O(5),l=d();return v(l.previousStep(s))}),i(81,"mat-icon",18),o(82,"arrow_back"),n(),o(83," Previous "),n(),i(84,"button",31),p("click",function(){_(e);let s=O(5),l=d();return v(l.nextStep(s))}),o(85," Next "),i(86,"mat-icon",32),o(87,"arrow_forward"),n()()()()(),i(88,"mat-step",48)(89,"div",49)(90,"div")(91,"h3",25),o(92," Service Images "),n(),i(93,"p",26),o(94," Add images to showcase your service (optional). You can upload up to 5 images, max 5MB each. "),n()(),m(95,li,6,0,"div"),i(96,"div",50)(97,"div",51)(98,"mat-icon",52),o(99,"cloud_upload"),n(),i(100,"h4",10),o(101,"Upload Images"),n(),i(102,"p",53),o(103,"Drag and drop images here, or click to select files"),n(),i(104,"input",54,1),p("change",function(s){_(e);let l=d();return v(l.onImageSelect(s))}),n(),i(106,"div",55)(107,"button",31),p("click",function(){_(e);let s=O(105);return v(s.click())}),i(108,"mat-icon",18),o(109,"add_photo_alternate"),n(),o(110," Select Images "),n()(),i(111,"p",56),o(112),n()()(),m(113,mi,6,0,"div"),m(114,ui,5,0,"div",57),i(115,"div",46)(116,"button",47),p("click",function(){_(e);let s=O(5),l=d();return v(l.previousStep(s))}),i(117,"mat-icon",18),o(118,"arrow_back"),n(),o(119," Back "),n(),i(120,"button",58),p("click",function(){_(e);let s=d();return v(s.onSubmit())}),m(121,pi,2,1,"ng-container")(122,gi,2,1,"ng-container"),n()()()()()()()}if(r&2){let e=d();c(2),g("title",e.isEditMode()?"Edit Your Service":"Create Your Service")("subtitle",e.isEditMode()?"Update your service information and settings":"Create a new service for your business"),c(2),g("linear",!0)("orientation",e.isMobile()?"vertical":"horizontal"),c(2),g("stepControl",e.serviceInfoForm),c(),g("formGroup",e.serviceInfoForm),c(6),u(e.isEditMode()?-1:13),c(5),u(e.name!=null&&e.name.hasError("required")&&(e.name!=null&&e.name.touched)?18:-1),c(),u(e.name!=null&&e.name.hasError("minlength")&&(e.name!=null&&e.name.touched)?19:-1),c(),u(e.name!=null&&e.name.hasError("maxlength")&&(e.name!=null&&e.name.touched)?20:-1),c(6),g("disabled",!e.isServiceInfoValid()),c(4),g("stepControl",e.servicePricingForm),c(),g("formGroup",e.servicePricingForm),c(14),u(e.price!=null&&e.price.hasError("min")&&(e.price!=null&&e.price.touched)?45:-1),c(5),y(e.pricingTypes),c(34),g("disabled",!e.isServicePricingValid()),c(11),u(e.isEditMode()&&e.existingImages().length>0?95:-1),c(12),g("disabled",e.selectedImages().length+e.existingImages().length>=5),c(5),x(" ",e.selectedImages().length+e.existingImages().length," of 5 images selected "),c(),u(e.selectedImages().length>0?113:-1),c(),u(e.uploadingImages()?114:-1),c(6),g("disabled",!e.canSubmitService()),c(),u(e.submitting()?121:122)}}var G=class r{authService=S(X);router=S(q);route=S(Le);businessService=S(Z);fb=S(Xe);breakpointObserver=S(Y);userBusinesses=C([]);currentService=C(null);loading=C(!1);error=C(null);submitting=C(!1);isEditMode=C(!1);serviceId=C("");uploadingImages=C(!1);selectedImages=C([]);imagePreviewUrls=C([]);existingImages=C([]);isMobile=C(!1);serviceInfoForm;servicePricingForm;pricingTypes=["fixed","hourly","project","custom"];hasBusinesses=V(()=>this.userBusinesses().length>0);canSubmitService=V(()=>this.hasBusinesses()&&!this.submitting());pageTitle=V(()=>this.isEditMode()?"Edit Service":"Create New Service");submitButtonText=V(()=>this.isEditMode()?"Update Service":"Create Service");constructor(){this.serviceInfoForm=this.fb.group({business_id:["",[R.required]],name:["",[R.required,R.minLength(2),R.maxLength(100)]],description:[""]}),this.servicePricingForm=this.fb.group({price:[null,[R.min(0)]],pricing_type:["fixed"],duration:[""],is_active:[!0],is_featured:[!1],features:[""],tags:[""]}),this.serviceInfoForm.get("name")?.valueChanges.subscribe(t=>{})}ngOnInit(){return T(this,null,function*(){this.breakpointObserver.observe([Q.Handset]).subscribe(e=>{this.isMobile.set(e.matches)});let t=this.route.snapshot.paramMap.get("id");if(t&&(this.isEditMode.set(!0),this.serviceId.set(t)),yield this.loadUserBusinesses(),!this.hasBusinesses()){this.router.navigate(["/dashboard/businesses/create-business"]);return}if(this.isEditMode())yield this.loadService();else{let e=this.route.snapshot.queryParamMap.get("businessId");if(e)this.userBusinesses().find(l=>l._id===e)&&this.serviceInfoForm.get("business_id")?.setValue(e);else{let a=this.userBusinesses();a.length===1&&this.serviceInfoForm.get("business_id")?.setValue(a[0]._id)}}})}loadUserBusinesses(){return T(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let t=yield this.businessService.getMyBusinessesAsync();this.userBusinesses.set(t)}catch(t){console.error("Error loading user businesses:",t),this.error.set(t?.message||"Failed to load businesses")}finally{this.loading.set(!1)}})}loadService(){return T(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let t=yield this.businessService.getServiceAsync(this.serviceId());if(!t)throw new Error("Service not found");this.currentService.set(t),this.populateForm(t)}catch(t){console.error("Error loading service:",t),this.error.set(t?.message||"Failed to load service")}finally{this.loading.set(!1)}})}populateForm(t){this.serviceInfoForm.patchValue({business_id:typeof t.business_id=="string"?t.business_id:t.business_id._id,name:t.name,short_description:t.short_description||"",description:t.description||""}),this.servicePricingForm.patchValue({price:t.price,pricing_type:t.pricing_type||"fixed",duration:t.duration||"",is_active:t.is_active??!0,is_featured:t.is_featured??!1,features:t.features?.join(", ")||"",tags:t.tags?.join(", ")||""}),t.images&&t.images.length>0&&this.existingImages.set([...t.images])}formatFeatures(t){return t.trim()?t.split(",").map(e=>e.trim()).filter(e=>e.length>0):[]}formatTags(t){return t.trim()?t.split(",").map(e=>e.trim()).filter(e=>e.length>0):[]}isServiceInfoValid(){return this.serviceInfoForm.valid}isServicePricingValid(){return this.servicePricingForm.valid}nextStep(t){t.next()}previousStep(t){t.previous()}onSubmit(){return T(this,null,function*(){if(!this.isServiceInfoValid()||!this.isServicePricingValid()||this.submitting()){this.markAllFormsTouched();return}this.submitting.set(!0),this.error.set(null);try{let t=this.serviceInfoForm.value,e=this.servicePricingForm.value,a,s,l={name:t.name,short_description:t.short_description||void 0,description:t.description||void 0,features:this.formatFeatures(e.features),price:e.price||void 0,pricing_type:e.pricing_type,duration:e.duration||void 0,tags:this.formatTags(e.tags),is_active:e.is_active,is_featured:e.is_featured};this.isEditMode()?(s=this.serviceId(),a=yield this.businessService.updateServiceAsync(s,l)):(a=yield this.businessService.createServiceAsync(t.business_id,l),s=a._id);try{let b=yield this.uploadImages(s);if(b.length>0&&(yield this.businessService.updateServiceAsync(s,{images:b})),this.isEditMode()){let fe=(this.currentService()?.images||[]).filter(Ce=>!this.existingImages().includes(Ce));for(let Ce of fe)try{yield this.businessService.deleteServiceImageAsync(s,Ce)}catch(xt){console.warn("Failed to delete image:",xt)}}}catch(b){console.error("Error handling images:",b),this.error.set(`Service saved but image upload failed: ${b.message}`)}this.router.navigate(["/dashboard/services"])}catch(t){console.error("Error saving service:",t),this.error.set(t?.message||`Failed to ${this.isEditMode()?"update":"create"} service`)}finally{this.submitting.set(!1)}})}markAllFormsTouched(){Object.keys(this.serviceInfoForm.controls).forEach(t=>{this.serviceInfoForm.get(t)?.markAsTouched()}),Object.keys(this.servicePricingForm.controls).forEach(t=>{this.servicePricingForm.get(t)?.markAsTouched()})}onCancel(){this.router.navigate(["/dashboard/services"])}goBack(){this.router.navigate(["/dashboard/services"])}loadData(){this.isEditMode()?this.loadService():this.loadUserBusinesses()}get business_id(){return this.serviceInfoForm.get("business_id")}get name(){return this.serviceInfoForm.get("name")}get short_description(){return this.serviceInfoForm.get("short_description")}get description(){return this.serviceInfoForm.get("description")}get features(){return this.serviceInfoForm.get("features")}get price(){return this.servicePricingForm.get("price")}get pricing_type(){return this.servicePricingForm.get("pricing_type")}get duration(){return this.servicePricingForm.get("duration")}get tags(){return this.servicePricingForm.get("tags")}get is_active(){return this.servicePricingForm.get("is_active")}get is_featured(){return this.servicePricingForm.get("is_featured")}onImageSelect(t){let e=t.target;if(e.files&&e.files.length>0){let a=Array.from(e.files),s=a.filter(ve=>{let ye=ve.type.startsWith("image/"),fe=ve.size<=5*1024*1024;return ye&&fe});s.length!==a.length&&this.error.set("Some files were rejected. Please ensure all files are images under 5MB.");let b=[...this.selectedImages(),...s];b.length>5?(this.selectedImages.set(b.slice(0,5)),this.error.set("Maximum 5 images allowed. Some images were not added.")):this.selectedImages.set(b),this.generateImagePreviews()}}removeImage(t){let a=this.selectedImages().filter((s,l)=>l!==t);this.selectedImages.set(a),this.generateImagePreviews()}removeExistingImage(t){let a=this.existingImages().filter(s=>s!==t);this.existingImages.set(a)}generateImagePreviews(){let t=this.selectedImages(),e=[];t.forEach(a=>{let s=new FileReader;s.onload=l=>{let b=l.target?.result;e.push(b),e.length===t.length&&this.imagePreviewUrls.set(e)},s.readAsDataURL(a)}),t.length===0&&this.imagePreviewUrls.set([])}uploadImages(t){return T(this,null,function*(){let e=this.selectedImages();if(e.length===0)return this.existingImages();this.uploadingImages.set(!0);try{let a=yield this.businessService.uploadServiceImagesAsync(t,e);return[...this.existingImages(),...a.images]}catch(a){throw console.error("Error uploading images:",a),new Error("Failed to upload images")}finally{this.uploadingImages.set(!1)}})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=E({type:r,selectors:[["app-create-service"]],decls:5,vars:1,consts:[["stepper",""],["fileInput",""],[1,"min-h-screen","bg-gray-50"],[1,"flex","justify-center","items-center","min-h-screen"],[1,"max-w-2xl","mx-auto","px-4","sm:px-6","lg:px-8","py-12"],[1,"lg:max-w-6xl","max-w-12xl","px-0","lg:px-8","py-8"],[3,"diameter","strokeWidth"],[1,"text-center","py-12","bg-white","rounded-lg","shadow-sm","border","border-gray-200"],[1,"text-red-400","mb-4"],[1,"text-6xl"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"space-x-4"],[1,"bg-gray-600","text-white","px-4","py-2","rounded-lg","hover:bg-gray-700","transition-colors",3,"click"],[1,"bg-blue-600","text-white","px-4","py-2","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"mx-auto","h-12","w-12","text-gray-400","mb-4"],[2,"font-size","48px","height","48px","width","48px"],[1,"text-sm","text-gray-500","mb-6"],["routerLink","/dashboard/businesses/create-business",1,"bg-gray-900","hover:bg-gray-800","text-white","px-6","py-2","rounded-lg","font-medium","transition-colors","flex","items-center"],[1,"mr-2"],[1,"px-6"],[3,"backClicked","title","subtitle"],[1,"w-full"],[1,"service-stepper",3,"linear","orientation"],["label","Service Information",3,"stepControl"],[1,"lg:p-6","space-y-6",3,"formGroup"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"text-gray-600","mb-6"],["appearance","outline",1,"w-full"],["matInput","","formControlName","name","placeholder","e.g., Web Design, Logo Creation","required",""],["matInput","","formControlName","description","rows","4","placeholder","Detailed description of your service"],[1,"flex","justify-end"],["type","button","matButton","filled","color","primary","mat-raised-button","",1,"flex","items-center",3,"click","disabled"],[1,"ml-2"],["label","Pricing & Features",3,"stepControl"],[1,"text-md","font-medium","text-gray-900","mb-3"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline"],["matInput","","type","number","formControlName","price","min","0","step","0.01","placeholder","0.00"],["formControlName","pricing_type"],[3,"value"],["matInput","","formControlName","duration","placeholder","e.g., 2-3 weeks, 1 hour"],["matInput","","formControlName","features","rows","3","placeholder","Feature 1, Feature 2, Feature 3"],["matInput","","formControlName","tags","placeholder","tag1, tag2, tag3"],[1,"space-y-4"],["formControlName","is_active"],["formControlName","is_featured"],[1,"flex","justify-between"],["type","button","mat-stroked-button","","color","accent",1,"flex","items-center",3,"click"],["label","Images & Finish"],[1,"lg:p-6","space-y-6"],[1,"border-2","border-dashed","border-gray-300","rounded-lg","p-6"],[1,"text-center"],[1,"text-4xl","text-gray-400","mb-4"],[1,"text-gray-600","mb-4"],["type","file","multiple","","accept","image/*",1,"hidden",3,"change"],[1,"flex","justify-center"],[1,"text-sm","text-gray-500","mt-2"],[1,"flex","items-center","justify-center","py-4"],["type","button","matButton","filled","color","primary",3,"click","disabled"],["formControlName","business_id","required",""],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-4","mb-6"],[1,"relative","group"],[1,"w-full","h-32","object-cover","rounded-lg","border","border-gray-200",3,"src","alt"],["type","button",1,"absolute","top-2","right-2","bg-red-500","text-white","rounded-full","p-1","opacity-0","group-hover:opacity-100","transition-opacity",3,"click"],[1,"text-sm"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-4"],[1,"animate-spin","mr-2"]],template:function(e,a){e&1&&(i(0,"div",2),m(1,Kt,2,2,"div",3)(2,Xt,12,1,"div",4)(3,Zt,13,0,"div",4)(4,_i,123,22,"div",5),n()),e&2&&(c(),u(a.loading()?1:a.error()?2:a.hasBusinesses()?4:3))},dependencies:[P,W,Ve,ne,qe,Re,We,Ge,He,Ke,Je,Ye,Qe,ae,oe,re,tt,et,rt,nt,ce,se,J,F,k,U,$,pt,ut,ft,_t,vt,L,z,te,ee,le,Fe],encapsulation:2})};var Yn=[{path:"",component:de,children:[{path:"list-services",component:_e},{path:"",redirectTo:"list-services",pathMatch:"full"},{path:"create-service",component:G},{path:"edit-service/:id",component:G}]}];export{Yn as SERVICES_ROUTES};
