import{a as S}from"./chunk-I5U62TA7.js";import{a as k,b as B}from"./chunk-O5NR6HJB.js";import{a as w,b as N,c as R,g as b}from"./chunk-KERUYJQC.js";import{b as A,c as O,e as p}from"./chunk-XNH753K3.js";import{a as P}from"./chunk-FI6EVXVM.js";import{G as v,H as g}from"./chunk-T77N2UQ2.js";import{Ba as f,Ga as y,Ka as x,Na as c,Pa as I,S as m,Tb as T,Ua as n,Va as a,ab as d,bb as D,gc as u,ha as _,nb as s,pb as l,sa as i,wa as F}from"./chunk-YOTEMOQK.js";import{d as M}from"./chunk-QEZ3K4DX.js";var C=class r{constructor(o,e){this.dialogRef=o;this.data=e}onCancel(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(!0)}getTitle(){return this.data.action==="add"?"Add to Favorites":"Remove from Favorites"}getMessage(){return this.data.action==="add"?`Are you sure you want to add "${this.data.businessName}" to your favorites? You'll be able to easily find it later in your favorites list.`:`Are you sure you want to remove "${this.data.businessName}" from your favorites?`}getIconClass(){return this.data.action==="add","text-red-500"}getConfirmButtonClass(){let o="text-white transition-colors duration-200";return this.data.action==="add"?`${o} bg-blue-500 hover:bg-blue-600`:`${o} bg-red-500 hover:bg-red-600`}getConfirmButtonText(){return this.data.action==="add"?"Add to Favorites":"Remove"}static \u0275fac=function(e){return new(e||r)(F(w),F(N))};static \u0275cmp=f({type:r,selectors:[["app-favorite-confirm-dialog"]],decls:15,vars:9,consts:[[1,"p-6"],[1,"flex","items-center","mb-4"],[1,"mr-3","text-2xl"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-gray-600","mb-6"],[1,"flex","justify-end","space-x-3"],["mat-button","",1,"text-gray-600","hover:text-gray-800",3,"click"],["mat-raised-button","",3,"click"],[1,"mr-2"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"div",1)(2,"mat-icon",2),s(3),a(),n(4,"h2",3),s(5),a()(),n(6,"p",4),s(7),a(),n(8,"div",5)(9,"button",6),d("click",function(){return t.onCancel()}),s(10," Cancel "),a(),n(11,"button",7),d("click",function(){return t.onConfirm()}),n(12,"mat-icon",8),s(13),a(),s(14),a()()()),e&2&&(i(2),c(t.getIconClass()),i(),l(" ",t.data.action==="add"?"favorite":"favorite_border"," "),i(2),l(" ",t.getTitle()," "),i(2),l(" ",t.getMessage()," "),i(4),c(t.getConfirmButtonClass()),i(2),l(" ",t.data.action==="add"?"favorite":"delete"," "),i(),l(" ",t.getConfirmButtonText()," "))},dependencies:[u,b,p,O,g,v],styles:[".text-red-500[_ngcontent-%COMP%]{color:#ef4444}.text-blue-500[_ngcontent-%COMP%]{color:#3b82f6}.bg-red-500[_ngcontent-%COMP%]{background-color:#ef4444}.bg-blue-500[_ngcontent-%COMP%]{background-color:#3b82f6}.hover\\:bg-red-600[_ngcontent-%COMP%]:hover{background-color:#dc2626}.hover\\:bg-blue-600[_ngcontent-%COMP%]:hover{background-color:#2563eb}.text-white[_ngcontent-%COMP%]{color:#fff}"]})};function G(r,o){r&1&&(n(0,"mat-icon",1),s(1,"refresh"),a())}function Y(r,o){if(r&1&&(n(0,"mat-icon"),s(1),a()),r&2){let e=D();c(e.getIconClass()),i(),l(" ",e.isFavorited()?"favorite":"favorite_border"," ")}}var E=class r{businessId;businessName;size="medium";showText=!1;buttonClass="favorite-button";favoritesService=m(S);authService=m(P);dialog=m(R);loading=_(!1);isFavorited=_(!1);isAuthenticated=this.authService.isAuthenticated;constructor(){T(()=>{this.businessId&&this.favoritesService.isBusinessFavorited(this.businessId).subscribe(o=>this.isFavorited.set(o))})}onFavoriteClick(){return M(this,null,function*(){if(!this.isAuthenticated())return;if(!this.businessId){console.error("Business ID is required for favorite button");return}let o=this.isFavorited(),e=o?"remove":"add",t=this.businessName||"this business";if(yield this.showConfirmationDialog(e,t)){this.loading.set(!0);try{o?(yield this.favoritesService.removeFromFavoritesAsync(this.businessId),console.log(`Removed ${t} from favorites`)):(yield this.favoritesService.addToFavoritesAsync(this.businessId),console.log(`Added ${t} to favorites`))}catch($){console.error("Error toggling favorite:",$)}finally{this.loading.set(!1)}}})}showConfirmationDialog(o,e){return M(this,null,function*(){return this.dialog.open(C,{width:"400px",data:{action:o,businessName:e,isFavorited:this.isFavorited()}}).afterClosed().toPromise()})}getTooltipText(){return this.isAuthenticated()?this.loading()?"Processing...":this.isFavorited()?"Remove from favorites":"Add to favorites":"Login to save favorites"}getIconClass(){let o="favorite-icon",e=this.isFavorited()?"favorite-icon-active":"favorite-icon-inactive";return`${o} ${e}`}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=f({type:r,selectors:[["app-favorite-button"]],inputs:{businessId:"businessId",businessName:"businessName",size:"size",showText:"showText",buttonClass:"buttonClass"},decls:3,vars:5,consts:[["mat-icon-button","",3,"click","disabled","matTooltip"],[1,"animate-spin"],[3,"class"]],template:function(e,t){e&1&&(n(0,"button",0),d("click",function(){return t.onFavoriteClick()}),y(1,G,2,0,"mat-icon",1)(2,Y,2,3,"mat-icon",2),a()),e&2&&(c(t.buttonClass),x("disabled",t.loading()||!t.isAuthenticated())("matTooltip",t.getTooltipText()),i(),I(t.loading()?1:2))},dependencies:[u,g,v,p,A,B,k,b],styles:[".favorite-button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.favorite-button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.favorite-icon[_ngcontent-%COMP%]{transition:color .2s ease-in-out}.favorite-icon-active[_ngcontent-%COMP%]{color:#ef4444}.favorite-icon-inactive[_ngcontent-%COMP%]{color:#6b7280}.favorite-icon-inactive[_ngcontent-%COMP%]:hover{color:#ef4444}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}"]})};export{E as a};
