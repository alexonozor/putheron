import{a as be,c as xe,d as ye,e as Ce}from"./chunk-UV76TDYM.js";import{a as pe}from"./chunk-WZOFRKP2.js";import{a as we}from"./chunk-CK7XNSA6.js";import{a as B,b as G,c as q}from"./chunk-MH2TZ5JW.js";import{a as A,da as se,fa as X,ga as le,ha as de,ia as N,ja as L,ka as H,la as z,ma as me,na as he,oa as ue,pa as _e,qa as ve,ra as ge,sa as fe}from"./chunk-6Y5WFBHK.js";import{a as ce}from"./chunk-I4H5EEGR.js";import{Bb as j,Ca as _,Fa as M,Ia as E,Ib as ae,Jb as T,Ka as p,La as ne,Ma as k,Na as I,O as ee,Oa as t,P as te,Pa as n,Qa as v,R as x,Rb as R,Tb as D,Ua as b,W as h,Wa as m,X as u,Xa as l,Xb as re,Y as f,Z as w,d as S,fb as a,ga as y,gb as d,hb as C,ib as oe,pa as V,qa as c,rb as Y,sb as Z,ya as P,za as ie}from"./chunk-D7HQ4GWZ.js";var Se=(o,i)=>i._id;function Ee(o,i){if(o&1&&(t(0,"div",0)(1,"div",2),f(),t(2,"svg",3),v(3,"path",4),n(),w(),t(4,"div")(5,"h3",5),a(6,"Error"),n(),t(7,"p",6),a(8),n()()()()),o&2){let e=l();c(8),d(e.error())}}function ke(o,i){o&1&&(t(0,"div",1),v(1,"div",7),t(2,"span",8),a(3,"Loading..."),n()())}function Ie(o,i){if(o&1){let e=b();t(0,"div",35)(1,"div",47),f(),t(2,"svg",48),v(3,"path",18),n()(),w(),t(4,"h4",49),a(5,"No businesses yet"),n(),t(6,"p",50),a(7,"Get started by creating your first business"),n(),t(8,"button",51),m("click",function(){h(e);let s=l(3);return u(s.navigateToCreateBusiness())}),f(),t(9,"svg",52),v(10,"path",46),n(),a(11," Create Business "),n()()}}function Pe(o,i){if(o&1&&v(0,"img",55),o&2){let e=l().$implicit;M("src",e.logo_url,V)("alt",e.name)}}function Te(o,i){o&1&&(t(0,"div",56),f(),t(1,"svg",63),v(2,"path",18),n()())}function Me(o,i){if(o&1){let e=b();t(0,"div",54),m("click",function(){let s=h(e).$implicit,g=l(4);return u(g.viewBusiness(s._id))}),_(1,Pe,1,2,"img",55)(2,Te,3,0,"div",56),t(3,"div",57)(4,"p",58),a(5),n(),t(6,"div",59)(7,"span",60),a(8),Y(9,"titlecase"),n()()(),f(),t(10,"svg",61),v(11,"path",62),n()()}if(o&2){let e=i.$implicit,r=l(4);c(),p(e.logo_url?1:2),c(4),d(e.name),c(2),E(r.getStatusColor(e.status)),c(),C(" ",Z(9,5,e.status)," ")}}function De(o,i){if(o&1&&(t(0,"div",36),k(1,Me,12,7,"div",53,Se),n()),o&2){let e=l(3);c(),I(e.userBusinesses().slice(0,3))}}function Ae(o,i){if(o&1){let e=b();t(0,"div",9)(1,"div",11)(2,"div",12)(3,"div",13)(4,"div")(5,"p",14),a(6,"Total Businesses"),n(),t(7,"p",15),a(8),n()(),t(9,"div",16),f(),t(10,"svg",17),v(11,"path",18),n()()()(),w(),t(12,"div",12)(13,"div",13)(14,"div")(15,"p",14),a(16,"Active Services"),n(),t(17,"p",15),a(18),n()(),t(19,"div",19),f(),t(20,"svg",20),v(21,"path",21)(22,"path",22),n()()()(),w(),t(23,"div",12)(24,"div",13)(25,"div")(26,"p",14),a(27,"Projects"),n(),t(28,"p",15),a(29),n()(),t(30,"div",23),f(),t(31,"svg",24),v(32,"path",25),n()()()(),w(),t(33,"div",12)(34,"div",13)(35,"div")(36,"p",14),a(37,"Messages"),n(),t(38,"p",15),a(39,"0"),n()(),t(40,"div",26),f(),t(41,"svg",27),v(42,"path",28),n()()()()(),w(),t(43,"div",29)(44,"div",30)(45,"div",31)(46,"div",13)(47,"h3",32),a(48,"Recent Businesses"),n(),t(49,"button",33),m("click",function(){h(e);let s=l(2);return u(s.setActiveTab("businesses"))}),a(50," View All \u2192 "),n()()(),t(51,"div",34),_(52,Ie,12,0,"div",35)(53,De,3,0,"div",36),n()(),t(54,"div",30)(55,"div",31)(56,"h3",32),a(57,"Quick Actions"),n()(),t(58,"div",34)(59,"div",36)(60,"button",37),m("click",function(){h(e);let s=l(2);return u(s.navigateToCreateBusiness())}),t(61,"div",38)(62,"div",39),f(),t(63,"svg",40),v(64,"path",18),n()(),w(),t(65,"div",41)(66,"p",42),a(67,"Create New Business"),n(),t(68,"p",43),a(69,"Set up a new business profile"),n()()()(),t(70,"button",37),m("click",function(){h(e);let s=l(2);return u(s.createService())}),t(71,"div",38)(72,"div",44),f(),t(73,"svg",45),v(74,"path",46),n()(),w(),t(75,"div",41)(76,"p",42),a(77,"Add New Service"),n(),t(78,"p",43),a(79,"Create a service for your business"),n()()()()()()()()()}if(o&2){let e=l(2);c(8),d(e.userBusinesses().length),c(10),d(e.getTotalServices()),c(11),d(e.getTotalProjects()),c(23),p(e.userBusinesses().length===0?52:53)}}function Be(o,i){if(o&1){let e=b();t(0,"div",67)(1,"div",69),f(),t(2,"svg",70),v(3,"path",18),n()(),w(),t(4,"h3",71),a(5,"No businesses yet"),n(),t(6,"p",50),a(7,"Get started by creating your first business listing."),n(),t(8,"button",72),m("click",function(){h(e);let s=l(3);return u(s.navigateToCreateBusiness())}),f(),t(9,"svg",52),v(10,"path",46),n(),a(11," Create Your First Business "),n()()}}function Fe(o,i){if(o&1&&v(0,"img",55),o&2){let e=l().$implicit;M("src",e.logo_url,V)("alt",e.name+" logo")}}function Ve(o,i){o&1&&(t(0,"div",56),f(),t(1,"svg",63),v(2,"path",18),n()())}function Oe(o,i){if(o&1){let e=b();t(0,"div",74),m("click",function(){let s=h(e).$implicit,g=l(4);return u(g.viewBusiness(s._id))}),t(1,"div",34)(2,"div",75),_(3,Fe,1,2,"img",55)(4,Ve,3,0,"div",56),t(5,"div",57)(6,"h4",76),a(7),n(),t(8,"span",60),a(9),Y(10,"titlecase"),n()()(),t(11,"p",77),a(12),n(),t(13,"div",78)(14,"span"),a(15),n(),t(16,"span"),a(17),n()()(),t(18,"div",79)(19,"div",13)(20,"div",80)(21,"button",81),m("click",function(s){let g=h(e).$implicit,F=l(4);return s.stopPropagation(),u(F.viewBusiness(g._id))}),f(),t(22,"svg",82),v(23,"path",22)(24,"path",83),n()(),w(),t(25,"button",84),m("click",function(s){let g=h(e).$implicit,F=l(4);return s.stopPropagation(),u(F.editBusiness(g._id))}),f(),t(26,"svg",82),v(27,"path",85),n()()(),w(),t(28,"button",86),m("click",function(s){let g=h(e).$implicit,F=l(4);return s.stopPropagation(),u(F.deleteBusiness(g._id))}),f(),t(29,"svg",87),v(30,"path",88),n()()()()()}if(o&2){let e=i.$implicit,r=l(4);c(3),p(e.logo_url?3:4),c(4),d(e.name),c(),E(r.getStatusColor(e.status)),c(),C(" ",Z(10,8,e.status)," "),c(3),C(" ",e.short_description||e.description||"No description available"," "),c(3),d(r.getCategoryName(e)),c(2),C("",e.view_count||0," views")}}function Re(o,i){if(o&1&&(t(0,"div",68),k(1,Oe,31,10,"div",73,Se),n()),o&2){let e=l(3);c(),I(e.userBusinesses())}}function Ne(o,i){if(o&1){let e=b();t(0,"div",10)(1,"div",13)(2,"div")(3,"h2",64),a(4,"Your Businesses"),n(),t(5,"p",65),a(6,"Manage and monitor your business listings"),n()(),t(7,"button",66),m("click",function(){h(e);let s=l(2);return u(s.navigateToCreateBusiness())}),f(),t(8,"svg",52),v(9,"path",46),n(),a(10," New Business "),n()(),_(11,Be,12,0,"div",67)(12,Re,3,0,"div",68),n()}if(o&2){let e=l(2);c(11),p(e.hasBusinesses()?12:11)}}function Le(o,i){if(o&1){let e=b();t(0,"div",10)(1,"div",13)(2,"div")(3,"h2",64),a(4,"Your Services"),n(),t(5,"p",65),a(6,"Manage services across all your businesses"),n()(),t(7,"button",66),m("click",function(){h(e);let s=l(2);return u(s.createService())}),f(),t(8,"svg",52),v(9,"path",46),n(),a(10," New Service "),n()(),w(),t(11,"div",67)(12,"div",69),f(),t(13,"svg",70),v(14,"path",21)(15,"path",22),n()(),w(),t(16,"h3",71),a(17,"Services Management"),n(),t(18,"p",50),a(19,"This feature will be available soon. You can manage services from individual business profiles."),n(),t(20,"button",89),m("click",function(){h(e);let s=l(2);return u(s.setActiveTab("businesses"))}),a(21," View Businesses "),n()()()}}function He(o,i){o&1&&(t(0,"div",10)(1,"div",13)(2,"div")(3,"h2",64),a(4,"Your Projects"),n(),t(5,"p",65),a(6,"Showcase your work and portfolio"),n()()(),t(7,"div",67)(8,"div",69),f(),t(9,"svg",70),v(10,"path",25),n()(),w(),t(11,"h3",71),a(12,"Projects Coming Soon"),n(),t(13,"p",90),a(14,"Portfolio and project management features will be available in a future update."),n()()())}function ze(o,i){o&1&&(t(0,"div",10)(1,"div",13)(2,"div")(3,"h2",64),a(4,"Messages"),n(),t(5,"p",65),a(6,"Communicate with clients and prospects"),n()()(),t(7,"div",67)(8,"div",69),f(),t(9,"svg",70),v(10,"path",28),n()(),w(),t(11,"h3",71),a(12,"Messaging Coming Soon"),n(),t(13,"p",90),a(14,"Direct messaging and communication features will be available in a future update."),n()()())}function Ge(o,i){if(o&1&&_(0,Ae,80,4,"div",9)(1,Ne,13,1,"div",10)(2,Le,22,0,"div",10)(3,He,15,0,"div",10)(4,ze,15,0,"div",10),o&2){let e,r=l();p((e=r.activeTab())==="overview"?0:e==="businesses"?1:e==="services"?2:e==="projects"?3:e==="messages"?4:-1)}}var U=class o{authService=x(A);router=x(D);route=x(R);businessService=x(pe);projectService=x(B);userBusinesses=y([]);userServices=y([]);userProjects=y([]);loading=y(!1);error=y(null);activeTab=y("overview");user=this.authService.user;hasBusinesses=j(()=>this.userBusinesses().length>0);totalServices=j(()=>this.userServices().length);totalProjects=j(()=>this.userProjects().length);ngOnInit(){if(!this.user()){this.router.navigate(["/auth"]);return}let i=this.router.url.split("/"),e=i[i.length-1];e==="dashboard"||e==="overview"||e===""?this.activeTab.set("overview"):this.activeTab.set(e),this.loadDashboardData()}loadDashboardData(){return S(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let i=yield this.businessService.getMyBusinessesAsync();this.userBusinesses.set(i);let e=[];for(let r of i)try{let s=yield this.businessService.getBusinessServicesAsync(r._id);e=[...e,...s]}catch(s){console.warn(`Failed to load services for business ${r._id}:`,s)}this.userServices.set(e);try{let r=yield this.projectService.getAllMyProjectsAsync();this.userProjects.set(r)}catch(r){console.warn("Failed to load projects:",r),this.userProjects.set([])}}catch(i){console.error("Error loading dashboard data:",i),this.error.set(i.message||"Failed to load dashboard data")}finally{this.loading.set(!1)}})}setActiveTab(i){this.activeTab.set(i)}getTotalServices(){return this.totalServices()}getTotalProjects(){return this.totalProjects()}navigateToCreateBusiness(){this.router.navigate(["/dashboard/businesses/create-business"])}createService(){if(this.userBusinesses().length===0){alert("Please create a business first before adding services.");return}this.router.navigate(["/dashboard/services/create"])}viewProjects(){this.router.navigate(["/dashboard/projects"])}viewBusiness(i){this.router.navigate(["/business",i])}editBusiness(i){alert("Edit business functionality will be available soon!")}deleteBusiness(i){confirm("Are you sure you want to delete this business? This action cannot be undone.")&&alert("Delete business functionality will be available soon!")}viewProfile(){alert("Profile page will be available soon!")}viewMessages(){alert("Messages page will be available soon!")}getStatusColor(i){switch(i){case"approved":return"text-green-600";case"pending":return"text-yellow-600";case"rejected":return"text-red-600";case"suspended":return"text-gray-600";default:return"text-gray-600"}}getStatusIcon(i){switch(i){case"approved":return"bg-green-400";case"pending":return"bg-yellow-400";case"rejected":return"bg-red-400";case"suspended":return"bg-gray-400";default:return"bg-gray-400"}}getCategoryName(i){return typeof i.category_id=="object"&&i.category_id?.name?i.category_id.name:"Unknown Category"}getSubcategoryName(i){return typeof i.subcategory_id=="object"&&i.subcategory_id?.name?i.subcategory_id.name:null}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=P({type:o,selectors:[["app-overviews"]],decls:3,vars:2,consts:[[1,"mb-6","bg-red-50","border-l-4","border-red-400","p-4","rounded-r-lg"],[1,"flex","items-center","justify-center","py-12"],[1,"flex"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-red-400","mr-3"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"text-sm","font-medium","text-red-800"],[1,"mt-1","text-sm","text-red-700"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-gray-900"],[1,"ml-3","text-gray-600"],[1,"space-y-8"],[1,"space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"bg-white","rounded-xl","border","border-gray-200","p-6","hover:shadow-lg","transition-all","duration-200"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-500","mb-1"],[1,"text-3xl","font-bold","text-gray-900"],[1,"p-3","bg-blue-50","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"p-3","bg-green-50","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"p-3","bg-purple-50","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V8a2 2 0 012-2V6"],[1,"p-3","bg-orange-50","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"bg-white","rounded-xl","border","border-gray-200","overflow-hidden"],[1,"px-6","py-4","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-blue-600","hover:text-blue-800","font-medium","transition-colors",3,"click"],[1,"p-6"],[1,"text-center","py-12"],[1,"space-y-4"],[1,"w-full","flex","items-center","p-4","border-2","border-dashed","border-gray-300","rounded-lg","hover:border-gray-400","hover:bg-gray-50","transition-all","duration-200","group",3,"click"],[1,"flex","items-center","space-x-4"],[1,"p-3","bg-blue-50","rounded-lg","group-hover:bg-blue-100","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-600"],[1,"text-left"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-xs","text-gray-500"],[1,"p-3","bg-green-50","rounded-lg","group-hover:bg-green-100","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"p-4","bg-gray-50","rounded-full","w-16","h-16","mx-auto","mb-4","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],[1,"inline-flex","items-center","px-4","py-2","bg-gray-900","text-white","rounded-lg","hover:bg-gray-800","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],[1,"flex","items-center","space-x-4","p-3","rounded-lg","hover:bg-gray-50","cursor-pointer","transition-all","duration-200","border","border-transparent","hover:border-gray-200"],[1,"flex","items-center","space-x-4","p-3","rounded-lg","hover:bg-gray-50","cursor-pointer","transition-all","duration-200","border","border-transparent","hover:border-gray-200",3,"click"],[1,"h-12","w-12","rounded-lg","object-cover",3,"src","alt"],[1,"h-12","w-12","rounded-lg","bg-gray-100","flex","items-center","justify-center"],[1,"flex-1","min-w-0"],[1,"text-sm","font-medium","text-gray-900","truncate"],[1,"flex","items-center","space-x-2","mt-1"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-400"],[1,"text-xl","font-semibold","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","px-4","py-2","bg-gray-900","text-white","rounded-lg","hover:bg-gray-800","transition-colors","font-medium","text-sm",3,"click"],[1,"bg-white","rounded-xl","border","border-gray-200","p-12","text-center","shadow-sm"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"p-4","bg-gray-50","rounded-full","w-20","h-20","mx-auto","mb-6","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-gray-300"],[1,"text-xl","font-medium","text-gray-900","mb-2"],[1,"inline-flex","items-center","px-6","py-3","bg-gray-900","text-white","rounded-lg","hover:bg-gray-800","transition-colors","font-medium",3,"click"],[1,"bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-lg","transition-all","cursor-pointer","overflow-hidden"],[1,"bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-lg","transition-all","cursor-pointer","overflow-hidden",3,"click"],[1,"flex","items-center","space-x-4","mb-4"],[1,"text-lg","font-medium","text-gray-900","truncate"],[1,"text-sm","text-gray-600","mb-4","line-clamp-2"],[1,"flex","items-center","justify-between","text-xs","text-gray-500"],[1,"px-6","py-3","border-t","border-gray-200","bg-gray-50"],[1,"flex","space-x-2"],["title","View Business",1,"p-2","hover:bg-gray-200","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["title","Edit Business",1,"p-2","hover:bg-gray-200","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["title","Delete Business",1,"p-2","hover:bg-red-50","hover:text-red-700","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"inline-flex","items-center","px-4","py-2","border","border-gray-300","text-gray-700","rounded-lg","hover:bg-gray-50","transition-colors","font-medium",3,"click"],[1,"text-gray-500"]],template:function(e,r){e&1&&_(0,Ee,9,1,"div",0)(1,ke,4,0,"div",1)(2,Ge,5,1),e&2&&(p(r.error()?0:-1),c(),p(r.loading()?1:2))},dependencies:[T,ae],styles:["[_nghost-%COMP%]{display:block}"]})};var Ue=new te("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})});var je=(()=>{class o{static \u0275fac=function(r){return new(r||o)};static \u0275mod=ie({type:o});static \u0275inj=ee({providers:[se,{provide:Ue,useValue:{separatorKeyCodes:[13]}}],imports:[X,le,X]})}return o})();var O=(o,i)=>i._id;function We(o,i){if(o&1&&(t(0,"div",5)(1,"div",8)(2,"mat-icon",9),a(3,"error"),n(),t(4,"div")(5,"h3",10),a(6,"Error"),n(),t(7,"p",11),a(8),n()()()()),o&2){let e=l();c(8),d(e.error())}}function Ye(o,i){o&1&&(t(0,"div",6),v(1,"mat-spinner",12),t(2,"span",13),a(3,"Loading projects..."),n()())}function Ze(o,i){if(o&1){let e=b();t(0,"div",17)(1,"div",19)(2,"mat-icon",20),a(3,"assignment"),n()(),t(4,"h3",21),a(5,"No project requests yet"),n(),t(6,"p",22),a(7,"Start by browsing businesses and creating your first project request."),n(),t(8,"button",23),m("click",function(){h(e);let s=l(2);return u(s.navigateToHome())}),a(9," Browse Businesses "),n()()}}function Xe(o,i){if(o&1){let e=b();t(0,"mat-card",26)(1,"mat-card-header")(2,"mat-card-title",27),a(3),n(),t(4,"mat-card-subtitle"),a(5),n()(),t(6,"mat-card-content")(7,"div",28)(8,"span",29),a(9),n()(),t(10,"p",30),a(11),n(),t(12,"div",31)(13,"div",32)(14,"span",33),a(15,"Budget:"),n(),t(16,"span",34),a(17),n()(),t(18,"div",32)(19,"span",33),a(20,"Submitted:"),n(),t(21,"span"),a(22),n()()()(),t(23,"mat-card-actions")(24,"button",35),m("click",function(){let s=h(e).$implicit,g=l(4);return u(g.viewProject(s))}),t(25,"mat-icon"),a(26,"visibility"),n(),a(27," View Details "),n()()()}if(o&2){let e=i.$implicit,r=l(4);c(3),d(e.title),c(2),d(r.getBusinessName(e)),c(3),E(r.getStatusColor(e.status)),c(),C(" ",r.getStatusText(e.status)," "),c(2),d(e.description||"No description"),c(6),d(r.formatPrice(e.offered_price)),c(5),d(r.formatDate(e.createdAt))}}function Je(o,i){if(o&1&&(t(0,"div",2)(1,"h3",24),a(2,"Pending Approval"),n(),t(3,"div",25),k(4,Xe,28,8,"mat-card",26,O),n()()),o&2){let e=l(3);c(4),I(e.pendingMyProjects())}}function et(o,i){if(o&1&&(t(0,"div",32)(1,"span",33),a(2,"Deadline:"),n(),t(3,"span"),a(4),n()()),o&2){let e=l().$implicit,r=l(4);c(4),d(r.formatDate(e.deadline))}}function tt(o,i){if(o&1){let e=b();t(0,"mat-card",26)(1,"mat-card-header")(2,"mat-card-title",27),a(3),n(),t(4,"mat-card-subtitle"),a(5),n()(),t(6,"mat-card-content")(7,"div",28)(8,"span",29),a(9),n()(),t(10,"p",30),a(11),n(),t(12,"div",31)(13,"div",32)(14,"span",33),a(15,"Budget:"),n(),t(16,"span",34),a(17),n()(),_(18,et,5,1,"div",32),n()(),t(19,"mat-card-actions")(20,"button",35),m("click",function(){let s=h(e).$implicit,g=l(4);return u(g.viewProject(s))}),t(21,"mat-icon"),a(22,"visibility"),n(),a(23," View Details "),n()()()}if(o&2){let e=i.$implicit,r=l(4);c(3),d(e.title),c(2),d(r.getBusinessName(e)),c(3),E(r.getStatusColor(e.status)),c(),C(" ",r.getStatusText(e.status)," "),c(2),d(e.description||"No description"),c(6),d(r.formatPrice(e.offered_price)),c(),p(e.deadline?18:-1)}}function it(o,i){if(o&1&&(t(0,"div",2)(1,"h3",24),a(2,"Active Projects"),n(),t(3,"div",25),k(4,tt,24,8,"mat-card",26,O),n()()),o&2){let e=l(3);c(4),I(e.activeMyProjects())}}function nt(o,i){if(o&1){let e=b();t(0,"mat-card",26)(1,"mat-card-header")(2,"mat-card-title",27),a(3),n(),t(4,"mat-card-subtitle"),a(5),n()(),t(6,"mat-card-content")(7,"div",28)(8,"span",29),a(9),n()(),t(10,"p",30),a(11),n(),t(12,"div",31)(13,"div",32)(14,"span",33),a(15,"Budget:"),n(),t(16,"span",34),a(17),n()(),t(18,"div",32)(19,"span",33),a(20,"Completed:"),n(),t(21,"span"),a(22),n()()()(),t(23,"mat-card-actions")(24,"button",35),m("click",function(){let s=h(e).$implicit,g=l(4);return u(g.viewProject(s))}),t(25,"mat-icon"),a(26,"visibility"),n(),a(27," View Details "),n()()()}if(o&2){let e=i.$implicit,r=l(4);c(3),d(e.title),c(2),d(r.getBusinessName(e)),c(3),E(r.getStatusColor(e.status)),c(),C(" ",r.getStatusText(e.status)," "),c(2),d(e.description||"No description"),c(6),d(r.formatPrice(e.offered_price)),c(5),d(r.formatDate(e.completed_at||e.updatedAt))}}function ot(o,i){if(o&1&&(t(0,"div",2)(1,"h3",24),a(2,"Completed Projects"),n(),t(3,"div",25),k(4,nt,28,8,"mat-card",26,O),n()()),o&2){let e=l(3);c(4),I(e.completedMyProjects())}}function at(o,i){if(o&1&&_(0,Je,6,0,"div",2)(1,it,6,0,"div",2)(2,ot,6,0,"div",2),o&2){let e=l(2);p(e.pendingMyProjects().length>0?0:-1),c(),p(e.activeMyProjects().length>0?1:-1),c(),p(e.completedMyProjects().length>0?2:-1)}}function rt(o,i){o&1&&(t(0,"div",17)(1,"div",19)(2,"mat-icon",20),a(3,"business_center"),n()(),t(4,"h3",21),a(5,"No project inquiries yet"),n(),t(6,"p",22),a(7,"When clients are interested in your services, their project requests will appear here."),n()())}function ct(o,i){if(o&1){let e=b();t(0,"mat-card",36)(1,"mat-card-header")(2,"mat-card-title",27),a(3),n(),t(4,"mat-card-subtitle"),a(5),n()(),t(6,"mat-card-content")(7,"div",28)(8,"span",29),a(9),n()(),t(10,"p",30),a(11),n(),t(12,"div",31)(13,"div",32)(14,"span",33),a(15,"Client Budget:"),n(),t(16,"span",34),a(17),n()(),t(18,"div",32)(19,"span",33),a(20,"Received:"),n(),t(21,"span"),a(22),n()()()(),t(23,"mat-card-actions",37)(24,"button",35),m("click",function(){let s=h(e).$implicit,g=l(4);return u(g.viewProject(s))}),t(25,"mat-icon"),a(26,"visibility"),n(),a(27," View "),n(),t(28,"button",23),m("click",function(){let s=h(e).$implicit,g=l(4);return u(g.acceptProject(s))}),t(29,"mat-icon"),a(30,"check"),n(),a(31," Accept "),n(),t(32,"button",38),m("click",function(){let s=h(e).$implicit,g=l(4);return u(g.rejectProject(s))}),t(33,"mat-icon"),a(34,"close"),n(),a(35," Reject "),n()()()}if(o&2){let e=i.$implicit,r=l(4);c(3),d(e.title),c(2),d(r.getClientName(e)),c(3),E(r.getStatusColor(e.status)),c(),C(" ",r.getStatusText(e.status)," "),c(2),d(e.description||"No description"),c(6),d(r.formatPrice(e.offered_price)),c(5),d(r.formatDate(e.createdAt))}}function st(o,i){if(o&1&&(t(0,"div",2)(1,"h3",24),a(2,"Pending Requests"),n(),t(3,"div",25),k(4,ct,36,8,"mat-card",36,O),n()()),o&2){let e=l(3);c(4),I(e.pendingBusinessProjects())}}function lt(o,i){if(o&1&&(t(0,"div",32)(1,"span",33),a(2,"Deadline:"),n(),t(3,"span"),a(4),n()()),o&2){let e=l().$implicit,r=l(4);c(4),d(r.formatDate(e.deadline))}}function dt(o,i){if(o&1){let e=b();t(0,"mat-card",26)(1,"mat-card-header")(2,"mat-card-title",27),a(3),n(),t(4,"mat-card-subtitle"),a(5),n()(),t(6,"mat-card-content")(7,"div",28)(8,"span",29),a(9),n()(),t(10,"p",30),a(11),n(),t(12,"div",31)(13,"div",32)(14,"span",33),a(15,"Budget:"),n(),t(16,"span",34),a(17),n()(),_(18,lt,5,1,"div",32),n()(),t(19,"mat-card-actions")(20,"button",35),m("click",function(){let s=h(e).$implicit,g=l(4);return u(g.viewProject(s))}),t(21,"mat-icon"),a(22,"visibility"),n(),a(23," View Details "),n()()()}if(o&2){let e=i.$implicit,r=l(4);c(3),d(e.title),c(2),d(r.getClientName(e)),c(3),E(r.getStatusColor(e.status)),c(),C(" ",r.getStatusText(e.status)," "),c(2),d(e.description||"No description"),c(6),d(r.formatPrice(e.offered_price)),c(),p(e.deadline?18:-1)}}function pt(o,i){if(o&1&&(t(0,"div",2)(1,"h3",24),a(2,"Active Projects"),n(),t(3,"div",25),k(4,dt,24,8,"mat-card",26,O),n()()),o&2){let e=l(3);c(4),I(e.activeBusinessProjects())}}function mt(o,i){if(o&1&&_(0,st,6,0,"div",2)(1,pt,6,0,"div",2),o&2){let e=l(2);p(e.pendingBusinessProjects().length>0?0:-1),c(),p(e.activeBusinessProjects().length>0?1:-1)}}function ht(o,i){if(o&1){let e=b();t(0,"mat-tab-group",14),m("selectedTabChange",function(s){h(e);let g=l();return u(g.onTabChange(s.index))}),t(1,"mat-tab",15)(2,"div",16),_(3,Ze,10,0,"div",17)(4,at,3,3),n()(),t(5,"mat-tab",18)(6,"div",16),_(7,rt,8,0,"div",17)(8,mt,2,2),n()()()}if(o&2){let e=l();c(3),p(e.myProjects().length===0?3:4),c(4),p(e.businessProjects().length===0?7:8)}}var $=class o{authService=x(A);projectService=x(B);router=x(D);loading=y(!1);error=y(null);myProjects=y([]);businessProjects=y([]);activeTab=y(0);user=this.authService.user;pendingMyProjects=j(()=>this.myProjects().filter(i=>i.status==="pending"));activeMyProjects=j(()=>this.myProjects().filter(i=>["accepted","in_progress"].includes(i.status)));completedMyProjects=j(()=>this.myProjects().filter(i=>i.status==="completed"));pendingBusinessProjects=j(()=>this.businessProjects().filter(i=>i.status==="pending"));activeBusinessProjects=j(()=>this.businessProjects().filter(i=>["accepted","in_progress"].includes(i.status)));ngOnInit(){if(!this.user()){this.router.navigate(["/auth"]);return}this.loadProjects()}loadProjects(){return S(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let i=yield this.projectService.getMyProjectsAsync("client");this.myProjects.set(i);let e=yield this.projectService.getMyProjectsAsync("business_owner");this.businessProjects.set(e)}catch(i){console.error("Error loading projects:",i),this.error.set("Failed to load projects")}finally{this.loading.set(!1)}})}onTabChange(i){this.activeTab.set(i)}getStatusColor(i){return{pending:"bg-yellow-100 text-yellow-800",accepted:"bg-blue-100 text-blue-800",in_progress:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"}[i]||"bg-gray-100 text-gray-800"}getStatusText(i){return{pending:"Pending",accepted:"Accepted",in_progress:"In Progress",completed:"Completed",rejected:"Rejected",cancelled:"Cancelled"}[i]||i}formatPrice(i){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(i)}formatDate(i){try{return(typeof i=="string"?new Date(i):i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Unknown"}}getBusinessName(i){return typeof i.business_id=="object"&&i.business_id.name?i.business_id.name:"Unknown Business"}getClientName(i){if(typeof i.client_id=="object"){let e=i.client_id;return`${e.first_name} ${e.last_name}`}return"Unknown Client"}viewProject(i){this.router.navigate(["/dashboard/projects",i._id])}acceptProject(i){return S(this,null,function*(){try{yield this.projectService.updateProjectAsync(i._id,{status:"accepted"}),this.loadProjects()}catch(e){console.error("Error accepting project:",e),this.error.set("Failed to accept project")}})}rejectProject(i){return S(this,null,function*(){let e=prompt("Please provide a reason for rejection:");if(e)try{yield this.projectService.updateProjectAsync(i._id,{status:"rejected",rejection_reason:e}),this.loadProjects()}catch(r){console.error("Error rejecting project:",r),this.error.set("Failed to reject project")}})}navigateToHome(){this.router.navigate(["/"])}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=P({type:o,selectors:[["app-projects"]],decls:10,vars:2,consts:[[1,"min-h-screen","bg-gray-50","p-6"],[1,"max-w-7xl","mx-auto"],[1,"mb-8"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600"],[1,"mb-6","bg-red-50","border-l-4","border-red-400","p-4","rounded-r-lg"],[1,"flex","items-center","justify-center","py-12"],[1,"projects-tabs"],[1,"flex"],[1,"text-red-400","mr-3"],[1,"text-sm","font-medium","text-red-800"],[1,"mt-1","text-sm","text-red-700"],["diameter","40"],[1,"ml-3","text-gray-600"],[1,"projects-tabs",3,"selectedTabChange"],["label","My Project Requests"],[1,"py-6"],[1,"bg-white","rounded-xl","border","border-gray-200","p-12","text-center"],["label","Business Inquiries"],[1,"p-4","bg-gray-50","rounded-full","w-20","h-20","mx-auto","mb-6","flex","items-center","justify-center"],[1,"text-gray-400","text-4xl"],[1,"text-xl","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],["mat-raised-button","","color","primary",3,"click"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"project-card"],[1,"text-base"],[1,"mb-3"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium"],[1,"text-sm","text-gray-600","mb-3","line-clamp-2"],[1,"space-y-2","text-sm"],[1,"flex","items-center","justify-between"],[1,"text-gray-500"],[1,"font-semibold"],["mat-button","",3,"click"],[1,"project-card","pending-request"],[1,"action-buttons"],["mat-button","","color","warn",3,"click"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),a(4,"Projects"),n(),t(5,"p",4),a(6,"Manage your project requests and business inquiries"),n()(),_(7,We,9,1,"div",5)(8,Ye,4,0,"div",6)(9,ht,9,2,"mat-tab-group",7),n()()),e&2&&(c(7),p(r.error()?7:-1),c(),p(r.loading()?8:9))},dependencies:[T,re,Ce,xe,ye,fe,me,ve,ue,ge,_e,he,je,L,N,z,H,q,G],styles:[".projects-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body-wrapper{padding-top:0}.project-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.project-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026;transform:translateY(-2px)}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-header[_ngcontent-%COMP%]{padding-bottom:8px}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;line-height:1.4}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin-top:4px}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-actions[_ngcontent-%COMP%]{padding-top:8px;display:flex;align-items:center;gap:8px}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-actions.action-buttons[_ngcontent-%COMP%]{flex-wrap:wrap}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-actions.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;min-width:80px}.project-card.pending-request[_ngcontent-%COMP%]{border-left:4px solid #f59e0b;background:linear-gradient(135deg,#fffbeb,#fef3c7)}.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.status-badge[_ngcontent-%COMP%]{font-weight:500;text-transform:capitalize}@media (max-width: 768px){.project-card[_ngcontent-%COMP%]   .mat-mdc-card-actions.action-buttons[_ngcontent-%COMP%]{flex-direction:column}.project-card[_ngcontent-%COMP%]   .mat-mdc-card-actions.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.empty-state[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9);border:2px dashed #e2e8f0}"]})};function ut(o,i){o&1&&(t(0,"button",14)(1,"mat-icon",16),a(2,"hourglass_empty"),n(),a(3," Loading... "),n())}function _t(o,i){if(o&1&&(t(0,"span",18),a(1),n()),o&2){let e=l(3);c(),C(" ",e.chatUnreadCount()," ")}}function vt(o,i){if(o&1){let e=b();t(0,"button",17),m("click",function(){h(e);let s=l(2);return u(s.goToExistingChat())}),t(1,"mat-icon",16),a(2,"chat"),n(),a(3," Open Chat "),_(4,_t,2,1,"span",18),n()}if(o&2){let e=l(2);c(4),p(e.chatUnreadCount()>0?4:-1)}}function gt(o,i){o&1&&(t(0,"button",14)(1,"mat-icon",16),a(2,"hourglass_empty"),n(),a(3," Loading... "),n())}function ft(o,i){if(o&1&&(t(0,"span",18),a(1),n()),o&2){let e=l(5);c(),C(" ",e.chatUnreadCount()," ")}}function bt(o,i){if(o&1){let e=b();t(0,"button",17),m("click",function(){h(e);let s=l(4);return u(s.goToExistingChat())}),t(1,"mat-icon",16),a(2,"chat"),n(),a(3," Open Chat "),_(4,ft,2,1,"span",18),n()}if(o&2){let e=l(4);c(4),p(e.chatUnreadCount()>0?4:-1)}}function xt(o,i){if(o&1){let e=b();t(0,"button",20),m("click",function(){h(e);let s=l(4);return u(s.startChat())}),t(1,"mat-icon",16),a(2,"chat"),n(),a(3," Start Chat "),n()}}function yt(o,i){if(o&1&&_(0,gt,4,0,"button",14)(1,bt,5,1,"button",15)(2,xt,4,0,"button",19),o&2){let e=l(3);p(e.loadingChat()?0:e.existingChat()?1:2)}}function Ct(o,i){if(o&1&&_(0,yt,3,1),o&2){let e=l(2);p(e.project()&&(e.project().status==="accepted"||e.project().status==="in_progress"||e.project().status==="completed")?0:-1)}}function wt(o,i){if(o&1&&_(0,ut,4,0,"button",14)(1,vt,5,1,"button",15)(2,Ct,1,1),o&2){let e=l();p(e.loadingChat()?0:e.existingChat()?1:2)}}function St(o,i){if(o&1){let e=b();t(0,"button",21),m("click",function(){h(e);let s=l();return u(s.acceptProject())}),t(1,"mat-icon",22),a(2,"check_circle"),n(),a(3," Accept Project "),n(),t(4,"button",23),m("click",function(){h(e);let s=l();return u(s.rejectProject())}),t(5,"mat-icon",22),a(6,"cancel"),n(),a(7," Reject Project "),n()}}function jt(o,i){if(o&1){let e=b();t(0,"button",24),m("click",function(){h(e);let s=l();return u(s.markInProgress())}),t(1,"mat-icon",22),a(2,"play_arrow"),n(),a(3," Start Project "),n()}}function Et(o,i){if(o&1){let e=b();t(0,"button",25),m("click",function(){h(e);let s=l();return u(s.markCompleted())}),t(1,"mat-icon",22),a(2,"check"),n(),a(3," Mark as Completed "),n()}}function kt(o,i){if(o&1&&(t(0,"div",11)(1,"div",26)(2,"div",27)(3,"mat-icon",28),a(4,"error"),n()(),t(5,"div",29)(6,"h3",30),a(7,"Error"),n(),t(8,"p",31),a(9),n()()()()),o&2){let e=l();c(9),d(e.error())}}function It(o,i){o&1&&(t(0,"div",12),v(1,"mat-spinner",32),t(2,"p",33),a(3,"Loading project details..."),n()())}function Pt(o,i){if(o&1&&a(0),o&2){let e=l(2);C(" Project with ",e.getBusinessName(e.project())," ")}}function Tt(o,i){if(o&1&&a(0),o&2){let e=l(2);C(" Project from ",e.getClientName(e.project())," ")}}function Mt(o,i){if(o&1&&(t(0,"div")(1,"h3",56),a(2,"Description"),n(),t(3,"p",57),a(4),n()()),o&2){let e=l(2);c(4),d(e.project().description)}}function Dt(o,i){if(o&1&&(t(0,"div")(1,"h3",56),a(2,"Additional Notes"),n(),t(3,"p",57),a(4),n()()),o&2){let e=l(2);c(4),d(e.project().additional_notes)}}function At(o,i){if(o&1&&(t(0,"span",59),a(1),n()),o&2){let e=i.$implicit;c(),C(" ",e," ")}}function Bt(o,i){if(o&1&&(t(0,"div")(1,"h3",56),a(2,"Selected Services"),n(),t(3,"div",58),k(4,At,2,1,"span",59,ne),n()()),o&2){let e=l(2);c(4),I(e.getServiceNames(e.project()))}}function Ft(o,i){if(o&1&&(t(0,"div",42)(1,"h3",60)(2,"mat-icon",61),a(3,"error_outline"),n(),a(4," Rejection Reason "),n(),t(5,"p",62),a(6),n()()),o&2){let e=l(2);c(6),d(e.project().rejection_reason)}}function Vt(o,i){o&1&&a(0," Business Information ")}function Ot(o,i){o&1&&a(0," Client Information ")}function Rt(o,i){if(o&1&&v(0,"img",63),o&2){let e=l();M("src",e.logo_url,V)("alt",e.name)}}function Nt(o,i){o&1&&(t(0,"div",64)(1,"mat-icon",66),a(2,"business"),n()())}function Lt(o,i){if(o&1&&(t(0,"div",45),_(1,Rt,1,2,"img",63)(2,Nt,3,0,"div",64),t(3,"div",38)(4,"h3",65),a(5),n(),t(6,"p",5),a(7,"Business Profile"),n()()()),o&2){let e=i;c(),p(e.logo_url?1:2),c(4),d(e.name)}}function Ht(o,i){if(o&1&&(t(0,"p",5),a(1),n()),o&2){let e=l();c(),d(e.email)}}function zt(o,i){if(o&1&&(t(0,"div",45)(1,"div",67)(2,"mat-icon",68),a(3,"person"),n()(),t(4,"div",38)(5,"h3",65),a(6),n(),_(7,Ht,2,1,"p",5),n()()),o&2){let e=i;c(6),oe(" ",e.first_name," ",e.last_name," "),c(),p(e.email?7:-1)}}function Gt(o,i){if(o&1&&(t(0,"div",53)(1,"p",51),a(2,"Deadline"),n(),t(3,"p",48),a(4),n()()),o&2){let e=l(2);c(4),d(e.formatDate(e.project().deadline))}}function qt(o,i){if(o&1&&(t(0,"div",53)(1,"p",51),a(2,"Accepted"),n(),t(3,"p",48),a(4),n()()),o&2){let e=l(2);c(4),d(e.formatDate(e.project().accepted_at))}}function Ut(o,i){if(o&1&&(t(0,"div",53)(1,"p",51),a(2,"Completed"),n(),t(3,"p",48),a(4),n()()),o&2){let e=l(2);c(4),d(e.formatDate(e.project().completed_at))}}function Qt(o,i){if(o&1&&(t(0,"div",53)(1,"p",51),a(2,"Rejected"),n(),t(3,"p",48),a(4),n()()),o&2){let e=l(2);c(4),d(e.formatDate(e.project().rejected_at))}}function $t(o,i){if(o&1){let e=b();t(0,"div",13)(1,"div",34)(2,"div",35)(3,"div",36)(4,"div",37)(5,"div",38)(6,"h2",39),a(7),n(),t(8,"p",5),_(9,Pt,1,1)(10,Tt,1,1),n()(),t(11,"div",40)(12,"span"),a(13),n()()()(),t(14,"div",41),_(15,Mt,5,1,"div")(16,Dt,5,1,"div")(17,Bt,6,0,"div")(18,Ft,7,1,"div",42),n()(),t(19,"div",35)(20,"div",36)(21,"h2",43),_(22,Vt,1,0)(23,Ot,1,0),n()(),t(24,"div",44),_(25,Lt,8,2,"div",45)(26,zt,8,3,"div",45),n()()(),t(27,"div",46)(28,"div",35)(29,"div",47)(30,"h3",48),a(31,"Project Details"),n()(),t(32,"div",49)(33,"div",50)(34,"p",51),a(35,"Budget"),n(),t(36,"p",52),a(37),n()(),_(38,Gt,5,1,"div",53),t(39,"div",53)(40,"p",51),a(41,"Created"),n(),t(42,"p",48),a(43),n()(),_(44,qt,5,1,"div",53)(45,Ut,5,1,"div",53)(46,Qt,5,1,"div",53),n()(),t(47,"div",35)(48,"div",47)(49,"h3",48),a(50,"Actions"),n()(),t(51,"div",54)(52,"button",55),m("click",function(){h(e);let s=l();return u(s.goBack())}),t(53,"mat-icon",16),a(54,"arrow_back"),n(),a(55," Back to Projects "),n()()()()()}if(o&2){let e,r,s=l();c(7),d(s.project().title),c(2),p(s.isClient()?9:s.isBusinessOwner()?10:-1),c(3),E("inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold "+s.getStatusColor(s.project().status)),c(),C(" ",s.getStatusText(s.project().status)," "),c(2),p(s.project().description?15:-1),c(),p(s.project().additional_notes?16:-1),c(),p(s.getServiceNames(s.project()).length>0?17:-1),c(),p(s.project().rejection_reason?18:-1),c(4),p(s.isClient()?22:s.isBusinessOwner()?23:-1),c(3),p((e=s.isClient()&&s.getBusinessInfo(s.project()))?25:-1,e),c(),p((r=s.isBusinessOwner()&&s.getClientInfo(s.project()))?26:-1,r),c(11),d(s.formatPrice(s.project().offered_price)),c(),p(s.project().deadline?38:-1),c(5),d(s.formatDate(s.project().createdAt)),c(),p(s.project().accepted_at?44:-1),c(),p(s.project().completed_at?45:-1),c(),p(s.project().rejected_at?46:-1)}}var K=class o{route=x(R);router=x(D);projectService=x(B);authService=x(A);chatService=x(we);dashboardRefreshService=x(be);loading=y(!1);error=y(null);project=y(null);existingChat=y(null);chatUnreadCount=y(0);loadingChat=y(!1);user=this.authService.user;isClient=j(()=>{let i=this.project(),e=this.user();if(!i||!e)return!1;let r=typeof i.client_id=="string"?i.client_id:i.client_id?._id;return e._id===r});isBusinessOwner=j(()=>{let i=this.project(),e=this.user();if(!i||!e)return!1;let r=typeof i.business_owner_id=="string"?i.business_owner_id:i.business_owner_id?._id;return e._id===r});ngOnInit(){if(!this.user()){this.router.navigate(["/auth"]);return}let i=this.route.snapshot.params.id;if(!i){this.error.set("Project ID is required"),this.router.navigate(["/dashboard/projects"]);return}this.loadProject(i)}loadProject(i){return S(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let e=yield this.projectService.getProjectAsync(i);this.project.set(e),(e.status==="accepted"||e.status==="in_progress"||e.status==="completed")&&(yield this.checkForExistingChat(i))}catch(e){console.error("Error loading project:",e),this.error.set("Failed to load project details")}finally{this.loading.set(!1)}})}checkForExistingChat(i){return S(this,null,function*(){this.loadingChat.set(!0);try{let e=yield this.chatService.getChatByProjectIdAsync(i);if(this.existingChat.set(e),e){let r=yield this.chatService.getChatUnreadCountAsync(e._id);this.chatUnreadCount.set(r)}}catch(e){console.error("Error checking for existing chat:",e)}finally{this.loadingChat.set(!1)}})}goBack(){this.router.navigate(["/dashboard/projects"])}acceptProject(){return S(this,null,function*(){let i=this.project();if(i)try{yield this.projectService.updateProjectAsync(i._id,{status:"accepted"}),this.loadProject(i._id),this.dashboardRefreshService.triggerRefresh()}catch(e){console.error("Error accepting project:",e),this.error.set("Failed to accept project")}})}rejectProject(){return S(this,null,function*(){let i=this.project();if(!i)return;let e=prompt("Please provide a reason for rejection:");if(e)try{yield this.projectService.updateProjectAsync(i._id,{status:"rejected",rejection_reason:e}),this.loadProject(i._id),this.dashboardRefreshService.triggerRefresh()}catch(r){console.error("Error rejecting project:",r),this.error.set("Failed to reject project")}})}markInProgress(){return S(this,null,function*(){let i=this.project();if(i)try{yield this.projectService.updateProjectAsync(i._id,{status:"in_progress"}),this.loadProject(i._id),this.dashboardRefreshService.triggerRefresh()}catch(e){console.error("Error marking project as in progress:",e),this.error.set("Failed to update project status")}})}markCompleted(){return S(this,null,function*(){let i=this.project();if(i)try{yield this.projectService.updateProjectAsync(i._id,{status:"completed"}),this.loadProject(i._id),this.dashboardRefreshService.triggerRefresh()}catch(e){console.error("Error marking project as completed:",e),this.error.set("Failed to update project status")}})}startChat(){return S(this,null,function*(){let i=this.project();if(i)try{let e=yield this.chatService.createOrGetChatAsync({project_id:i._id});this.router.navigate(["/dashboard/messages/chat",e._id])}catch(e){console.error("Error starting chat:",e),alert("Failed to start chat. Please try again.")}})}goToExistingChat(){return S(this,null,function*(){let i=this.existingChat();i&&this.router.navigate(["/dashboard/messages/chat",i._id])})}getStatusColor(i){return{pending:"bg-yellow-100 text-yellow-800 border-yellow-200",accepted:"bg-blue-100 text-blue-800 border-blue-200",in_progress:"bg-purple-100 text-purple-800 border-purple-200",completed:"bg-green-100 text-green-800 border-green-200",rejected:"bg-red-100 text-red-800 border-red-200",cancelled:"bg-gray-100 text-gray-800 border-gray-200"}[i]||"bg-gray-100 text-gray-800 border-gray-200"}getStatusText(i){return{pending:"Pending",accepted:"Accepted",in_progress:"In Progress",completed:"Completed",rejected:"Rejected",cancelled:"Cancelled"}[i]||i}formatPrice(i){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(i)}formatDate(i){if(!i)return"Not set";try{return(typeof i=="string"?new Date(i):i).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Unknown"}}getBusinessName(i){return typeof i.business_id=="object"&&i.business_id.name?i.business_id.name:"Unknown Business"}getClientName(i){if(typeof i.client_id=="object"){let e=i.client_id;return`${e.first_name} ${e.last_name}`}return"Unknown Client"}getServiceNames(i){return i.selected_services&&Array.isArray(i.selected_services)?i.selected_services.map(e=>typeof e=="object"&&e.name?e.name:"Unknown Service"):[]}getBusinessInfo(i){return typeof i.business_id=="object"&&i.business_id?{name:i.business_id.name||"Unknown Business",logo_url:i.business_id.logo_url,slug:i.business_id.slug}:null}getClientInfo(i){return typeof i.client_id=="object"&&i.client_id?{first_name:i.client_id.first_name||"Unknown",last_name:i.client_id.last_name||"Client",email:i.client_id.email}:null}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=P({type:o,selectors:[["app-project-details"]],decls:20,vars:6,consts:[[1,"min-h-screen","bg-gray-50","py-8","px-4","sm:px-6","lg:px-8"],[1,"max-w-7xl","mx-auto"],[1,"flex","items-center","justify-between","mb-8"],[1,"flex","items-center","space-x-4"],["mat-icon-button","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","bg-white","shadow-sm","border","border-gray-200","hover:bg-gray-50","transition-colors",3,"click"],[1,"text-gray-600"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"flex","items-center","space-x-3"],[1,"flex","items-center","px-6","py-3","bg-blue-600","hover:bg-blue-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm"],[1,"flex","items-center","px-6","py-3","bg-purple-600","hover:bg-purple-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm"],[1,"mb-8","bg-red-50","border-l-4","border-red-400","p-6","rounded-r-lg","shadow-sm"],[1,"flex","flex-col","items-center","justify-center","py-20"],[1,"grid","grid-cols-1","xl:grid-cols-3","gap-8"],["mat-raised-button","","disabled","",1,"px-6","py-3","text-base","font-semibold","rounded-lg"],["mat-raised-button","","color","primary",1,"px-6","py-3","text-base","font-semibold","rounded-lg","relative"],[1,"mr-2"],["mat-raised-button","","color","primary",1,"px-6","py-3","text-base","font-semibold","rounded-lg","relative",3,"click"],[1,"absolute","-top-2","-right-2","bg-red-500","text-white","text-xs","font-bold","rounded-full","h-6","w-6","flex","items-center","justify-center"],["mat-raised-button","","color","primary",1,"px-6","py-3","text-base","font-semibold","rounded-lg"],["mat-raised-button","","color","primary",1,"px-6","py-3","text-base","font-semibold","rounded-lg",3,"click"],[1,"flex","items-center","px-6","py-3","bg-green-600","hover:bg-green-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[1,"mr-2","w-5","h-5"],[1,"flex","items-center","px-6","py-3","bg-red-600","hover:bg-red-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[1,"flex","items-center","px-6","py-3","bg-blue-600","hover:bg-blue-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[1,"flex","items-center","px-6","py-3","bg-purple-600","hover:bg-purple-700","text-white","text-base","font-semibold","rounded-lg","transition-colors","shadow-sm",3,"click"],[1,"flex","items-start"],[1,"flex-shrink-0"],[1,"text-red-400","w-6","h-6"],[1,"ml-3"],[1,"text-lg","font-medium","text-red-800"],[1,"mt-2","text-red-700"],["diameter","48"],[1,"mt-4","text-lg","text-gray-600"],[1,"xl:col-span-2","space-y-8"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-200","overflow-hidden"],[1,"px-8","py-6","border-b","border-gray-200"],[1,"flex","items-start","justify-between"],[1,"flex-1"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"flex-shrink-0","ml-4"],[1,"px-8","py-6","space-y-6"],[1,"p-6","bg-red-50","border","border-red-200","rounded-xl"],[1,"text-xl","font-semibold","text-gray-900"],[1,"px-8","py-6"],[1,"flex","items-center","space-x-6"],[1,"space-y-8"],[1,"px-6","py-5","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900"],[1,"px-6","py-6","space-y-6"],[1,"text-center"],[1,"text-sm","font-medium","text-gray-500","uppercase","tracking-wide","mb-2"],[1,"text-3xl","font-bold","text-green-600"],[1,"pt-6","border-t","border-gray-200"],[1,"px-6","py-6","space-y-4"],["mat-stroked-button","",1,"w-full","h-12","text-base","font-semibold","rounded-lg","border-2","border-gray-300","text-gray-700","hover:bg-gray-50",3,"click"],[1,"text-lg","font-semibold","text-gray-900","mb-3"],[1,"text-gray-700","leading-relaxed","text-base"],[1,"flex","flex-wrap","gap-2"],[1,"inline-flex","items-center","px-3","py-1.5","rounded-full","text-sm","font-medium","bg-blue-50","text-blue-700","border","border-blue-200"],[1,"text-lg","font-semibold","text-red-800","mb-2","flex","items-center"],[1,"w-5","h-5","mr-2","text-red-600"],[1,"text-red-700","leading-relaxed"],[1,"w-20","h-20","rounded-xl","object-cover","border","border-gray-200",3,"src","alt"],[1,"w-20","h-20","rounded-xl","bg-gray-100","flex","items-center","justify-center","border","border-gray-200"],[1,"text-2xl","font-bold","text-gray-900","mb-1"],[1,"text-gray-400","w-8","h-8"],[1,"w-20","h-20","rounded-full","bg-gradient-to-br","from-blue-400","to-blue-600","flex","items-center","justify-center"],[1,"text-white","w-10","h-10"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),m("click",function(){return r.goBack()}),t(5,"mat-icon",5),a(6,"arrow_back"),n()(),t(7,"div")(8,"h1",6),a(9,"Project Details"),n(),t(10,"p",7),a(11,"View complete project information"),n()()(),t(12,"div",8),_(13,wt,3,1)(14,St,8,0)(15,jt,4,0,"button",9)(16,Et,4,0,"button",10),n()(),_(17,kt,10,1,"div",11)(18,It,4,0,"div",12)(19,$t,56,18,"div",13),n()()),e&2&&(c(13),p(r.project()&&(r.project().status==="accepted"||r.project().status==="in_progress"||r.project().status==="completed")?13:-1),c(),p(r.project()&&r.isBusinessOwner()&&r.project().status==="pending"?14:-1),c(),p(r.project()&&r.isBusinessOwner()&&r.project().status==="accepted"?15:-1),c(),p(r.project()&&r.isBusinessOwner()&&r.project().status==="in_progress"?16:-1),c(),p(r.error()?17:-1),c(),p(r.loading()?18:r.project()?19:-1))},dependencies:[T,L,N,de,z,H,q,G],styles:[".mat-mdc-raised-button.mat-primary{border-radius:.5rem!important}  .mat-mdc-outlined-button{border-radius:.5rem!important}  .mat-icon{width:auto!important;height:auto!important;font-size:inherit!important}  .mat-mdc-progress-spinner circle{stroke:#3b82f6}"]})};var W=class o{notificationService=x(ce);ngOnInit(){console.log("Test Notifications Component loaded")}createTestProjectNotification(){let i={_id:"test-project-"+Date.now(),recipient_id:"current-user",title:"Test Project Created",message:"A new project has been created for your business.",type:"project_created",priority:"high",is_read:!1,is_seen:!1,project_id:{_id:"test-project-id",title:"Test Project",description:"This is a test project",status:"pending"},business_id:{_id:"test-business-id",name:"Test Business",logo_url:""},createdAt:new Date,updatedAt:new Date};this.notificationService.handleNewNotification(i),console.log("Test project notification created")}createTestMessageNotification(){let i={_id:"test-message-"+Date.now(),recipient_id:"current-user",title:"New Message",message:"You have received a new message.",type:"message_received",priority:"medium",is_read:!1,is_seen:!1,metadata:{chatId:"test-chat-id"},createdAt:new Date,updatedAt:new Date};this.notificationService.handleNewNotification(i),console.log("Test message notification created")}createTestSystemNotification(){let i={_id:"test-system-"+Date.now(),recipient_id:"current-user",title:"System Update",message:"The system has been updated with new features.",type:"system_announcement",priority:"low",is_read:!1,is_seen:!1,createdAt:new Date,updatedAt:new Date};this.notificationService.handleNewNotification(i),console.log("Test system notification created")}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=P({type:o,selectors:[["app-test-notifications"]],decls:10,vars:0,consts:[[1,"p-6"],[1,"text-xl","font-bold","mb-4"],[1,"space-y-2"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","mr-2",3,"click"],[1,"px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","mr-2",3,"click"],[1,"px-4","py-2","bg-purple-600","text-white","rounded-lg","hover:bg-purple-700",3,"click"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"h2",1),a(2,"Test Notifications"),n(),t(3,"div",2)(4,"button",3),m("click",function(){return r.createTestProjectNotification()}),a(5," Create Test Project Notification "),n(),t(6,"button",4),m("click",function(){return r.createTestMessageNotification()}),a(7," Create Test Message Notification "),n(),t(8,"button",5),m("click",function(){return r.createTestSystemNotification()}),a(9," Create Test System Notification "),n()()())},dependencies:[T],encapsulation:2})};var Vn=[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"overview",component:U},{path:"businesses",loadChildren:()=>import("./chunk-KTCB4KXI.js").then(o=>o.BUSINESSES_ROUTES)},{path:"services",loadChildren:()=>import("./chunk-CCCQ3KKO.js").then(o=>o.SERVICES_ROUTES)},{path:"notifications",loadChildren:()=>import("./chunk-7WHSEH27.js").then(o=>o.NOTIFICATION_ROUTES)},{path:"messages",loadChildren:()=>import("./chunk-GABHKYQP.js").then(o=>o.MESSAGES_ROUTES)},{path:"projects",component:$},{path:"projects/:id",component:K},{path:"test-notifications",component:W},{path:"**",redirectTo:""}];export{Vn as DASHBOARD_ROUTES};
