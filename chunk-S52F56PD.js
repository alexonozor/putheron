import{a as Q,b as W}from"./chunk-N5ED3CHT.js";import{a as K}from"./chunk-YHNXJRU4.js";import{b as R}from"./chunk-LPGP55NA.js";import{d as H}from"./chunk-OVLPSQNG.js";import{a as S,c as q,e as J,h as T}from"./chunk-7UZH7J7I.js";import{a as E}from"./chunk-DVEYH5MF.js";import{t as G,u as M}from"./chunk-IZGM5G4Z.js";import{a as z,b as B}from"./chunk-EPCK2AMG.js";import{w}from"./chunk-5TL7AFVW.js";import{Hb as u,Jb as c,Lb as $,Mb as U,Nb as A,Ob as p,Pb as a,Qb as r,Rb as g,Yb as N,Za as j,ab as o,ac as b,cc as d,fb as m,ga as y,la as C,ma as v,nc as h,oc as O,pc as P,qc as l,rb as _,rc as V,sc as x,tc as L,va as F}from"./chunk-VCYZZ2B3.js";function ie(n,i){if(n&1&&g(0,"img",2),n&2){let e=d();p("src",e.business.banner_url,j)("alt",e.business.name+" banner")}}function ne(n,i){n&1&&(a(0,"div",3)(1,"mat-icon",22),l(2,"business"),r()()),n&2&&(o(),h("font-size",48,"px")("width",48,"px")("height",48,"px"))}function se(n,i){if(n&1){let e=N();a(0,"div",23),b("click",function(s){return C(e),v(s.stopPropagation())}),g(1,"app-favorite-button",24),r()}if(n&2){let e=d();o(),p("businessId",e.business._id)("businessName",e.business.name)}}function oe(n,i){if(n&1&&(a(0,"div",4)(1,"span",25)(2,"mat-icon",21),l(3,"star"),r(),l(4," Featured "),r()()),n&2){let e=d();O("left-16",e.showFavoriteButton),o(2),h("font-size",14,"px")("width",14,"px")("height",14,"px")}}function re(n,i){if(n&1&&g(0,"img",2),n&2){let e=d();p("src",e.business.logo_url,j)("alt",e.business.name+" logo")}}function ae(n,i){n&1&&(a(0,"div",11)(1,"mat-icon",26),l(2,"business"),r()()),n&2&&(o(),h("font-size",36,"px")("width",36,"px")("height",36,"px"))}function le(n,i){if(n&1&&(a(0,"p",14)(1,"mat-icon",21),l(2,"location_on"),r(),l(3),r()),n&2){let e=d();o(),h("font-size",14,"px")("width",14,"px")("height",14,"px"),o(2),L(" ",e.business.city,", ",e.business.state," ")}}function de(n,i){if(n&1&&(a(0,"span",28),l(1),r()),n&2){let e=i.$implicit;o(),x(" ",e," ")}}function ue(n,i){if(n&1&&(a(0,"span",28),l(1),r()),n&2){let e=d(2);o(),x(" +",e.business.tags.length-2," ")}}function ce(n,i){if(n&1&&(a(0,"div",18)(1,"div",27),U(2,de,2,1,"span",28,$),u(4,ue,2,1,"span",28),r()()),n&2){let e=d();o(2),A(e.business.tags.slice(0,2)),o(2),c(e.business.tags.length>2?4:-1)}}function me(n,i){if(n&1){let e=N();a(0,"button",29),b("click",function(){C(e);let s=d();return v(s.onEdit())}),a(1,"mat-icon",21),l(2,"edit"),r(),l(3," Edit "),r(),a(4,"button",30),b("click",function(){C(e);let s=d();return v(s.onDelete())}),a(5,"mat-icon",21),l(6,"delete"),r(),l(7," Delete "),r()}}var X=class n{authService=y(E);business;statusColorClass="";statusText="";categoryName="";businessTypeColor="";businessTypeText="";showFavoriteButton=!1;showEditDelete=!0;view=new m;edit=new m;delete=new m;currentUser=this.authService.user;isBusinessOwner(){return!this.currentUser()||!this.business?!1:this.business.owner_id===this.currentUser()?._id||this.business.owner_id?._id===this.currentUser()?._id}onView(){this.view.emit(this.business._id)}onEdit(){this.edit.emit(this.business._id)}onDelete(){this.delete.emit(this.business._id)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_({type:n,selectors:[["app-business-card"]],inputs:{business:"business",statusColorClass:"statusColorClass",statusText:"statusText",categoryName:"categoryName",businessTypeColor:"businessTypeColor",businessTypeText:"businessTypeText",showFavoriteButton:"showFavoriteButton",showEditDelete:"showEditDelete"},outputs:{view:"view",edit:"edit",delete:"delete"},decls:31,vars:16,consts:[[1,"h-full","bg-white!","hover:shadow-lg","transition-all","duration-200"],[1,"relative","h-32","bg-gradient-to-br","from-gray-100","to-gray-200","overflow-hidden"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"w-full","h-full","bg-gradient-to-br","from-blue-50","to-indigo-100","flex","items-center","justify-center"],[1,"absolute","top-3","left-3"],[1,"absolute","top-3","left-3",3,"left-16"],[1,"absolute","top-3","right-3"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","backdrop-blur-sm"],[1,"pt-8","pb-4","px-6","text-center"],[1,"flex","justify-center","-mt-24","mb-6","relative","z-10"],[1,"w-20","h-20","rounded-full","bg-white","shadow-lg","ring-4","ring-white","overflow-hidden"],[1,"w-full","h-full","bg-gray-100","flex","items-center","justify-center"],[1,"text-lg","font-semibold","text-gray-900","truncate","mb-2"],[1,"text-sm","text-gray-600","mb-1"],[1,"text-xs","text-gray-500","flex","items-center","justify-center","mb-4"],[1,"text-sm","text-gray-600","mb-4","line-clamp-2"],[1,"flex","items-center","justify-center","mb-4"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium"],[1,"mb-4"],[1,"flex","justify-center","gap-2"],["mat-button","","color","accent","title","View Business",3,"click"],[1,"mr-1"],[1,"text-gray-300"],[1,"absolute","top-3","left-3",3,"click"],["buttonClass","bg-white bg-opacity-90 hover:bg-opacity-100 rounded-full p-2 shadow-md",3,"businessId","businessName"],[1,"bg-yellow-100","text-yellow-800","inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","backdrop-blur-sm"],[1,"text-gray-400"],[1,"flex","flex-wrap","gap-1","justify-center"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","bg-gray-100","text-gray-800"],["mat-button","","color","accent","title","Edit Business",3,"click"],["mat-button","","color","warn","title","Delete Business",3,"click"]],template:function(e,t){e&1&&(a(0,"mat-card",0)(1,"div",1),u(2,ie,1,2,"img",2)(3,ne,3,6,"div",3),u(4,se,2,2,"div",4),u(5,oe,5,8,"div",5),a(6,"div",6)(7,"span",7),l(8),r()()(),a(9,"mat-card-content",8)(10,"div",9)(11,"div",10),u(12,re,1,2,"img",2)(13,ae,3,6,"div",11),r()(),a(14,"h3",12),l(15),r(),a(16,"p",13),l(17),r(),u(18,le,4,8,"p",14),a(19,"p",15),l(20),r(),a(21,"div",16)(22,"span",17),l(23),r()(),u(24,ce,5,1,"div",18),r(),a(25,"mat-card-actions",19)(26,"button",20),b("click",function(){return t.onView()}),a(27,"mat-icon",21),l(28,"visibility"),r(),l(29," View "),r(),u(30,me,8,0),r()()),e&2&&(o(2),c(t.business.banner_url?2:3),o(2),c(t.showFavoriteButton?4:-1),o(),c(t.business.is_featured?5:-1),o(2),P(t.statusColorClass),o(),x(" ",t.statusText," "),o(4),c(t.business.logo_url?12:13),o(3),V(t.business.name),o(2),V(t.categoryName),o(),c(t.business.city&&t.business.state?18:-1),o(2),x(" ",t.business.short_description||t.business.description||"No description available"," "),o(2),P(t.businessTypeColor),o(),x(" ",t.businessTypeText," "),o(),c(t.business.tags&&t.business.tags.length>0?24:-1),o(6),c(t.showEditDelete&&t.isBusinessOwner()?30:-1))},dependencies:[w,T,S,J,q,M,G,B,z,K],styles:["[_nghost-%COMP%]     mat-card-actions mat-form-field{margin-top:0!important;margin-bottom:0!important}"]})};var Y=class n{businesses=[];set displayedColumns(i){this.columns.set(this.getColumnDefinitions(i))}showEditDelete=!0;deleteLabel="Delete";deleteIcon="delete";view=new m;edit=new m;delete=new m;authService=y(E);currentUser=this.authService.user;columns=F([]);getColumnDefinitions(i){let e={logo:{header:"",field:"logo_url",width:"60px",formatter:t=>{let s=t.logo_url;return s?`<img src="${s}" alt="${t.name}" class="w-12 h-12 object-cover rounded">`:`<div class="w-12 h-12 bg-gray-100 flex items-center justify-center rounded">
            <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
            </svg>
          </div>`}},name:{header:"Business Name",field:"name",width:"200px",formatter:t=>{let s=t.is_featured?`<span class="ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
            <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
            Featured
          </span>`:"";return`<div class="flex items-center gap-2">
            <span>${t.name}</span>
            ${s}
          </div>`}},category:{header:"Category",field:"category_id",width:"140px",formatter:t=>`<span class="text-sm text-gray-600">${(typeof t.category_id=="object"?t.category_id?.name:t.category_id)||"No Category"}</span>`},description:{header:"Description",field:"short_description",width:"220px",formatter:t=>{let s=t.short_description||t.description||"No description",f=s.length>50?s.substring(0,50)+"...":s;return`<span class="text-sm text-gray-700 line-clamp-2" title="${s}">${f}</span>`}},status:{header:"Status",field:"status",width:"110px",formatter:t=>{let s=t.status||"pending",f={approved:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",rejected:"bg-red-100 text-red-800",suspended:"bg-gray-100 text-gray-800"},k={approved:"Approved",pending:"Pending",rejected:"Rejected",suspended:"Suspended"},I=f[s]||"bg-gray-100 text-gray-800",D=k[s]||"Unknown";return`<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${I}">
            ${D}
          </span>`}},business_type:{header:"Type",field:"business_type",width:"150px",formatter:t=>{let s=t.business_type||"service",f={service:"bg-blue-100 text-blue-800",product:"bg-purple-100 text-purple-800",both:"bg-indigo-100 text-indigo-800"},k={service:"Service",product:"Product",both:"Service & Product"},I=f[s]||"bg-gray-100 text-gray-800",D=k[s]||s;return`<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${I}">
            ${D}
          </span>`}},date:{header:"Created",field:"createdAt",width:"110px",formatter:t=>`<span class="text-sm text-gray-500">${new Date(t.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}</span>`},actions:{header:"Actions",field:"actions",width:"80px",pinned:"right",right:"0px",type:"button",buttons:[{type:"icon",icon:"more_vert",tooltip:"Options",children:this.getActionMenuItems()}]}};return i.map(t=>e[t]||{header:t,field:t})}getStatusColor(i){return{approved:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",rejected:"bg-red-100 text-red-800",suspended:"bg-gray-100 text-gray-800"}[i]||"bg-gray-100 text-gray-800"}getStatusText(i){return{approved:"Approved",pending:"Pending",rejected:"Rejected",suspended:"Suspended"}[i]||"Unknown"}getBusinessTypeColor(i){return{service:"bg-blue-100 text-blue-800",product:"bg-purple-100 text-purple-800",both:"bg-indigo-100 text-indigo-800"}[i]||"bg-gray-100 text-gray-800"}getBusinessTypeText(i){return{service:"Service",product:"Product",both:"Service & Product"}[i]||i}isBusinessOwner(i){let e=this.currentUser();if(!e)return!1;let t=typeof i.owner_id=="string"?i.owner_id:i.owner_id?._id,s=e._id;return t===s}getActionMenuItems(){let i=[{icon:"visibility",text:"View",click:e=>this.onView(e._id)}];return this.showEditDelete&&i.push({icon:"edit",text:"Edit",click:e=>this.onEdit(e._id),disabled:e=>!this.isBusinessOwner(e)}),i.push({icon:this.deleteIcon,text:this.deleteLabel,click:e=>this.onDelete(e._id),disabled:this.showEditDelete?e=>!this.isBusinessOwner(e):void 0}),i}onView(i){this.view.emit(i)}onEdit(i){this.edit.emit(i)}onDelete(i){this.delete.emit(i)}trackByFn(i){return i}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_({type:n,selectors:[["app-business-list-card"]],inputs:{businesses:"businesses",displayedColumns:"displayedColumns",showEditDelete:"showEditDelete",deleteLabel:"deleteLabel",deleteIcon:"deleteIcon"},outputs:{view:"view",edit:"edit",delete:"delete"},decls:2,vars:3,consts:[[1,"bg-white!"],[1,"w-full",3,"data","columns","trackBy"]],template:function(e,t){e&1&&(a(0,"mat-card",0),g(1,"mtx-grid",1),r()),e&2&&(o(),p("data",t.businesses)("columns",t.columns())("trackBy",t.trackByFn))},dependencies:[w,T,S,M,B,H,R,W,Q],styles:["[_nghost-%COMP%]     mat-menu mat-icon{margin-right:8px}"]})};export{X as a,Y as b};
