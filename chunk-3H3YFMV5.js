import{a as J,b as K}from"./chunk-UW2ATRRX.js";import{h as V,l as O,m as j}from"./chunk-66HTC5NI.js";import{d as G,e as A,h as q,k as z}from"./chunk-67MRJSI2.js";import"./chunk-WIJXL5PX.js";import"./chunk-RNGT6N3O.js";import"./chunk-UNULKHHN.js";import{a as Y,b as H}from"./chunk-F52GGYS4.js";import"./chunk-2TVU5X7D.js";import{B as T,c as E,e as f,h as B,i as I,l as N,p as L,r as D,z as R}from"./chunk-6HVQSJLB.js";import"./chunk-3DWAHAUX.js";import{c as _,d as M}from"./chunk-CAUPKMHV.js";import{a as k}from"./chunk-HHKFLDM6.js";import"./chunk-SRA5OYUU.js";import{s as S,t as x}from"./chunk-EZYZDCTR.js";import"./chunk-FTO62232.js";import"./chunk-LIZM4CZI.js";import"./chunk-QD7SSFII.js";import{a as b,c as w,d as F}from"./chunk-CHN72C3K.js";import"./chunk-GTSDDWM5.js";import{t as P}from"./chunk-Z5YYMG7R.js";import{Eb as d,Fb as p,Kb as m,Lb as o,Mb as a,Nb as u,Yb as v,_a as s,_b as h,fa as l,mc as r,pb as y,ua as C,xc as c}from"./chunk-ME5BD2TS.js";import{e as g}from"./chunk-JKOY2XUY.js";var U=()=>["/auth/login"],W=()=>["/auth/signup"];function X(t,i){t&1&&r(0," Email is required ")}function Z(t,i){t&1&&r(0," Please enter a valid email address ")}function $(t,i){if(t&1&&(o(0,"mat-error"),d(1,X,1,0)(2,Z,1,0),a()),t&2){let e=h();s(),p(e.emailControl!=null&&e.emailControl.hasError("required")?1:e.emailControl!=null&&e.emailControl.hasError("email")?2:-1)}}function ee(t,i){t&1&&r(0," Send Reset Link ")}function te(t,i){t&1&&(o(0,"span",9),u(1,"mat-spinner",15),r(2," Sending... "),a())}var Q=class t{authService=l(k);router=l(w);route=l(b);fb=l(R);snackBar=l(J);loading=C(!1);forgotPasswordForm;constructor(){this.forgotPasswordForm=this.fb.group({email:["",[f.required,f.email]]})}ngOnInit(){this.route.queryParams.subscribe(i=>{i.email&&this.forgotPasswordForm.patchValue({email:i.email})})}onSubmit(){return g(this,null,function*(){if(!this.forgotPasswordForm.valid){this.snackBar.open("Please enter a valid email address","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-error"]});return}let{email:i}=this.forgotPasswordForm.value;this.loading.set(!0);try{let e=yield this.authService.forgotPassword(i);e.success?(this.snackBar.open(e.message||"If an account with that email exists, we have sent a password reset link.","Close",{duration:8e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-success"]}),this.forgotPasswordForm.reset()):this.snackBar.open(e.message||"Failed to send password reset email. Please try again.","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-error"]})}catch(e){this.snackBar.open(e?.message||"An unexpected error occurred. Please try again.","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-error"]})}finally{this.loading.set(!1)}})}get emailControl(){return this.forgotPasswordForm.get("email")}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=y({type:t,selectors:[["app-forgot-password"]],decls:25,vars:9,consts:[[1,"forgot-password-container"],[1,"text-center","mb-8"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"space-y-6",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-full"],["matInput","","type","email","formControlName","email","placeholder","your@email.com",3,"disabled"],["matSuffix",""],["mat-raised-button","","color","primary","type","submit",1,"w-full","py-3","text-base","font-medium","mb-4",3,"disabled"],[1,"flex","items-center","justify-center","gap-2"],[1,"space-y-3","text-center"],["mat-button","","color","primary",1,"text-sm",3,"routerLink"],[1,"mt-4","pt-4","border-t","border-gray-200"],[1,"text-sm","text-gray-600"],["mat-button","","color","primary",1,"text-sm","font-medium","ml-1",3,"routerLink"],["diameter","16"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2),r(3,"Reset Your Password"),a(),o(4,"p",3),r(5,"Enter your email address and we'll send you a link to reset your password."),a()(),o(6,"form",4),v("ngSubmit",function(){return n.onSubmit()}),o(7,"mat-form-field",5)(8,"mat-label"),r(9,"Email Address"),a(),u(10,"input",6),o(11,"mat-icon",7),r(12,"email"),a(),d(13,$,3,1,"mat-error"),a(),o(14,"button",8),d(15,ee,1,0)(16,te,3,0,"span",9),a(),o(17,"div",10)(18,"a",11),r(19," Remember your password? Back to Login "),a(),o(20,"div",12)(21,"p",13),r(22," Don't have an account? "),o(23,"a",14),r(24," Sign up "),a()()()()()()),e&2&&(s(6),m("formGroup",n.forgotPasswordForm),s(4),m("disabled",n.loading()),s(3),p(n.emailControl!=null&&n.emailControl.invalid&&(n.emailControl!=null&&n.emailControl.touched)?13:-1),s(),m("disabled",!n.forgotPasswordForm.valid||n.loading()),s(),p(n.loading()?16:15),s(3),m("routerLink",c(7,U)),s(5),m("routerLink",c(8,W)))},dependencies:[P,T,N,E,B,I,L,D,F,V,z,G,A,q,j,O,M,_,x,S,H,Y,K],encapsulation:2})};export{Q as ForgotPasswordComponent};
