import{a as xt,b as ft,c as gt}from"./chunk-4H2N6UBF.js";import{a as Le,h as Ne}from"./chunk-FY37IJMK.js";import{a as pt,b as _t}from"./chunk-KOJLXHDK.js";import{a as mt,b as ct,c as ut}from"./chunk-FYTS3IGZ.js";import{a as lt,b as dt}from"./chunk-4OHTWZSD.js";import"./chunk-SNNT4QTV.js";import{d as Me,h as nt,i as ot,j as st,l as at,m as rt}from"./chunk-3E6WONAP.js";import"./chunk-U2AVJWKL.js";import"./chunk-V5XDW2Q5.js";import{d as Ke,e as Xe,f as Ze,g as et,h as tt,k as it}from"./chunk-K7KKK75I.js";import{A as Ye,B as Je,C as Qe,c as je,e as B,h as Ae,i as Oe,m as qe,q as Ge,r as $e,s as ze,u as Ue,v as Re,y as He,z as We}from"./chunk-U7A7OHU6.js";import{a as ne}from"./chunk-MNGBVTM3.js";import{c as Ve,d as Pe}from"./chunk-MLJYHTLM.js";import{a as ie}from"./chunk-4GWWNNYU.js";import"./chunk-EPCACDVR.js";import{a as ke}from"./chunk-ZKKR2XMO.js";import"./chunk-LDSTDJZ6.js";import"./chunk-QD7SSFII.js";import{a as Ie,b as De}from"./chunk-QFHPWKDD.js";import{d as Te}from"./chunk-O2FJLJYH.js";import{e as Z,f as Fe,g as ee,l as te}from"./chunk-72SEU4B5.js";import"./chunk-JFMUERLE.js";import{t as X}from"./chunk-FI3M32ZM.js";import{$a as r,$b as d,Fb as u,Gb as p,Ib as G,Jb as T,Kb as k,Lb as x,Mb as i,Nb as t,Ob as _,Rc as Be,Sb as re,Tb as le,Vb as M,Ya as F,Zb as f,dc as Se,ec as we,fa as I,fc as Ee,jc as V,ka as g,la as C,lc as $,ma as S,mc as A,na as D,nc as o,oc as b,pc as h,qb as q,qc as O,ua as y,yc as de}from"./chunk-M7BUBJMW.js";import{a as K,e as N}from"./chunk-JKOY2XUY.js";var Et=["addressInput"],vt=()=>["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],ht=(n,s)=>s._id,yt=(n,s)=>s.preview;function Bt(n,s){n&1&&(i(0,"div",6),_(1,"div",9),t())}function Ft(n,s){if(n&1){let e=M();i(0,"div",7)(1,"div",10)(2,"div",11)(3,"mat-icon",12),o(4,"error_outline"),t()(),i(5,"h3",13),o(6),t(),i(7,"div",14)(8,"button",15),f("click",function(){g(e);let l=d();return C(l.goBack())}),o(9," Go Back "),t(),i(10,"button",16),f("click",function(){g(e);let l=d();return C(l.loadData())}),o(11," Try Again "),t()()()()}if(n&2){let e=d();r(6),b(e.error())}}function Tt(n,s){n&1&&(i(0,"mat-error"),o(1,"Business name is required"),t())}function kt(n,s){n&1&&(i(0,"mat-error"),o(1,"Business name must be at least 2 characters"),t())}function Mt(n,s){n&1&&(i(0,"mat-error"),o(1,"Business description is required"),t())}function It(n,s){n&1&&(i(0,"mat-error"),o(1,"Description must be at least 10 characters"),t())}function Dt(n,s){n&1&&(i(0,"mat-error"),o(1,"Please select a business type"),t())}function Vt(n,s){if(n&1&&(i(0,"mat-option",39),o(1),t()),n&2){let e=s.$implicit;x("value",e._id),r(),h(" ",e.name," ")}}function Pt(n,s){n&1&&(i(0,"mat-error"),o(1,"Please select a category"),t())}function Lt(n,s){if(n&1&&(i(0,"mat-option",39),o(1),t()),n&2){let e=s.$implicit;x("value",e._id),r(),h(" ",e.name," ")}}function Nt(n,s){if(n&1&&(i(0,"mat-form-field",29)(1,"mat-label"),o(2,"Subcategory (Optional)"),t(),i(3,"mat-select",124)(4,"mat-option",125),o(5,"None"),t(),T(6,Lt,2,2,"mat-option",39,ht),t()()),n&2){let e=d(2);r(6),k(e.subcategories())}}function jt(n,s){n&1&&(i(0,"div",41)(1,"mat-icon",126),o(2,"info"),t(),o(3," Please fill in all required fields to continue "),t())}function At(n,s){n&1&&(i(0,"mat-icon",55),o(1,"lock"),t())}function Ot(n,s){n&1&&(i(0,"mat-error"),o(1,"City is required"),t())}function qt(n,s){n&1&&(i(0,"mat-icon",55),o(1,"lock"),t())}function Gt(n,s){n&1&&(i(0,"mat-icon",55),o(1,"lock"),t())}function $t(n,s){n&1&&(i(0,"div",65)(1,"mat-icon",127),o(2,"check_circle"),t(),i(3,"span")(4,"strong"),o(5,"Location saved!"),t(),o(6," Coordinates automatically detected from address."),t()())}function zt(n,s){n&1&&(i(0,"div",66)(1,"mat-icon",127),o(2,"info"),t(),i(3,"span"),o(4,"Use the address search above for automatic location detection and coordinates."),t()())}function Ut(n,s){n&1&&(i(0,"mat-error"),o(1,"Please enter a valid email address"),t())}function Rt(n,s){n&1&&(i(0,"mat-error"),o(1,"Business phone is required"),t())}function Ht(n,s){if(n&1&&(i(0,"mat-error"),o(1),t()),n&2){let e=d(2);r(),b(e.contact_phone==null||e.contact_phone.errors==null||e.contact_phone.errors.usaPhone==null?null:e.contact_phone.errors.usaPhone.message)}}function Wt(n,s){if(n&1){let e=M();i(0,"div",73),_(1,"img",128),i(2,"button",129),f("click",function(){g(e);let l=d(2);return C(l.removeLogoPreview())}),i(3,"mat-icon",130),o(4,"close"),t()()()}if(n&2){let e=d(2);r(),x("src",e.logoPreview(),F)}}function Yt(n,s){n&1&&(i(0,"div",74)(1,"mat-icon",131),o(2,"image"),t()())}function Jt(n,s){if(n&1){let e=M();i(0,"div",73),_(1,"img",132),i(2,"button",133),f("click",function(){g(e);let l=d(2);return C(l.removeBannerPreview())}),i(3,"mat-icon",130),o(4,"close"),t()()()}if(n&2){let e=d(2);r(),x("src",e.bannerPreview(),F)}}function Qt(n,s){n&1&&(i(0,"div",79)(1,"div",20)(2,"mat-icon",134),o(3,"image"),t(),i(4,"p",135),o(5,"Banner Image"),t()()())}function Kt(n,s){if(n&1&&_(0,"img",136),n&2){let e=d().$implicit;x("src",e.preview,F)("alt",e.file.name)}}function Xt(n,s){if(n&1&&_(0,"img",137),n&2){let e=d().$implicit;x("src",e.preview,F)}}function Zt(n,s){if(n&1&&(i(0,"div",138)(1,"mat-icon",139),o(2,"description"),t(),i(3,"div",75)(4,"p",140),o(5),t(),i(6,"p",141),o(7),t()()()),n&2){let e=d().$implicit;r(5),b((e.file==null?null:e.file.name)||"SOS Certification Document"),r(2),b((e.file==null?null:e.file.type)||"Document")}}function ei(n,s){if(n&1){let e=M();i(0,"div",73),u(1,Kt,1,2,"img",136)(2,Xt,1,1,"img",137)(3,Zt,8,2,"div",138),i(4,"button",133),f("click",function(){let l=g(e).$implicit,c=d(3);return C(c.removeSosCertificationFile(l))}),i(5,"mat-icon",130),o(6,"close"),t()()()}if(n&2){let e=s.$implicit;r(),p(e.file&&e.file.type&&e.file.type.startsWith("image/")?1:!e.file&&(e.preview.includes(".jpg")||e.preview.includes(".jpeg")||e.preview.includes(".png")||e.preview.includes("/image/"))?2:3)}}function ti(n,s){if(n&1&&(i(0,"div",32),T(1,ei,7,1,"div",73,yt),t()),n&2){let e=d(2);r(),k(e.sosCertificationPreviews())}}function ii(n,s){if(n&1&&_(0,"img",142),n&2){let e=d(3);x("src",e.sosCertificationPreview(),F)}}function ni(n,s){if(n&1&&(i(0,"div",138)(1,"mat-icon",139),o(2,"description"),t(),i(3,"div",75)(4,"p",140),o(5),t(),i(6,"p",141),o(7),t()()()),n&2){let e=d(3);r(5),b(e.sosCertificationPreview()),r(2),b(e.sosCertificationFile==null?null:e.sosCertificationFile.type)}}function oi(n,s){if(n&1){let e=M();i(0,"div",73),u(1,ii,1,1,"img",142)(2,ni,8,2,"div",138),i(3,"button",133),f("click",function(){g(e);let l=d(2);return C(l.removeSosCertificationPreview())}),i(4,"mat-icon",130),o(5,"close"),t()()()}if(n&2){let e=d(2);r(),p(e.sosCertificationFile&&e.sosCertificationFile.type.startsWith("image/")?1:2)}}function si(n,s){n&1&&(i(0,"div",81)(1,"div",20)(2,"mat-icon",143),o(3,"upload_file"),t(),i(4,"p",144),o(5,"SOS Certification Documents"),t()()())}function ai(n,s){n&1&&(i(0,"div",86)(1,"mat-icon",126),o(2,"info"),t(),o(3," Please complete required location fields to continue "),t())}function ri(n,s){n&1&&(i(0,"mat-error"),o(1,"Please select a business stage"),t())}function li(n,s){if(n&1&&(i(0,"div",96)(1,"div",145),o(2),t(),i(3,"mat-checkbox",146),o(4,"Closed"),t(),i(5,"mat-form-field",58)(6,"mat-label"),o(7,"Open"),t(),_(8,"input",147),t(),i(9,"mat-form-field",58)(10,"mat-label"),o(11,"Close"),t(),_(12,"input",148),t()()),n&2){let e,a,l,c,v=s.$implicit,w=d(2);x("formGroupName",v),r(2),b(v),r(3),$("opacity-50",(e=w.businessComplianceForm.get("business_hours"))==null||(e=e.get(v))==null||(e=e.get("closed"))==null?null:e.value),r(3),x("disabled",(a=w.businessComplianceForm.get("business_hours"))==null||(a=a.get(v))==null||(a=a.get("closed"))==null?null:a.value),r(),$("opacity-50",(l=w.businessComplianceForm.get("business_hours"))==null||(l=l.get(v))==null||(l=l.get("closed"))==null?null:l.value),r(3),x("disabled",(c=w.businessComplianceForm.get("business_hours"))==null||(c=c.get(v))==null||(c=c.get("closed"))==null?null:c.value)}}function di(n,s){if(n&1&&(i(0,"mat-option",39),o(1),t()),n&2){let e=s.$implicit;x("value",e),r(),b(e)}}function mi(n,s){n&1&&(i(0,"mat-error"),o(1,"Please select the registered state"),t())}function ci(n,s){if(n&1&&(i(0,"mat-form-field",29)(1,"mat-label"),o(2,"Registered State"),t(),i(3,"mat-select",149),T(4,di,2,2,"mat-option",39,G),t(),u(6,mi,2,0,"mat-error"),t()),n&2){let e,a=d(2);r(4),k(a.usStates),r(2),p((e=a.businessComplianceForm.get("registered_state"))!=null&&e.hasError("required")&&((e=a.businessComplianceForm.get("registered_state"))!=null&&e.touched)?6:-1)}}function ui(n,s){n&1&&(i(0,"mat-error"),o(1,"Please enter a valid Tax ID in format: SSN (888-88-8888) or EIN (88-8888888)"),t())}function pi(n,s){n&1&&(i(0,"div",105)(1,"mat-icon",150),o(2,"error"),t(),o(3," You must confirm this attestation to continue "),t())}function _i(n,s){n&1&&(i(0,"div",86)(1,"mat-icon",126),o(2,"info"),t(),o(3," Please complete all required fields "),t())}function xi(n,s){if(n&1&&(i(0,"div"),o(1),t()),n&2){let e,a=d(2);r(),b((e=a.businessDetailsForm.get("address"))==null?null:e.value)}}function fi(n,s){if(n&1&&(i(0,"span"),o(1),t()),n&2){let e,a=d(2);r(),h(", ",(e=a.businessDetailsForm.get("state"))==null?null:e.value)}}function gi(n,s){if(n&1&&(i(0,"div"),o(1),t()),n&2){let e,a=d(2);r(),b(((e=a.businessDetailsForm.get("country"))==null?null:e.value)||"USA")}}function Ci(n,s){if(n&1&&(i(0,"div")(1,"span",112),o(2,"Email:"),t(),i(3,"span",113),o(4),t()()),n&2){let e,a=d(2);r(4),b((e=a.businessDetailsForm.get("contact_email"))==null?null:e.value)}}function bi(n,s){if(n&1&&(i(0,"div")(1,"span",112),o(2,"Phone:"),t(),i(3,"span",113),o(4),t()()),n&2){let e,a=d(2);r(4),b((e=a.businessDetailsForm.get("contact_phone"))==null?null:e.value)}}function vi(n,s){if(n&1&&(i(0,"div")(1,"span",112),o(2,"Website:"),t(),i(3,"span",113),o(4),t()()),n&2){let e,a=d(2);r(4),b((e=a.businessDetailsForm.get("website"))==null?null:e.value)}}function hi(n,s){if(n&1&&(i(0,"div",118),_(1,"img",151),i(2,"div",152)(3,"p",153),o(4,"Logo uploaded"),t(),i(5,"p",141),o(6,"Ready for display"),t()()()),n&2){let e=d(2);r(),x("src",e.logoPreview(),F)}}function yi(n,s){n&1&&(i(0,"div",119)(1,"div",154)(2,"mat-icon",131),o(3,"image"),t()(),i(4,"div",152)(5,"p",130),o(6,"No logo uploaded"),t(),i(7,"p",155),o(8,"Optional - can be added later"),t()()())}function Si(n,s){if(n&1&&(i(0,"div",111),_(1,"img",156),i(2,"div",118)(3,"mat-icon",157),o(4,"check_circle"),t(),i(5,"p",153),o(6,"Banner image uploaded"),t()()()),n&2){let e=d(2);r(),x("src",e.bannerPreview(),F)}}function wi(n,s){n&1&&(i(0,"div",119)(1,"div",158)(2,"mat-icon",159),o(3,"image"),t()(),i(4,"div",152)(5,"p",130),o(6,"No banner image uploaded"),t(),i(7,"p",155),o(8,"Optional - can be added later"),t()()())}function Ei(n,s){if(n&1&&(_(0,"img",163),i(1,"div",118)(2,"mat-icon",164),o(3,"image"),t(),i(4,"p",165),o(5),t()()),n&2){let e=d().$implicit;x("src",e.preview,F)("alt",e.file.name),r(5),b(e.file.name)}}function Bi(n,s){if(n&1&&(_(0,"img",166),i(1,"div",118)(2,"mat-icon",164),o(3,"image"),t(),i(4,"p",167),o(5,"Certification Image"),t()()),n&2){let e=d().$implicit;x("src",e.preview,F)}}function Fi(n,s){if(n&1&&(i(0,"div",162)(1,"mat-icon",168),o(2,"description"),t(),i(3,"div",169)(4,"p",170),o(5),t(),i(6,"p",141),o(7),t()()()),n&2){let e=d().$implicit;r(5),b((e.file==null?null:e.file.name)||"SOS Certification Document"),r(2),b((e.file==null?null:e.file.type)||"Document")}}function Ti(n,s){if(n&1&&(i(0,"div",161),u(1,Ei,6,3)(2,Bi,6,1)(3,Fi,8,2,"div",162),t()),n&2){let e=s.$implicit;r(),p(e.file&&e.file.type&&e.file.type.startsWith("image/")?1:!e.file&&(e.preview.includes(".jpg")||e.preview.includes(".jpeg")||e.preview.includes(".png")||e.preview.includes("/image/"))?2:3)}}function ki(n,s){if(n&1&&(i(0,"div",95)(1,"div",160),T(2,Ti,4,1,"div",161,yt),t(),i(4,"div",118)(5,"mat-icon",157),o(6,"check_circle"),t(),i(7,"p",153),o(8),t()()()),n&2){let e=d(2);r(2),k(e.sosCertificationPreviews()),r(6),O(" ",e.sosCertificationPreviews().length," certification ",e.sosCertificationPreviews().length===1?"document":"documents"," uploaded ")}}function Mi(n,s){if(n&1&&_(0,"img",171),n&2){let e=d(3);x("src",e.sosCertificationPreview(),F)}}function Ii(n,s){if(n&1&&(i(0,"div",172)(1,"div",118)(2,"mat-icon",173),o(3,"description"),t(),i(4,"div",75)(5,"p",140),o(6),t(),i(7,"p",141),o(8),t()()()()),n&2){let e=d(3);r(6),b(e.sosCertificationPreview()),r(2),b((e.sosCertificationFile==null?null:e.sosCertificationFile.type)||"Document")}}function Di(n,s){if(n&1&&(i(0,"div",111),u(1,Mi,1,1,"img",171)(2,Ii,9,2,"div",172),i(3,"div",118)(4,"mat-icon",157),o(5,"check_circle"),t(),i(6,"p",153),o(7,"SOS certification document uploaded"),t()()()),n&2){let e=d(2);r(),p(e.sosCertificationFile&&e.sosCertificationFile.type.startsWith("image/")?1:2)}}function Vi(n,s){n&1&&(i(0,"div",119)(1,"div",174)(2,"mat-icon",131),o(3,"description"),t()(),i(4,"div",152)(5,"p",130),o(6,"No certification documents uploaded"),t(),i(7,"p",155),o(8,"Optional - can be added later"),t()()())}function Pi(n,s){if(n&1&&(i(0,"div",178)(1,"span",179),o(2),t(),o(3),t()),n&2){let e,a=d().$implicit,l=d(4);r(2),h("",a,":"),r(),O(" ",(e=l.businessComplianceForm.get("business_hours"))==null||(e=e.get(a))==null||(e=e.get("open"))==null?null:e.value," - ",(e=l.businessComplianceForm.get("business_hours"))==null||(e=e.get(a))==null||(e=e.get("close"))==null?null:e.value," ")}}function Li(n,s){if(n&1&&(i(0,"div",22)(1,"span",179),o(2),t(),i(3,"span",135),o(4,"Closed"),t()()),n&2){let e=d().$implicit;r(2),h("",e,":")}}function Ni(n,s){if(n&1&&u(0,Pi,4,3,"div",178)(1,Li,5,1,"div",22),n&2){let e,a=s.$implicit,l=d(4);p(!((e=l.businessComplianceForm.get("business_hours"))==null||(e=e.get(a))==null||(e=e.get("closed"))==null)&&e.value?1:0)}}function ji(n,s){n&1&&(i(0,"div")(1,"span",117),o(2,"Business Hours:"),t(),i(3,"div",177),T(4,Ni,2,1,null,null,G),t()()),n&2&&(r(4),k(de(0,vt)))}function Ai(n,s){if(n&1&&(i(0,"div")(1,"span",112),o(2,"Business Registered:"),t(),i(3,"span",113),o(4),t()()),n&2){let e,a=d(3);r(4),b((e=a.businessComplianceForm.get("business_registered"))!=null&&e.value?"Yes":"No")}}function Oi(n,s){if(n&1&&(i(0,"div")(1,"span",112),o(2,"Registered State:"),t(),i(3,"span",113),o(4),t()()),n&2){let e,a=d(3);r(4),b((e=a.businessComplianceForm.get("registered_state"))==null?null:e.value)}}function qi(n,s){if(n&1&&(i(0,"div")(1,"span",112),o(2,"Tax ID/EIN/SSN:"),t(),i(3,"span",180),o(4),t()()),n&2){let e,a=d(3);r(4),b((e=a.businessComplianceForm.get("tax_id"))==null?null:e.value)}}function Gi(n,s){if(n&1&&(i(0,"div")(1,"span",112),o(2,"Certified WBE/MBE:"),t(),i(3,"span",113),o(4),t()()),n&2){let e,a=d(3);r(4),b((e=a.businessComplianceForm.get("is_certified_wbe_mbe"))!=null&&e.value?"Yes":"No")}}function $i(n,s){n&1&&(i(0,"div",176)(1,"div",52)(2,"mat-icon",181),o(3,"check_circle"),t(),i(4,"span",182),o(5,"This business is confirmed to be 51-100% owned and operated by a woman."),t()()())}function zi(n,s){if(n&1&&(i(0,"div",120)(1,"h4",115),o(2,"Business Compliance & Operations"),t(),i(3,"div",95)(4,"div")(5,"span",112),o(6,"Business Stage:"),t(),i(7,"span",175),o(8),t()(),u(9,ji,6,1,"div"),u(10,Ai,5,1,"div"),u(11,Oi,5,1,"div"),u(12,qi,5,1,"div"),u(13,Gi,5,1,"div"),u(14,$i,6,0,"div",176),t()()),n&2){let e,a,l,c,v,w,E=d(2);r(8),b(E.formatBusinessStage((e=E.businessComplianceForm.get("business_stage"))==null?null:e.value)),r(),p(E.businessComplianceForm.get("business_hours")?9:-1),r(),p(((a=E.businessComplianceForm.get("business_registered"))==null?null:a.value)!==null?10:-1),r(),p((l=E.businessComplianceForm.get("registered_state"))!=null&&l.value?11:-1),r(),p((c=E.businessComplianceForm.get("tax_id"))!=null&&c.value?12:-1),r(),p(((v=E.businessComplianceForm.get("is_certified_wbe_mbe"))==null?null:v.value)!==null?13:-1),r(),p((w=E.businessComplianceForm.get("woman_owned_attestation"))!=null&&w.value?14:-1)}}function Ui(n,s){n&1&&(i(0,"div",123)(1,"mat-icon",126),o(2,"error"),t(),o(3," Please complete all required fields before submitting "),t())}function Ri(n,s){if(n&1&&(re(0),i(1,"mat-icon",183),o(2,"refresh"),t(),o(3),le()),n&2){let e=d(2);r(3),h(" ",e.isEditMode()?"Updating Business...":"Creating Business..."," ")}}function Hi(n,s){if(n&1&&(re(0),i(1,"mat-icon",19),o(2,"business"),t(),o(3),le()),n&2){let e=d(2);r(3),h(" ",e.isEditMode()?"Update Business":"Create Business"," ")}}function Wi(n,s){if(n&1){let e=M();i(0,"div",8)(1,"div",17)(2,"button",18),f("click",function(){g(e);let l=d();return C(l.goBack())}),i(3,"mat-icon",19),o(4,"arrow_back"),t(),o(5," Back to Dashboard "),t(),i(6,"div",20)(7,"h1",21),o(8),t(),i(9,"p",22),o(10),t()()(),i(11,"mat-card",23)(12,"mat-stepper",24,0)(14,"mat-step",25)(15,"form",26)(16,"div")(17,"h3",27),o(18," Tell us about your business "),t(),i(19,"p",28),o(20," Provide basic information about your business to get started. "),t()(),i(21,"mat-form-field",29)(22,"mat-label"),o(23,"Business Name"),t(),_(24,"input",30),u(25,Tt,2,0,"mat-error"),u(26,kt,2,0,"mat-error"),t(),i(27,"mat-form-field",29)(28,"mat-label"),o(29,"Business Description"),t(),_(30,"textarea",31),u(31,Mt,2,0,"mat-error"),u(32,It,2,0,"mat-error"),t(),i(33,"div",32)(34,"mat-form-field",33)(35,"mat-label"),o(36,"Business Type"),t(),i(37,"mat-select",34)(38,"mat-option",35),o(39,"Service Business"),t(),i(40,"mat-option",36),o(41,"Product Business"),t(),i(42,"mat-option",37),o(43,"Both Service & Product"),t()(),u(44,Dt,2,0,"mat-error"),t(),i(45,"mat-form-field",33)(46,"mat-label"),o(47,"Category"),t(),i(48,"mat-select",38),f("selectionChange",function(l){g(e);let c=d();return C(c.onCategoryChange(l.value))}),T(49,Vt,2,2,"mat-option",39,ht),t(),u(51,Pt,2,0,"mat-error"),t()(),u(52,Nt,8,0,"mat-form-field",29),i(53,"div",40),u(54,jt,4,0,"div",41),i(55,"button",42),f("click",function(){g(e);let l=V(13),c=d();return C(c.nextStep(l))}),o(56," Next "),i(57,"mat-icon",43),o(58,"arrow_forward"),t()()()()(),i(59,"mat-step",44)(60,"form",45)(61,"div")(62,"h3",27),o(63," Contact Information & Location "),t(),i(64,"p",28),o(65," Help customers find and contact your business. "),t()(),i(66,"div")(67,"h4",46),o(68,"Business Location"),t(),i(69,"div",47)(70,"mat-form-field",29)(71,"mat-label"),o(72,"Search Address"),t(),_(73,"input",48,1),i(75,"mat-icon",49),o(76,"location_on"),t(),i(77,"mat-icon",50),o(78,"search"),t(),i(79,"mat-hint"),o(80,"Start typing to search for your business address (USA only)"),t()(),i(81,"div",51)(82,"div",52)(83,"mat-icon",53),o(84,"info"),t(),i(85,"div")(86,"strong"),o(87,"Auto-complete tip:"),t(),o(88,' Type your complete business address above. City, state, and postal code will be automatically filled and locked. Use "Edit" to manually modify or "Clear" to start over. '),t()()(),i(89,"div",32)(90,"mat-form-field",33)(91,"mat-label"),o(92,"City"),t(),_(93,"input",54),u(94,At,2,0,"mat-icon",55),u(95,Ot,2,0,"mat-error"),t(),i(96,"mat-form-field",33)(97,"mat-label"),o(98,"State"),t(),_(99,"input",56),u(100,qt,2,0,"mat-icon",55),t()(),i(101,"div",57)(102,"mat-form-field",58)(103,"mat-label"),o(104,"Postal Code"),t(),_(105,"input",59),u(106,Gt,2,0,"mat-icon",55),t(),i(107,"div",60)(108,"button",61),f("click",function(){g(e);let l=d();return C(l.enableManualLocationEdit())}),i(109,"mat-icon",62),o(110,"edit"),t(),o(111," Edit "),t(),i(112,"button",63),f("click",function(){g(e);let l=d();return C(l.clearLocationData())}),i(113,"mat-icon",62),o(114,"clear"),t(),o(115," Clear "),t()()(),i(116,"div",64),u(117,$t,7,0,"div",65)(118,zt,5,0,"div",66),t()()(),i(119,"div")(120,"h4",46),o(121,"Contact Information"),t(),i(122,"div",47)(123,"div",32)(124,"mat-form-field",33)(125,"mat-label"),o(126,"Business Email"),t(),_(127,"input",67),u(128,Ut,2,0,"mat-error"),t(),i(129,"mat-form-field",33)(130,"mat-label"),o(131,"Business Phone"),t(),_(132,"input",68),u(133,Rt,2,0,"mat-error"),u(134,Ht,2,1,"mat-error"),t()(),i(135,"mat-form-field",29)(136,"mat-label"),o(137,"Website URL (Optional)"),t(),_(138,"input",69),t()()(),i(139,"div")(140,"h4",46),o(141,"Business Images"),t(),i(142,"div",70)(143,"div")(144,"label",71),o(145," Business Logo (Optional) "),t(),i(146,"div",72),u(147,Wt,5,1,"div",73)(148,Yt,3,0,"div",74),i(149,"div",75)(150,"input",76,2),f("change",function(l){g(e);let c=d();return C(c.onLogoSelected(l))}),t(),i(152,"button",77),f("click",function(){g(e);let l=V(151);return C(l.click())}),i(153,"mat-icon",19),o(154,"upload"),t(),o(155," Choose Logo "),t(),i(156,"p",78),o(157,"PNG, JPG up to 5MB"),t()()()(),i(158,"div")(159,"label",71),o(160," Banner Image (Optional) "),t(),i(161,"div",47),u(162,Jt,5,1,"div",73)(163,Qt,6,0,"div",79),i(164,"div")(165,"input",76,3),f("change",function(l){g(e);let c=d();return C(c.onBannerSelected(l))}),t(),i(167,"button",77),f("click",function(){g(e);let l=V(166);return C(l.click())}),i(168,"mat-icon",19),o(169,"upload"),t(),o(170," Choose Banner "),t(),i(171,"p",78),o(172,"PNG, JPG up to 5MB. Recommended: 1200x400px"),t()()()(),i(173,"div")(174,"label",71),o(175," SOS Certification Documentation (Optional) "),t(),i(176,"p",80),o(177," Upload your Secretary of State certification or other business registration documents (multiple files allowed) "),t(),i(178,"div",47),u(179,ti,3,0,"div",32),u(180,oi,6,1,"div",73),u(181,si,6,0,"div",81),i(182,"div")(183,"input",82,4),f("change",function(l){g(e);let c=d();return C(c.onSosCertificationSelected(l))}),t(),i(185,"button",77),f("click",function(){g(e);let l=V(184);return C(l.click())}),i(186,"mat-icon",19),o(187,"upload_file"),t(),o(188),t(),i(189,"p",78),o(190,"PDF, DOC, DOCX, JPG, PNG up to 10MB each (multiple files allowed)"),t()()()()()(),i(191,"div",83)(192,"button",84),f("click",function(){g(e);let l=V(13),c=d();return C(c.previousStep(l))}),i(193,"mat-icon",19),o(194,"arrow_back"),t(),o(195," Previous "),t(),i(196,"div",85),u(197,ai,4,0,"div",86),i(198,"button",87),f("click",function(){g(e);let l=V(13),c=d();return C(c.nextStep(l))}),o(199," Next "),i(200,"mat-icon",43),o(201,"arrow_forward"),t()()()()()(),i(202,"mat-step",88)(203,"form",26)(204,"div")(205,"h3",27),o(206," Business Compliance & Operations "),t(),i(207,"p",28),o(208," Provide additional business details and certifications. "),t()(),i(209,"mat-form-field",29)(210,"mat-label"),o(211,"Business Stage"),t(),i(212,"mat-select",89)(213,"mat-option",90),o(214,"Side gig"),t(),i(215,"mat-option",91),o(216,"Startup"),t(),i(217,"mat-option",92),o(218,"Growing business"),t(),i(219,"mat-option",93),o(220,"Established business"),t()(),u(221,ri,2,0,"mat-error"),t(),i(222,"div",94)(223,"h4",46),o(224,"Business Hours of Operation"),t(),i(225,"div",95),T(226,li,13,8,"div",96,G),t()(),i(228,"div",47)(229,"div")(230,"h4",46),o(231,"Business Registration"),t(),i(232,"div",97)(233,"label",98),o(234,"Is your business registered?"),t(),i(235,"mat-radio-group",99)(236,"mat-radio-button",39),o(237,"Yes"),t(),i(238,"mat-radio-button",39),o(239,"No"),t()()()(),u(240,ci,7,1,"mat-form-field",29),t(),i(241,"mat-form-field",29)(242,"mat-label"),o(243,"Tax ID/EIN/SSN"),t(),_(244,"input",100),i(245,"mat-hint"),o(246,"SSN format: 888-88-8888 (9 digits) or EIN format: 88-8888888 (9 digits)"),t(),u(247,ui,2,0,"mat-error"),t(),i(248,"div")(249,"h4",46),o(250,"Business Certifications"),t(),i(251,"div",97)(252,"label",98),o(253," Certified Women Business Enterprise or Minority Business Enterprise? "),t(),i(254,"mat-radio-group",101)(255,"mat-radio-button",39),o(256,"Yes"),t(),i(257,"mat-radio-button",39),o(258,"No"),t()()()(),i(259,"div",102)(260,"mat-checkbox",103)(261,"span",104),o(262," I confirm this business is 51-100% owned and operated by a woman. "),t()(),u(263,pi,4,0,"div",105),t(),i(264,"div",83)(265,"button",84),f("click",function(){g(e);let l=V(13),c=d();return C(c.previousStep(l))}),i(266,"mat-icon",19),o(267,"arrow_back"),t(),o(268," Previous "),t(),i(269,"div",85),u(270,_i,4,0,"div",86),i(271,"button",87),f("click",function(){g(e);let l=V(13),c=d();return C(c.nextStep(l))}),o(272," Next "),i(273,"mat-icon",43),o(274,"arrow_forward"),t()()()()()(),i(275,"mat-step",106)(276,"div",107)(277,"div")(278,"h3",27),o(279," Review Your Business Information "),t(),i(280,"p",28),o(281," Please review your business details before submitting. "),t()(),i(282,"div",108)(283,"div",109)(284,"h4",110),o(285,"Business Information"),t(),i(286,"div",111)(287,"div")(288,"span",112),o(289,"Name:"),t(),i(290,"span",113),o(291),t()(),i(292,"div")(293,"span",112),o(294,"Type:"),t(),i(295,"span",113),o(296),t()(),i(297,"div")(298,"span",112),o(299,"Description:"),t(),i(300,"div",114),o(301),t()()()(),i(302,"div",109)(303,"h4",110),o(304,"Location & Contact"),t(),i(305,"div",111)(306,"div")(307,"span",112),o(308,"Address:"),t(),i(309,"div",113),u(310,xi,2,1,"div"),i(311,"div"),o(312),u(313,fi,2,1,"span"),o(314),t(),u(315,gi,2,1,"div"),t()(),u(316,Ci,5,1,"div"),u(317,bi,5,1,"div"),u(318,vi,5,1,"div"),t()(),i(319,"div",109)(320,"h4",115),o(321,"Uploaded Images & Documents"),t(),i(322,"div",116)(323,"span",117),o(324,"Business Logo:"),t(),u(325,hi,7,1,"div",118)(326,yi,9,0,"div",119),t(),i(327,"div",116)(328,"span",117),o(329,"Banner Image:"),t(),u(330,Si,7,1,"div",111)(331,wi,9,0,"div",119),t(),i(332,"div",116)(333,"span",117),o(334,"SOS Certification Documentation:"),t(),u(335,ki,9,2,"div",95)(336,Di,8,1,"div",111)(337,Vi,9,0,"div",119),t()(),u(338,zi,15,7,"div",120),i(339,"div")(340,"h4",110),o(341,"Next Steps"),t(),i(342,"div",121)(343,"div",118)(344,"mat-icon",122),o(345,"check_circle"),t(),o(346," Your business profile will be created "),t(),i(347,"div",118)(348,"mat-icon",122),o(349,"check_circle"),t(),o(350," You can add services and showcase your work "),t(),i(351,"div",118)(352,"mat-icon",122),o(353,"check_circle"),t(),o(354," Customers can find and contact you "),t()()()(),i(355,"div",83)(356,"button",84),f("click",function(){g(e);let l=V(13),c=d();return C(c.previousStep(l))}),i(357,"mat-icon",19),o(358,"arrow_back"),t(),o(359," Previous "),t(),i(360,"div",85),u(361,Ui,4,0,"div",123),i(362,"button",87),f("click",function(){g(e);let l=d();return C(l.submitBusiness())}),u(363,Ri,4,1,"ng-container")(364,Hi,4,1,"ng-container"),t()()()()()()()()}if(n&2){let e,a,l,c,v,w,E,z,j,U,R,P,L,ae,W,Y,me,J,Q,ce,ue,pe,_e,xe,fe,ge,Ce,be,ve,he,ye,m=d();r(8),h(" ",m.isEditMode()?"Edit Your Business":"Create Your Business"," "),r(2),h(" ",m.isEditMode()?"Update your business profile and information":"Set up your business profile and start connecting with customers"," "),r(2),x("linear",!0)("orientation",m.isMobile()?"vertical":"horizontal"),r(2),x("stepControl",m.businessInfoForm),r(),x("formGroup",m.businessInfoForm),r(10),p((e=m.businessInfoForm.get("name"))!=null&&e.hasError("required")&&((e=m.businessInfoForm.get("name"))!=null&&e.touched)?25:-1),r(),p((a=m.businessInfoForm.get("name"))!=null&&a.hasError("minlength")&&((a=m.businessInfoForm.get("name"))!=null&&a.touched)?26:-1),r(5),p((l=m.businessInfoForm.get("description"))!=null&&l.hasError("required")&&((l=m.businessInfoForm.get("description"))!=null&&l.touched)?31:-1),r(),p((c=m.businessInfoForm.get("description"))!=null&&c.hasError("minlength")&&((c=m.businessInfoForm.get("description"))!=null&&c.touched)?32:-1),r(12),p((v=m.businessInfoForm.get("business_type"))!=null&&v.hasError("required")&&((v=m.businessInfoForm.get("business_type"))!=null&&v.touched)?44:-1),r(5),k(m.categories()),r(2),p((w=m.businessInfoForm.get("category_id"))!=null&&w.hasError("required")&&((w=m.businessInfoForm.get("category_id"))!=null&&w.touched)?51:-1),r(),p(m.subcategories().length>0?52:-1),r(2),p(m.isBusinessInfoValid()?-1:54),r(),x("disabled",!m.isBusinessInfoValid()),r(4),x("stepControl",m.businessDetailsForm),r(),x("formGroup",m.businessDetailsForm),r(30),$("opacity-75",(E=m.businessDetailsForm.get("city"))==null?null:E.disabled),r(4),p((z=m.businessDetailsForm.get("city"))!=null&&z.disabled?94:-1),r(),p((j=m.businessDetailsForm.get("city"))!=null&&j.hasError("required")&&((j=m.businessDetailsForm.get("city"))!=null&&j.touched)?95:-1),r(),$("opacity-75",(U=m.businessDetailsForm.get("state"))==null?null:U.disabled),r(4),p((R=m.businessDetailsForm.get("state"))!=null&&R.disabled?100:-1),r(2),$("opacity-75",(P=m.businessDetailsForm.get("postal_code"))==null?null:P.disabled),r(4),p((L=m.businessDetailsForm.get("postal_code"))!=null&&L.disabled?106:-1),r(11),p(!((ae=m.businessDetailsForm.get("location"))==null||ae.value==null)&&ae.value.coordinates?117:118),r(11),p((W=m.businessDetailsForm.get("contact_email"))!=null&&W.hasError("email")&&((W=m.businessDetailsForm.get("contact_email"))!=null&&W.touched)?128:-1),r(5),p(m.contact_phone!=null&&m.contact_phone.hasError("required")&&(m.contact_phone!=null&&m.contact_phone.touched)?133:-1),r(),p(m.contact_phone!=null&&m.contact_phone.hasError("usaPhone")&&(m.contact_phone!=null&&m.contact_phone.touched)?134:-1),r(13),p(m.logoPreview()?147:148),r(15),p(m.bannerPreview()?162:163),r(17),p(m.sosCertificationPreviews().length>0?179:-1),r(),p(m.sosCertificationPreview()&&m.sosCertificationPreviews().length===0?180:-1),r(),p(m.sosCertificationPreviews().length===0&&!m.sosCertificationPreview()?181:-1),r(7),h(" ",m.sosCertificationPreviews().length>0?"Add More Certifications":"Choose Certifications"," "),r(9),p(m.isBusinessDetailsValid()?-1:197),r(),x("disabled",!m.isBusinessDetailsValid()),r(4),x("stepControl",m.businessComplianceForm),r(),x("formGroup",m.businessComplianceForm),r(18),p((Y=m.businessComplianceForm.get("business_stage"))!=null&&Y.hasError("required")&&((Y=m.businessComplianceForm.get("business_stage"))!=null&&Y.touched)?221:-1),r(5),k(de(69,vt)),r(10),x("value",!0),r(2),x("value",!1),r(2),p((me=m.businessComplianceForm.get("business_registered"))!=null&&me.value?240:-1),r(7),p((J=m.businessComplianceForm.get("tax_id"))!=null&&J.hasError("pattern")&&((J=m.businessComplianceForm.get("tax_id"))!=null&&J.touched)?247:-1),r(8),x("value",!0),r(2),x("value",!1),r(6),p((Q=m.businessComplianceForm.get("woman_owned_attestation"))!=null&&Q.hasError("required")&&((Q=m.businessComplianceForm.get("woman_owned_attestation"))!=null&&Q.touched)?263:-1),r(7),p(m.isBusinessComplianceValid()?-1:270),r(),x("disabled",!m.isBusinessComplianceValid()),r(20),b((ce=m.businessInfoForm.get("name"))==null?null:ce.value),r(5),b((ue=m.businessInfoForm.get("business_type"))==null?null:ue.value),r(5),h(" ",(pe=m.businessInfoForm.get("description"))==null?null:pe.value," "),r(9),p((_e=m.businessDetailsForm.get("address"))!=null&&_e.value?310:-1),r(2),h(" ",(xe=m.businessDetailsForm.get("city"))==null?null:xe.value),r(),p((fe=m.businessDetailsForm.get("state"))!=null&&fe.value?313:-1),r(),h(" ",(ge=m.businessDetailsForm.get("postal_code"))==null?null:ge.value," "),r(),p((Ce=m.businessDetailsForm.get("country"))!=null&&Ce.value?315:-1),r(),p((be=m.businessDetailsForm.get("contact_email"))!=null&&be.value?316:-1),r(),p((ve=m.businessDetailsForm.get("contact_phone"))!=null&&ve.value?317:-1),r(),p((he=m.businessDetailsForm.get("website"))!=null&&he.value?318:-1),r(7),p(m.logoPreview()?325:326),r(5),p(m.bannerPreview()?330:331),r(5),p(m.sosCertificationPreviews().length>0?335:m.sosCertificationPreview()?336:337),r(3),p((ye=m.businessComplianceForm.get("business_stage"))!=null&&ye.value?338:-1),r(23),p(!m.isAllFormsValid()&&!m.submitting()?361:-1),r(),x("disabled",m.submitting()||!m.isAllFormsValid()),r(),p(m.submitting()?363:364)}}var H=class n{addressInput;router=I(ee);route=I(Z);fb=I(Ye);authService=I(ie);businessService=I(ne);breakpointObserver=I(Te);autocomplete;categories=y([]);subcategories=y([]);loading=y(!1);submitting=y(!1);error=y(null);logoPreview=y(null);bannerPreview=y(null);sosCertificationPreview=y(null);sosCertificationPreviews=y([]);isEditMode=y(!1);businessId=y(null);currentBusiness=y(null);isMobile=y(!1);logoFile=null;bannerFile=null;sosCertificationFile=null;sosCertificationFiles=[];businessInfoForm;businessDetailsForm;businessComplianceForm;usStates=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"];constructor(){this.breakpointObserver.observe([ke.Handset]).subscribe(s=>{this.isMobile.set(s.matches)}),this.businessInfoForm=this.fb.group({name:["",[B.required,B.minLength(2)]],description:["",[B.required,B.minLength(10)]],short_description:[""],business_type:["service",B.required],category_id:["",B.required],subcategory_id:[""]}),this.businessDetailsForm=this.fb.group({address:[""],city:["",B.required],state:["",B.required],postal_code:["",B.required],location:this.fb.group({type:["Point"],coordinates:[null]}),contact_email:["",[B.required,B.email]],contact_phone:["",[B.required,pt.usaPhone()]],website:[""]}),this.businessComplianceForm=this.fb.group({business_stage:["",B.required],business_hours:this.fb.group({monday:this.fb.group({open:["09:00"],close:["17:00"],closed:[!1]}),tuesday:this.fb.group({open:["09:00"],close:["17:00"],closed:[!1]}),wednesday:this.fb.group({open:["09:00"],close:["17:00"],closed:[!1]}),thursday:this.fb.group({open:["09:00"],close:["17:00"],closed:[!1]}),friday:this.fb.group({open:["09:00"],close:["17:00"],closed:[!1]}),saturday:this.fb.group({open:["09:00"],close:["17:00"],closed:[!0]}),sunday:this.fb.group({open:["09:00"],close:["17:00"],closed:[!0]})}),business_registered:[!1],registered_state:[""],tax_id:["",[B.pattern(/^(\d{3}-\d{2}-\d{4}|\d{2}-\d{7})$/)]],is_certified_wbe_mbe:[!1],woman_owned_attestation:[!1,B.requiredTrue]}),this.businessComplianceForm.get("business_registered")?.valueChanges.subscribe(s=>{let e=this.businessComplianceForm.get("registered_state");s?e?.setValidators([B.required]):e?.clearValidators(),e?.updateValueAndValidity()})}ngOnInit(){if(!this.authService.isAuthenticated()){this.router.navigate(["/auth"],{queryParams:{message:"Please log in to create a business"}});return}let s=this.route.snapshot.paramMap.get("id");s&&(this.isEditMode.set(!0),this.businessId.set(s)),this.loadCategories(),this.isEditMode()&&this.loadBusinessForEdit()}ngAfterViewInit(){setTimeout(()=>{this.initializeAutocomplete()},100)}initializeAutocomplete(){typeof google<"u"&&google.maps&&google.maps.places&&this.addressInput?(this.autocomplete=new google.maps.places.Autocomplete(this.addressInput.nativeElement,{componentRestrictions:{country:"us"},fields:["address_components","geometry","formatted_address"],types:["establishment","geocode"]}),this.autocomplete.addListener("place_changed",()=>{let s=this.autocomplete.getPlace();s&&s.address_components&&this.processPlaceData(s)})):setTimeout(()=>this.initializeAutocomplete(),200)}processPlaceData(s){let e="",a="",l="",c="",v="";for(let P of s.address_components){let L=P.types;L.includes("street_number")?e=P.long_name:L.includes("route")?a=P.long_name:L.includes("locality")?l=P.long_name:L.includes("administrative_area_level_1")?c=P.short_name:L.includes("postal_code")&&(v=P.long_name)}let w=`${e} ${a}`.trim(),E=s.geometry?.location?.lat(),z=s.geometry?.location?.lng();this.businessDetailsForm.patchValue({address:w||s.formatted_address,city:l,state:c,postal_code:v,location:{type:"Point",coordinates:E&&z?[z,E]:null}});let j=this.businessDetailsForm.get("city"),U=this.businessDetailsForm.get("state"),R=this.businessDetailsForm.get("postal_code");j&&j.disable(),U&&U.disable(),R&&R.disable()}onLocationSelected(s){console.log("onLocationSelected called:",s)}clearLocationData(){this.businessDetailsForm.patchValue({address:"",city:"",state:"",postal_code:"",location:{type:"Point",coordinates:null}});let s=this.businessDetailsForm.get("city"),e=this.businessDetailsForm.get("state"),a=this.businessDetailsForm.get("postal_code");s&&s.enable(),e&&e.enable(),a&&a.enable()}enableManualLocationEdit(){let s=this.businessDetailsForm.get("city"),e=this.businessDetailsForm.get("state"),a=this.businessDetailsForm.get("postal_code");s&&s.enable(),e&&e.enable(),a&&a.enable(),console.log("Manual editing enabled for location fields")}loadCategories(){return N(this,null,function*(){try{this.loading.set(!0),this.error.set(null);let s=yield this.businessService.getCategoriesAsync();this.categories.set(s)}catch(s){console.error("Error loading categories:",s),this.error.set("Failed to load categories. Please try again.")}finally{this.loading.set(!1)}})}loadBusinessForEdit(){return N(this,null,function*(){let s=this.businessId();if(s)try{this.loading.set(!0),this.error.set(null);let e=yield this.businessService.getBusinessAsync(s);if(!e){this.error.set("Business not found."),this.router.navigate(["/dashboard/businesses/list"]);return}this.currentBusiness.set(e),this.businessInfoForm.patchValue({name:e.name,description:e.description,short_description:e.short_description||"",business_type:e.business_type,category_id:typeof e.category_id=="string"?e.category_id:e.category_id._id,subcategory_id:e.subcategory_id?typeof e.subcategory_id=="string"?e.subcategory_id:e.subcategory_id._id:""}),this.businessDetailsForm.patchValue({address:e.address||"",city:e.city||"",state:e.state||"",postal_code:e.postal_code||"",location:e.location||{type:"Point",coordinates:null},contact_email:e.contact_email||"",contact_phone:e.contact_phone||"",website:e.website||""}),this.businessComplianceForm.patchValue({business_stage:e.business_stage||"",business_registered:e.business_registered||!1,registered_state:e.registered_state||"",tax_id:e.tax_id||"",is_certified_wbe_mbe:e.is_certified_wbe_mbe||!1,woman_owned_attestation:e.woman_owned_attestation||!1}),e.business_hours&&["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].forEach(c=>{let v=e.business_hours?.[c];if(v){let w=this.businessComplianceForm.get(`business_hours.${c}`);w&&w.patchValue({open:v.open||"",close:v.close||"",closed:v.closed||!1})}});let a=typeof e.category_id=="string"?e.category_id:e.category_id._id;if(a&&(yield this.onCategoryChange(a)),e.logo_url&&this.logoPreview.set(e.logo_url),e.banner_url&&this.bannerPreview.set(e.banner_url),e.sos_certification_urls&&e.sos_certification_urls.length>0){let l=e.sos_certification_urls.map(c=>({file:null,preview:c}));this.sosCertificationPreviews.set(l)}else e.sos_certification_url&&this.sosCertificationPreview.set(e.sos_certification_url)}catch(e){console.error("Error loading business for edit:",e),this.error.set("Failed to load business data. Please try again.")}finally{this.loading.set(!1)}})}onCategoryChange(s){return N(this,null,function*(){if(!s){this.subcategories.set([]),this.businessInfoForm.patchValue({subcategory_id:""});return}try{let e=yield this.businessService.getSubcategoriesAsync(s);this.subcategories.set(e)}catch(e){console.error("Error loading subcategories:",e),this.error.set("Failed to load subcategories. Please try again.")}})}submitBusiness(){return N(this,null,function*(){if(this.businessInfoForm.invalid||this.businessDetailsForm.invalid||this.businessComplianceForm.invalid){this.businessInfoForm.markAllAsTouched(),this.businessDetailsForm.markAllAsTouched(),this.businessComplianceForm.markAllAsTouched(),this.error.set("Please fill in all required fields.");return}if(!this.authService.user()){this.router.navigate(["/auth"]);return}try{this.submitting.set(!0),this.error.set(null);let e=K(K(K({},this.businessInfoForm.value),this.businessDetailsForm.getRawValue()),this.businessComplianceForm.value);console.log("businessInfoForm.value:",this.businessInfoForm.value),console.log("businessDetailsForm.value:",this.businessDetailsForm.value),console.log("businessDetailsForm.getRawValue():",this.businessDetailsForm.getRawValue()),console.log("businessComplianceForm.value:",this.businessComplianceForm.value),console.log("Combined businessData:",e),e.subcategory_id||delete e.subcategory_id;let a;if(this.isEditMode()){let c=this.businessId();if(!c)throw new Error("Business ID is required for update");console.log("Updating business with data:",e),a=yield this.businessService.updateBusinessAsync(c,e)}else console.log("Creating business with data:",e),a=yield this.businessService.createBusinessAsync(e);if(this.logoFile)try{yield this.businessService.uploadLogoAsync(a._id,this.logoFile)}catch(c){console.warn("Failed to upload logo:",c)}if(this.bannerFile)try{yield this.businessService.uploadBannerAsync(a._id,this.bannerFile)}catch(c){console.warn("Failed to upload banner:",c)}if(this.sosCertificationFiles.length>0)try{yield this.businessService.uploadMultipleSosCertificationsAsync(a._id,this.sosCertificationFiles)}catch(c){console.warn("Failed to upload multiple SOS certifications:",c)}else if(this.sosCertificationFile)try{yield this.businessService.uploadSosCertificationAsync(a._id,this.sosCertificationFile)}catch(c){console.warn("Failed to upload SOS certification:",c)}let l=this.isEditMode()?"Business updated successfully!":"Business created successfully! It is now pending approval.";this.router.navigate(["/dashboard/businesses/list"],{queryParams:{message:l}})}catch(e){console.error(`Error ${this.isEditMode()?"updating":"creating"} business:`,e);let a=this.isEditMode()?"Failed to update business. Please try again.":"Failed to create business. Please try again.";this.error.set(e?.message||a)}finally{this.submitting.set(!1)}})}nextStep(s){if(s.selectedIndex===0&&this.businessInfoForm.invalid){this.businessInfoForm.markAllAsTouched();return}if(s.selectedIndex===1&&this.businessDetailsForm.invalid){this.businessDetailsForm.markAllAsTouched();return}if(s.selectedIndex===2&&this.businessComplianceForm.invalid){this.businessComplianceForm.markAllAsTouched();return}s.next()}previousStep(s){s.previous()}goBack(){this.router.navigate(["/dashboard/businesses/list"])}loadData(){this.loadCategories()}isBusinessInfoValid(){return this.businessInfoForm.valid}isBusinessDetailsValid(){return this.businessDetailsForm.valid}isBusinessComplianceValid(){return this.businessComplianceForm.valid}isAllFormsValid(){return this.businessInfoForm.valid&&this.businessDetailsForm.valid&&this.businessComplianceForm.valid}onLogoSelected(s){let e=s.target;if(e.files&&e.files.length>0){let a=e.files[0];if(!a.type.startsWith("image/")){this.error.set("Please select a valid image file");return}if(a.size>5*1024*1024){this.error.set("Logo file size must be less than 5MB");return}this.logoFile=a;let l=new FileReader;l.onload=c=>{this.logoPreview.set(c.target?.result)},l.readAsDataURL(a),this.error.set(null)}}onBannerSelected(s){let e=s.target;if(e.files&&e.files.length>0){let a=e.files[0];if(!a.type.startsWith("image/")){this.error.set("Please select a valid image file");return}if(a.size>5*1024*1024){this.error.set("Banner file size must be less than 5MB");return}this.bannerFile=a;let l=new FileReader;l.onload=c=>{this.bannerPreview.set(c.target?.result)},l.readAsDataURL(a),this.error.set(null)}}removeLogoPreview(){this.logoFile=null,this.logoPreview.set(null)}removeBannerPreview(){this.bannerFile=null,this.bannerPreview.set(null)}onSosCertificationSelected(s){let e=s.target;if(e.files&&e.files.length>0){for(let a=0;a<e.files.length;a++){let l=e.files[a];if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/jpeg","image/jpg","image/png"].includes(l.type)){this.error.set(`File "${l.name}" is not a valid document type (PDF, DOC, DOCX, JPG, PNG)`);continue}if(l.size>10*1024*1024){this.error.set(`File "${l.name}" size must be less than 10MB`);continue}if(this.sosCertificationFiles.push(l),l.type.startsWith("image/")){let v=new FileReader;v.onload=w=>{let E=this.sosCertificationPreviews();E.push({file:l,preview:w.target?.result}),this.sosCertificationPreviews.set([...E])},v.readAsDataURL(l)}else{let v=this.sosCertificationPreviews();v.push({file:l,preview:l.name}),this.sosCertificationPreviews.set([...v])}}this.error.set(null)}e.value=""}removeSosCertificationFile(s){if(s.file){let a=this.sosCertificationFiles.findIndex(l=>l===s.file);a>-1&&this.sosCertificationFiles.splice(a,1)}let e=this.sosCertificationPreviews().filter(a=>a!==s);this.sosCertificationPreviews.set(e)}removeSosCertificationPreview(){this.sosCertificationFile=null,this.sosCertificationPreview.set(null)}getFieldError(s,e){let a=s.get(e);return!a||!a.touched||!a.errors?null:a.errors.required?`${e.charAt(0).toUpperCase()+e.slice(1)} is required`:a.errors.minlength?`${e.charAt(0).toUpperCase()+e.slice(1)} must be at least ${a.errors.minlength.requiredLength} characters`:a.errors.email?"Please enter a valid email address":a.errors.usaPhone?a.errors.usaPhone.message:"This field is invalid"}formatBusinessStage(s){return s?s.replace(/_/g," "):""}get contact_phone(){return this.businessDetailsForm.get("contact_phone")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=q({type:n,selectors:[["app-create-business"]],viewQuery:function(e,a){if(e&1&&Se(Et,5),e&2){let l;we(l=Ee())&&(a.addressInput=l.first)}},decls:4,vars:1,consts:[["stepper",""],["addressInput",""],["logoInput",""],["bannerInput",""],["sosCertificationInput",""],[1,"min-h-screen","bg-gray-50"],[1,"flex","justify-center","items-center","py-20"],[1,"max-w-2xl","mx-auto","px-4","sm:px-6","lg:px-8","py-12"],[1,"max-w-3xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-blue-600"],[1,"text-center","py-12","bg-white","rounded-lg","shadow-sm","border","border-gray-200"],[1,"text-red-400","mb-4"],[1,"text-6xl"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"space-x-4"],[1,"bg-gray-600","text-white","px-4","py-2","rounded-lg","hover:bg-gray-700","transition-colors",3,"click"],[1,"bg-blue-600","text-white","px-4","py-2","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"mb-8"],[1,"mb-4","flex","items-center","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],[1,"mr-2"],[1,"text-center"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"w-full"],[1,"business-stepper",3,"linear","orientation"],["label","Business Information",3,"stepControl"],[1,"p-6","space-y-6",3,"formGroup"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"text-gray-600","mb-6"],["appearance","outline",1,"w-full"],["matInput","","formControlName","name","placeholder","Enter your business name","required",""],["matInput","","formControlName","description","rows","4","placeholder","Describe what your business does, your services, and what makes you unique...","required",""],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline"],["formControlName","business_type","required",""],["value","service"],["value","product"],["value","both"],["formControlName","category_id","required","",3,"selectionChange"],[3,"value"],[1,"flex","flex-col","md:flex-row","justify-end","gap-4","items-start","md:items-center"],[1,"text-sm","text-amber-600","flex","items-center","order-2","md:order-1"],["type","button","mat-raised-button","","color","primary",1,"flex","items-center","order-1","md:order-2","w-full","md:w-auto",3,"click","disabled"],[1,"ml-2"],["label","Contact & Location",3,"stepControl"],["autocomplete","off",1,"p-6","space-y-6",3,"formGroup"],[1,"text-md","font-medium","text-gray-900","mb-3"],[1,"space-y-4"],["matInput","","formControlName","address","autocomplete","off","placeholder","Start typing your business address..."],["matSuffix",""],["matPrefix",""],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-3","text-sm","text-blue-800"],[1,"flex","items-start"],[1,"text-blue-600","mr-2","mt-0.5","text-base"],["matInput","","formControlName","city","placeholder","Enter city","required",""],["matSuffix","",1,"text-gray-400"],["matInput","","formControlName","state","placeholder","State"],[1,"flex","gap-4","items-start"],["appearance","outline",1,"flex-1"],["matInput","","formControlName","postal_code","placeholder","Postal code"],[1,"flex","flex-col","gap-2","pt-1"],["type","button",1,"flex","items-center","justify-center","px-3","py-1.5","text-xs","h-8","min-w-[80px]","border","border-blue-300","text-blue-600","bg-white","rounded-md","hover:bg-blue-50","transition-colors",3,"click"],[1,"mr-1",2,"font-size","14px","width","14px","height","14px"],["type","button",1,"flex","items-center","justify-center","px-3","py-1.5","text-xs","h-8","min-w-[80px]","border","border-red-300","text-red-600","bg-white","rounded-md","hover:bg-red-50","transition-colors",3,"click"],[1,"mt-3","p-2","rounded-md","text-xs"],[1,"flex","items-center","text-green-700","bg-green-50","p-2","rounded-md","border","border-green-200"],[1,"flex","items-center","text-amber-700","bg-amber-50","p-2","rounded-md","border","border-amber-200"],["matInput","","type","email","formControlName","contact_email","placeholder","business@example.com"],["matInput","","type","tel","appPhoneFormat","","formControlName","contact_phone","placeholder","+1 (555) 123-4567"],["matInput","","type","url","formControlName","website","placeholder","https://your-website.com"],[1,"space-y-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"flex","items-center","space-x-4"],[1,"relative"],[1,"w-20","h-20","border-2","border-dashed","border-gray-300","rounded-lg","flex","items-center","justify-center"],[1,"flex-1"],["type","file","accept","image/*",1,"hidden",3,"change"],["type","button",1,"flex","items-center","justify-center","px-4","py-2","border","border-gray-300","text-gray-700","bg-white","rounded-md","hover:bg-gray-50","transition-colors",3,"click"],[1,"text-xs","text-gray-500","mt-1"],[1,"w-full","h-32","border-2","border-dashed","border-gray-300","rounded-lg","flex","items-center","justify-center"],[1,"text-xs","text-gray-500","mb-3"],[1,"w-full","h-24","border-2","border-dashed","border-gray-300","rounded-lg","flex","items-center","justify-center"],["type","file","accept",".pdf,.doc,.docx,.jpg,.jpeg,.png","multiple","",1,"hidden",3,"change"],[1,"flex","flex-col","md:flex-row","gap-4","justify-between","items-stretch","md:items-center"],["type","button","mat-stroked-button","","color","accent",1,"flex","items-center","justify-center","w-full","md:w-auto","order-2","md:order-1",3,"click"],[1,"flex","flex-col","md:flex-row","gap-4","items-stretch","md:items-center","order-1","md:order-2","w-full","md:w-auto"],[1,"text-sm","text-amber-600","flex","items-center"],["type","button","mat-raised-button","","color","primary",1,"flex","items-center","justify-center","w-full","md:w-auto",3,"click","disabled"],["label","Compliance & Operations",3,"stepControl"],["formControlName","business_stage","required",""],["value","side_gig"],["value","startup"],["value","growing_business"],["value","established_business"],["formGroupName","business_hours"],[1,"space-y-3"],[1,"flex","items-center","gap-3","p-3","bg-gray-50","rounded-lg",3,"formGroupName"],[1,"flex","items-center","gap-4"],[1,"text-sm","font-medium","text-gray-700"],["formControlName","business_registered",1,"flex","gap-4"],["matInput","","formControlName","tax_id","placeholder","SSN: 888-88-8888 or EIN: 88-8888888","maxlength","12"],["formControlName","is_certified_wbe_mbe",1,"flex","gap-4"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-4"],["formControlName","woman_owned_attestation","required","",1,"text-sm"],[1,"font-medium","text-gray-900"],[1,"text-red-600","text-xs","mt-2","ml-8"],["label","Review & Submit"],[1,"p-6","space-y-6"],[1,"bg-gray-50","rounded-lg","p-6","space-y-4"],[1,"border-b","border-gray-200","pb-4"],[1,"font-medium","text-gray-900","mb-2"],[1,"space-y-2"],[1,"text-sm","font-medium","text-gray-600"],[1,"ml-2","text-gray-900"],[1,"ml-2","text-gray-900","mt-1","text-sm"],[1,"font-medium","text-gray-900","mb-3"],[1,"mb-4"],[1,"text-sm","font-medium","text-gray-600","block","mb-2"],[1,"flex","items-center"],[1,"flex","items-center","text-gray-500"],[1,"border-t","border-gray-200","pt-4"],[1,"text-sm","text-gray-600","space-y-1"],[1,"text-green-600","mr-2","text-base"],[1,"text-sm","text-red-600","flex","items-center"],["formControlName","subcategory_id"],["value",""],[1,"text-sm","mr-1"],[1,"text-sm","mr-2"],["alt","Logo preview",1,"w-20","h-20","object-cover","rounded-lg","border",3,"src"],["type","button",1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-6","h-6","flex","items-center","justify-center","hover:bg-red-600",3,"click"],[1,"text-sm"],[1,"text-gray-400"],["alt","Banner preview",1,"w-full","h-32","object-cover","rounded-lg","border",3,"src"],["type","button",1,"absolute","top-2","right-2","bg-red-500","text-white","rounded-full","w-8","h-8","flex","items-center","justify-center","hover:bg-red-600",3,"click"],[1,"text-gray-400","text-4xl","mb-2"],[1,"text-gray-500"],[1,"w-full","h-32","object-cover","rounded-lg","border",3,"src","alt"],["alt","SOS Certification",1,"w-full","h-32","object-cover","rounded-lg","border",3,"src"],[1,"w-full","p-4","border-2","border-gray-300","rounded-lg","bg-gray-50","flex","items-center"],[1,"text-blue-600","text-3xl","mr-3"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-xs","text-gray-500"],["alt","SOS Certification preview",1,"w-full","h-32","object-cover","rounded-lg","border",3,"src"],[1,"text-gray-400","text-3xl","mb-2"],[1,"text-gray-500","text-sm"],[1,"w-28","font-medium","text-gray-700","capitalize"],["formControlName","closed",1,"mr-3"],["matInput","","type","time","formControlName","open",3,"disabled"],["matInput","","type","time","formControlName","close",3,"disabled"],["formControlName","registered_state","required",""],[1,"text-sm","align-middle"],["alt","Business Logo",1,"w-16","h-16","object-cover","rounded-lg","border","border-gray-200",3,"src"],[1,"ml-3"],[1,"text-sm","text-gray-900","font-medium"],[1,"w-16","h-16","bg-gray-100","rounded-lg","border","border-gray-200","flex","items-center","justify-center"],[1,"text-xs"],["alt","Banner Image",1,"w-full","max-w-md","h-24","object-cover","rounded-lg","border","border-gray-200",3,"src"],[1,"text-green-600","text-base","mr-2"],[1,"w-full","max-w-md","h-24","bg-gray-100","rounded-lg","border","border-gray-200","flex","items-center","justify-center"],[1,"text-gray-400","text-2xl"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-3"],[1,"border","border-gray-200","rounded-lg","p-3"],[1,"flex","items-center","p-2","bg-blue-50","rounded","border"],[1,"w-full","h-20","object-cover","rounded","border","mb-2",3,"src","alt"],[1,"text-blue-600","text-sm","mr-1"],[1,"text-xs","text-gray-900","font-medium","truncate"],["alt","SOS Certification",1,"w-full","h-20","object-cover","rounded","border","mb-2",3,"src"],[1,"text-xs","text-gray-900","font-medium"],[1,"text-blue-600","text-2xl","mr-2"],[1,"flex-1","min-w-0"],[1,"text-xs","font-medium","text-gray-900","truncate"],["alt","SOS Certification",1,"w-full","max-w-md","h-24","object-cover","rounded-lg","border","border-gray-200",3,"src"],[1,"border","border-gray-200","rounded-lg","p-3","bg-blue-50","max-w-md"],[1,"text-blue-600","text-2xl","mr-3"],[1,"w-20","h-16","bg-gray-100","rounded-lg","border","border-gray-200","flex","items-center","justify-center"],[1,"ml-2","text-gray-900","capitalize"],[1,"bg-green-50","border","border-green-200","rounded-lg","p-3","mt-2"],[1,"ml-2","space-y-1","text-sm"],[1,"text-gray-700"],[1,"font-medium","capitalize"],[1,"ml-2","text-gray-900","font-mono"],[1,"text-green-600","mr-2","text-base","mt-0.5"],[1,"text-sm","text-green-900"],[1,"mr-2","animate-spin"]],template:function(e,a){e&1&&(i(0,"div",5),u(1,Bt,2,0,"div",6)(2,Ft,12,1,"div",7)(3,Wi,365,70,"div",8),t()),e&2&&(r(),p(a.loading()?1:a.error()?2:3))},dependencies:[X,Qe,qe,je,Ae,Oe,He,We,Ge,ze,$e,nt,it,Ke,Ze,Xe,et,tt,rt,at,st,ot,Me,Pe,Ve,De,Ie,Ne,Le,gt,xt,ft,dt,lt,ut,mt,ct,_t],styles:["@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.success-message[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;padding:24px;border-radius:12px;text-align:center}.success-message[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px}.error-state[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]     .mat-form-field-outline-thick{color:#ef4444!important}.error-state[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]     .mat-form-field-label{color:#ef4444!important}.error-state[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]     .mat-error{color:#ef4444;font-size:12px;margin-top:4px}"]})};var Yi=(n,s)=>s.id,St=(n,s)=>s._id;function Ji(n,s){if(n&1){let e=M();i(0,"button",30),f("click",function(){g(e);let l=d();return C(l.clearSearch())}),S(),i(1,"svg",31),_(2,"path",32),t()()}}function Qi(n,s){if(n&1&&(i(0,"option",21),o(1),t()),n&2){let e=s.$implicit;x("value",e.id),r(),b(e.name)}}function Ki(n,s){if(n&1&&(i(0,"div",28)(1,"div",33),S(),i(2,"svg",34),_(3,"path",35),t(),D(),i(4,"div")(5,"h3",36),o(6,"Error"),t(),i(7,"p",37),o(8),t()()()()),n&2){let e=d();r(8),b(e.error())}}function Xi(n,s){n&1&&(i(0,"div",29),_(1,"div",38),i(2,"span",39),o(3,"Loading businesses..."),t()())}function Zi(n,s){if(n&1){let e=M();i(0,"div",41),S(),i(1,"svg",42),_(2,"path",14),t()(),D(),i(3,"h3",43),o(4,"No businesses found"),t(),i(5,"p",44),o(6,"Try adjusting your search term or filter to find what you're looking for."),t(),i(7,"button",45),f("click",function(){g(e);let l=d(3);return l.clearSearch(),C(l.selectedCategory.set("all"))}),o(8," Clear Filters "),t()}}function en(n,s){if(n&1){let e=M();i(0,"div",41),S(),i(1,"svg",42),_(2,"path",46),t()(),D(),i(3,"h3",43),o(4,"No businesses yet"),t(),i(5,"p",44),o(6,"Get started by creating your first business listing."),t(),i(7,"button",47),f("click",function(){g(e);let l=d(3);return C(l.navigateToCreateBusiness())}),S(),i(8,"svg",48),_(9,"path",8),t(),o(10," Create Your First Business "),t()}}function tn(n,s){if(n&1&&(i(0,"div",40),u(1,Zi,9,0)(2,en,11,0),t()),n&2){let e=d(2);r(),p(e.searchTerm()||e.selectedCategory()!=="all"?1:2)}}function nn(n,s){if(n&1&&_(0,"img",53),n&2){let e=d().$implicit;x("src",e.banner_url,F)("alt",e.name+" banner")}}function on(n,s){n&1&&(i(0,"div",54),S(),i(1,"svg",79),_(2,"path",46),t()())}function sn(n,s){n&1&&(i(0,"div",57)(1,"span",80),o(2," Featured "),t()())}function an(n,s){if(n&1&&_(0,"img",53),n&2){let e=d().$implicit;x("src",e.logo_url,F)("alt",e.name+" logo")}}function rn(n,s){n&1&&(i(0,"div",61),S(),i(1,"svg",81),_(2,"path",82),t()())}function ln(n,s){if(n&1&&(i(0,"p",65),S(),i(1,"svg",83),_(2,"path",84)(3,"path",85),t(),o(4),t()),n&2){let e=d().$implicit;r(4),O(" ",e.city,", ",e.state," ")}}function dn(n,s){if(n&1&&(i(0,"span",87),o(1),t()),n&2){let e=s.$implicit;r(),h(" ",e," ")}}function mn(n,s){if(n&1&&(i(0,"span",87),o(1),t()),n&2){let e=d(2).$implicit;r(),h(" +",e.tags.length-2," ")}}function cn(n,s){if(n&1&&(i(0,"div",69)(1,"div",86),T(2,dn,2,1,"span",87,G),u(4,mn,2,1,"span",87),t()()),n&2){let e=d().$implicit;r(2),k(e.tags.slice(0,2)),r(2),p(e.tags.length>2?4:-1)}}function un(n,s){if(n&1){let e=M();i(0,"div",51)(1,"div",52),u(2,nn,1,2,"img",53)(3,on,3,0,"div",54),i(4,"div",55)(5,"span",56),o(6),t()(),u(7,sn,3,0,"div",57),t(),i(8,"div",58)(9,"div",59)(10,"div",60),u(11,an,1,2,"img",53)(12,rn,3,0,"div",61),t()(),i(13,"div",62)(14,"h3",63),o(15),t(),i(16,"p",64),o(17),t(),u(18,ln,5,2,"p",65),t(),i(19,"p",66),o(20),t(),i(21,"div",67)(22,"span",68),o(23),t()(),u(24,cn,5,1,"div",69),i(25,"div",70)(26,"button",71),f("click",function(){let l=g(e).$implicit,c=d(4);return C(c.viewBusiness(l._id))}),S(),i(27,"svg",72),_(28,"path",73)(29,"path",74),t(),o(30," View "),t(),D(),i(31,"button",75),f("click",function(){let l=g(e).$implicit,c=d(4);return C(c.editBusiness(l._id))}),S(),i(32,"svg",72),_(33,"path",76),t(),o(34," Edit "),t(),D(),i(35,"button",77),f("click",function(){let l=g(e).$implicit,c=d(4);return C(c.deleteBusiness(l._id))}),S(),i(36,"svg",72),_(37,"path",78),t(),o(38," Delete "),t()()()()}if(n&2){let e=s.$implicit,a=d(4);r(2),p(e.banner_url?2:3),r(3),A(a.getStatusColor(e)),r(),h(" ",a.getStatusText(e)," "),r(),p(e.is_featured?7:-1),r(4),p(e.logo_url?11:12),r(4),b(e.name),r(2),b(a.getCategoryName(e)),r(),p(e.city&&e.state?18:-1),r(2),h(" ",e.short_description||e.description||"No description available"," "),r(2),A(a.getBusinessTypeColor(e.business_type)),r(),h(" ",a.getBusinessTypeText(e.business_type)," "),r(),p(e.tags&&e.tags.length>0?24:-1)}}function pn(n,s){if(n&1&&(i(0,"div",49),T(1,un,39,14,"div",51,St),t()),n&2){let e=d(3);r(),k(e.filteredBusinesses())}}function _n(n,s){if(n&1&&_(0,"img",91),n&2){let e=d().$implicit;x("src",e.logo_url,F)("alt",e.name)}}function xn(n,s){n&1&&(S(),i(0,"svg",81),_(1,"path",46),t())}function fn(n,s){n&1&&(i(0,"span",95),o(1," Featured "),t())}function gn(n,s){if(n&1&&(i(0,"span"),o(1),t(),i(2,"span"),o(3,"\u2022"),t()),n&2){let e=d().$implicit;r(),O("",e.city,", ",e.state)}}function Cn(n,s){if(n&1){let e=M();i(0,"div",88)(1,"div",89)(2,"div",90),u(3,_n,1,2,"img",91)(4,xn,2,0,":svg:svg",81),t(),i(5,"div",92)(6,"div",93)(7,"h3",94),o(8),t(),i(9,"span",68),o(10),t(),u(11,fn,2,0,"span",95),i(12,"span",68),o(13),t()(),i(14,"p",96),o(15),t(),i(16,"p",97),o(17),t(),i(18,"div",98),u(19,gn,4,2),i(20,"span"),o(21),t(),i(22,"span"),o(23,"\u2022"),t(),i(24,"span"),o(25),t()()(),i(26,"div",99)(27,"button",100),f("click",function(){let l=g(e).$implicit,c=d(4);return C(c.viewBusiness(l._id))}),S(),i(28,"svg",101),_(29,"path",73)(30,"path",74),t()(),D(),i(31,"button",102),f("click",function(){let l=g(e).$implicit,c=d(4);return C(c.editBusiness(l._id))}),S(),i(32,"svg",101),_(33,"path",76),t()(),D(),i(34,"button",103),f("click",function(){let l=g(e).$implicit,c=d(4);return C(c.deleteBusiness(l._id))}),S(),i(35,"svg",101),_(36,"path",78),t()()()()()}if(n&2){let e=s.$implicit,a=d(4);r(3),p(e.logo_url?3:4),r(5),b(e.name),r(),A(a.getStatusColor(e)),r(),h(" ",a.getStatusText(e)," "),r(),p(e.is_featured?11:-1),r(),A(a.getBusinessTypeColor(e.business_type)),r(),h(" ",a.getBusinessTypeText(e.business_type)," "),r(2),b(a.getCategoryName(e)),r(2),h(" ",e.short_description||e.description||"No description available"," "),r(2),p(e.city&&e.state?19:-1),r(2),b(e.status),r(4),h("Created ",a.formatDate(e.createdAt))}}function bn(n,s){if(n&1&&(i(0,"div",50),T(1,Cn,37,14,"div",88,St),t()),n&2){let e=d(3);r(),k(e.filteredBusinesses())}}function vn(n,s){if(n&1&&(u(0,pn,3,0,"div",49),u(1,bn,3,0,"div",50)),n&2){let e=d(2);p(e.viewMode()==="grid"?0:-1),r(),p(e.viewMode()==="list"?1:-1)}}function hn(n,s){if(n&1&&u(0,tn,3,1,"div",40)(1,vn,2,2),n&2){let e=d();p(e.filteredBusinesses().length===0?0:1)}}var oe=class n{authService=I(ie);router=I(ee);businessService=I(ne);route=I(Z);userBusinesses=y([]);loading=y(!1);error=y(null);searchTerm=y("");viewMode=y("grid");selectedCategory=y("all");user=this.authService.user;filteredBusinesses=Be(()=>{let s=this.userBusinesses(),e=this.searchTerm().toLowerCase().trim(),a=this.selectedCategory();return a!=="all"&&(s=s.filter(l=>typeof l.category_id=="string"?l.category_id===a:l.category_id?._id===a||l.category_id?.name?.toLowerCase()===a.toLowerCase())),e&&(s=s.filter(l=>l.name.toLowerCase().includes(e)||l.description?.toLowerCase().includes(e)||l.short_description?.toLowerCase().includes(e)||l.city?.toLowerCase().includes(e)||l.state?.toLowerCase().includes(e)||l.tags?.some(c=>c.toLowerCase().includes(e)))),s});ngOnInit(){if(!this.user()){this.router.navigate(["/auth"]);return}this.loadData()}loadData(){return N(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let s=yield this.businessService.getMyBusinessesAsync();this.userBusinesses.set(s)}catch(s){console.error("Error loading businesses:",s),this.error.set("Failed to load businesses. Please try again.")}finally{this.loading.set(!1)}})}onSearchChange(s){let e=s.target;this.searchTerm.set(e.value)}clearSearch(){this.searchTerm.set("")}onCategoryFilterChange(s){let e=s.target;this.selectedCategory.set(e.value)}setViewMode(s){this.viewMode.set(s)}navigateToCreateBusiness(){this.router.navigate(["../create-business"],{relativeTo:this.route})}editBusiness(s){console.log("Editing business with ID:",s),this.router.navigate(["../edit",s],{relativeTo:this.route})}viewBusiness(s){this.router.navigate(["/business/profile",s])}getStatusColor(s){switch(s.status){case"approved":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"rejected":return"bg-red-100 text-red-800";case"suspended":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}getStatusText(s){switch(s.status){case"approved":return"Approved";case"pending":return"Pending";case"rejected":return"Rejected";case"suspended":return"Suspended";default:return"Unknown"}}getCategoryName(s){return typeof s.category_id=="string"?s.category_id:s.category_id?.name||"No Category"}formatDate(s){try{return(typeof s=="string"?new Date(s):s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Unknown"}}getBusinessTypeColor(s){return{service:"bg-blue-100 text-blue-800",product:"bg-purple-100 text-purple-800",both:"bg-indigo-100 text-indigo-800"}[s]||"bg-gray-100 text-gray-800"}getBusinessTypeText(s){return{service:"Service",product:"Product",both:"Service & Product"}[s]||s}deleteBusiness(s){return N(this,null,function*(){if(confirm("Are you sure you want to delete this business? This action cannot be undone."))try{yield this.businessService.deleteBusiness(s),this.loadData()}catch(e){console.error("Error deleting business:",e),this.error.set("Failed to delete business. Please try again.")}})}getUniqueCategories(){let s=new Set,e=[];return this.userBusinesses().forEach(a=>{if(typeof a.category_id=="string")s.has(a.category_id)||(s.add(a.category_id),e.push({id:a.category_id,name:a.category_id}));else if(a.category_id&&typeof a.category_id=="object"){let l=a.category_id;l._id&&l.name&&!s.has(l._id)&&(s.add(l._id),e.push({id:l._id,name:l.name}))}}),e}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=q({type:n,selectors:[["app-list-businesses"]],decls:44,vars:11,consts:[[1,"min-h-screen","bg-gray-50","p-6"],[1,"max-w-7xl","mx-auto"],[1,"mb-8"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600"],[1,"inline-flex","items-center","px-4","py-2","bg-gray-900","text-white","rounded-lg","transition-colors","font-medium","hover:bg-gray-800",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"bg-white","rounded-lg","border","border-gray-200","p-4"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","gap-4"],[1,"relative","flex-1","max-w-md"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","Search businesses...",1,"block","w-full","pl-10","pr-10","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-gray-900","focus:border-transparent",3,"input","value"],[1,"absolute","inset-y-0","right-0","pr-3","flex","items-center","text-gray-400","hover:text-gray-600"],[1,"flex","items-center","space-x-2"],["for","category-filter",1,"text-sm","text-gray-600"],["id","category-filter",1,"border","border-gray-300","rounded-lg","px-3","py-2","text-sm","focus:ring-2","focus:ring-gray-900","focus:border-transparent",3,"change","value"],["value","all"],[3,"value"],[1,"text-sm","text-gray-600"],[1,"flex","bg-gray-100","rounded-lg","p-1"],[1,"p-2","rounded-md","transition-all","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 10h16M4 14h16M4 18h16"],[1,"mb-6","bg-red-50","border-l-4","border-red-400","p-4","rounded-r-lg"],[1,"flex","items-center","justify-center","py-12"],[1,"absolute","inset-y-0","right-0","pr-3","flex","items-center","text-gray-400","hover:text-gray-600",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-red-400","mr-3"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"text-sm","font-medium","text-red-800"],[1,"mt-1","text-sm","text-red-700"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-gray-900"],[1,"ml-3","text-gray-600"],[1,"bg-white","rounded-xl","border","border-gray-200","p-12","text-center"],[1,"p-4","bg-gray-50","rounded-full","w-20","h-20","mx-auto","mb-6","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-gray-300"],[1,"text-xl","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],[1,"inline-flex","items-center","px-4","py-2","border","border-gray-300","text-gray-700","rounded-lg","hover:bg-gray-50","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"inline-flex","items-center","px-6","py-3","bg-gray-900","text-white","rounded-lg","hover:bg-gray-800","transition-colors","font-medium",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"space-y-4"],[1,"bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-lg","transition-all","duration-200","overflow-hidden","group"],[1,"relative","h-32","bg-gradient-to-br","from-gray-100","to-gray-200","overflow-hidden"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"w-full","h-full","bg-gradient-to-br","from-blue-50","to-indigo-100","flex","items-center","justify-center"],[1,"absolute","top-3","right-3"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","backdrop-blur-sm"],[1,"absolute","top-3","left-3"],[1,"relative","px-6","pb-6"],[1,"flex","justify-center","-mt-8","mb-4"],[1,"w-16","h-16","rounded-full","bg-white","shadow-lg","ring-2","ring-white","overflow-hidden"],[1,"w-full","h-full","bg-gray-100","flex","items-center","justify-center"],[1,"text-center","mb-4"],[1,"text-lg","font-semibold","text-gray-900","truncate","mb-1"],[1,"text-sm","text-gray-600","mb-1"],[1,"text-xs","text-gray-500","flex","items-center","justify-center"],[1,"text-sm","text-gray-600","mb-4","line-clamp-2","text-center"],[1,"flex","items-center","justify-center","mb-4"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium"],[1,"mb-4"],[1,"flex","items-center","justify-center","space-x-2","pt-4","border-t","border-gray-100"],["title","View Business",1,"flex","items-center","px-3","py-2","text-sm","text-gray-600","hover:text-blue-600","hover:bg-blue-50","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["title","Edit Business",1,"flex","items-center","px-3","py-2","text-sm","text-gray-600","hover:text-green-600","hover:bg-green-50","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["title","Delete Business",1,"flex","items-center","px-3","py-2","text-sm","text-red-600","hover:text-red-700","hover:bg-red-50","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-gray-300"],[1,"bg-yellow-100","text-yellow-800","inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","backdrop-blur-sm"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"flex","flex-wrap","gap-1","justify-center"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","bg-gray-100","text-gray-800"],[1,"bg-white","rounded-lg","border","border-gray-200","p-6","hover:shadow-md","transition-all","duration-200"],[1,"flex","items-center","space-x-6"],[1,"h-16","w-16","rounded-lg","bg-gray-100","flex","items-center","justify-center","flex-shrink-0","overflow-hidden"],[1,"h-full","w-full","object-cover",3,"src","alt"],[1,"flex-1","min-w-0"],[1,"flex","items-center","space-x-3","mb-2"],[1,"text-xl","font-semibold","text-gray-900","truncate"],[1,"bg-yellow-100","text-yellow-800","inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium"],[1,"text-sm","text-gray-600","mb-2"],[1,"text-sm","text-gray-700","line-clamp-2","mb-2"],[1,"flex","items-center","space-x-4","text-sm","text-gray-500"],[1,"flex","items-center","space-x-3","flex-shrink-0"],["title","View Business",1,"p-2","text-gray-600","hover:text-gray-900","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["title","Edit Business",1,"p-2","text-gray-600","hover:text-gray-900","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["title","Delete Business",1,"p-2","text-red-600","hover:text-red-700","hover:bg-red-50","rounded-lg","transition-colors",3,"click"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"h1",4),o(6,"My Businesses"),t(),i(7,"p",5),o(8,"Manage all your business listings"),t()(),i(9,"a",6),f("click",function(){return a.navigateToCreateBusiness()}),S(),i(10,"svg",7),_(11,"path",8),t(),o(12," New Business "),t()(),D(),i(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",12),S(),i(17,"svg",13),_(18,"path",14),t()(),D(),i(19,"input",15),f("input",function(c){return a.onSearchChange(c)}),t(),u(20,Ji,3,0,"button",16),t(),i(21,"div",17)(22,"label",18),o(23,"Category:"),t(),i(24,"select",19),f("change",function(c){return a.onCategoryFilterChange(c)}),i(25,"option",20),o(26,"All Categories"),t(),T(27,Qi,2,2,"option",21,Yi),t()(),i(29,"div",17)(30,"span",22),o(31,"View:"),t(),i(32,"div",23)(33,"button",24),f("click",function(){return a.setViewMode("grid")}),S(),i(34,"svg",25),_(35,"path",26),t()(),D(),i(36,"button",24),f("click",function(){return a.setViewMode("list")}),S(),i(37,"svg",25),_(38,"path",27),t()()()(),D(),i(39,"div",22),o(40),t()()()(),u(41,Ki,9,1,"div",28),u(42,Xi,4,0,"div",29)(43,hn,2,1),t()()),e&2&&(r(19),x("value",a.searchTerm()),r(),p(a.searchTerm()?20:-1),r(4),x("value",a.selectedCategory()),r(3),k(a.getUniqueCategories()),r(6),A(a.viewMode()==="grid"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),r(3),A(a.viewMode()==="list"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),r(4),O(" ",a.filteredBusinesses().length," of ",a.userBusinesses().length," businesses "),r(),p(a.error()?41:-1),r(),p(a.loading()?42:43))},dependencies:[X,te,Je,Ue,Re],encapsulation:2})};var se=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=q({type:n,selectors:[["app-businesses"]],decls:1,vars:0,template:function(e,a){e&1&&_(0,"router-outlet")},dependencies:[te,Fe],encapsulation:2})};var Eo=[{path:"",component:se,children:[{path:"list",component:oe},{path:"create-business",component:H},{path:"edit/:id",component:H},{path:"",redirectTo:"list",pathMatch:"full"}]}];export{Eo as BUSINESSES_ROUTES};
