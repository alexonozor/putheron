import{a as p}from"./chunk-RQP5UGHG.js";import{Z as a,da as n,kd as l,o as r}from"./chunk-QKXNVIL2.js";import{d as t}from"./chunk-QEZ3K4DX.js";var c=class o{http=n(l);config=n(p);getApiUrl(e){return this.config.getApiUrl(`/admin/roles${e}`)}createPermission(e){return this.http.post(this.getApiUrl("/permissions"),e)}createPermissionAsync(e){return t(this,null,function*(){let s=yield r(this.createPermission(e));if(!s.success||!s.data)throw new Error(s.error||"Failed to create permission");return s.data})}getAllPermissions(e){let s={};return e?.module&&(s.module=e.module),e?.action&&(s.action=e.action),e?.is_active!==void 0&&(s.is_active=e.is_active.toString()),e?.search&&(s.search=e.search),this.http.get(this.getApiUrl("/permissions"),{params:s})}getAllPermissionsAsync(e){return t(this,null,function*(){let s=yield r(this.getAllPermissions(e));if(!s.success||!s.data)throw new Error(s.error||"Failed to fetch permissions");return s.data})}getPermissionById(e){return this.http.get(this.getApiUrl(`/permissions/${e}`))}getPermissionByIdAsync(e){return t(this,null,function*(){let s=yield r(this.getPermissionById(e));if(!s.success||!s.data)throw new Error(s.error||"Failed to fetch permission");return s.data})}updatePermission(e,s){return this.http.put(this.getApiUrl(`/permissions/${e}`),s)}updatePermissionAsync(e,s){return t(this,null,function*(){let i=yield r(this.updatePermission(e,s));if(!i.success||!i.data)throw new Error(i.error||"Failed to update permission");return i.data})}deletePermission(e){return this.http.delete(this.getApiUrl(`/permissions/${e}`))}deletePermissionAsync(e){return t(this,null,function*(){yield r(this.deletePermission(e))})}createRole(e){return this.http.post(this.getApiUrl(""),e)}createRoleAsync(e){return t(this,null,function*(){let s=yield r(this.createRole(e));if(!s.success||!s.data)throw new Error(s.error||"Failed to create role");return s.data})}getAllRoles(e){let s={};return e?.is_active!==void 0&&(s.is_active=e.is_active.toString()),e?.is_system_role!==void 0&&(s.is_system_role=e.is_system_role.toString()),e?.search&&(s.search=e.search),this.http.get(this.getApiUrl(""),{params:s})}getAllRolesAsync(e){return t(this,null,function*(){let s=yield r(this.getAllRoles(e));if(!s.success||!s.data)throw new Error(s.error||"Failed to fetch roles");return s.data})}getRoleById(e){return this.http.get(this.getApiUrl(`/${e}`))}getRoleByIdAsync(e){return t(this,null,function*(){let s=yield r(this.getRoleById(e));if(!s.success||!s.data)throw new Error(s.error||"Failed to fetch role");return s.data})}updateRole(e,s){return this.http.put(this.getApiUrl(`/${e}`),s)}updateRoleAsync(e,s){return t(this,null,function*(){let i=yield r(this.updateRole(e,s));if(!i.success||!i.data)throw new Error(i.error||"Failed to update role");return i.data})}deleteRole(e){return this.http.delete(this.getApiUrl(`/${e}`))}deleteRoleAsync(e){return t(this,null,function*(){yield r(this.deleteRole(e))})}getRoleUsers(e){return this.http.get(this.getApiUrl(`/${e}/users`))}getRoleUsersAsync(e){return t(this,null,function*(){let s=yield r(this.getRoleUsers(e));if(!s.success||!s.data)throw new Error(s.error||"Failed to fetch role users");return s.data})}assignRole(e){return this.http.post(this.getApiUrl("/assign"),e)}assignRoleAsync(e){return t(this,null,function*(){let s=yield r(this.assignRole(e));if(!s.success||!s.data)throw new Error(s.error||"Failed to assign role");return s.data})}removeRole(e,s){return this.http.delete(this.getApiUrl(`/users/${e}/roles/${s}`))}removeRoleAsync(e,s){return t(this,null,function*(){yield r(this.removeRole(e,s))})}getUserRoles(e){return this.http.get(this.getApiUrl(`/users/${e}/roles`))}getUserRolesAsync(e){return t(this,null,function*(){let s=yield r(this.getUserRoles(e));if(!s.success||!s.data)throw new Error(s.error||"Failed to fetch user roles");return s.data})}getUserPermissions(e){return this.http.get(this.getApiUrl(`/users/${e}/permissions`))}getUserPermissionsAsync(e){return t(this,null,function*(){let s=yield r(this.getUserPermissions(e));if(!s.success||!s.data)throw new Error(s.error||"Failed to fetch user permissions");return s.data})}initializeSystem(){return this.http.post(this.getApiUrl("/initialize"),{})}initializeSystemAsync(){return t(this,null,function*(){let e=yield r(this.initializeSystem());if(!e.success)throw new Error(e.error||"Failed to initialize system")})}static \u0275fac=function(s){return new(s||o)};static \u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"})};export{c as a};
