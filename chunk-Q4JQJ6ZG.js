import{a as p}from"./chunk-IZ7UM5CL.js";import{A as c,B as g}from"./chunk-REOVWAHI.js";import{$ as d,fa as i,o as a}from"./chunk-BEPULU6C.js";import{e as n}from"./chunk-JKOY2XUY.js";var u=class o{http=i(g);configService=i(p);get apiUrl(){return this.configService.getApiUrl("/admin/projects")}getProjects(e={}){let t=new c;return Object.entries(e).forEach(([s,r])=>{r!=null&&r!==""&&(t=t.set(s,r.toString()))}),this.http.get(this.apiUrl,{params:t})}getProjectsAsync(){return n(this,arguments,function*(e={}){let t=yield a(this.getProjects(e)),s=e.limit||25,r=t.data.page||1,b=t.data.total||0,l=t.data.totalPages||0;return{projects:t.data.projects||[],pagination:{total:b,totalPages:l,currentPage:r,perPage:s,hasNext:r<l,hasPrev:r>1},stats:null}})}getProjectStats(){return this.http.get(`${this.apiUrl}/stats`)}getProjectStatsAsync(){return n(this,null,function*(){return(yield a(this.getProjectStats())).data})}getProject(e){return this.http.get(`${this.apiUrl}/${e}?populate=selected_services,business_id,client_id,business_owner_id`)}getProjectAsync(e){return n(this,null,function*(){return(yield a(this.getProject(e))).data})}updateProject(e,t){return this.http.patch(`${this.apiUrl}/${e}`,t)}updateProjectAsync(e,t){return n(this,null,function*(){return(yield a(this.updateProject(e,t))).data})}toggleArchiveProject(e){return this.http.patch(`${this.apiUrl}/${e}/toggle-archive`,{})}toggleArchiveProjectAsync(e){return n(this,null,function*(){return(yield a(this.toggleArchiveProject(e))).data})}deleteProject(e){return this.http.delete(`${this.apiUrl}/${e}`)}deleteProjectAsync(e){return n(this,null,function*(){yield a(this.deleteProject(e))})}bulkUpdateProjects(e,t){return this.http.patch(`${this.apiUrl}/bulk-update`,{projectIds:e,updateData:t})}bulkUpdateProjectsAsync(e,t){return n(this,null,function*(){return(yield a(this.bulkUpdateProjects(e,t))).data})}exportProjects(e={}){let t=new c;return Object.entries(e).forEach(([s,r])=>{r!=null&&r!==""&&(t=t.set(s,r.toString()))}),this.http.get(`${this.apiUrl}/export`,{params:t,responseType:"blob"})}exportProjectsAsync(){return n(this,arguments,function*(e={}){return yield a(this.exportProjects(e))})}getProjectActivity(e){return this.http.get(`${this.apiUrl}/${e}/activity`)}getProjectActivityAsync(e){return n(this,null,function*(){return(yield a(this.getProjectActivity(e))).data.activity||[]})}getStatusColor(e){return{pending:"text-yellow-600 bg-yellow-100 border-yellow-200",accepted:"text-blue-600 bg-blue-100 border-blue-200",rejected:"text-red-600 bg-red-100 border-red-200",in_progress:"text-purple-600 bg-purple-100 border-purple-200",awaiting_client_approval:"text-orange-600 bg-orange-100 border-orange-200",completed:"text-green-600 bg-green-100 border-green-200",cancelled:"text-gray-600 bg-gray-100 border-gray-200",settled:"text-emerald-600 bg-emerald-100 border-emerald-200"}[e]||"text-gray-600 bg-gray-100 border-gray-200"}getStatusLabel(e){return{pending:"Pending",accepted:"Accepted",rejected:"Rejected",in_progress:"In Progress",awaiting_client_approval:"Awaiting Approval",completed:"Completed",cancelled:"Cancelled",settled:"Settled"}[e]||e.replace("_"," ").replace(/\b\w/g,s=>s.toUpperCase())}formatCurrency(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}formatDate(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}calculateCompletionRate(e){let t=e.completed+e.settled,s=e.total-e.pending;return s>0?Math.round(t/s*100):0}getProjectPriorityColor(e){if(!e.deadline)return"";let t=new Date(e.deadline),s=new Date,r=Math.ceil((t.getTime()-s.getTime())/(1e3*60*60*24));return r<0?"border-l-4 border-red-500":r<=3?"border-l-4 border-orange-500":r<=7?"border-l-4 border-yellow-500":""}static \u0275fac=function(t){return new(t||o)};static \u0275prov=d({token:o,factory:o.\u0275fac,providedIn:"root"})};export{u as a};
