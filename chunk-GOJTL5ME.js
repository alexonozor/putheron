import{b as l}from"./chunk-YCEFGLUP.js";import{$b as p,O as u,S as g,l as i}from"./chunk-OUYPDPRE.js";import{d as t}from"./chunk-QEZ3K4DX.js";var d=class c{http=g(p);config=g(l);apiUrl=`${this.config.apiBaseUrl}/businesses`;getCategories(){return this.http.get(`${this.config.apiBaseUrl}/categories`)}getCategoriesAsync(){return t(this,null,function*(){try{return(yield i(this.getCategories())).data||[]}catch(s){throw console.error("Error fetching categories:",s),s}})}getSubcategories(s){return this.http.get(`${this.config.apiBaseUrl}/subcategories/category/${s}`)}getSubcategoriesAsync(s){return t(this,null,function*(){try{return(yield i(this.getSubcategories(s))).data||[]}catch(e){throw console.error("Error fetching subcategories:",e),e}})}getMyBusinesses(){return this.http.get(`${this.apiUrl}/my-businesses`)}getMyBusinessesAsync(){return t(this,null,function*(){try{return(yield i(this.getMyBusinesses())).data?.businesses||[]}catch(s){throw console.error("Error fetching my businesses:",s),s}})}getBusiness(s){return this.http.get(`${this.apiUrl}/${s}`)}getBusinessAsync(s){return t(this,null,function*(){try{return(yield i(this.getBusiness(s))).data||null}catch(e){throw console.error("Error fetching business:",e),e}})}createBusiness(s){return this.http.post(this.apiUrl,s)}createBusinessAsync(s){return t(this,null,function*(){try{let e=yield i(this.createBusiness(s));if(!e.success||!e.data)throw new Error(e.error||"Failed to create business");return e.data}catch(e){throw console.error("Error creating business:",e),e}})}updateBusiness(s,e){return this.http.patch(`${this.apiUrl}/${s}`,e)}updateBusinessAsync(s,e){return t(this,null,function*(){try{let r=yield i(this.updateBusiness(s,e));if(!r.success||!r.data)throw new Error(r.error||"Failed to update business");return r.data}catch(r){throw console.error("Error updating business:",r),r}})}deleteBusiness(s){return this.http.delete(`${this.apiUrl}/${s}`)}deleteBusinessAsync(s){return t(this,null,function*(){try{let e=yield i(this.deleteBusiness(s));if(!e.success)throw new Error(e.error||"Failed to delete business")}catch(e){throw console.error("Error deleting business:",e),e}})}getAllBusinesses(s=1,e=20,r,a){let n=`${this.apiUrl}?page=${s}&limit=${e}`;return r&&(n+=`&categoryId=${r}`),a&&(n+=`&subcategoryId=${a}`),this.http.get(n)}searchBusinesses(s,e,r=1,a=20,n={}){let o=new URLSearchParams({page:r.toString(),limit:a.toString()});return s?.trim()&&o.append("q",s.trim()),e&&e.length>0&&o.append("countries",e.join(",")),n.category&&o.append("category",n.category),n.subcategory&&o.append("subcategory",n.subcategory),n.city&&o.append("city",n.city),n.state&&o.append("state",n.state),n.featured!==void 0&&o.append("featured",n.featured.toString()),this.http.get(`${this.apiUrl}/search?${o.toString()}`)}getServices(s=1,e=10,r={}){let a=new URLSearchParams({page:s.toString(),limit:e.toString()});return Object.entries(r).forEach(([n,o])=>{o!=null&&a.append(n,o.toString())}),this.http.get(`${this.config.apiBaseUrl}/services?${a.toString()}`)}getServicesAsync(){return t(this,arguments,function*(s=1,e=10,r={}){try{return(yield i(this.getServices(s,e,r))).data||{services:[],total:0,page:1,totalPages:0}}catch(a){throw console.error("Error fetching services:",a),a}})}getBusinessServices(s,e=!1){let r=e?"?includeInactive=true":"";return this.http.get(`${this.config.apiBaseUrl}/services/business/${s}${r}`)}getBusinessServicesAsync(s,e=!1){return t(this,null,function*(){try{return(yield i(this.getBusinessServices(s,e))).data||[]}catch(r){throw console.error("Error fetching business services:",r),r}})}getService(s){return this.http.get(`${this.config.apiBaseUrl}/services/${s}`)}getServiceAsync(s){return t(this,null,function*(){try{return(yield i(this.getService(s))).data||null}catch(e){throw console.error("Error fetching service:",e),e}})}getServiceBySlug(s){return this.http.get(`${this.config.apiBaseUrl}/services/slug/${s}`)}getServiceBySlugAsync(s){return t(this,null,function*(){try{return(yield i(this.getServiceBySlug(s))).data||null}catch(e){throw console.error("Error fetching service by slug:",e),e}})}createService(s,e){return this.http.post(`${this.config.apiBaseUrl}/services/${s}`,e)}createServiceAsync(s,e){return t(this,null,function*(){try{let r=yield i(this.createService(s,e));if(!r.success||!r.data)throw new Error(r.message||"Failed to create service");return r.data}catch(r){throw console.error("Error creating service:",r),r}})}updateService(s,e){return this.http.patch(`${this.config.apiBaseUrl}/services/${s}`,e)}updateServiceAsync(s,e){return t(this,null,function*(){try{let r=yield i(this.updateService(s,e));if(!r.success||!r.data)throw new Error(r.message||"Failed to update service");return r.data}catch(r){throw console.error("Error updating service:",r),r}})}deleteService(s){return this.http.delete(`${this.config.apiBaseUrl}/services/${s}`)}deleteServiceAsync(s){return t(this,null,function*(){try{let e=yield i(this.deleteService(s));if(!e.success)throw new Error(e.message||"Failed to delete service")}catch(e){throw console.error("Error deleting service:",e),e}})}reorderServices(s,e){return this.http.put(`${this.config.apiBaseUrl}/services/reorder/${s}`,{serviceIds:e})}reorderServicesAsync(s,e){return t(this,null,function*(){try{let r=yield i(this.reorderServices(s,e));if(!r.success)throw new Error(r.message||"Failed to reorder services")}catch(r){throw console.error("Error reordering services:",r),r}})}uploadLogo(s,e){let r=new FormData;return r.append("logo",e),this.http.post(`${this.apiUrl}/${s}/upload-logo`,r)}uploadLogoAsync(s,e){return t(this,null,function*(){return(yield i(this.uploadLogo(s,e))).data})}uploadBanner(s,e){let r=new FormData;return r.append("banner",e),this.http.post(`${this.apiUrl}/${s}/upload-banner`,r)}uploadBannerAsync(s,e){return t(this,null,function*(){return(yield i(this.uploadBanner(s,e))).data})}uploadSosCertification(s,e){let r=new FormData;return r.append("sos_certification",e),this.http.post(`${this.apiUrl}/${s}/upload-sos-certification`,r)}uploadSosCertificationAsync(s,e){return t(this,null,function*(){return(yield i(this.uploadSosCertification(s,e))).data})}uploadMultipleSosCertifications(s,e){let r=new FormData;return e.forEach((a,n)=>{r.append("files",a)}),this.http.post(`${this.apiUrl}/${s}/upload-multiple-sos-certifications`,r)}uploadMultipleSosCertificationsAsync(s,e){return t(this,null,function*(){return(yield i(this.uploadMultipleSosCertifications(s,e))).data})}uploadServiceImages(s,e){let r=new FormData;return e.forEach(a=>{r.append("images",a)}),this.http.post(`${this.config.apiBaseUrl}/services/${s}/upload-images`,r)}uploadServiceImagesAsync(s,e){return t(this,null,function*(){return(yield i(this.uploadServiceImages(s,e))).data})}deleteServiceImage(s,e){return this.http.delete(`${this.config.apiBaseUrl}/services/${s}/delete-image`,{body:{imageUrl:e}})}deleteServiceImageAsync(s,e){return t(this,null,function*(){yield i(this.deleteServiceImage(s,e))})}adminVerifyBusiness(s){return this.http.patch(`${this.config.apiBaseUrl}/admin/businesses/${s}/verify`,{})}adminVerifyBusinessAsync(s){return t(this,null,function*(){let e=yield i(this.adminVerifyBusiness(s));if(!e.success||!e.data)throw new Error(e.error||"Failed to verify business");return e.data})}adminRejectBusiness(s,e){return this.http.patch(`${this.config.apiBaseUrl}/admin/businesses/${s}/reject`,{reason:e})}adminRejectBusinessAsync(s,e){return t(this,null,function*(){let r=yield i(this.adminRejectBusiness(s,e));if(!r.success||!r.data)throw new Error(r.error||"Failed to reject business");return r.data})}adminToggleFeatured(s,e){return this.http.patch(`${this.config.apiBaseUrl}/admin/businesses/${s}/toggle-featured`,{isFeatured:e})}adminToggleFeaturedAsync(s,e){return t(this,null,function*(){let r=yield i(this.adminToggleFeatured(s,e));if(!r.success||!r.data)throw new Error(r.error||"Failed to update featured status");return r.data})}adminDeleteBusiness(s){return this.http.delete(`${this.config.apiBaseUrl}/admin/businesses/${s}`)}adminDeleteBusinessAsync(s){return t(this,null,function*(){let e=yield i(this.adminDeleteBusiness(s));if(!e.success)throw new Error(e.error||"Failed to delete business")})}adminBulkVerifyBusinesses(s){return this.http.patch(`${this.config.apiBaseUrl}/admin/businesses/bulk-verify`,{businessIds:s})}adminBulkVerifyBusinessesAsync(s){return t(this,null,function*(){let e=yield i(this.adminBulkVerifyBusinesses(s));if(!e.success||!e.data)throw new Error(e.error||"Failed to bulk verify businesses");return e.data})}adminBulkToggleFeatured(s,e){return this.http.patch(`${this.config.apiBaseUrl}/admin/businesses/bulk-toggle-featured`,{businessIds:s,isFeatured:e})}adminBulkToggleFeaturedAsync(s,e){return t(this,null,function*(){let r=yield i(this.adminBulkToggleFeatured(s,e));if(!r.success||!r.data)throw new Error(r.error||"Failed to bulk update featured status");return r.data})}adminBulkDeleteBusinesses(s){return this.http.delete(`${this.config.apiBaseUrl}/admin/businesses/bulk-delete`,{body:{businessIds:s}})}adminBulkDeleteBusinessesAsync(s){return t(this,null,function*(){let e=yield i(this.adminBulkDeleteBusinesses(s));if(!e.success||!e.data)throw new Error(e.error||"Failed to bulk delete businesses");return e.data})}static \u0275fac=function(e){return new(e||c)};static \u0275prov=u({token:c,factory:c.\u0275fac,providedIn:"root"})};export{d as a};
