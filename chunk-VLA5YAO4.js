import{a as $}from"./chunk-KHUZYUCG.js";import{a as ee}from"./chunk-UAFHO54Y.js";import{h as O,j as Z,k as D,l as V,m as j,n as N}from"./chunk-P4WRWHWY.js";import{a as U,b as B}from"./chunk-IK6JUFTK.js";import{a as K,b as Q,c as X,d as Y}from"./chunk-SQ5Q2QHJ.js";import{a as J}from"./chunk-EWH2HRUY.js";import{c as I,d as T}from"./chunk-AT26KLTR.js";import{a as q}from"./chunk-NZJEVKY3.js";import{a as A,b as L}from"./chunk-QYFERLBL.js";import{d as y,e as z,f as W,h as E}from"./chunk-WBPYOJYK.js";import{t as M}from"./chunk-TZYYMUAL.js";import{Eb as p,Fb as v,Kb as G,Lb as e,Mb as t,Nb as C,Pc as w,Qc as H,Ub as _,Yb as l,_a as m,_b as c,db as x,fa as S,jb as P,ka as d,la as u,mc as i,nc as f,oc as R,pb as b,ua as k,xc as F}from"./chunk-4R5BQBA3.js";import{e as h}from"./chunk-JKOY2XUY.js";var te=class s{constructor(o){this.router=o}closeSidenav=new x;navigateAndClose(o){this.router.navigate([o]),this.closeSidenav.emit()}static \u0275fac=function(a){return new(a||s)(P(y))};static \u0275cmp=b({type:s,selectors:[["app-guest-sidenav"]],outputs:{closeSidenav:"closeSidenav"},decls:31,vars:0,consts:[[1,"guest-sidenav-content","bg-white","h-full","flex","flex-col"],[1,"p-6","border-b","border-gray-200","pr-16","flex-shrink-0"],["src","/assets/logos/logo-with-text.png","alt","VouchHer",1,"h-8","w-auto"],[1,"flex-1","overflow-y-auto"],[3,"click"],["matListItemIcon",""],["matListItemTitle",""],[1,"my-4"],[1,"px-4","pb-4","space-y-3","flex-shrink-0","mt-4"],["mat-flat-button","","color","primary",1,"w-full",3,"click"],["mat-stroked-button","","color","primary",1,"w-full",3,"click"]],template:function(a,n){a&1&&(e(0,"div",0)(1,"div",1),C(2,"img",2),t(),e(3,"nav",3)(4,"mat-nav-list")(5,"mat-list-item",4),l("click",function(){return n.navigateAndClose("/")}),e(6,"mat-icon",5),i(7,"home_outline"),t(),e(8,"span",6),i(9,"Home"),t()(),e(10,"mat-list-item",4),l("click",function(){return n.navigateAndClose("/search")}),e(11,"mat-icon",5),i(12,"search_outline"),t(),e(13,"span",6),i(14,"Find Businesses"),t()(),e(15,"mat-list-item",4),l("click",function(){return n.navigateAndClose("/how-it-works")}),e(16,"mat-icon",5),i(17,"info_outline"),t(),e(18,"span",6),i(19,"How It Works"),t()(),e(20,"mat-list-item",4),l("click",function(){return n.navigateAndClose("/about")}),e(21,"mat-icon",5),i(22,"business_outline"),t(),e(23,"span",6),i(24,"About Us"),t()()(),C(25,"mat-divider",7),e(26,"div",8)(27,"button",9),l("click",function(){return n.navigateAndClose("/auth")}),i(28," Sign In "),t(),e(29,"button",10),l("click",function(){return n.navigateAndClose("/auth")}),i(30," Get Started "),t()()()())},dependencies:[M,E,L,A,T,I,N,j,V,D,U,O,B],styles:[".guest-sidenav-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;overflow-y:scroll}  .mat-mdc-list-item{cursor:pointer}  .mat-mdc-list-item:hover{background-color:#0000000a}  .mat-mdc-list-item-icon{color:#0000008a}"]})};var ce=()=>({exact:!0});function de(s,o){s&1&&(e(0,"mat-chip")(1,"mat-icon",29),i(2,"business"),t(),i(3," Business Owner "),t())}function ue(s,o){s&1&&(e(0,"mat-chip")(1,"mat-icon",29),i(2,"person"),t(),i(3," Client "),t())}function pe(s,o){if(s&1){let a=_();e(0,"mat-list-item",30),l("click",function(){d(a);let r=c();return u(r.navigateAndClose("/dashboard/overview"))}),e(1,"mat-icon",14),i(2,"dashboard"),t(),e(3,"span",15),i(4,"Overview"),t()()}s&2&&G("routerLinkActiveOptions",F(1,ce))}function ve(s,o){if(s&1){let a=_();e(0,"mat-list-item",31),l("click",function(){d(a);let r=c();return u(r.navigateAndClose("/dashboard/businesses"))}),e(1,"mat-icon",14),i(2,"store"),t(),e(3,"span",15),i(4,"Businesses"),t(),e(5,"span",16),i(6),t()()}if(s&2){let a=c();m(6),f(a.userBusinessCount())}}function _e(s,o){if(s&1){let a=_();e(0,"mat-list-item",32),l("click",function(){d(a);let r=c();return u(r.navigateAndClose("/dashboard/services"))}),e(1,"mat-icon",14),i(2,"miscellaneous_services"),t(),e(3,"span",15),i(4,"Services"),t(),e(5,"span",16),i(6),t()()}if(s&2){let a=c();m(6),f(a.totalServices())}}function fe(s,o){if(s&1){let a=_();e(0,"mat-list-item",33),l("click",function(){d(a);let r=c();return u(r.navigateAndClose("/dashboard/earnings"))}),e(1,"mat-icon",14),i(2,"payments"),t(),e(3,"span",15),i(4,"Earnings & Payments"),t()()}}function Se(s,o){if(s&1){let a=_();e(0,"button",34),l("click",function(){d(a);let r=c();return u(r.switchToBusinessMode())}),e(1,"mat-icon",28),i(2,"business"),t(),i(3," Switch to Business Owner "),t()}}function he(s,o){if(s&1){let a=_();e(0,"button",35),l("click",function(){d(a);let r=c();return u(r.switchToClientMode())}),e(1,"mat-icon",28),i(2,"person_outline"),t(),i(3," Switch to Client Mode "),t()}}var ie=class s{authService=S(q);router=S(y);businessService=S(J);projectService=S($);favoritesService=S(ee);closeSidenav=new x;user=this.authService.user;userBusinessCount=k(0);totalServices=k(0);totalProjects=k(0);favoritesCount=w(()=>this.favoritesService.getFavoritesCount());userMode=w(()=>this.user()?.user_mode||"client");isBusinessOwner=w(()=>this.userMode()==="business_owner");constructor(){H(()=>{this.user()&&this.loadDashboardCounts()})}loadDashboardCounts(){return h(this,null,function*(){try{let[o,a]=yield Promise.all([this.businessService.getMyBusinessesAsync(),this.projectService.getMyProjectsAsync()]);this.userBusinessCount.set(o.length),this.totalProjects.set(a.length);let n=o.reduce((r,g)=>r+(g.services?.length||0),0);this.totalServices.set(n)}catch(o){console.error("Error loading dashboard counts:",o)}})}getUserInitials(){let o=this.user();if(!o)return"";let a=o.first_name||"",n=o.last_name||"";return a&&n?a.charAt(0).toUpperCase()+n.charAt(0).toUpperCase():a?a.charAt(0).toUpperCase()+(o.email.charAt(0).toUpperCase()||""):n?o.email.charAt(0).toUpperCase()+n.charAt(0).toUpperCase():o.email.charAt(0).toUpperCase()}navigateAndClose(o){this.router.navigate([o]),this.closeSidenav.emit()}switchToBusinessMode(){return h(this,null,function*(){try{(yield this.authService.switchMode("business_owner")).data&&(yield this.loadDashboardCounts(),this.closeSidenav.emit())}catch(o){console.error("Error switching to business mode:",o)}})}switchToClientMode(){return h(this,null,function*(){try{(yield this.authService.switchMode("client")).data&&this.navigateAndClose("/search")}catch(o){console.error("Error switching to client mode:",o)}})}logout(){return h(this,null,function*(){yield this.authService.signOut(),this.closeSidenav.emit()})}static \u0275fac=function(a){return new(a||s)};static \u0275cmp=b({type:s,selectors:[["app-user-sidenav"]],outputs:{closeSidenav:"closeSidenav"},decls:57,vars:11,consts:[[1,"sidebar-content","bg-white","h-full","flex","flex-col"],[1,"p-4","border-b","border-gray-200","flex-shrink-0"],[1,"flex","items-center","space-x-3","pr-12"],[1,"w-10","h-10","bg-blue-500","rounded-full","flex","items-center","justify-center","text-white","font-semibold"],[1,"flex-1"],[1,"font-semibold","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"flex","items-center","mt-1"],[1,"bg-white","flex-1","overflow-y-auto"],[1,"px-4!"],["routerLink","/dashboard/overview","routerLinkActive","active-link",3,"routerLinkActiveOptions"],["routerLink","/dashboard/businesses","routerLinkActive","active-link"],["routerLink","/dashboard/services","routerLinkActive","active-link"],["routerLink","/dashboard/projects","routerLinkActive","active-link",3,"click"],["matListItemIcon",""],["matListItemTitle",""],["matListItemMeta","",1,"badge"],["routerLink","/dashboard/favorites","routerLinkActive","active-link",3,"click"],["routerLink","/dashboard/earnings","routerLinkActive","active-link"],["routerLink","/dashboard/notifications","routerLinkActive","active-link",3,"click"],["routerLink","/dashboard/messages","routerLinkActive","active-link",3,"click"],[1,"my-4"],[1,"space-y-3","mb-6","p-4"],[1,"text-xs","font-semibold","text-gray-500","uppercase","tracking-wider"],["mat-flat-button","","color","primary",1,"w-full"],["mat-stroked-button","",1,"w-full"],[1,"p-4","border-t","border-gray-200","bg-white","flex-shrink-0"],["mat-button","",1,"w-full","text-red-600","hover:bg-red-50",3,"click"],[1,"mr-2"],["matChipAvatar",""],["routerLink","/dashboard/overview","routerLinkActive","active-link",3,"click","routerLinkActiveOptions"],["routerLink","/dashboard/businesses","routerLinkActive","active-link",3,"click"],["routerLink","/dashboard/services","routerLinkActive","active-link",3,"click"],["routerLink","/dashboard/earnings","routerLinkActive","active-link",3,"click"],["mat-flat-button","","color","primary",1,"w-full",3,"click"],["mat-stroked-button","",1,"w-full",3,"click"]],template:function(a,n){if(a&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),i(4),t(),e(5,"div",4)(6,"h3",5),i(7),t(),e(8,"p",6),i(9),t(),e(10,"div",7)(11,"mat-chip-set"),p(12,de,4,0,"mat-chip")(13,ue,4,0,"mat-chip"),t()()()()(),e(14,"nav",8)(15,"mat-nav-list",9),p(16,pe,5,2,"mat-list-item",10),p(17,ve,7,1,"mat-list-item",11),p(18,_e,7,1,"mat-list-item",12),e(19,"mat-list-item",13),l("click",function(){return n.navigateAndClose("/dashboard/projects")}),e(20,"mat-icon",14),i(21,"work_outline"),t(),e(22,"span",15),i(23,"Projects"),t(),e(24,"span",16),i(25),t()(),e(26,"mat-list-item",17),l("click",function(){return n.navigateAndClose("/dashboard/favorites")}),e(27,"mat-icon",14),i(28,"favorite_outline"),t(),e(29,"span",15),i(30,"My Favorites"),t(),e(31,"span",16),i(32),t()(),p(33,fe,5,0,"mat-list-item",18),e(34,"mat-list-item",19),l("click",function(){return n.navigateAndClose("/dashboard/notifications")}),e(35,"mat-icon",14),i(36,"notifications_none"),t(),e(37,"span",15),i(38,"Notifications"),t()(),e(39,"mat-list-item",20),l("click",function(){return n.navigateAndClose("/dashboard/messages")}),e(40,"mat-icon",14),i(41,"mail_outline"),t(),e(42,"span",15),i(43,"Messages"),t(),e(44,"span",16),i(45,"0"),t()()(),C(46,"mat-divider",21),e(47,"div",22)(48,"p",23),i(49,"Account Mode"),t(),p(50,Se,4,0,"button",24)(51,he,4,0,"button",25),t()(),e(52,"div",26)(53,"button",27),l("click",function(){return n.logout()}),e(54,"mat-icon",28),i(55,"logout"),t(),i(56," Sign Out "),t()()()),a&2){let r,g;m(4),R(" ",n.getUserInitials()," "),m(3),f((((r=n.user())==null?null:r.first_name)+" "+(((r=n.user())==null?null:r.last_name)||"")).trim()||((r=n.user())==null?null:r.email)),m(2),f((g=n.user())==null?null:g.email),m(3),v(n.isBusinessOwner()?12:13),m(4),v(n.isBusinessOwner()?16:-1),m(),v(n.isBusinessOwner()?17:-1),m(),v(n.isBusinessOwner()?18:-1),m(7),f(n.totalProjects()),m(7),f(n.favoritesCount()),m(),v(n.isBusinessOwner()?33:-1),m(17),v(n.isBusinessOwner()?51:50)}},dependencies:[M,E,z,W,L,A,T,I,N,j,V,D,U,O,Z,B,Y,Q,K,X],styles:[".sidebar-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}  .mat-mdc-list-item.active-link{background-color:#00000014!important}  .mat-mdc-list-item.active-link .mat-mdc-list-item-icon{color:var(--mdc-theme-primary)!important}  .mat-mdc-list-item.active-link .mdc-list-item__primary-text{color:var(--mdc-theme-primary)!important;font-weight:500!important}.badge[_ngcontent-%COMP%]{background-color:#e0e0e0;color:#616161;padding:2px 8px;border-radius:12px;font-size:11px;font-weight:500}"]})};export{te as a,ie as b};
